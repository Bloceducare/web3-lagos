(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2137],{48741:(e,n,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/user-settings/billing",function(){return l(30040)}])},69831:(e,n,l)=>{"use strict";l.d(n,{OM:()=>m,qL:()=>y});var a=l(52105),t=l(5862),i=l(18273),s=l(7094);let r=(0,t._)({get:{data:s.z.array(i.VD),params:s.z.object({id:s.z.string()})},post:{body:s.z.object({actionArgs:s.z.record(s.z.string(),s.z.unknown()),tool:s.z.string().nullish(),enabled:s.z.boolean(),name:s.z.string(),isOnboarding:s.z.boolean().optional(),authId:s.z.string().nullish()}),data:s.z.void(),params:s.z.object({id:s.z.string()})},put:{body:s.z.array(s.z.object({actionArgs:s.z.record(s.z.string(),s.z.unknown()),tool:s.z.string().nullish(),name:s.z.string(),enabled:s.z.boolean(),authId:s.z.string().nullish()})),data:s.z.void(),params:s.z.object({id:s.z.string()})}});var o=l(98354),d=l(94344),u=l(94559),c=l(79879);let g=(0,a.In)("GET","/api/society/agentDefinition/:id/triggers",r.get.data);function m(e){return["society/agentDefinition/[id]/triggers","get",e.params.id]}function y(e){let n=(0,d.useMemo)(()=>["society/agentDefinition/[id]/triggers","get",e.params.id],[e.params.id]),l=(0,u.lB)(()=>null==e?void 0:e.options,[null==e?void 0:e.options]),a=(0,o.I)({queryKey:n,queryFn:async()=>{let{data:n,error:l}=await g(e);if(l)throw l;return n},...null==e?void 0:e.options}),t=(0,u.lB)(()=>a,[a]);return(0,c.R)(n,t,l)}},48422:(e,n,l)=>{"use strict";l.d(n,{Z:()=>s});var a=l(50612),t=l(82484),i=l(25919);function s(e,n){let l=e.split(RegExp("(".concat((0,t.A)(n),")"),"gi"));return(0,a.jsx)("span",{children:l.map((e,l)=>(0,a.jsx)("span",{className:(0,i.QP)(e.toLowerCase()===n.toLowerCase()&&"bg-warning-9"),children:e},l))})}},19632:(e,n,l)=>{"use strict";l.d(n,{o:()=>o});var a=l(50612),t=l(76804),i=l(25919),s=l(3764),r=l(76916);function o(e){return(0,a.jsx)("div",{className:(0,i.QP)("w-full",e.className),children:(0,s.YW)(e.query).with({isLoading:!0},()=>(0,a.jsx)("div",{className:"flex w-full items-center justify-center p-4",children:(0,a.jsx)(t.y,{})})).with({isError:!0},n=>{let{error:l}=n;return(0,a.jsx)(r.$,{error:l,errorMessage:e.errorMessage})}).with({isSuccess:!0},n=>{let{data:l}=n;return(0,a.jsx)(a.Fragment,{children:"function"==typeof e.children?e.children(l):e.children})}).exhaustive()})}},79305:(e,n,l)=>{"use strict";l.d(n,{V:()=>r});var a=l(50612);l(20335);var t=l(94344),i=l(25919),s=l(33762);let r=(0,t.forwardRef)(function(e,n){let{value:l,onChange:r,placeholder:o,minWidth:d=100,maxWidth:u=500,className:c,...g}=e,m=(0,t.useRef)(null),[y,p]=(0,t.useState)(d);(0,s.Es)(()=>{m.current&&p(Math.max(d,Math.min(m.current.offsetWidth,u)+2))},[l]);let f=(0,t.useCallback)(e=>{r(e.target.value)},[r]),h=(0,t.useMemo)(()=>({width:Math.max(d,y)}),[y,d]);return(0,a.jsxs)("div",{className:"relative inline-block",children:[(0,a.jsx)("input",{...g,ref:n,type:"text",value:l,onChange:f,placeholder:o,className:c,style:h}),(0,a.jsx)("div",{ref:m,className:(0,i.QP)(c,"invisible absolute left-0 top-0 whitespace-pre"),children:l||o})]})})},23653:(e,n,l)=>{"use strict";l.d(n,{A:()=>o});var a=l(50612),t=l(72260),i=l(90996),s=l(94344),r=l(25919);let o=(0,s.memo)(function(e){let{children:n,trigger:l,position:o,className:d,style:u,alwaysShow:c,onOpen:g,beforeEnter:m,afterLeave:y,buttonWrapperClassName:p}=e,f=(0,s.useCallback)(e=>()=>{e||null==g||g()},[g]);return(0,a.jsx)("div",{className:"",children:(0,a.jsx)(t.AM,{className:"relative",children:e=>{let{open:g}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.AM.Button,{as:"div",onClick:f(g),className:p,children:"function"==typeof l?l(g):l}),(0,a.jsx)(i.e,{as:s.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",beforeEnter:m,afterLeave:y,...c?{show:!0}:{},children:(0,a.jsx)(t.AM.Panel,{className:(0,r.QP)("absolute z-10 bg-white dark:bg-slate-3 shadow-lg rounded-lg ring-1 ring-slate-12 ring-opacity-5 focus:outline-none p-2 mt-2","bottom-left"===o&&"top-full right-0 origin-top-right mt-2","bottom-right"===o&&"top-full left-0 origin-top-left mt-2","bottom-fit"===o&&"top-full left-0 right-0 origin-top mt-2","top-left"===o&&"bottom-full right-0 origin-bottom-right mb-2","top-right"===o&&"bottom-full left-0 origin-bottom-left mb-2","top-fit"===o&&"bottom-full left-0 right-0 origin-bottom mb-2","left-bottom"===o&&"right-full top-0 origin-top-right mr-1","right-bottom"===o&&"left-full top-0 origin-top-left ml-1","left-top"===o&&"right-full bottom-0 origin-bottom-right mr-1","right-top"===o&&"left-full bottom-0 origin-bottom-left ml-1","top-fit"===o||"bottom-fit"===o?"w-full":"w-56",d),style:u,children:"function"==typeof n?n(g):n})})]})}})})})},32588:(e,n,l)=>{"use strict";l.d(n,{r:()=>i});var a=l(81778),t=l(33762);function i(e){let n=(0,a.useRouter)();return(0,t.Es)(()=>{n.push(e.to,void 0,{shallow:!0})},[e.to]),null}},61241:(e,n,l)=>{"use strict";l.d(n,{sL:()=>f});var a=l(50612);let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"WithDebuggerPanel_Identity",selections:[{args:null,kind:"FragmentSpread",name:"InConversationDebugger_Identity"}],type:"Identity",abstractKey:null};t.hash="80ebf14cb77ce5c5fa93112f6ec1e376";let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"WithDebuggerPanel_AgentDefinition",selections:[{args:null,kind:"FragmentSpread",name:"InConversationDebugger_AgentDefinition"}],type:"AgentDefinition",abstractKey:null};i.hash="4f6015d7aaddecf27c6ac276d16fe728";var s=l(84075),r=l(35686),o=l(31284),d=l(8678),u=l(27966),c=l.n(u),g=l(79124),m=l(48790);let y=c()(()=>Promise.all([l.e(7795),l.e(276),l.e(5845),l.e(5518),l.e(3174),l.e(3762),l.e(7961),l.e(3148),l.e(8564),l.e(6903),l.e(4659),l.e(5728),l.e(5832)]).then(l.bind(l,35832)).then(e=>e.InConversationDebugger),{loadableGenerated:{webpack:()=>[35832]},ssr:!1,loading:e=>{let{error:n}=e;return n&&console.error("Error loading InConversationDebugger",n),null}});function p(e){return(0,s.P)()?(0,a.jsx)(y,{identityFragmentRef:e.identity,agentDefinitionFragmentRef:e.agentDefinition}):null}let f=(0,d.PA)(function(e){let n=(0,g.useFragment)(t,e.identityFragmentRef),l=(0,g.useFragment)(i,e.agentDefinitionFragmentRef),s=(0,r.C)(e=>e.debuggerOptions.position),d=o.a.ui.isDebugPanelOpen;return(0,a.jsxs)(m.YZ,{autoSaveId:"lindy-console",direction:"right"===s?"horizontal":"vertical",children:[(0,a.jsx)(m.Zk,{className:"relative",children:e.children}),d&&(0,a.jsx)(p,{identity:n,agentDefinition:l})]})})},5021:(e,n,l)=>{"use strict";l.d(n,{o:()=>y});var a=l(50612),t=l(95158),i=l(12270),s=l(47406),r=l(73850),o=l(13813),d=l(46772),u=l(67373),c=l(85518),g=l(8678),m=l(94344);let y=(0,g.PA)(function(e){let{open:n,onClose:l,title:t,description:o}=e,{upgrade:g}=(0,d.b)(),y=(0,i.u2)(),f=(0,s.F)(y.at(0)),h=(0,m.useMemo)(()=>{let e=y.at(0);return new c.z(e).div(100).minus(.01).toFixed(2)},[y]),k=(0,m.useCallback)(e=>{e.preventDefault(),l(),null==g||g()},[l,g]);return(0,a.jsx)(r.aF,{open:n,setClosed:l,className:"rounded-lg sm:max-w-fit",children:(0,a.jsxs)("form",{onSubmit:k,className:"flex w-[492px] flex-col gap-6",children:[(0,a.jsx)("div",{className:"text-sm font-medium leading-5 text-slate-12",children:t}),!!o&&(0,a.jsx)("div",{className:"text-sm font-normal leading-5 text-slate-11",children:o}),(0,a.jsxs)("div",{className:"flex flex-row gap-3",children:[(0,a.jsxs)("div",{className:"size-[240px] gap-3 rounded-xl border-1 border-slate-4",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center justify-between border-b-1 border-b-slate-4 px-4 py-3 text-slate-9",children:[(0,a.jsx)("div",{className:"text-xl font-semibold leading-7",children:"Free"}),(0,a.jsx)("div",{className:"h-6 content-center rounded-[100px] bg-slate-4 px-2 text-xs font-medium leading-5",children:"Current plan"})]}),(0,a.jsx)(p,{features:s.S})]}),(0,a.jsxs)("div",{className:"size-[240px] gap-3 rounded-xl border-1 border-blue-8 shadow-sm shadow-blue-8/50",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center justify-between border-b-1 border-b-slate-4 px-4 py-3",children:[(0,a.jsx)("div",{className:"text-xl font-semibold text-slate-12",children:"Pro"}),(0,a.jsxs)("div",{className:"h-6 content-center rounded-[100px] bg-sky-3 px-2 text-xs font-medium leading-5 text-sky-11",children:["Starting from $",h,"/mo"]})]}),(0,a.jsx)(p,{features:f})]})]}),(0,a.jsxs)("div",{className:"ml-auto flex flex-row gap-3",children:[(0,a.jsx)(u.$,{className:"flex w-full rounded-md font-medium",onClick:l,level:"outline",children:"Cancel"}),(0,a.jsx)(u.$,{className:"flex w-full rounded-md font-medium",type:"submit",children:"Upgrade to Pro"})]})]})})});function p(e){let{features:n}=e;return(0,a.jsx)("div",{className:"mt-3 flex flex-col gap-3 pb-6 text-sm font-medium text-slate-12",children:n.map((e,n)=>(0,a.jsxs)("div",{className:"mx-2 flex flex-row items-start",children:[(0,a.jsx)(t.A,{className:"mr-1 mt-1 size-[16px] shrink-0 fill-slate-12"}),e.description,(0,a.jsx)(o.I,{triggerAsChild:!0,children:e.tooltip})]},n))})}},68457:(e,n,l)=>{"use strict";l.d(n,{w:()=>eN});var a=l(50612),t=l(35682),i=l(23653),s=l(86383),r=l(73850),o=l(67373),d=l(94344);let u=e=>{let{toggle:n,hide:l}=e,t=(0,d.useCallback)(()=>{n()},[n]);return(0,a.jsxs)(r.aF,{open:!l,setClosed:t,children:[(0,a.jsxs)("div",{className:"flex w-full items-center justify-between text-[16px] font-semibold",children:[(0,a.jsx)("div",{children:"Lindy in Review"}),(0,a.jsx)(s.A,{onClick:t,className:"h-5 w-5 cursor-pointer text-slate-11 hover:text-slate-12 active:text-slate-11"})]}),(0,a.jsx)("p",{className:"text-[14px] text-zinc-800",children:"This Lindy is in the review process. Someone from Lindy will contact you via email within 48 hours. You can still use this Lindy and share your Lindy link with others."}),(0,a.jsx)("div",{className:"self-end pt-6",children:(0,a.jsx)(o.$,{onClick:t,className:"w-fit px-6 text-zinc-600",level:"outline",children:"Close"})})]})};var c=l(52105),g=l(5862),m=l(7094);let y=(0,g._)({get:{data:m.z.string(),query:m.z.object({name:m.z.string(),description:m.z.string().optional(),instructions:m.z.string().optional(),tools:m.z.string().optional(),previousValues:m.z.string().optional(),temperature:m.z.string(),max:m.z.string()})}});var p=l(98354),f=l(94559),h=l(79879);let k=(0,c.In)("GET","/api/agentTemplateDefinition/suggestions/generateDescription",y.get.data),F=(0,g._)({get:{data:m.z.string(),query:m.z.object({name:m.z.string(),description:m.z.string().optional(),instructions:m.z.string().optional(),tools:m.z.string().optional(),previousValues:m.z.string().optional(),temperature:m.z.string(),max:m.z.string()})}}),x=(0,c.In)("GET","/api/agentTemplateDefinition/suggestions/generateSubtitle",F.get.data);var v=l(32159),b=l(85739),S=l(31634),T=l(70732),K=l(6762),I=l(84075),C=l(17914),A=l(77235),j=l(78511),N=l(31024),L=l(43383),_=l(39274);let w=d.memo(function(e){return(0,a.jsxs)("svg",{...e,width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M4.66659 9.33334C4.66659 9.6555 4.92775 9.91667 5.24992 9.91667C5.57208 9.91667 5.83325 9.6555 5.83325 9.33334C5.83325 7.98672 6.13123 7.15025 6.6407 6.64078C7.15017 6.13131 7.98664 5.83334 9.33325 5.83334C9.65542 5.83334 9.91659 5.57217 9.91659 5.25C9.91659 4.92784 9.65542 4.66667 9.33325 4.66667C7.98664 4.66667 7.15017 4.3687 6.6407 3.85923C6.13123 3.34975 5.83325 2.51329 5.83325 1.16667C5.83325 0.844503 5.57208 0.583336 5.24992 0.583336C4.92775 0.583336 4.66659 0.844503 4.66659 1.16667C4.66659 2.51329 4.36861 3.34975 3.85914 3.85923C3.34967 4.3687 2.5132 4.66667 1.16659 4.66667C0.84442 4.66667 0.583252 4.92784 0.583252 5.25C0.583252 5.57217 0.84442 5.83334 1.16659 5.83334C2.5132 5.83334 3.34967 6.13131 3.85914 6.64078C4.36861 7.15025 4.66659 7.98672 4.66659 9.33334Z",fill:"#8E4EC6"}),(0,a.jsx)("path",{d:"M9.62492 12.8333C9.62492 13.1555 9.88609 13.4167 10.2083 13.4167C10.5304 13.4167 10.7916 13.1555 10.7916 12.8333C10.7916 11.9931 10.9782 11.5212 11.2496 11.2497C11.5211 10.9782 11.993 10.7917 12.8333 10.7917C13.1554 10.7917 13.4166 10.5305 13.4166 10.2083C13.4166 9.88617 13.1554 9.625 12.8333 9.625C11.993 9.625 11.5211 9.43843 11.2496 9.16695C10.9782 8.89547 10.7916 8.42359 10.7916 7.58334C10.7916 7.26117 10.5304 7 10.2083 7C9.88609 7 9.62492 7.26117 9.62492 7.58334C9.62492 8.42359 9.43835 8.89547 9.16687 9.16695C8.89539 9.43843 8.4235 9.625 7.58325 9.625C7.26109 9.625 6.99992 9.88617 6.99992 10.2083C6.99992 10.5305 7.26109 10.7917 7.58325 10.7917C8.4235 10.7917 8.89539 10.9782 9.16687 11.2497C9.43835 11.5212 9.62492 11.9931 9.62492 12.8333Z",fill:"#8E4EC6"})]})});var R=l(20335),D=l(41285),P=l(76804),M=l(22778),E=l(95674),V=l(25919);let G=(0,d.memo)(function(e){var n,l,t,i,u,c,g,m,y,F,G,B,O,z,Q,q,U,W,H,$;let{agent:Z,agentTemplate:Y,isOpen:J,onCancel:X,onPublish:ee,isLoading:en}=e,[el,ea]=(0,d.useState)(null!==(g=null==Z?void 0:Z.name)&&void 0!==g?g:""),[et,ei]=(0,d.useState)(null!==(m=null==Y?void 0:Y.subTitle)&&void 0!==m?m:""),[es,er]=(0,d.useState)(null!==(y=null==Y?void 0:Y.description)&&void 0!==y?y:""),[eo,ed]=(0,d.useState)(null!==(F=null==Y?void 0:Y.category)&&void 0!==F?F:"none"),[eu,ec]=(0,d.useState)({name:null!==(G=null==Z?void 0:null===(n=Z.icon)||void 0===n?void 0:n.name)&&void 0!==G?G:E.H0.AgentIcon1,color:null!==(B=null==Z?void 0:null===(l=Z.icon)||void 0===l?void 0:l.color)&&void 0!==B?B:E.Pl.Sky}),[eg,em]=(0,d.useState)(!1),[ey,ep]=(0,d.useState)(!1),ef=function(e){let n=function(e){let n=(0,h.f)(e.query);return(0,d.useMemo)(()=>["agentTemplateDefinition/suggestions/generateSubtitle","get",n],[n])}(e),l=(0,f.lB)(()=>null==e?void 0:e.options,[null==e?void 0:e.options]),a=(0,p.I)({queryKey:n,queryFn:async()=>{let{data:n,error:l}=await x(e);if(l)throw l;return n},...null==e?void 0:e.options}),t=(0,f.lB)(()=>a,[a]);return(0,h.R)(n,t,l)}({query:{name:el,instructions:null!==(O=null==Z?void 0:Z.instructions)&&void 0!==O?O:"",description:null!==(z=null==Z?void 0:Z.description)&&void 0!==z?z:"",previousValues:es,tools:null!==(Q=null==Z?void 0:null===(i=Z.tools)||void 0===i?void 0:null===(t=i.map(e=>{let{tool:n}=e;return n}))||void 0===t?void 0:t.join(", "))&&void 0!==Q?Q:"",max:"120",temperature:"0.5"},options:{queryKey:["llmGeneratedSubTitle",null==Z?void 0:Z._id,null==Y?void 0:Y._id],enabled:!et&&J,initialData:et,onSuccess:e=>{ei(e)}}}),eh=function(e){let n=function(e){let n=(0,h.f)(e.query);return(0,d.useMemo)(()=>["agentTemplateDefinition/suggestions/generateDescription","get",n],[n])}(e),l=(0,f.lB)(()=>null==e?void 0:e.options,[null==e?void 0:e.options]),a=(0,p.I)({queryKey:n,queryFn:async()=>{let{data:n,error:l}=await k(e);if(l)throw l;return n},...null==e?void 0:e.options}),t=(0,f.lB)(()=>a,[a]);return(0,h.R)(n,t,l)}({query:{name:el,instructions:null!==(q=null==Z?void 0:Z.instructions)&&void 0!==q?q:"",description:null!==(U=null==Z?void 0:Z.description)&&void 0!==U?U:"",previousValues:es,tools:null!==(W=null==Z?void 0:null===(c=Z.tools)||void 0===c?void 0:null===(u=c.map(e=>{let{tool:n}=e;return n}))||void 0===u?void 0:u.join(", "))&&void 0!==W?W:"",max:"100",temperature:"0.8"},options:{queryKey:["llmGeneratedDescription",null==Z?void 0:Z._id,null==Y?void 0:Y._id],enabled:!es&&J,initialData:es,onSuccess:e=>{er(e)}}});(0,d.useEffect)(()=>{var e,n,l,a,t,i,s,r,o,d,u,c,g,m;ea(null!==(t=null==Z?void 0:Z.name)&&void 0!==t?t:""),ei(null!==(i=null==Y?void 0:Y.subTitle)&&void 0!==i?i:""),er(null!==(s=null==Y?void 0:Y.description)&&void 0!==s?s:""),ed(null!==(r=null==Y?void 0:Y.category)&&void 0!==r?r:"none"),ec({name:null!==(d=null!==(o=null==Z?void 0:null===(e=Z.icon)||void 0===e?void 0:e.name)&&void 0!==o?o:null==Y?void 0:null===(n=Y.icon)||void 0===n?void 0:n.name)&&void 0!==d?d:E.H0.AgentIcon1,color:null!==(c=null!==(u=null==Z?void 0:null===(l=Z.icon)||void 0===l?void 0:l.color)&&void 0!==u?u:null==Y?void 0:null===(a=Y.icon)||void 0===a?void 0:a.color)&&void 0!==c?c:E.Pl.Sky}),em(null!==(g=null==Y?void 0:Y.isOfficial)&&void 0!==g&&g),ep(null!==(m=null==Y?void 0:Y.hideFromCategoriesSearch)&&void 0!==m&&m)},[Z,Y]);let ek=(0,I.h)(),eF=(0,d.useCallback)(e=>{e.preventDefault(),ee({name:el,subTitle:et,description:es,category:Object.values(j.nu).find(e=>e===eo),isOfficial:eg,hideFromCategoriesSearch:ey,icon:{color:eu.color,name:eu.name},shareStatus:M.q1.Published})},[el,et,es,ee,eo,eg,ey,eu]),ex=(0,d.useCallback)(()=>{ef.refetch()},[ef]),ev=(0,d.useCallback)(()=>{eh.refetch()},[eh]),eb=(0,d.useMemo)(()=>{let e=Object.entries(j.nu).map(e=>{let[n,l]=e;return{value:l,label:n}});return e.push({value:"none",label:"None"}),e},[]),eS=(0,d.useMemo)(()=>({...Y,name:null!=el?el:"",icon:{color:eu.color,name:eu.name},subTitle:et,description:es,tools:null==Z?void 0:Z.tools}),[el,Y,eu,et,es,null==Z?void 0:Z.tools]);return Z?(0,a.jsx)(r.aF,{open:J,setClosed:X,children:(0,a.jsx)("form",{className:"flex select-none flex-col gap-y-6 overflow-auto",onSubmit:eF,children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(S.f,{between:!0,className:"w-full",children:[(0,a.jsx)("h2",{className:"font-semibold text-slate-12",children:"Publish Lindy"}),(0,a.jsx)(b.K,{onClick:X,tooltip:"Close",className:"mr-0 border-transparent hover:border-slate-6",tabIndex:-1,children:(0,a.jsx)(s.A,{className:"size-5 text-gray-11"})})]}),(0,a.jsx)("div",{className:"flex size-full flex-col justify-between space-y-6 overflow-y-auto pb-2",children:(0,a.jsxs)(N.V,{className:"w-full gap-y-6 px-0.5",children:[(0,a.jsx)(S.f,{className:"pointer-events-none w-full rounded-md border-1 border-slate-4 bg-slate-2 p-2",children:(0,a.jsx)(C.Q,{templateId:null!==(H=eS._id)&&void 0!==H?H:"",templateName:eS.name,templateSubTitle:eS.subTitle,templateIcon:eS.icon,className:"min-w-full"})}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(A.V,{label:"Name",subtitle:"Give your Lindy an icon and a name. This will help you identify it in the sidebar."}),(0,a.jsxs)(S.f,{className:"w-full",children:[(0,a.jsx)("div",{className:"h-full pr-2",children:(0,a.jsx)(L.Y,{onIconChange:ec,icon:eu.name,color:eu.color,children:(0,a.jsx)("div",{className:(0,V.QP)("flex h-11 w-11 cursor-pointer items-center justify-center rounded-md border border-slate-5 hover:border-slate-8","bg-gradient-to-br fill-white"),children:(0,a.jsx)(_.l,{iconName:eu.name,color:eu.color,className:"size-full"})})},"icon")}),(0,a.jsx)(R.pd,{type:"text",id:"publish-template-name",name:"publish-template-name",autoFocus:!0,required:!0,onChange:ea,value:el,"data-testid":"lindy.template.modal-publish.name"},"name")]})]}),ek&&eb&&(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(A.V,{label:"Category",subtitle:"Group Lindies by category"}),(0,a.jsx)(v.m,{options:eb,value:eo,onChange:ed})]}),ek&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(A.V,{label:"Official",subtitle:"Toggle only if this template should appear in the Official section of the Marketplace",optional:!0}),(0,a.jsx)(S.f,{className:"w-full",children:(0,a.jsx)(T.d,{checked:eg,onChange:em})})]}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(A.V,{label:"Hide from Categories Search",subtitle:"Toggle only if this template should be hidden from Categories Search",optional:!0}),(0,a.jsx)(S.f,{className:"w-full",children:(0,a.jsx)(T.d,{checked:ey,onChange:ep})})]})]}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(D.J,{htmlFor:"publish-template-subTitle",className:"mb-0",children:"Subtitle"}),(0,a.jsxs)(S.f,{between:!0,className:"w-full pb-1",children:[(0,a.jsx)("span",{className:"text-sm text-slate-9",children:"A short description of this Lindy"}),(0,a.jsxs)(S.f,{between:!0,center:!0,className:"mb-2 cursor-pointer rounded-xl bg-purple-3 px-2 py-1 text-xs font-semibold text-purple-9",onClick:ex,children:[ef.isFetching?(0,a.jsx)(P.y,{className:"stroke-purple-9",size:"sm"}):(0,a.jsx)(w,{}),(0,a.jsx)("span",{className:"text-xs",children:"Generate"})]})]}),(0,a.jsxs)("div",{className:"relative flex items-center",children:[(0,a.jsx)(R.pd,{type:"text",id:"publish-template-subTitle",name:"publish-template-subTitle",required:!0,disabled:ef.isFetching,onChange:ei,value:et,maxLength:120,"data-testid":"lindy.template.modal-publish.subtitle",className:"pr-24"},"subTitle"),(0,a.jsxs)("div",{className:"absolute right-4 text-slate-9",children:[null!==($=null==et?void 0:et.length)&&void 0!==$?$:0,"/120"]})]})]}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(D.J,{htmlFor:"publish-template-subTitle",className:"mb-0",children:"Description"}),(0,a.jsxs)(S.f,{between:!0,className:"w-full pb-1",children:[(0,a.jsx)("span",{className:"text-sm text-slate-9",children:"Write a description or generate one based on configuration"}),(0,a.jsxs)(S.f,{between:!0,center:!0,className:"mb-2 cursor-pointer rounded-xl bg-purple-3 px-2 py-1 text-xs font-semibold text-purple-9",onClick:ev,children:[eh.isFetching?(0,a.jsx)(P.y,{className:"stroke-purple-9",size:"sm"}):(0,a.jsx)(w,{}),(0,a.jsx)("span",{className:"text-xs",children:"Generate"})]})]}),(0,a.jsx)("div",{className:"relative flex items-center",children:(0,a.jsx)(K.f,{id:"publish-template-description",name:"publish-template-description",disabled:eh.isFetching,autoFocus:!0,required:!0,onChange:er,value:es,"data-testid":"lindy.template.modal-publish.description"},"description")})]})]})}),(0,a.jsxs)(S.f,{right:!0,children:[(0,a.jsx)(o.$,{size:"sm",onClick:X,level:"outline",children:"Cancel"}),(0,a.jsx)(o.$,{size:"sm",type:"submit",isLoading:en,"data-testid":"lindy.template.modal-publish.publish-to-market-place",children:"Publish to Lindy Store"})]})]})})}):null}),B=e=>{let{onConfirm:n,onCancel:l,isOpen:t}=e;return(0,a.jsxs)(r.aF,{open:t,setClosed:l,children:[(0,a.jsxs)("div",{className:"flex w-full items-center justify-between text-[16px] font-semibold",children:[(0,a.jsx)("div",{className:"text-slate-12",children:"Remove Lindy from Lindy Store"}),(0,a.jsx)(s.A,{onClick:l,className:"h-5 w-5 cursor-pointer text-slate-11 hover:text-slate-12 active:text-slate-11"})]}),(0,a.jsx)("p",{className:"text-[14px] text-slate-11",children:"Unpublishing this Lindy will remove it from the Lindy Store and prevent people from finding and using this Lindy."}),(0,a.jsxs)("div",{className:"self-end pt-6",children:[(0,a.jsx)(o.$,{onClick:l,className:"w-fit px-6 text-zinc-600",level:"outline",children:"Cancel"}),(0,a.jsx)(o.$,{onClick:n,className:"ml-2 w-fit px-6",level:"danger",children:"Continue"})]})]})};var O=l(25347),z=l(14306),Q=l(30589),q=l(90769);let U=(0,g._)({get:{data:q.My,params:m.z.object({id:m.z.string()})},post:{data:q.My,params:m.z.object({id:m.z.string()})},delete:{data:m.z.void(),params:m.z.object({id:m.z.string()})}}),W=(0,c.In)("DELETE","/api/society/agentDefinition/:id/publish",U.delete.data),H=(0,c.In)("POST","/api/society/agentDefinition/:id/publish",U.post.data);var $=l(69831),Z=l(10293),Y=l(85680),J=l(89073),X=l(77566),ee=l(9484),en=l(38928);let el=(0,g._)({get:{params:m.z.object({id:en.k.objectIdString()}),data:j.cA.nullish()}}),ea=(0,c.In)("GET","/api/agentTemplateDefinition/origin/:id",el.get.data),et=(0,g._)({get:{data:m.z.array(j.cA).nullish()},post:{body:m.z.object({agentDefinitionId:en.k.objectIdString(),name:m.z.string().nullish(),icon:q.e0.nullish(),category:m.z.nativeEnum(j.nu).optional(),isOfficial:m.z.boolean().default(!1),subTitle:m.z.string().optional(),description:m.z.string().nullish(),isDeleted:m.z.boolean(),shareStatus:m.z.string().nullish()}),data:j.cA.nullish()}}),ei=(0,c.In)("POST","/api/agentTemplateDefinition",et.post.data);var es=l(30035),er=l.n(es);function eo(e){return(0,a.jsxs)("span",{...e,children:[e.children,". If this issue persists please contact"," ",(0,a.jsx)(er(),{className:"underline",href:"mailto: support@lindy.ai",children:"support@lindy.ai"})]})}var ed=l(77576);function eu(e){let{className:n}=e;return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",className:n,children:[(0,a.jsx)("g",{clipPath:"url(#clip0_1321_7590)",children:(0,a.jsx)("path",{d:"M4.66671 7.33329C4.29852 7.33329 4.00004 7.63177 4.00004 7.99996C4.00004 8.36815 4.29852 8.66662 4.66671 8.66662V7.33329ZM11.3334 8.66662C11.7016 8.66662 12 8.36815 12 7.99996C12 7.63177 11.7016 7.33329 11.3334 7.33329V8.66662ZM14.6667 4.66663H15.3334C15.3334 4.29844 15.0349 3.99996 14.6667 3.99996V4.66663ZM14.6667 11.3333V12C15.0349 12 15.3334 11.7015 15.3334 11.3333H14.6667ZM10.6667 10.6666C10.2985 10.6666 10 10.9651 10 11.3333C10 11.7015 10.2985 12 10.6667 12V10.6666ZM10.6667 3.99996C10.2985 3.99996 10 4.29844 10 4.66663C10 5.03482 10.2985 5.33329 10.6667 5.33329V3.99996ZM1.33337 4.66663V3.99996C0.965184 3.99996 0.666708 4.29844 0.666708 4.66663H1.33337ZM1.33337 11.3333H0.666708C0.666708 11.7015 0.965184 12 1.33337 12L1.33337 11.3333ZM5.33337 12C5.70156 12 6.00004 11.7015 6.00004 11.3333C6.00004 10.9651 5.70156 10.6666 5.33337 10.6666V12ZM5.33337 5.33329C5.70156 5.33329 6.00004 5.03482 6.00004 4.66663C6.00004 4.29844 5.70156 3.99996 5.33337 3.99996V5.33329ZM4.66671 8.66662H11.3334V7.33329H4.66671V8.66662ZM14 4.66663V11.3333H15.3334V4.66663H14ZM14.6667 10.6666H10.6667V12H14.6667V10.6666ZM10.6667 5.33329H14.6667V3.99996H10.6667V5.33329ZM0.666708 4.66663V11.3333H2.00004V4.66663H0.666708ZM1.33337 12H5.33337V10.6666H1.33337V12ZM5.33337 3.99996H1.33337V5.33329H5.33337V3.99996Z",className:n})}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip0_1321_7590",children:(0,a.jsx)("rect",{width:"16",height:"16",fill:"white"})})})]})}var ec=function(e){return e.Pass="pass",e.Fail="fail",e.Pending="pending",e}({}),eg=l(67434),em=l(81778),ey=l(57459),ep=l(88036);function ef(e){let{className:n}=e;return(0,a.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:n,children:(0,a.jsx)("path",{d:"M12.5 21.25C17.6086 21.25 21.75 17.1086 21.75 12C21.75 6.89137 17.6086 2.75 12.5 2.75M12.5 21.25C7.39137 21.25 3.25 17.1086 3.25 12C3.25 6.89137 7.39137 2.75 12.5 2.75M12.5 21.25C10.1528 21.25 8.25 17.1086 8.25 12C8.25 6.89137 10.1528 2.75 12.5 2.75M12.5 21.25C14.8472 21.25 16.75 17.1086 16.75 12C16.75 6.89137 14.8472 2.75 12.5 2.75M21.5 12H3.5",stroke:"#889096",strokeWidth:"1.5",strokeLinecap:"square"})})}var eh=l(7565),ek=l.n(eh);function eF(e){let{className:n}=e;return(0,a.jsxs)("div",{className:(0,V.QP)("w-4 h-4",ek().animationContainer,n),children:[(0,a.jsx)("div",{className:ek().innerCircle}),(0,a.jsx)("div",{className:ek().ring})]})}function ex(e){let{published:n,isLoading:l,publish:t,unpublish:i,url:s}=e;return n?(0,a.jsxs)("div",{className:"flex w-full flex-col gap-2 overflow-auto p-4 text-slate-12",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eF,{className:"h-4 w-4"}),(0,a.jsx)("div",{className:"text-sm font-medium",children:"Live on the web."})]}),(0,a.jsxs)("div",{className:"flex w-full select-text items-center gap-1 overflow-hidden rounded-lg border border-slate-5 bg-slate-2 p-2 text-sm text-slate-11",children:[(0,a.jsx)("div",{className:"truncate",children:s}),(0,a.jsx)(ey.T,{className:"h-5 w-5 p-0",text:s})]}),(0,a.jsxs)("div",{className:"mb-2 px-2 text-sm text-slate-10",children:["Your Lindy is published as a website and can be embedded anywhere."," ",(0,a.jsx)(ep.N,{href:"https://help.lindy.ai/en/articles/9232860-lindy-embed",external:!0,children:"Learn more"})]}),(0,a.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[(0,a.jsx)(o.$,{className:"w-1/2",level:"outline",onClick:i,children:"Unpublish"}),(0,a.jsx)(ep.N,{className:"w-1/2",href:s,target:"_blank",children:(0,a.jsx)(o.$,{className:"w-full",level:"primary",children:"View Site"})})]})]}):(0,a.jsxs)("div",{className:"flex flex-col gap-2 p-3 text-slate-12",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,a.jsx)(ef,{className:"my-2 h-5 w-5"}),(0,a.jsx)("div",{className:"text-sm font-medium",children:"Publish to web"}),(0,a.jsx)("div",{className:"text-sm text-slate-10",children:"Turn this Lindy into a standalone website accessible by anyone, anywhere."})]}),(0,a.jsx)(o.$,{level:"primary",onClick:t,className:"mt-2",children:l?(0,a.jsx)(P.y,{size:"sm",className:"h-5 stroke-white"}):"Publish"})]})}var ev=l(72260),eb=l(90300),eS=l(39388),eT=l(18533);let eK=(0,d.memo)(function(e){let{className:n}=e;return(0,a.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:n,children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.6667 7.00001C13.6667 10.6819 10.6819 13.6667 7.00004 13.6667C3.31814 13.6667 0.333374 10.6819 0.333374 7.00001C0.333374 3.31811 3.31814 0.333344 7.00004 0.333344C10.6819 0.333344 13.6667 3.31811 13.6667 7.00001ZM8.58932 10.3334C8.84184 10.3334 9.07268 10.1907 9.1856 9.96483L9.40579 9.52447C9.55573 9.22458 9.45962 8.85999 9.18134 8.67299L7.85223 7.77985C7.75429 7.71404 7.64062 7.6754 7.52286 7.66788L6.70738 7.61584C6.51661 7.60366 6.32979 7.67397 6.19437 7.8089L6.05588 7.94689C5.83044 8.17151 5.7952 8.52415 5.97173 8.78894L6.80343 10.0365C6.92708 10.222 7.13523 10.3334 7.35813 10.3334H8.58932ZM4.69344 5.62017C4.50635 5.99155 4.02865 6.10289 3.69664 5.85251L2.6161 5.03764C2.36325 4.84695 2.27569 4.50209 2.44032 4.23154C3.37608 2.69371 5.06797 1.66668 6.99974 1.66668C7.21661 1.66668 7.43046 1.67962 7.64055 1.70478C8.00637 1.74858 8.2237 2.11527 8.13409 2.47264L7.76457 3.94628C7.70481 4.18459 7.51883 4.37072 7.28056 4.43065L5.29979 4.92895C5.11207 4.97617 4.95414 5.10266 4.86705 5.27554L4.69344 5.62017Z",fill:"currentColor"})})}),eI=(0,d.memo)(function(e){let{className:n}=e;return(0,a.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:n,children:(0,a.jsx)("path",{d:"M2.0809 10.0809L1.6095 10.5523L1.6095 10.5523L2.0809 10.0809ZM3.91914 11.9191L3.44774 12.3905L3.44774 12.3905L3.91914 11.9191ZM11.9191 3.91913L11.4477 4.39053L11.4477 4.39053L11.9191 3.91913ZM10.0809 2.08089L9.6095 2.55229L9.6095 2.55229L10.0809 2.08089ZM7.25248 2.08089L6.78107 1.60948L7.25248 2.08089ZM5.86195 2.5286C5.6016 2.78895 5.6016 3.21106 5.86195 3.47141C6.1223 3.73176 6.54441 3.73176 6.80476 3.47141L5.86195 2.5286ZM3.47143 6.80475C3.73178 6.5444 3.73178 6.12229 3.47143 5.86194C3.21108 5.60159 2.78897 5.60159 2.52862 5.86194L3.47143 6.80475ZM2.0809 7.25246L2.55231 7.72387L2.55231 7.72387L2.0809 7.25246ZM10.5286 7.19527C10.2683 7.45562 10.2683 7.87773 10.5286 8.13808C10.789 8.39843 11.2111 8.39843 11.4714 8.13808L10.5286 7.19527ZM11.9191 6.74756L11.4477 6.27615L11.4477 6.27615L11.9191 6.74756ZM6.74757 11.9191L6.27617 11.4477L6.27617 11.4477L6.74757 11.9191ZM8.13809 11.4714C8.39844 11.2111 8.39844 10.789 8.13809 10.5286C7.87775 10.2683 7.45564 10.2683 7.19529 10.5286L8.13809 11.4714ZM4.52862 8.5286C4.26827 8.78895 4.26827 9.21106 4.52862 9.47141C4.78897 9.73176 5.21108 9.73176 5.47143 9.47141L4.52862 8.5286ZM9.47143 5.47141C9.73178 5.21106 9.73178 4.78895 9.47143 4.5286C9.21108 4.26825 8.78897 4.26825 8.52862 4.5286L9.47143 5.47141ZM1.6095 10.5523L3.44774 12.3905L4.39055 11.4477L2.55231 9.60948L1.6095 10.5523ZM12.3905 3.44772L10.5523 1.60948L9.6095 2.55229L11.4477 4.39053L12.3905 3.44772ZM6.78107 1.60948L5.86195 2.5286L6.80476 3.47141L7.72388 2.55229L6.78107 1.60948ZM2.52862 5.86194L1.6095 6.78106L2.55231 7.72387L3.47143 6.80475L2.52862 5.86194ZM11.4714 8.13808L12.3905 7.21896L11.4477 6.27615L10.5286 7.19527L11.4714 8.13808ZM7.21898 12.3905L8.13809 11.4714L7.19529 10.5286L6.27617 11.4477L7.21898 12.3905ZM11.4477 4.39053C11.9684 4.91123 11.9684 5.75545 11.4477 6.27615L12.3905 7.21896C13.4319 6.17756 13.4319 4.48912 12.3905 3.44772L11.4477 4.39053ZM3.44774 12.3905C4.48914 13.4319 6.17758 13.4319 7.21898 12.3905L6.27617 11.4477C5.75547 11.9684 4.91125 11.9684 4.39055 11.4477L3.44774 12.3905ZM2.55231 9.60948C2.03161 9.08878 2.03161 8.24457 2.55231 7.72387L1.6095 6.78106C0.568101 7.82246 0.568101 9.51089 1.6095 10.5523L2.55231 9.60948ZM10.5523 1.60948C9.51091 0.568085 7.82247 0.568087 6.78107 1.60948L7.72388 2.55229C8.24458 2.03159 9.0888 2.03159 9.6095 2.55229L10.5523 1.60948ZM5.47143 9.47141L9.47143 5.47141L8.52862 4.5286L4.52862 8.5286L5.47143 9.47141Z",fill:"currentColor"})})}),eC=(0,d.memo)(function(e){let{className:n}=e;return(0,a.jsx)("svg",{width:"12",height:"14",viewBox:"0 0 12 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:n,children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.99996 0.333344C4.15901 0.333344 2.66663 1.82573 2.66663 3.66668V5.00001H1.99996C1.26358 5.00001 0.666626 5.59696 0.666626 6.33334V12.3333C0.666626 13.0697 1.26358 13.6667 1.99996 13.6667H9.99996C10.7363 13.6667 11.3333 13.0697 11.3333 12.3333V6.33334C11.3333 5.59696 10.7363 5.00001 9.99996 5.00001H9.33329V3.66668C9.33329 1.82573 7.84091 0.333344 5.99996 0.333344ZM7.99996 5.00001V3.66668C7.99996 2.56211 7.10453 1.66668 5.99996 1.66668C4.89539 1.66668 3.99996 2.56211 3.99996 3.66668V5.00001H7.99996ZM5.99996 7.66668C6.36815 7.66668 6.66663 7.96515 6.66663 8.33334V10.3333C6.66663 10.7015 6.36815 11 5.99996 11C5.63177 11 5.33329 10.7015 5.33329 10.3333V8.33334C5.33329 7.96515 5.63177 7.66668 5.99996 7.66668Z",fill:"currentColor"})})}),eA=(0,d.memo)(function(e){let{changeShareStatusToPrivate:n,changeShareStatusToLinkOnly:l,openPublishModal:t,togglePendingReviewModal:i,copyShareUrl:s,shareStatus:r,threatEvaluationStatus:o,hasNestedAgents:u,allowPublishToMarketplace:c}=e,g=(0,ed.U)(),m=(0,d.useMemo)(()=>{let e=[(0,a.jsx)("div",{className:"mb-2 px-2 text-sm text-slate-10",children:"Allow others to add a copy of this Lindy to their accounts for personal use or customization."},"description"),(0,a.jsxs)(ej,{itemKey:"share",onClick:n,active:!r||r===M.q1.Private,children:[(0,a.jsx)("div",{className:"flex h-5 w-5 items-center justify-center",children:(0,a.jsx)(eC,{className:"h-4 w-4 text-slate-9"})}),(0,a.jsx)("span",{className:"text-slate-12","data-testid":"lindy.template.share-only-me",children:"Only me"})]},"share"),(0,a.jsxs)(ej,{itemKey:"anyone",onClick:l,active:r===M.q1.LinkOnly,children:[(0,a.jsx)("div",{className:"flex h-5 w-5 items-center justify-center",children:(0,a.jsx)(eK,{className:"h-4 w-4 text-slate-9"})}),(0,a.jsx)("span",{className:"text-slate-12",children:"Anyone with link"})]},"anyone")];return o===ec.Pending?e.push((0,a.jsxs)(ej,{itemKey:"pending",onClick:i,active:!0,children:[(0,a.jsx)("div",{className:"flex h-5 w-5 items-center justify-center",children:(0,a.jsx)(eb.A,{className:"h-4 w-4 stroke-slate-9 stroke-[1.8px]"})}),(0,a.jsx)("span",{className:"text-slate-12",children:"Pending review"})]},"pending")):c&&r!==M.q1.Published?e.push((0,a.jsxs)(ej,{itemKey:"publish",onClick:t,children:[(0,a.jsx)("div",{className:"flex h-5 w-5 items-center justify-center",children:(0,a.jsx)(eT.D,{className:"h-4 w-4 text-slate-9"})}),(0,a.jsx)("span",{className:"text-slate-12","data-testid":"lindy.template.publish-to-market-place",children:"Publish to Lindy Store"})]},"publish")):r===M.q1.Published&&e.push((0,a.jsxs)(ej,{itemKey:"published",onClick:t,active:!0,children:[(0,a.jsx)("div",{className:"flex h-5 w-5 items-center justify-center",children:(0,a.jsx)(eT.D,{className:"h-4 w-4 text-slate-9"})}),(0,a.jsx)("span",{className:"text-slate-12",children:"Published"})]},"published")),(r===M.q1.LinkOnly||r===M.q1.Published)&&e.push((0,a.jsx)("div",{className:"mx-2 my-1 border-t border-slate-4"},"divider"),(0,a.jsxs)(ej,{itemKey:"copy-link",onClick:s,children:[(0,a.jsx)("div",{className:"flex h-5 w-5 items-center justify-center",children:(0,a.jsx)(eI,{className:"h-4 w-4 text-slate-10"})}),(0,a.jsx)("span",{className:"text-slate-12",children:"Copy link"})]},"copy-link")),e},[n,r,l,o,c,i,t,s]);return g.data?(0,a.jsx)("div",{className:"flex flex-col px-2 py-3",children:u?(0,a.jsx)("div",{className:"px-2 pb-1 text-sm text-slate-11",children:"Sharing Lindies with a team is not supported yet"}):m}):null});function ej(e){let{onClick:n,active:l,children:t,itemKey:i,className:s}=e;return(0,a.jsxs)(ev.AM.Button,{as:"div",className:(0,V.QP)("flex cursor-pointer items-center justify-between gap-2 rounded p-2 mx-1 px-1 text-sm hover:bg-slate-4",s),onClick:n,"data-menu-item-key":i,children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:t}),l&&(0,a.jsx)(eS.v,{})]})}function eN(e){let{menuPosition:n,buttonWrapperClassName:l}=e,[s,r]=(0,d.useState)("share"),g=(0,O.u)(z.T.PublishToWeb,{defaultEnabled:!0}),{published:m,publishToWebProps:y}=function(){var e,n,l,a,t,i,s;let r=(0,J.jE)(),o=(0,Z.f)(),u=(0,Q.qb)({params:{id:null!==(i=null===(e=o.data)||void 0===e?void 0:e._id)&&void 0!==i?i:""}}),g=(0,Y.aV)(),m=(0,d.useMemo)(()=>{var e,n;return new URL("/s/"+(null===(n=o.data)||void 0===n?void 0:null===(e=n.sharing)||void 0===e?void 0:e.slug),window.location.origin).toString()},[null===(l=o.data)||void 0===l?void 0:null===(n=l.sharing)||void 0===n?void 0:n.slug]),y=(0,X.n)({mutationFn:async()=>{let e=o.data;if(e)return(0,c.oA)(H({params:{id:e._id}}))},onSettled:()=>{var e,n;r.invalidateQueries((0,$.OM)({params:{id:null!==(n=null===(e=o.data)||void 0===e?void 0:e._id)&&void 0!==n?n:""}}))},onSuccess:e=>{r.setQueryData(u,n=>n&&e?{...n,sharing:{...n.sharing,public:!0,slug:e.slug}}:n),g({level:"success",label:"Published",message:"Your Lindy has been made public.",duration:3e3})},onError:()=>{r.invalidateQueries(u),g({level:"danger",label:"Error",message:"There was an error while making this Lindy public.",duration:3e3})}}),p=(0,X.n)({mutationFn:async()=>{let e=o.data;if(e)return(0,c.oA)(W({params:{id:e._id}}))},onSettled:()=>{var e,n;r.invalidateQueries((0,$.OM)({params:{id:null!==(n=null===(e=o.data)||void 0===e?void 0:e._id)&&void 0!==n?n:""}}))},onSuccess:()=>{r.setQueryData(u,e=>e?{...e,sharing:{...e.sharing,public:!1}}:e),g({level:"success",label:"Unpublished",message:"Your Lindy is no longer public.",duration:3e3})},onError:()=>{r.invalidateQueries(u),g({level:"danger",label:"Error",message:"There was an error while unpublishing this Lindy.",duration:3e3})}}),f=null!==(s=null===(t=o.data)||void 0===t?void 0:null===(a=t.sharing)||void 0===a?void 0:a.public)&&void 0!==s&&s,h=(0,d.useCallback)(()=>{y.isLoading||y.mutate()},[y]),k=(0,d.useCallback)(()=>{p.isLoading||p.mutate()},[p]),F=(0,d.useMemo)(()=>({published:f,publish:h,unpublish:k,isLoading:y.isLoading||p.isLoading,url:null!=m?m:""}),[f,h,k,m,y.isLoading,p.isLoading]);return(0,d.useMemo)(()=>({publishToWebProps:F,published:f}),[F,f])}(),f=(0,d.useMemo)(()=>[...g.enabled?[{label:(0,a.jsxs)(a.Fragment,{children:["Publish to web",m&&(0,a.jsx)(t.A,{className:"size-4 text-primary-12"})]}),value:"publish"}]:[],{label:"Share as a Template",value:"share"}],[g.enabled,m]),h=(0,d.useCallback)(e=>{r(e.currentTarget.dataset.shareModalTab)},[]),{shareMenuProps:k,publishModalProps:F,removeFromMarketplaceModalProps:x,pendingReviewModalProps:v}=function(){var e,n,l,t,i,s,r,u,g;let[m,y]=(0,d.useState)(!1),[f,h]=(0,d.useState)(!1),[k,F]=(0,d.useState)(!0),x=(0,J.jE)(),v=(0,em.useRouter)(),b=(0,ed.U)(),S=(0,Z.f)(),T=(0,Y.aV)(),K=(0,d.useMemo)(()=>{var e,n;return["agentTemplate",null===(e=S.data)||void 0===e?void 0:e.templateId,null===(n=S.data)||void 0===n?void 0:n._id]},[S.data]),I=(0,p.I)({queryKey:K,enabled:!!((null===(e=S.data)||void 0===e?void 0:e.templateId)||(null===(n=S.data)||void 0===n?void 0:n._id)),queryFn:async()=>{var e,n;return S.data?(null===(e=S.data)||void 0===e?void 0:e.templateId)?(0,c.oA)((0,ee.LG)({params:{id:S.data.templateId}})):(0,c.oA)(ea({params:{id:null===(n=S.data)||void 0===n?void 0:n._id}})):null}}),C=(0,d.useMemo)(()=>{var e,n;return null!==(e=S.data)&&void 0!==e&&!!e.agents&&(null===(n=S.data.agents)||void 0===n?void 0:n.length)>0},[S.data]),A=(0,d.useCallback)(async()=>{S.refetch(),h(!0)},[S]),j=(0,d.useCallback)(()=>{h(!1)},[]),N=(0,d.useCallback)(async e=>{var n;let l=null!=e?e:null===(n=I.data)||void 0===n?void 0:n._id.toString();if(l){let e=new URL("/marketplace/",window.location.origin);e.searchParams.set("templateId",l),await navigator.clipboard.writeText(e.toString()),T({level:"success",label:"Success",message:"Link copied to clipboard",duration:5e3})}else T({level:"danger",label:"Error",message:"Template ID not found",duration:5e3})},[T,null===(l=I.data)||void 0===l?void 0:l._id]),L=(0,d.useCallback)(()=>{var e,n;if(!(null===(e=I.data)||void 0===e?void 0:e._id)||!(null===(n=b.data)||void 0===n?void 0:n.id))return;let l=new URL("/marketplace/author/".concat(b.data.id),window.location.origin);l.searchParams.set("templateId",I.data._id),v.push(l,void 0,{shallow:!0})},[v,null===(t=I.data)||void 0===t?void 0:t._id,null===(i=b.data)||void 0===i?void 0:i.id]),_=(0,d.useCallback)(e=>()=>{N(e)},[N]),w=(0,d.useCallback)(e=>(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)(o.$,{level:"outline",className:"relative",onClick:L,children:"View in Lindy Store"}),(0,a.jsx)(o.$,{level:"outline",className:"relative p-2",onClick:_(e),children:(0,a.jsx)(eu,{className:"fill-slate-12"})})]}),[L,_]),R=(0,X.n)({mutationFn:async e=>{let{name:n,description:l,subTitle:a,category:t,isOfficial:i,icon:s,shareStatus:r}=e;if(S.data)return(0,c.oA)(ei({body:{name:n,description:l,icon:s,agentDefinitionId:S.data._id,subTitle:null!=a?a:"",shareStatus:r,category:t,isDeleted:r!==M.q1.Published,isOfficial:null!=i&&i}}))},onSettled:()=>{var e;x.invalidateQueries(K),x.invalidateQueries((0,ee.H3)({params:{id:(null===(e=I.data)||void 0===e?void 0:e._id)||""}})),h(!1)},onSuccess:e=>{var n;if(e&&e.shareStatus!==M.q1.Private){if((null==e?void 0:e.shareStatus)===M.q1.LinkOnly){N(e._id);return}if((null===(n=e.threatEvaluation)||void 0===n?void 0:n.status)===ec.Pending){T({id:e._id,level:"success",label:"Pending review",message:"Your Lindy was submitted successfully.",duration:5e3,labelClassName:"text-sm font-semibold leading-6 text-left  text-slate-12",messageClassName:"text-sm font-normal leading-6 text-left  text-slate-11"});return}T({id:e._id,level:"success",label:"Published",message:"Your Lindy is now available on the Lindy Store.",duration:3e3,labelClassName:"text-sm font-semibold leading-6 text-left  text-slate-12",messageClassName:"text-sm font-normal leading-6 text-left  text-slate-11",footer:w(e._id)})}},onError:e=>{eg.Cp(e),T({level:"danger",label:"Error",message:(0,a.jsx)(eo,{children:"There was an error while sharing this Lindy."}),duration:5e3})}}),D=(0,d.useCallback)(()=>{F(!k)},[k]),P=(0,d.useCallback)(e=>{var n,l,a;if(e!==(null===(n=I.data)||void 0===n?void 0:n.shareStatus)||e!==M.q1.Private){if(((null===(l=I.data)||void 0===l?void 0:l.shareStatus)===M.q1.Published||(null===(a=I.data)||void 0===a?void 0:a.shareStatus)===M.q1.LinkOnly)&&e===M.q1.Private){y(!0);return}R.mutate({shareStatus:e})}},[I.data,R]),E=(0,d.useCallback)(()=>{P(M.q1.Private)},[P]),V=(0,d.useCallback)(()=>{P(M.q1.LinkOnly)},[P]),G=(0,d.useCallback)(()=>{var e;N(null===(e=I.data)||void 0===e?void 0:e._id)},[N,null===(s=I.data)||void 0===s?void 0:s._id]),B=(0,d.useCallback)(()=>{R.mutate({shareStatus:M.q1.Private}),y(!1)},[R]),Q=(0,d.useCallback)(()=>{y(!1)},[]),q=(0,O.u)(z.T.PublishToMarketplace,{defaultEnabled:!1}),U=(0,d.useMemo)(()=>{var e,n,l,a;return{copyShareUrl:G,changeShareStatusToPrivate:E,changeShareStatusToLinkOnly:V,shareStatus:null!==(a=null===(e=I.data)||void 0===e?void 0:e.shareStatus)&&void 0!==a?a:void 0,threatEvaluationStatus:null===(l=I.data)||void 0===l?void 0:null===(n=l.threatEvaluation)||void 0===n?void 0:n.status,togglePendingReviewModal:D,openPublishModal:A,hasNestedAgents:C,allowPublishToMarketplace:q.enabled}},[G,E,V,null===(r=I.data)||void 0===r?void 0:r.shareStatus,null===(g=I.data)||void 0===g?void 0:null===(u=g.threatEvaluation)||void 0===u?void 0:u.status,D,A,C,q]),W=(0,d.useMemo)(()=>({agent:S.data,agentTemplate:I.data,isOpen:f,onCancel:j,onPublish:R.mutate,isLoading:R.isLoading}),[S.data,I.data,f,j,R.mutate,R.isLoading]),H=(0,d.useMemo)(()=>({isOpen:m,onConfirm:B,onCancel:Q}),[m,B,Q]),$=(0,d.useMemo)(()=>({toggle:D,hide:k}),[D,k]);return(0,d.useMemo)(()=>({shareMenuProps:U,publishModalProps:W,removeFromMarketplaceModalProps:H,pendingReviewModalProps:$}),[U,W,H,$])}();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.A,{className:"w-80 p-0",position:n,trigger:(0,a.jsx)(eL,{}),buttonWrapperClassName:l,children:[(0,a.jsx)("div",{className:"flex w-full gap-4 border-b border-slate-6 px-4 pb-0 pt-1",children:f.map(e=>(0,a.jsx)("button",{type:"button",className:(0,V.QP)("pb-2 pt-2 border-b border-transparent text-slate-12 flex items-center gap-2 text-sm",s===e.value&&"text-slate-12 border-slate-12  font-semibold"),"data-share-modal-tab":e.value,onClick:h,"data-testid":"lindy.share-button.".concat(e.value,"-tab"),children:e.label},e.value))}),(0,a.jsx)("div",{className:"flex flex-col",children:"share"===s?(0,a.jsx)(eA,{...k}):(0,a.jsx)(ex,{...y})})]}),(0,a.jsx)(G,{...F}),(0,a.jsx)(B,{...x}),(0,a.jsx)(u,{...v})]})}function eL(){return(0,a.jsx)(o.$,{size:"sm",level:"outline","data-testid":"lindy.template.share-button",children:"Share"})}},37361:(e,n,l)=>{"use strict";l.d(n,{AD:()=>s});var a=l(94344),t=function(e){return e.Windows="Windows",e.Mac="Mac OS",e.Linux="Linux",e.Android="Android",e.iOS="iOS",e}(t||{});function i(){let[e,n]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let e=navigator.userAgent,l=navigator.platform,a=null;["Macintosh","MacIntel","MacPPC","Mac68K"].includes(l)?a="Mac OS":["iPhone","iPad","iPod"].includes(l)?a="iOS":["Win32","Win64","Windows","WinCE"].includes(l)?a="Windows":/Android/.test(e)?a="Android":!a&&/Linux/.test(l)&&(a="Linux"),n(a)},[]),e}function s(){let e=!function(){let e=i();return"Android"===e||"iOS"===e}(),n=i();return e?"Mac OS"===n?"âŒ˜":"Ctrl":null}},9234:(e,n,l)=>{"use strict";l.d(n,{i:()=>F});var a=l(50612);let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CommonLayout_Identity",selections:[{args:null,kind:"FragmentSpread",name:"PlansModal_Identity"}],type:"Identity",abstractKey:null};t.hash="6ac8794be627d94efe47bcc369d81564";var i=l(12454),s=l(97134),r=l(31284),o=l(8678),d=l(79124);l(97244);var u=l(84075),c=l(51580),g=l(71752),m=l(2932),y=l(20923),p=l(76971),f=l(98448),h=l(36441),k=l(94344);let F=(0,o.PA)(function(e){let{children:n,userId:l,identityFragmentRef:o}=e,F=(0,d.useFragment)(t,o);return!function(e){let n=(0,d.useRelayEnvironment)(),l=(0,u.P)();(0,k.useEffect)(()=>{l&&(window._store=r.a,window._toJS=h.HO)},[l]),(0,c.S)(p.B.userConversations,"setHasNotification",e,e=>{for(let l of e.conversationIds){let a=(0,y.F)("Conversation",l);(0,d.commitLocalUpdate)(n,n=>{let l=n.get(a);l&&l.setValue(e.hasNotification,"hasNotification")})}}),(0,c.S)(p.B.userConversations,"setStatus",e,e=>{let l=(0,y.F)("Conversation",e.conversationId);(0,d.commitLocalUpdate)(n,n=>{var a;let t=n.get(l);if(!t)return;let i=(0,f.eD)(e.status,m.Y);t.setValue(i,"status");let s=null===(a=e.statusUpdatedAt)||void 0===a?void 0:a.toISOString();s&&t.setValue(s,"updatedAt")})}),(0,c.S)(p.B.userConversations,"setTitle",e,e=>{let l=(0,y.F)("Conversation",e.conversationId);(0,d.commitLocalUpdate)(n,n=>{let a=n.get(l);a&&a.setValue(e.title,"title")})}),(0,c.S)(p.B.userConversations,"conversationAdded",e,e=>{(0,g.L)({relayEnvironment:n,conversationId:e.conversationId,agentDefinitionId:e.agentId})}),(0,c.S)(p.B.userConversations,"conversationChannelStartingNodeUpdated",e,e=>{let l=(0,y.F)("ConversationChannel","".concat(e.conversationId,":").concat(e.instanceKey));(0,d.commitLocalUpdate)(n,n=>{let a=n.get(l);a&&a.setValue(e.startingNodeId,"startingNodeId")})})}(l),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"relative size-full bg-slate-1",children:n}),(0,a.jsx)(s.U,{className:"z-20"}),(0,a.jsx)(i.E,{identityFragmentRef:F,hide:!r.a.ui.isPlansModalOpen,toggle:r.a.ui.togglePlansModal})]})})},56318:(e,n,l)=>{"use strict";l.d(n,{S:()=>E});var a=l(50612);let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AgentContextMenuAgentDefinitionFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isMuted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isFavorite",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"notificationsCount",storageKey:null}],type:"AgentDefinition",abstractKey:null};t.hash="45716316a65fe4b9a693b74c935ac02f";let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AgentContextMenuIdentityFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"DeleteAgentDefinitionMutationFragment"},{args:null,kind:"FragmentSpread",name:"CopyAgentDefinitionMutationIdentityFragment"}],type:"Identity",abstractKey:null};i.hash="0fba1f0193d8b0bb076c6d77f1ad7e45";var s=l(60171),r=l(15727),o=l(77218),d=l(915),u=l(42069),c=l(73928),g=l(94344),m=l(25919),y=l(459),p=l(16167),f=l(48134);let h=(0,g.forwardRef)(function(e,n){let l=(0,g.useCallback)(()=>{e.onClick(!e.isFavorite)},[e]);return(0,a.jsxs)(y.V,{ref:n,onClick:l,children:[(0,a.jsx)(p.H,{children:(0,a.jsx)(c.G,{className:(0,m.QP)(p.b,"text-transparent stroke-1",e.isFavorite&&"text-amber-9 stroke-none")})}),(0,a.jsx)(f.A,{children:e.isFavorite?"Unfavorite":"Favorite"})]})});var k=l(60213),F=l(60955);let x=(0,g.forwardRef)(function(e,n){return(0,a.jsxs)(y.V,{ref:n,onClick:e.onClick,disabled:e.disabled,children:[(0,a.jsx)(p.H,{children:(0,a.jsx)(F.A,{className:p.b})}),(0,a.jsx)(f.A,{children:"Mark all as read"})]})});var v=l(60653),b=l(99100),S=l(36639),T=l(31284),K=l(32878),I=l(8678),C=l(81778),A=l(79124);l(97244);let j=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"agentId"}],n=[{alias:null,args:[{fields:[{kind:"Variable",name:"agentDefinitionId",variableName:"agentId"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"clearAgentNotifications",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ClearAgentNotificationsOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agent",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"notificationsCount",storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationClearAgentNotificationsSuccess",abstractKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ClearAgentDefinitionNotificationsMutation",selections:n,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ClearAgentDefinitionNotificationsMutation",selections:n},params:{cacheID:"60c29a21421cfb7f6a93e7dc9900cd48",id:null,metadata:{},name:"ClearAgentDefinitionNotificationsMutation",operationKind:"mutation",text:"mutation ClearAgentDefinitionNotificationsMutation(\n  $agentId: ID!\n) {\n  clearAgentNotifications(input: {agentDefinitionId: $agentId}) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationClearAgentNotificationsSuccess {\n      data {\n        agent {\n          id\n          nodeId\n          notificationsCount\n        }\n      }\n    }\n  }\n}\n"}}}();j.hash="2b5a64319087303a5e9babbbaaa9cfb7";var N=l(85680),L=l(20923),_=l(67434),w=l(86192),R=l(72768),D=l(22498),P=l(43329),M=l(24106);let E=(0,I.PA)(function(e){let n=(0,A.useFragment)(t,e.agentDefinitionFragmentRef),l=(0,A.useFragment)(i,e.identityFragmentRef),[c]=(0,D._E)(),[m]=(0,P.RW)(),[y]=function(){let e=(0,N.aV)(),n=(0,g.useCallback)(n=>{e({id:"clear-agent-definition-notifications-error",level:"danger",label:"Error",message:null!=n?n:"An unexpected error occurred while trying to clear your Lindy's notifications",duration:3e3})},[e]),[l,a]=(0,A.useMutation)(j),t=(0,g.useCallback)(e=>{var a;l({variables:e.variables,optimisticResponse:(a=e.variables,{clearAgentNotifications:{__typename:"MutationClearAgentNotificationsSuccess",__isError:"MutationClearAgentNotificationsSuccess",message:"",data:{agent:{nodeId:(0,L.F)("AgentDefinition",a.agentId),id:a.agentId,notificationsCount:0}}}}),onError:e=>{_.Cp(e),n(e.message)},onCompleted:e=>{var l;(null===(l=e.clearAgentNotifications)||void 0===l?void 0:l.__typename)==="Error"&&n(e.clearAgentNotifications.message)}})},[l,n]);return(0,g.useMemo)(()=>[t,a],[t,a])}(),[p]=(0,w.KA)(l),[f]=(0,R.k)(l),F=(0,C.useRouter)(),I=(0,r.j)(),E=(0,g.useCallback)(()=>{e.onClose(),p({variables:{agentId:n.id,ownerId:l.id},onSuccess:e=>{let n=(0,S.nr)(e.id,e.name);F.push("/".concat(n,"/").concat(K.E),void 0,{shallow:!0})}})},[n,p,e,l,F]),V=(0,g.useCallback)(a=>{e.onClose(),c({variables:{isFavorite:a,ownerId:l.id,agentDefinitionId:n.id}})},[c,n,e,l]),G=(0,g.useCallback)(a=>{e.onClose(),m({variables:{isMuted:a,ownerId:l.id,agentDefinitionId:n.id}})},[n,m,e,l]),B=(0,g.useCallback)(()=>{e.onClose(),y({variables:{agentId:n.id}})},[n,y,e]),O=(0,g.useCallback)(async()=>{var a,t,i;I.onClose(),e.onClose(),null===(a=e.onDelete)||void 0===a||a.call(e);let s=(null===(t=T.a.lindies.currentLindy)||void 0===t?void 0:t.id)===n.id;await f({variables:{agentId:n.id,ownerId:l.id}}),s&&(null===(i=T.a.lindies.currentLindy)||void 0===i||i.discardChanges(),F.push("/home",void 0,{shallow:!0}))},[n,f,l,e,I,F]),z=(0,g.useCallback)(()=>{e.onClose(),I.onOpen()},[I,e]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.j,{targetRef:e.targetRef,isOpen:e.isOpen,onOpen:e.onOpen,onClose:e.onClose,children:(0,a.jsx)("div",{onClick:b.d,children:(0,a.jsxs)(d.l,{children:[(0,a.jsx)(o.mT,{onClick:e.onClickRename}),(0,a.jsx)(M.t,{onClick:E}),(0,a.jsx)(h,{onClick:V,isFavorite:n.isFavorite}),(0,a.jsx)(v.j,{onClick:G,isMuted:n.isMuted}),(0,a.jsx)(x,{onClick:B,disabled:0===n.notificationsCount}),(0,a.jsx)(u.z,{onClick:z})]})})}),(0,a.jsx)(s.u,{open:I.isOpen,onCancel:I.onClose,onConfirm:O,title:"Delete ".concat(n.name,"?"),text:(0,a.jsxs)(a.Fragment,{children:["This will permanently delete ",n.name," and all its tasks.",(0,a.jsx)("br",{}),"Once deleted it may not be recovered."]}),level:"danger",confirmLabel:"Delete ".concat(n.name)})]})})},21180:(e,n,l)=>{"use strict";l.d(n,{U:()=>o});var a=l(50612),t=l(91871),i=l(73928),s=l(94344),r=l(25919);function o(e){let n=(0,s.useCallback)(n=>{n.preventDefault(),n.stopPropagation(),e.onChange(!e.value)},[e]);return(0,a.jsx)("button",{onClick:n,className:(0,r.QP)(t.Y,"rounded",e.className),children:(0,a.jsx)(i.G,{className:(0,r.QP)("transition-colors",e.value?"text-amber-9 hover:text-amber-10":"text-slate-5 hover:text-slate-7")})})}},57511:(e,n,l)=>{"use strict";l.d(n,{T:()=>c,V:()=>m});var a=l(50612),t=l(97660),i=l(84370),s=l(21381),r=l(31284),o=l(35774),d=l(8678),u=l(94344);let c=1024,g={type:"easeInOut",duration:.3},m=(0,d.PA)(function(e){let[n,l]=(0,u.useState)(!1),d=(0,u.useCallback)(()=>{l(!0)},[]),c=(0,u.useCallback)(()=>{l(!1)},[]),m=r.a.ui.isCommonSidebarOpen,y=r.a.ui.commonSidebarWidth,p=(0,u.useMemo)(()=>{if(!n)return m?{x:0}:{x:-y}},[y,m,n]),f=(0,u.useMemo)(()=>{if(!n)return m?{x:0}:{x:-y}},[y,m,n]),h=(0,u.useMemo)(()=>{if(!n)return m?{marginLeft:y}:{marginLeft:0}},[y,m,n]),k=(0,u.useMemo)(()=>{if(!n)return m?{marginLeft:y}:{marginLeft:0}},[y,m,n]),F=(0,u.useMemo)(()=>({marginLeft:y}),[y]),x=(0,u.useCallback)(()=>{r.a.ui.setCommonSidebarAnimating(!0)},[]),v=(0,u.useCallback)(()=>{r.a.ui.setCommonSidebarAnimating(!1)},[]);return(0,a.jsxs)("div",{className:"relative flex size-full overflow-hidden",children:[(0,a.jsx)(o.P.aside,{className:"absolute inset-y-0 left-0",initial:p,animate:f,transition:g,onAnimationStart:x,onAnimationComplete:v,children:(0,a.jsx)(t.T,{width:y,onResize:r.a.ui.setCommonSidebarWidth,persistKey:"lindy-common-layout-sidebar-width",handleSide:"right",minWidth:175,maxWidth:400,defaultWidth:s._,onResizeStart:d,onResizeStop:c,children:e.sidebar})}),(0,a.jsx)(o.P.div,{style:F,className:"size-full",initial:h,animate:k,transition:g,children:(0,a.jsx)(i.mF,{children:(0,a.jsxs)("div",{className:"grid size-full grid-rows-[auto,1fr]",children:[e.header,(0,a.jsx)(i.mF,{children:e.content})]})})})]})})},61082:(e,n,l)=>{"use strict";l.d(n,{X:()=>t});var a=l(50612);function t(e){return(0,a.jsx)("header",{className:"relative flex h-14 w-full items-center justify-between border-b border-slate-5 bg-panel px-3 py-1",children:e.children})}},92836:(e,n,l)=>{"use strict";l.d(n,{d:()=>u});var a=l(50612),t=l(78700),i=l(40998),s=l(31284),r=l(8678),o=l(94344),d=l(25919);let u=(0,r.PA)(function(e){let n=s.a.ui.isCommonSidebarOpen,l=s.a.ui.isSidebarAutoClosed,r=(0,o.useCallback)(()=>{l&&s.a.ui.setSidebarAutoClosed(!1),s.a.ui.setCommonSidebarOpen(!0)},[l]);return(0,a.jsxs)("div",{className:"relative flex max-w-full items-center gap-x-4",children:[(0,a.jsx)("div",{className:(0,d.QP)("flex items-center justify-center h-8 w-8"),children:(0,a.jsx)(i.G,{children:(0,a.jsx)("button",{onClick:r,className:(0,d.QP)("rounded-md border border-slate-4 p-2 transition hover:bg-slate-2 active:bg-slate-3 relative","cursor-pointer transition outline-none h-8 w-8 flex items-center justify-center","focus-visible:ring-2 ring-offset-slate-1 focus:ring-primary-8 focus:outline-none focus:ring-offset-2",n&&"hidden"),children:(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)(t.A,{className:"size-4 text-slate-12 transition-opacity"})})})})}),(0,a.jsx)("div",{className:(0,d.QP)(n?"-translate-x-9":"translate-x-0","transition-transform","max-w-full"),children:e.children})]})})},6779:(e,n,l)=>{"use strict";l.d(n,{U:()=>b});var a=l(50612);let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"HeaderNavButtons_AgentDefinition",selections:[{args:null,kind:"FragmentSpread",name:"ThreadsNavButton_AgentDefinition"}],type:"AgentDefinition",abstractKey:null};t.hash="0f82a7fcdeea7264464a23ff7a8b46fa";var i=l(36639),s=l(94344),r=l(79124);function o(e){return(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{stroke:"currentColor",d:"M4.333 10.667a1.667 1.667 0 1 1 0 3.333 1.667 1.667 0 0 1 0-3.333Zm0 0v-2C4.333 8.298 4.632 8 5 8h2.333A.667.667 0 0 0 8 7.333m3.667 3.334a1.667 1.667 0 1 1 0 3.333 1.667 1.667 0 0 1 0-3.333Zm0 0v-2A.667.667 0 0 0 11 8H8.667A.667.667 0 0 1 8 7.333m0-2A1.667 1.667 0 1 1 8 2a1.667 1.667 0 0 1 0 3.333Zm0 0v2",strokeWidth:"1.333"})})}var d=l(30035),u=l.n(d),c=l(25919);function g(e){return(0,a.jsx)(u(),{shallow:!0,href:e.href,className:(0,c.QP)("grid lg:grid-cols-[16px,1fr] items-center justify-center fill-slate-11 px-2 py-1 text-sm text-slate-11","cursor-pointer transition gap-x-2 group rounded border-none outline-none relative","focus-visible:ring-2 focus:ring-primary-8 focus:outline-none focus:ring-offset-2","hover:bg-slate-2 active:bg-slate-3 ring-offset-slate-1","subpixel-antialiased",e.active?"text-slate-12":"hover:text-slate-12"),children:e.children})}function m(e){return(0,a.jsxs)("span",{className:"relative hidden lg:block",children:[(0,a.jsx)("span",{className:(0,c.QP)("absolute inset-0 flex items-center justify-center gap-x-2 whitespace-nowrap",e.active?"font-medium":"font-normal"),children:e.children}),(0,a.jsx)("span",{className:"pointer-events-none invisible flex items-center justify-center gap-x-2 whitespace-nowrap font-medium",children:e.children})]})}function y(e){return(0,a.jsxs)(g,{href:e.href,active:e.active,children:[(0,a.jsx)(o,{className:"h-4 w-4"})," ",(0,a.jsx)(m,{active:e.active,children:"Flow Editor"})]})}function p(){return(0,a.jsx)("div",{className:"mx-2 h-[17px] w-px bg-slate-8"})}function f(e){return(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{d:"M3.968 13.336V9.334m0-2.667V2.665M8 13.335V8.668m0-2.668V2.665m4.032 10.67v-2.667m0-2.667V2.665m-9.368 6.67h2.607m1.426-3.336h2.606m1.426 4.669h2.607",stroke:"currentColor",strokeWidth:"1.333",strokeLinecap:"round",strokeLinejoin:"round"})})}function h(e){return(0,a.jsxs)(g,{href:e.href,active:e.active,children:[(0,a.jsx)(f,{className:"h-4 w-4"})," ",(0,a.jsx)(m,{active:e.active,children:"Settings"})]})}let k={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ThreadsNavButton_AgentDefinition",selections:[{alias:null,args:null,kind:"ScalarField",name:"notificationsCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isMuted",storageKey:null}],type:"AgentDefinition",abstractKey:null};k.hash="76ffb1ca10ad18774ccf8e22d8d89ad5";var F=l(94531),x=l(91018);function v(e){let n=(0,r.useFragment)(k,e.agentDefinitionFragmentRef),l=(null==n?void 0:n.isMuted)?0:(null==n?void 0:n.notificationsCount)||0;return(0,a.jsxs)(g,{href:e.href,active:e.active,children:[(0,a.jsx)(F.v,{className:"size-4"})," ",(0,a.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,a.jsx)(m,{active:e.active,children:"Tasks"}),l>0&&(0,a.jsx)(x.S,{children:l})]})]})}function b(e){let n=(0,r.useFragment)(t,e.agentDefinitionFragmentRef),l=(0,s.useMemo)(()=>(0,i.nr)(e.lindyId,e.lindyName),[e.lindyId,e.lindyName]),o=(0,s.useCallback)(e=>{let n="/".concat(l,"/").concat(e),a=new URL(window.location.href).searchParams.toString();return a?"".concat(n,"?").concat(a):n},[l]);return(0,a.jsxs)("nav",{className:"flex items-center xl:gap-x-4",children:[(0,a.jsx)(h,{active:"settings"===e.view,href:o("settings")}),(0,a.jsx)(y,{active:"editor"===e.view,href:o("editor")}),(0,a.jsx)(p,{}),(0,a.jsx)(v,{active:"tasks"===e.view,href:o("tasks"),agentId:e.lindyId,agentDefinitionFragmentRef:n})]})}},56587:(e,n,l)=>{"use strict";l.d(n,{g:()=>t});var a=l(50612);function t(e){return(0,a.jsx)("h1",{className:"text-sm font-medium text-slate-12",children:e.children})}},10639:(e,n,l)=>{"use strict";l.d(n,{X:()=>W});var a=l(50612);let t=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},l=[{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinitions",plural:!0,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"updatedAt",storageKey:null}],storageKey:null}];return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"HeaderTitleSection_AgentDefinition",selections:[e,n,{alias:null,args:null,concreteType:"AgentIcon",kind:"LinkedField",name:"icon",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},n],storageKey:null},{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:[e,{alias:null,args:null,concreteType:"AgentFolders",kind:"LinkedField",name:"agentFolders",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentRootFolder",kind:"LinkedField",name:"root",plural:!1,selections:l,storageKey:null},{alias:null,args:null,concreteType:"AgentFolder",kind:"LinkedField",name:"folders",plural:!0,selections:l,storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"CopyAgentDefinitionMutationIdentityFragment"},{args:null,kind:"FragmentSpread",name:"DeleteAgentDefinitionMutationFragment"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isFavorite",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isMuted",storageKey:null}],type:"AgentDefinition",abstractKey:null}}();t.hash="3b2ef1bfb4186e63d4b51ceb3b3f93b6";var i=l(21180),s=l(86192),r=l(72768);let o=function(){var e={defaultValue:null,kind:"LocalArgument",name:"agentDefinitionId"},n={defaultValue:null,kind:"LocalArgument",name:"icon"},l={defaultValue:null,kind:"LocalArgument",name:"ownerId"},a=[{alias:null,args:[{fields:[{kind:"Variable",name:"agentDefinitionId",variableName:"agentDefinitionId"},{kind:"Variable",name:"icon",variableName:"icon"},{kind:"Variable",name:"id",variableName:"ownerId"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"updateAgent",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UpdateAgentOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agent",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},{alias:null,args:null,concreteType:"AgentIcon",kind:"LinkedField",name:"icon",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationUpdateAgentSuccess",abstractKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n,l],kind:"Fragment",metadata:null,name:"UpdateAgentDefinitionIconMutation",selections:a,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[l,e,n],kind:"Operation",name:"UpdateAgentDefinitionIconMutation",selections:a},params:{cacheID:"b645314778ac7876db4718faf492aa5a",id:null,metadata:{},name:"UpdateAgentDefinitionIconMutation",operationKind:"mutation",text:"mutation UpdateAgentDefinitionIconMutation(\n  $ownerId: ID!\n  $agentDefinitionId: ID!\n  $icon: AgentIconInput!\n) {\n  updateAgent(input: {id: $ownerId, agentDefinitionId: $agentDefinitionId, icon: $icon}) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationUpdateAgentSuccess {\n      data {\n        agent {\n          id\n          nodeId\n          icon {\n            name\n            color\n          }\n        }\n      }\n    }\n  }\n}\n"}}}();o.hash="696c999ae8d8966416a9c6c4e7af19f1";var d=l(85680),u=l(20923),c=l(67434),g=l(94344),m=l(79124);l(97244);var y=l(22498),p=l(43329),f=l(86565),h=l(7061),k=l(77283),F=l(91871),x=l(1332),v=l(98448),b=l(36639),S=l(31284),T=l(32878),K=l(74269),I=l(16008),C=l(35774),A=l(8678),j=l(81778),N=l(25919),L=l(72260),_=l(60171),w=l(15727),R=l(24106),D=l(42009),P=l(77218),M=l(42069),E=l(60653);function V(e){return(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{d:"m5.333 6.667 2.195 2.195c.26.26.683.26.943 0l2.195-2.195",stroke:"currentColor",strokeWidth:"1.333",strokeLinecap:"round",strokeLinejoin:"round"})})}var G=l(31212),B=l(79305);function O(e){let n=(0,g.useRef)(null),[l,t]=(0,g.useState)(e.name),i=(0,g.useRef)(!1),s=(0,g.useCallback)(()=>{if(i.current){i.current=!1;return}if(!l.trim()){t(e.name);return}e.onNameChange(l)},[e,l]),r=(0,g.useCallback)(l=>{if("Escape"===l.key){var a,s;i.current=!0,null===(a=n.current)||void 0===a||a.blur(),t(e.name),null===(s=e.onCancel)||void 0===s||s.call(e)}},[e]),o=(0,g.useCallback)(a=>{var i,s;if(a.preventDefault(),l!==e.name){if(!l.trim()){t(e.name),null===(s=n.current)||void 0===s||s.blur();return}e.onNameChange(l),null===(i=n.current)||void 0===i||i.blur()}},[e,l]);return(0,g.useEffect)(()=>{requestAnimationFrame(()=>{if(e.autoFocus){var l,a;null===(l=n.current)||void 0===l||l.focus(),null===(a=n.current)||void 0===a||a.select()}})},[e.autoFocus]),(0,a.jsx)("form",{onSubmit:o,className:"electron-no-drag inline-block items-center",children:(0,a.jsx)(B.V,{ref:n,value:l,minWidth:8,onChange:t,onBlur:s,onKeyDown:r,className:(0,N.QP)("text-sm border-transparent ring-1 ring-transparent font-medium text-slate-12 px-1 py-0.5 rounded-md","active:ring-1 transition-colors hover:bg-slate-2 bg-transparent","focus:ring-1 focus:ring-primary-8 active:ring-1 active:ring-primary-8 focus:bg-slate-1 active:bg-slate-1",e.className)})})}function z(e){let n=(0,w.j)(),[l,t]=(0,g.useState)(!1),i=(0,g.useCallback)(()=>{t(!0)},[]),s=(0,g.useCallback)(n=>{t(!1),e.onNameChange(n)},[e]),r=(0,g.useCallback)(()=>{t(!1)},[]),o=(0,g.useCallback)(()=>{n.onOpen()},[n]),d=(0,g.useCallback)(()=>{n.onClose(),e.onDelete()},[n,e]);return l?(0,a.jsx)(O,{name:e.name,onNameChange:s,onCancel:r,className:"mr-5 h-6 py-0 leading-none",autoFocus:!0},e.name):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(L.AM,{children:n=>{let{open:l}=n;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"relative inline-block",children:(0,a.jsxs)(L.ut,{className:(0,N.QP)("max-w-xs text-sm border-transparent ring-2 ring-transparent font-medium text-slate-12 px-[5px] py-0 rounded-md","active:ring-2 transition-colors hover:bg-slate-2 bg-transparent","focus:bg-slate-1 active:bg-slate-1","flex items-center gap-x-1 h-6 py-0 leading-none whitespace-nowrap"),role:"button","aria-label":"Edit Agent Title",children:[(0,a.jsx)("p",{className:"flex h-full items-center truncate",children:e.name}),(0,a.jsx)(V,{className:"size-4 text-slate-9"})]})}),(0,a.jsxs)(D.x,{open:l,children:[(0,a.jsx)(P.mT,{onClick:i}),(0,a.jsx)(R.t,{onClick:e.onDuplicate}),(0,a.jsx)(E.j,{isMuted:e.isMuted,onClick:e.onSetIsMuted}),(0,a.jsx)(G.N,{}),(0,a.jsx)(M.z,{onClick:o})]})]})}}),(0,a.jsx)(_.u,{open:n.isOpen,onCancel:n.onClose,onConfirm:d,title:"Delete ".concat(e.name,"?"),text:(0,a.jsxs)(a.Fragment,{children:["This will permanently delete ",e.name," and all its tasks.",(0,a.jsx)("br",{}),"Once deleted it may not be recovered."]}),level:"danger",confirmLabel:"Delete ".concat(e.name)})]})}var Q=l(92836),q=l(43578);let U={initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9}},W=(0,A.PA)(function(e){var n,l,A;let L=(0,m.useFragment)(t,e.agentDefinitionFragmentRef),_=null===(n=S.a.lindies.currentLindy)||void 0===n?void 0:n.isDirty,[w]=(0,y._E)(),[R]=function(){let e=(0,d.aV)(),n=(0,g.useCallback)(n=>{e({id:"update-agent-definition-icon-error",level:"danger",label:"Error",message:null!=n?n:"An unexpected error occurred while trying to update your Lindy's icon.",duration:3e3})},[e]),[l,a]=(0,m.useMutation)(o),t=(0,g.useCallback)(e=>{var a;l({variables:e.variables,optimisticResponse:(a=e.variables,{updateAgent:{__typename:"MutationUpdateAgentSuccess",__isError:"MutationUpdateAgentSuccess",message:"",data:{agent:{nodeId:(0,u.F)("AgentDefinition",a.agentDefinitionId),id:a.agentDefinitionId,icon:a.icon}}}}),onError:e=>{c.Cp(e),n()},onCompleted:e=>{var l;(null===(l=e.updateAgent)||void 0===l?void 0:l.__typename)==="Error"&&n(e.updateAgent.message)}})},[l,n]);return(0,g.useMemo)(()=>[t,a],[t,a])}(),[D]=(0,f.HC)(),[P]=(0,r.k)(L.owner),[M]=(0,s.KA)(L.owner),[E]=(0,p.RW)(),V=(0,j.useRouter)(),G=(0,g.useMemo)(()=>[...L.owner.agentFolders.root.agentDefinitions,...L.owner.agentFolders.folders.flatMap(e=>e.agentDefinitions)],[L.owner.agentFolders.folders,L.owner.agentFolders.root.agentDefinitions]),B=(0,g.useCallback)(e=>{R({variables:{agentDefinitionId:L.id,ownerId:L.owner.id,icon:(0,v.wl)(e.name,e.color)}})},[L.id,L.owner.id,R]),O=(0,g.useCallback)(e=>{D({variables:{agentDefinitionId:L.id,ownerId:L.owner.id,name:e}})},[L.id,L.owner.id,D]),W=(0,g.useCallback)(e=>{w({variables:{agentDefinitionId:L.id,ownerId:L.owner.id,isFavorite:e}})},[L.id,L.owner.id,w]),H=(0,g.useCallback)(e=>{E({variables:{agentDefinitionId:L.id,ownerId:L.owner.id,isMuted:e}})},[L.id,L.owner.id,E]),$=(0,g.useCallback)(()=>{P({variables:{agentId:L.id,ownerId:L.owner.id},onSuccess:async()=>{let e=G.filter(e=>e.id!==L.id).sort(h.OB).at(0);S.a.lindies.unsetCurrentLindy();let n=e?"/".concat(e.id,"/").concat(T.E):"/home";await V.push(n,void 0,{shallow:!0})}})},[L.id,L.owner.id,P,G,V]),Z=(0,g.useCallback)(()=>{M({variables:{agentId:L.id,ownerId:L.owner.id},onSuccess:async e=>{let n=(0,b.nr)(e.id,e.name);await V.push("/".concat(n,"/").concat(T.E),void 0,{shallow:!0})}})},[L.id,L.owner.id,M,V]),Y=(0,v.HI)(null===(l=L.icon)||void 0===l?void 0:l.name),J=(0,v.Rz)(null===(A=L.icon)||void 0===A?void 0:A.color);return(0,a.jsx)(q.q,{children:(0,a.jsx)(Q.d,{children:(0,a.jsx)("div",{className:"flex max-w-full items-center gap-x-2",children:(0,a.jsxs)(K.o,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-x-2 ",children:[(0,a.jsx)(x.Y,{icon:Y,color:J,onIconChange:B,className:(0,N.QP)(F.Y,"rounded flex items-center"),closeOnIconSelection:!0,children:(0,a.jsx)(k.l,{icon:Y,color:J})}),(0,a.jsx)(z,{name:L.name,isMuted:L.isMuted,onSetIsMuted:H,onNameChange:O,onDuplicate:Z,onDelete:$}),(0,a.jsx)(I.N,{children:_&&(0,a.jsx)(C.P.span,{...U,className:"mr-2 inline-flex items-center rounded-md bg-slate-2 px-2 py-1 text-xs font-medium text-slate-11 ring-1 ring-inset ring-slate-6",children:"Draft"})})]}),(0,a.jsxs)(C.P.div,{layout:!0,className:"flex items-center gap-x-4",children:[(0,a.jsx)(i.U,{value:L.isFavorite,onChange:W}),e.agentEnabledSwitch]})]})})})})})},43578:(e,n,l)=>{"use strict";l.d(n,{q:()=>t});var a=l(50612);function t(e){return(0,a.jsx)("div",{className:"inline-flex max-w-full items-center gap-x-4",children:e.children})}},55563:(e,n,l)=>{"use strict";l.d(n,{K:()=>y});var a=l(50612),t=l(75092),i=l(8178),s=l(67373),r=l(66679),o=l(31284),d=function(e){return e.TEST_AFTER_SAVE="test-after-save",e}({}),u=l(45785),c=l(8678),g=l(43654),m=l(94344);let y=(0,c.PA)(function(e){var n;let{identityFragmentRef:l,agentDefinitionFragmentRef:c}=e,y=(0,i.H)(),p=(0,u.VH)(),{handleSave:f,isSaveInFlight:h,premiumModalElement:k}=(0,t.g)(l,c,y,p),F=null===(n=o.a.lindies.currentLindy)||void 0===n?void 0:n.isDirty,[x,v]=(0,m.useState)(!1),b=(0,m.useCallback)(async()=>{await f(),o.a.ui.shouldShowTooltip(d.TEST_AFTER_SAVE)&&(v(!0),g.Ay.capture("action_tooltip_shown",{tooltip_key:d.TEST_AFTER_SAVE,action:"save"}),o.a.ui.markTooltipAsShown(d.TEST_AFTER_SAVE))},[f]),S=(0,a.jsx)(s.$,{isLoading:h,onClick:b,disabled:!F,size:"sm",className:"h-8",children:(null==y?void 0:y.isSavedWithoutConfiguredEntryPoint)?"Turn on":"Save"});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex items-center",children:x?(0,a.jsxs)(r.m_,{open:!0,onOpenChange:v,placement:"bottom-end",children:[(0,a.jsxs)(r.k$,{asChild:!0,children:[" ",S]}),(0,a.jsx)(r.ZI,{children:"If you're done editing, don't forget to test your Lindy!"})]}):S}),k]})})},13941:(e,n,l)=>{"use strict";l.d(n,{n:()=>t});var a=l(50612);function t(e){return(0,a.jsx)("span",{className:"rounded bg-slate-4 px-1 font-bold text-slate-11",children:e.children})}},59051:(e,n,l)=>{"use strict";l.d(n,{v:()=>p});var a=l(50612);let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SaveChangesOnLeavingModalAgentDefinitionFragment",selections:[{args:null,kind:"FragmentSpread",name:"useSaveAgentAgentDefinitionFragment"}],type:"AgentDefinition",abstractKey:null};t.hash="41e8fb3790c43b77c85847deceba2f59";var i=l(73850),s=l(42911),r=l(67373),o=l(31284),d=l(45785),u=l(8678),c=l(81778),g=l(94344),m=l(79124);l(97244);let y="ABORT_ROUTE_CHANGE",p=(0,u.PA)(function(e){var n,l;let i=(0,c.useRouter)(),r=(0,m.useFragment)(t,e.agentDefinitionFragmentRef),u=(0,d.VH)(),[p,h]=(0,s.G)(r,null===(n=o.a.lindies.currentLindy)||void 0===n?void 0:n.stateGraph,u),k=null===(l=o.a.lindies.currentLindy)||void 0===l?void 0:l.isDirty,F=o.a.lindies.currentLindy,x=(0,g.useRef)(""),v=(0,g.useRef)(!1),[b,S]=(0,g.useState)(!1),[T,K]=(0,g.useTransition)(),[I,C]=(0,g.useTransition)(),A=(0,g.useCallback)(n=>v.current?(v.current=!1,!1):!["".concat(e.lindyId,"/settings"),"".concat(e.lindyId,"/editor")].some(e=>n.includes(e))&&!!F&&!!k,[k,F,e.lindyId]);(0,g.useEffect)(()=>{let e=e=>{if(A(e))throw x.current=e,S(!0),i.events.emit("routeChangeError"),y},n=e=>{k&&(confirm("You have unsaved changes. Are you sure you want to leave?")||e.preventDefault())},l=e=>{e.reason===y&&e.preventDefault()};return i.events.on("routeChangeStart",e),window.addEventListener("beforeunload",n),window.addEventListener("unhandledrejection",l),()=>{i.events.off("routeChangeStart",e),window.removeEventListener("beforeunload",n),window.removeEventListener("unhandledrejection",l)}},[i,A,k]);let j=(0,g.useCallback)(()=>{S(!1)},[]),N=(0,g.useCallback)(()=>{var e;S(!1),null===(e=o.a.lindies.currentLindy)||void 0===e||e.discardChanges(),v.current=!0,C(()=>{i.push(x.current,void 0,{shallow:!0})})},[i]),L=(0,g.useCallback)(async()=>{await p(),S(!1),v.current=!0,K(()=>{i.push(x.current,void 0,{shallow:!0})})},[i,p]);return(0,a.jsx)(f,{open:b,onCancel:N,onConfirm:L,onClose:j,confirmLoading:h||T,discardLoading:I})});function f(e){let{open:n,onClose:l,onCancel:t,onConfirm:s,confirmLoading:o=!1,discardLoading:d=!1}=e,u=(0,g.useCallback)(e=>{e.preventDefault(),s()},[s]),c=(0,g.useCallback)(e=>{"Enter"===e.key&&!e.shiftKey&&n&&(e.preventDefault(),s())},[s,n]);return(0,g.useEffect)(()=>(document.addEventListener("keydown",c),()=>{document.removeEventListener("keydown",c)}),[c]),(0,a.jsx)(i.aF,{className:"max-h-[85vh] w-full max-w-md sm:max-w-lg",open:n,setClosed:null!=l?l:t,children:(0,a.jsxs)("form",{onSubmit:u,children:[(0,a.jsx)("p",{className:"font-medium text-slate-12",children:"You have unsaved changes"}),(0,a.jsx)("p",{className:"mb-8 mt-2 text-sm text-slate-11",children:"Would you like to save your changes before leaving this page?"}),(0,a.jsxs)("div",{className:"flex justify-end gap-x-3",children:[(0,a.jsx)(r.$,{level:"outline",size:"md",disabled:d,onClick:l,children:"Cancel"}),(0,a.jsx)("div",{className:"grow"}),(0,a.jsx)(r.$,{level:"danger-outline",size:"md",disabled:o,isLoading:d,onClick:t,children:"Discard"}),(0,a.jsx)(r.$,{type:"submit",level:"primary",size:"md",disabled:d,isLoading:o,children:"Save"})]})]})})}},7061:(e,n,l)=>{"use strict";l.d(n,{Qm:()=>eV,OB:()=>eG});var a=l(50612);let t=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CommonLayoutSidebarIdentityFragment",selections:[e,n,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"avatar",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinitions",plural:!0,selections:[e,n,{alias:null,args:null,kind:"ScalarField",name:"isFavorite",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"lastRunAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{args:null,kind:"FragmentSpread",name:"AgentSidebarItemAgentDefinitionFragment"}],storageKey:null},{args:null,kind:"FragmentSpread",name:"CreateLindySection_Identity"},{args:null,kind:"FragmentSpread",name:"QualifiedSignupCtaFooter_Identity"},{args:null,kind:"FragmentSpread",name:"CreditsFooterMe"},{args:null,kind:"FragmentSpread",name:"AgentSidebarItemIdentityFragment"}],type:"Identity",abstractKey:null}}();t.hash="51aa603e05bcba775118da23a5454c79";var i=l(79058),s=l(53662);let r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"QualifiedSignupCtaFooter_Identity",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},{alias:null,args:null,concreteType:"IdentityFlags",kind:"LinkedField",name:"flags",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"dismissedQualifiedSignupUpsell",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isQualifiedSignup",storageKey:null}],type:"Identity",abstractKey:null};r.hash="50c3e2ea66a13117e88acc0fbdbea457";let o=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:null,kind:"LinkedField",name:"dismissQualifiedSignupUpsell",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DismissQualifiedSignupUpsellOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"identity",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},{alias:null,args:null,concreteType:"IdentityFlags",kind:"LinkedField",name:"flags",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"dismissedQualifiedSignupUpsell",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationDismissQualifiedSignupUpsellSuccess",abstractKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"QualifiedSignupCtaFooterDismissQualifiedSignupUpsellMutation",selections:n,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"QualifiedSignupCtaFooterDismissQualifiedSignupUpsellMutation",selections:n},params:{cacheID:"1a90d8ceaaa74c3a480beabe431363aa",id:null,metadata:{},name:"QualifiedSignupCtaFooterDismissQualifiedSignupUpsellMutation",operationKind:"mutation",text:"mutation QualifiedSignupCtaFooterDismissQualifiedSignupUpsellMutation(\n  $input: DismissQualifiedSignupUpsellInput!\n) {\n  dismissQualifiedSignupUpsell(input: $input) {\n    __typename\n    ... on MutationDismissQualifiedSignupUpsellSuccess {\n      data {\n        identity {\n          id\n          nodeId\n          flags {\n            dismissedQualifiedSignupUpsell\n          }\n        }\n      }\n    }\n  }\n}\n"}}}();o.hash="fa64eb33d82f48e96d77b71c00e880db";var d=l(85739),u=l(9023),c=l(25919);function g(e){return(0,a.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:(0,c.QP)("text-slate-11",e.className),children:(0,a.jsx)("path",{d:"M8 8L16 16M16 8L8 16",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})})}function m(e){return(0,a.jsxs)("svg",{width:"36",height:"35",viewBox:"0 0 36 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e.className,children:[(0,a.jsx)("path",{d:"M18.4844 29C26.4839 29 32.9687 22.5081 32.9687 14.5C32.9687 6.49187 26.4839 0 18.4844 0C10.4849 0 4 6.49187 4 14.5C4 22.5081 10.4849 29 18.4844 29Z",fill:"#E6E8EB"}),(0,a.jsx)("path",{d:"M26.9944 2.74268H20.4079H9.53734C7.93445 2.85938 6.65213 4.2306 6.65213 5.86441V13.0415H30.1419V5.86441C30.1127 4.14308 28.7138 2.74268 26.9944 2.74268ZM12.3351 5.36843C11.9563 5.36843 11.6648 5.07668 11.6648 4.6974C11.6648 4.31813 11.9563 4.02638 12.3351 4.02638C12.714 4.02638 13.0054 4.31813 13.0054 4.6974C12.9763 5.04751 12.6849 5.36843 12.3351 5.36843ZM24.2257 5.36843C23.8468 5.36843 23.5554 5.07668 23.5554 4.6974C23.5554 4.31813 23.8468 4.02638 24.2257 4.02638C24.6046 4.02638 24.896 4.31813 24.896 4.6974C24.8669 5.04751 24.5754 5.36843 24.2257 5.36843Z",fill:"#496BAE"}),(0,a.jsx)("g",{filter:"url(#filter0_d_4763_13660)",children:(0,a.jsx)("path",{d:"M6.6521 13.4209V23.1362C6.6521 24.8575 8.05099 26.2579 9.77046 26.2579H26.9943C28.7138 26.2579 30.1127 24.8575 30.1127 23.1362V13.4209H6.6521Z",fill:"white"})}),(0,a.jsx)("path",{d:"M6.6521 14.296L5.5155 8.37343C5.25321 7.03138 6.6521 5.89355 8.63386 5.89355H28.4515C30.4333 5.89355 31.803 7.03138 31.4824 8.37343L30.1418 14.296",fill:"#F1F3F9"}),(0,a.jsx)("path",{d:"M16.1529 20.656C14.2294 20.656 12.8014 19.5181 12.7722 17.9427V17.7676H13.6174V17.9427C13.6465 19.0222 14.754 19.8682 16.1529 19.8682C17.6101 19.8682 18.6884 18.993 18.6884 17.7676C18.6884 16.5423 17.6975 15.7837 16.0072 15.7837H14.754V14.9668H16.0072C17.3478 14.9668 18.2804 14.2083 18.2804 13.0996C18.2804 12.0493 17.3478 11.2616 16.0654 11.2616C14.8706 11.2616 13.938 12.0202 13.8505 13.0705V13.2163H13.0054V13.0413C13.0928 11.5242 14.3751 10.4155 16.0946 10.4155C17.8432 10.4155 19.1547 11.5242 19.1547 13.0121C19.1547 14.0332 18.6009 14.8793 17.6683 15.2586C18.8632 15.5795 19.5918 16.4839 19.5918 17.6801C19.5627 19.4014 18.1055 20.656 16.1529 20.656Z",fill:"#687076"}),(0,a.jsx)("path",{d:"M22.9432 20.5102V11.641C22.6518 11.8161 22.2438 12.0786 21.8649 12.3412L21.8066 12.3704C21.3403 12.6621 20.874 12.9831 20.5826 13.1581L20.3203 13.3332V12.3412L20.4077 12.2829C20.6409 12.137 20.9906 11.9036 21.3695 11.6702C21.9524 11.2909 22.6227 10.8533 23.0307 10.5907L23.0598 10.5615H23.7884V20.481H22.9432V20.5102Z",fill:"#687076"}),(0,a.jsx)("path",{d:"M35.878 23.8376C35.7668 24.308 35.5999 24.8061 35.4052 25.2212C34.8766 26.2451 34.0421 27.0477 33.0129 27.5734C31.9558 28.0992 30.7041 28.3206 29.4523 28.0439C26.5037 27.4351 24.6121 24.5571 25.2241 21.6237C25.8361 18.6904 28.7012 16.7809 31.6499 17.4174C32.7069 17.6388 33.6249 18.1646 34.4037 18.8841C35.7111 20.1847 36.2675 22.0665 35.878 23.8376Z",fill:"#496BAE"}),(0,a.jsx)("path",{d:"M32.2896 22.2602H31.0379V21.0149C31.0379 20.7658 30.8431 20.5444 30.565 20.5444C30.3146 20.5444 30.0921 20.7381 30.0921 21.0149V22.2602H28.8403C28.59 22.2602 28.3674 22.4539 28.3674 22.7306C28.3674 23.0073 28.5622 23.2011 28.8403 23.2011H30.0921V24.4463C30.0921 24.6954 30.2868 24.9168 30.565 24.9168C30.8153 24.9168 31.0379 24.7231 31.0379 24.4463V23.2011H32.2896C32.54 23.2011 32.7625 23.0073 32.7625 22.7306C32.7625 22.4539 32.54 22.2602 32.2896 22.2602Z",fill:"white"}),(0,a.jsx)("defs",{children:(0,a.jsxs)("filter",{id:"filter0_d_4763_13660",x:"0.890219",y:"10.54",width:"34.9843",height:"24.3607",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,a.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,a.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,a.jsx)("feOffset",{dy:"2.88094"}),(0,a.jsx)("feGaussianBlur",{stdDeviation:"2.88094"}),(0,a.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.397708 0 0 0 0 0.47749 0 0 0 0 0.575 0 0 0 0.27 0"}),(0,a.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_4763_13660"}),(0,a.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_4763_13660",result:"shape"})]})})]})}var y=l(94344),p=l(79124),f=l(97244);function h(e){let{identityFragmentRef:n}=e,l=(0,p.useFragment)(r,n),[t]=(0,p.useMutation)(o),i=(0,y.useCallback)(e=>{e.stopPropagation(),t({variables:{input:{id:l.id}},optimisticResponse:{dismissQualifiedSignupUpsell:{__typename:"MutationDismissQualifiedSignupUpsellSuccess",data:{identity:{id:l.id,nodeId:l.nodeId,flags:{dismissedQualifiedSignupUpsell:!0}}}}}})},[t,l.id,l.nodeId]),s=(0,y.useCallback)(()=>{let e="".concat(u.d_,"?utm_source=lindy&utm_medium=sidebar&utm_campaign=qualified");window.open(e,"_blank")},[]);return l.isQualifiedSignup&&!l.flags.dismissedQualifiedSignupUpsell?(0,a.jsxs)("div",{className:"mx-4 mb-2 cursor-pointer rounded-md border-[0.5px] border-slate-5 bg-slate-2 p-3",onClick:s,children:[(0,a.jsxs)("div",{className:"mb-2 flex justify-between",children:[(0,a.jsx)(m,{className:"ml-[-4px]"}),(0,a.jsx)(d.K,{className:"mr-[-4px] mt-[-4px] border-transparent",onClick:i,children:(0,a.jsx)(g,{className:"size-4 text-slate-9"})})]}),(0,a.jsx)("p",{className:"text-xs text-slate-11",children:"Schedule a call with sales to get a custom agent."})]}):null}var k=l(85926),F=l(31284),x=l(32878),v=l(89720),b=l(8678),S=l(30035),T=l.n(S);let K=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AgentSidebarItemAgentDefinitionFragment",selections:[e,n,{alias:null,args:null,kind:"ScalarField",name:"notificationsCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isMuted",storageKey:null},{alias:null,args:null,concreteType:"AgentIcon",kind:"LinkedField",name:"icon",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StateGraph",kind:"LinkedField",name:"stateGraph",plural:!1,selections:[e],storageKey:null},{args:null,kind:"FragmentSpread",name:"AgentContextMenuAgentDefinitionFragment"}],type:"AgentDefinition",abstractKey:null}}();K.hash="49b16740fe06dbf2a145548aef687c65";let I={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AgentSidebarItemIdentityFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"AgentContextMenuIdentityFragment"}],type:"Identity",abstractKey:null};I.hash="ad8fb98899a391d77f49a5f9ffd73952";var C=l(15727),A=l(62457),j=l(56318),N=l(86565),L=l(66213),_=l(14135),w=l(90386),R=l(2096),D=l(19762),P=l(20923),M=l(77283),E=l(91018),V=l(98448),G=l(36639),B=l(81778),O=l(33762);function z(e){let n=(0,y.useRef)(null),[l,t]=(0,y.useState)(e.name),i=(0,y.useCallback)(()=>{e.onNameChange(l)},[e,l]),s=(0,y.useCallback)(e=>{t(e.currentTarget.value)},[]);(0,O.Wr)(n,i),(0,y.useEffect)(()=>{e.isRenaming&&requestAnimationFrame(()=>{var e,l;null===(e=n.current)||void 0===e||e.focus(),null===(l=n.current)||void 0===l||l.select()})},[e.isRenaming]);let r=(0,y.useCallback)(n=>{"Escape"===n.key&&(e.onCancelRename(),l!==e.name&&t(e.name))},[e,l]),o=(0,y.useCallback)(e=>{e.stopPropagation(),e.preventDefault()},[]),d=(0,y.useCallback)(e=>{e.preventDefault(),i()},[i]);return e.isRenaming?(0,a.jsx)("form",{className:"relative h-full w-full",onSubmit:d,children:(0,a.jsx)("input",{onKeyDown:r,onClick:o,ref:n,value:l,onChange:s,className:(0,c.QP)("border-none px-[3px] text-slate-11 font-normal text-sm bg-transparent leading-none -ml-1","focus:ring-2 ring-primary-8 focus:outline-none outline-none rounded-sm transition","left-[1px] right-[1px] inset-y-[1px] absolute text-slate-12 font-medium")})}):(0,a.jsx)("div",{className:"truncate",children:e.name})}let Q=(0,c.QP)("h-8 rounded-md p-1.5 text-sm font-normal text-slate-11 transition","w-full hover:bg-slate-2 active:bg-slate-4","focus-visible:ring-2 focus:ring-primary-8 focus:outline-none","hover:text-slate-12 focus:z-10","flex items-center justify-start gap-x-2 truncate"),q=(0,c.QP)("bg-slate-3 text-slate-12 hover:text-slate-12 font-medium hover:bg-slate-3 active:bg-slate-3 active:text-slate-12"),U=(0,b.PA)(function(e){var n,l,t;let i=(0,p.useFragment)(K,e.agentDefinitionFragmentRef),s=(0,p.useFragment)(I,e.identityFragmentRef);!function(e,n){let l=!(arguments.length>2)||void 0===arguments[2]||arguments[2],a=(0,p.useRelayEnvironment)();(0,y.useEffect)(()=>{if(!l)return;let t=(0,P.F)("AgentDefinition",n);"tasks"===e&&(0,L.u)(a,D.threadsLayoutQuery,{nodeId:t,count:R.cV}),"editor"===e&&(0,L.u)(a,_.editorLayoutQuery,{nodeId:t}),"settings"===e&&(0,L.u)(a,w.settingsLayoutQuery,{nodeId:t})},[a,e,n,l])}(e.view,i.id,e.shouldPrefetch);let[r]=(0,N.HC)(),o=(0,y.useRef)(null),d=(0,C.j)(),u=(0,B.useRouter)(),g=(0,A.R)(),m=null===(n=F.a.lindies.lindyById.get(i.id))||void 0===n?void 0:n.lastVisitedView,f=(0,G.nr)(i.id,i.name),h="/".concat(f,"/").concat(m||e.view),k=g.pathname.startsWith("/"+f),x=(0,V.HI)(null===(l=i.icon)||void 0===l?void 0:l.name),v=(0,V.Rz)(null===(t=i.icon)||void 0===t?void 0:t.color),[b,S]=(0,y.useState)(!1),O=(0,y.useCallback)(()=>{d.onClose(),S(!0)},[d]),U=(0,y.useCallback)(()=>{S(!1)},[]),W=(0,y.useCallback)(e=>{S(!1),r({variables:{name:e,ownerId:s.id,agentDefinitionId:i.id}})},[i,r,s]),H=(0,y.useCallback)(()=>{if(k){if(e.adjacentLindyId){let n=(0,G.nr)(e.adjacentLindyId);u.push("/".concat(n,"/").concat(e.view),void 0,{shallow:!0});return}u.push("/home",void 0,{shallow:!0})}},[k,e.adjacentLindyId,e.view,u]),$=i.notificationsCount>0;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{children:(0,a.jsxs)(T(),{ref:o,shallow:!0,href:h,className:(0,c.QP)(Q,"grid grid-cols-[auto,1fr] w-full",$&&"grid-cols-[auto,1fr,auto]",(k||d.isOpen)&&q),children:[(0,a.jsx)(M.l,{className:"size-5",icon:x,color:v}),(0,a.jsx)(z,{isRenaming:b,name:i.name,onNameChange:W,onCancelRename:U},i.name),$&&!i.isMuted&&(0,a.jsx)("div",{className:"flex items-center justify-end",children:(0,a.jsx)(E.S,{children:i.notificationsCount})})]})}),(0,a.jsx)(j.S,{agentDefinitionFragmentRef:i,identityFragmentRef:s,onClickRename:O,targetRef:o,isOpen:d.isOpen,onOpen:d.onOpen,onClose:d.onClose,onDelete:H})]})});var W=l(11035),H=l(91657),$=function(e){return e.GROWING="growing",e.SHRINKING="shrinking",e.NONE="none",e}({}),Z=l(57511),Y=l(73850);function J(e){return(0,a.jsx)("button",{onClick:e.onClick,className:(0,c.QP)(Q,e.active&&q,e.className),children:e.children})}function X(e){return(0,a.jsx)("span",{className:(0,c.QP)("flex h-6 items-center",e.className),children:e.children})}var ee=l(20024),en=l(93652),el=l(44446);let ea=(0,b.PA)(function(e){let n=(0,B.useRouter)(),l=(0,C.j)(),t=(0,y.useCallback)(async(e,a)=>{if(l.onClose(),a){await n.push("/".concat(e,"/editor"));return}await n.push("/".concat(e,"/editor?newLindy=true"))},[l,n]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(J,{onClick:l.onOpen,children:[(0,a.jsx)(ee.c,{className:"size-5"}),(0,a.jsx)(X,{children:"New Lindy"})]}),(0,a.jsx)(Y.aF,{open:l.isOpen,setClosed:l.onClose,className:"overflow-hidden sm:max-w-[600px]",children:(0,a.jsx)(y.Suspense,{fallback:(0,a.jsx)(el.V,{}),children:(0,a.jsx)(en.EG,{identityFragmentRef:e.identityFragmentRef,onCreate:t,toggle:l.onToggle,folderClientId:null})})})]})});var et=l(40998);function ei(e){return(0,a.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{d:"M8.75 6.458 6.092 9.116a1.25 1.25 0 0 0 0 1.768L8.75 13.54M17.708 10H5.833M2.292 3.958v12.083",stroke:"#889096",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})})}function es(e){return(0,a.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{d:"M2.292 4.792v9.583c0 .92.746 1.667 1.666 1.667h12.084c.92 0 1.666-.747 1.666-1.667V7.292c0-.92-.746-1.667-1.666-1.667h-5.15a1.667 1.667 0 0 1-1.387-.742l-.677-1.016a1.667 1.667 0 0 0-1.387-.742H3.958c-.92 0-1.666.746-1.666 1.667Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}function er(e){return(0,a.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{d:"m16.195 6.902-.495.564.495-.564Zm-.07 1.503v6.47h1.5v-6.47h-1.5Zm-12.25 6.47v-6.47h-1.5v6.47h1.5Zm.425-7.41 4.875-4.283-.99-1.127L3.31 6.339l.99 1.127Zm6.525-4.283L15.7 7.466l.99-1.127-4.875-4.284-.99 1.127Zm.3 10.984v1.709h1.5v-1.709h-1.5Zm-2.25 1.709v-1.709h-1.5v1.709h1.5Zm-1.75.25h-2v1.5h2v-1.5Zm5.75 1.5h2v-1.5h-2v1.5Zm-5.5-1.75a.25.25 0 0 1-.25.25v1.5a1.75 1.75 0 0 0 1.75-1.75h-1.5Zm3.75 0c0 .966.784 1.75 1.75 1.75v-1.5a.25.25 0 0 1-.25-.25h-1.5ZM10 13.04c.621 0 1.125.504 1.125 1.125h1.5A2.625 2.625 0 0 0 10 11.541v1.5Zm0-1.5a2.625 2.625 0 0 0-2.625 2.625h1.5c0-.621.504-1.125 1.125-1.125v-1.5Zm-.825-8.36a1.25 1.25 0 0 1 1.65 0l.99-1.126a2.75 2.75 0 0 0-3.63 0l.99 1.127Zm-6.8 11.694a2.75 2.75 0 0 0 2.75 2.75v-1.5c-.69 0-1.25-.56-1.25-1.25h-1.5Zm13.75 0c0 .69-.56 1.25-1.25 1.25v1.5a2.75 2.75 0 0 0 2.75-2.75h-1.5Zm1.5-6.47c0-.791-.34-1.544-.935-2.066l-.99 1.127c.27.237.425.58.425.939h1.5Zm-13.75 0c0-.36.155-.702.425-.94L3.31 6.34a2.75 2.75 0 0 0-.935 2.066h1.5Z",fill:"currentColor"})})}var eo=l(48866),ed=l.n(eo);function eu(e){let{className:n,children:l,...t}=e;return(0,a.jsx)("div",{className:(0,c.QP)("relative flex items-center justify-center rounded overflow-hidden w-6 h-6",n),...t,children:l})}let ec={backgroundColor:"rgb(252,239,228)",color:"rgb(190,106,41)"};function eg(e){return e.url?(0,a.jsx)(ed(),{fill:!0,priority:!0,unoptimized:!0,src:e.url,alt:"User avatar",className:(0,c.QP)("h-full w-full object-cover")}):(0,a.jsx)("div",{style:ec,className:(0,c.QP)("h-full flex items-center justify-center w-full font-normal text-slate-12",e.className),children:e.userName.slice(0,1).toUpperCase()})}var em=l(41546);function ey(e){return(0,a.jsx)(T(),{shallow:!0,href:e.href,className:(0,c.QP)(Q,e.active&&q,e.className),onClick:e.onClick,children:e.children})}var ep=l(91141),ef=l(42168),eh=l(89389),ek=l(72548),eF=l(15599),ex=l(39776),ev=l(80202),eb=l(958),eS=l(85680);async function eT(e){var n,l;if(!(null===(n=(l=navigator).canShare)||void 0===n?void 0:n.call(l,e)))return!1;try{return await navigator.share(e),!0}catch(e){return!1}}var eK=l(49117),eI=l(1526),eC=l(87465),eA=l(72754),ej=l(42009),eN=l(77218),eL=l(35853),e_=l(31212);function ew(e){let n=(0,p.useRelayEnvironment)(),{isDark:l,toggleDark:t}=(0,eb.G)(),i=(0,y.useCallback)(()=>{(0,L.u)(n,eC.y_),(0,L.u)(n,eK.JG),(0,L.u)(n,eA.aE),(0,L.u)(n,eI.mM)},[n]),s=function(){let[,e]=(0,O.Cj)(),n=(0,eS.aV)();return(0,y.useCallback)(async()=>{await eT({title:"Lindy.ai",text:"Get things done 10x cheaper, 10x faster with your custom AI â€” no coding required.",url:"https://www.lindy.ai"})||await e("https://www.lindy.ai"),n({level:"success",label:"Link copied",message:"Referral link has been copied to your clipboard",duration:3e3})},[e,n])}(),r=(0,y.useContext)(W.d);return(0,a.jsx)(ep.W1,{children:n=>{let{open:o}=n;return(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{children:(0,a.jsx)(ep.IU,{onClick:i,className:(0,c.QP)("rounded-md p-2 transition hover:bg-slate-2 active:bg-slate-4","cursor-pointer transition outline-none w-full","focus-visible:ring-2 ring-offset-slate-1 focus:ring-primary-8 focus:outline-none focus:ring-offset-2"),"data-testid":"lindy.header.avatar",children:e.children})}),(0,a.jsxs)(ej.$b,{open:o,"data-testid":"lindy.header.menu",children:[(0,a.jsxs)(eL.R4,{"data-testid":"lindy.header.menu.settings",href:"/user-settings/general",className:"flex items-center gap-x-2",children:[(0,a.jsx)(ef.A,{className:"size-4"}),"Settings"]}),(0,a.jsx)(eL.bF,{className:"flex items-center gap-x-2",onClick:t,children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eN.Hf,{children:(0,a.jsx)(eh.A,{})}),"Light Mode"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eN.Hf,{children:(0,a.jsx)(ek.A,{})}),"Dark Mode"]})}),(0,a.jsxs)(eL.bF,{className:"flex items-center gap-x-2",onClick:s,children:[(0,a.jsx)(eN.Hf,{children:(0,a.jsx)(eF.A,{})}),"Share Lindy"]}),(0,a.jsxs)(eL.bF,{className:"flex items-center gap-x-2",onClick:null==r?void 0:r.toggle,children:[(0,a.jsx)(eN.Hf,{children:(0,a.jsx)(ex.A,{})}),"Send Feedback"]}),(0,a.jsx)(e_.N,{}),(0,a.jsxs)(eL.R4,{replace:!0,href:"/logout",className:"flex items-center gap-x-2 text-danger-9 hover:bg-red-3",children:[(0,a.jsx)(ev.A,{className:"size-4 stroke-red-8"}),"Logout"]})]})]})}})}let eR=(0,b.PA)(function(e){let n=(0,B.useRouter)(),l=(0,O.lW)(),t=function(){let e=(0,O.lW)(),[n,l]=(0,y.useState)(e),[a,t]=(0,y.useState)("none");return(0,O.ML)("resize",()=>{e.width>n.width?t("growing"):e.width<n.width?t("shrinking"):t("none"),l(e)}),a}(),i=F.a.ui.isCommonSidebarOpen,s=F.a.ui.isSidebarAutoClosed,r=l.width<=Z.T;(0,H.q)(em.S.ToggleCommonSidebar,F.a.ui.toggleCommonSidebar);let o=(0,y.useCallback)(()=>{s&&F.a.ui.setSidebarAutoClosed(!1),F.a.ui.setCommonSidebarOpen(!1)},[s]);return(0,O.ML)("resize",()=>{r&&i&&t===$.SHRINKING?(F.a.ui.setCommonSidebarOpen(!1),F.a.ui.setSidebarAutoClosed(!0)):r||i||!s||t!==$.GROWING?r||t!==$.SHRINKING||F.a.ui.setSidebarAutoClosed(!1):F.a.ui.setCommonSidebarOpen(!0)}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex h-14 items-center justify-between px-1.5 py-1",children:[(0,a.jsx)(W.T,{children:(0,a.jsx)(ew,{children:(0,a.jsxs)("div",{className:"flex w-full items-center gap-x-2",children:[(0,a.jsx)(eu,{className:"shrink-0",children:(0,a.jsx)(eg,{className:"text-sm",url:e.userAvatarUrl,userName:e.userName})}),(0,a.jsx)("div",{"data-testid":"user.name",className:"line-clamp-1 text-left text-sm font-medium text-slate-12",children:e.userName})]})})}),(0,a.jsx)(et.G,{children:(0,a.jsx)("button",{onClick:o,className:(0,c.QP)("rounded-md p-2 transition hover:bg-slate-2 active:bg-slate-4 relative","cursor-pointer transition outline-none h-8 w-8 flex items-center justify-center","focus-visible:ring-2 ring-offset-slate-1 focus:ring-primary-8 focus:outline-none focus:ring-offset-2"),children:(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)(ei,{className:"size-5 text-slate-12"})})})})]}),(0,a.jsxs)("div",{className:"flex w-full flex-col gap-y-1 px-1.5",children:[(0,a.jsxs)(ey,{active:"/home"===n.asPath,href:"/home",onClick:F.a.ui.resetHomeState,children:[(0,a.jsx)(er,{className:"size-5"}),(0,a.jsx)(X,{children:"Home"})]}),(0,a.jsxs)(ey,{active:"/my-lindies"===n.asPath,href:"/my-lindies",children:[(0,a.jsx)(es,{className:"size-5"}),(0,a.jsx)(X,{children:"My Lindies"})]}),(0,a.jsx)(ea,{identityFragmentRef:e.identityFragmentRef})]})]})});function eD(e){return(0,a.jsx)("div",{className:"grid h-full grid-rows-[auto,auto,1fr,auto] gap-y-4 bg-white dark:bg-slate-2",children:e.children})}var eP=l(51580),eM=l(53758),eE=l(76971);let eV=(0,b.PA)(function(e){var n,l,r;let o=(0,p.useFragment)(t,e.identityFragmentRef),d=null!==(r=null!==(l=e.view)&&void 0!==l?l:F.a.ui.lastVisitedView)&&void 0!==r?r:x.E,u=(0,y.useMemo)(()=>o.agentDefinitions.filter(e=>e.isFavorite).sort(eG),[o.agentDefinitions]),g=(0,y.useMemo)(()=>o.agentDefinitions.filter(e=>!e.isFavorite).sort(eG).slice(0,5),[o.agentDefinitions]);return!function(e){let n=(0,p.useRelayEnvironment)();(0,eP.S)(eE.B.agentDefinitions,"setLastRunAt",e,e=>{let l=(0,P.F)("AgentDefinition",e.agentDefinitionId);(0,f.commitLocalUpdate)(n,n=>{let a=n.get(l);a&&a.setValue(e.lastRunAt,"lastRunAt")})}),(0,eP.S)(eE.B.agentDefinitions,"setNotificationsCount",e,e=>{let l=(0,P.F)("AgentDefinition",e.agentDefinitionId);(0,f.commitLocalUpdate)(n,n=>{let a=n.get(l);a&&a.setValue(e.notificationsCount,"notificationsCount")})}),(0,eP.S)(eE.B.agentDefinitions,"stateGraphNodeUpdated",e,e=>{(0,eM.AL)(n,e.agentDefinitionId)})}(o.id),(0,a.jsxs)(eD,{children:[(0,a.jsx)(eR,{identityFragmentRef:o,userName:o.name,userAvatarUrl:null===(n=o.avatar)||void 0===n?void 0:n.url}),(0,a.jsx)(k.OY,{children:(0,a.jsxs)("div",{className:"mb-1.5 flex flex-col overflow-hidden px-1.5 pb-2",children:[u.length>0&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("div",{className:"mb-2 px-1.5 text-sm font-medium text-slate-9",children:"Favorites"}),(0,a.jsx)("div",{className:"flex flex-col gap-y-1",children:u.map((e,n)=>{var l,t,i,s;return(0,a.jsx)(U,{view:d,shouldPrefetch:n<3,agentDefinitionFragmentRef:e,identityFragmentRef:o,adjacentLindyId:null!==(s=null===(l=u.at(n+1))||void 0===l?void 0:l.id)&&void 0!==s?s:n>0?null===(t=u.at(n-1))||void 0===t?void 0:t.id:null===(i=g.at(0))||void 0===i?void 0:i.id},e.id)})})]}),g.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mb-2 px-1.5 text-sm font-medium text-slate-9",children:"Recents"}),(0,a.jsxs)("div",{className:"flex flex-col gap-y-1",children:[g.map((e,n)=>{var l,t,i,s;return(0,a.jsx)(U,{view:d,shouldPrefetch:0===n,agentDefinitionFragmentRef:e,identityFragmentRef:o,adjacentLindyId:null!==(s=null===(l=g.at(n+1))||void 0===l?void 0:l.id)&&void 0!==s?s:n>0?null===(t=g.at(n-1))||void 0===t?void 0:t.id:null===(i=u.at(0))||void 0===i?void 0:i.id},e.id)}),o.agentDefinitions.filter(e=>!e.isFavorite).length>5&&(0,a.jsxs)(T(),{href:"/my-lindies",className:(0,c.QP)(Q,"flex items-center"),children:[(0,a.jsx)(i.A,{className:"size-5"}),(0,a.jsx)(X,{children:"More"})]})]})]})]})}),(0,a.jsx)(h,{identityFragmentRef:o}),(0,a.jsx)(v.tH,{fallback:(0,a.jsx)(y.Fragment,{}),children:(0,a.jsx)(s.c,{identityFragmentRef:o})})]})});function eG(e,n){let l=new Date(e.lastRunAt||e.createdAt);return new Date(n.lastRunAt||n.createdAt).getTime()-l.getTime()}},24106:(e,n,l)=>{"use strict";l.d(n,{t:()=>s});var a=l(50612),t=l(79625),i=l(77218);let s=(0,l(94344).forwardRef)(function(e,n){return(0,a.jsxs)(i.VJ,{ref:n,onClick:e.onClick,children:[(0,a.jsx)(i.Hf,{children:(0,a.jsx)(t.A,{className:i.b3})}),(0,a.jsx)(i.AB,{children:"Duplicate"})]})})},67145:(e,n,l)=>{"use strict";l.d(n,{Q:()=>o});var a=l(50612),t=l(39274),i=l(90508),s=l(94344),r=l(25919);let o=(0,s.memo)(function(e){let{templateName:n,templateSubTitle:l,templateIcon:s,className:o,onClick:d}=e,u=(0,i.hq)(null==s?void 0:s.name),c=(0,i.jq)(null==s?void 0:s.color);return(0,a.jsxs)("div",{className:(0,r.QP)("xxl:max-w-[340px] group flex w-full cursor-pointer select-none flex-row items-start justify-start gap-x-3 rounded-md p-2 group-hover:bg-slate-3 hover:bg-slate-3  group-active:bg-slate-4 active:bg-slate-4 xl:max-w-[340px]",o),onClick:d,children:[(0,a.jsx)(t.l,{icon:u,color:c}),(0,a.jsxs)("div",{className:"flex w-full flex-col items-start gap-y-1",children:[(0,a.jsx)("div",{className:"group text-sm font-medium text-slate-12",children:n}),l&&(0,a.jsx)("div",{className:"line-clamp-2 text-sm font-normal text-slate-11",children:l})]})]})})},93652:(e,n,l)=>{"use strict";l.d(n,{EG:()=>_});var a=l(50612);let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CreateLindySection_Identity",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"CreateAgentMutationIdentityFragment"}],type:"Identity",abstractKey:null};t.hash="929612b486184563f603c90cd170fee6";let i=function(){var e={kind:"Literal",name:"forCreateLindyOnly",value:!0},n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"subTitle",storageKey:null},t={alias:null,args:null,concreteType:"AgentIcon",kind:"LinkedField",name:"icon",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null}],storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},r={alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null},o=[{kind:"Literal",name:"first",value:100},e];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CreateLindySectionTemplatesForCreateLindyQuery",selections:[{alias:"templates",args:[e],concreteType:"QueryTemplatesConnection",kind:"LinkedField",name:"__CreateLindySectionTemplatesForCreateLindyQuery_templates_connection",plural:!1,selections:[{alias:null,args:null,concreteType:"QueryTemplatesConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"AgentTemplateDefinition",kind:"LinkedField",name:"node",plural:!1,selections:[n,l,a,t,i],storageKey:null},s],storageKey:null},r],storageKey:"__CreateLindySectionTemplatesForCreateLindyQuery_templates_connection(forCreateLindyOnly:true)"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"CreateLindySectionTemplatesForCreateLindyQuery",selections:[{alias:null,args:o,concreteType:"QueryTemplatesConnection",kind:"LinkedField",name:"templates",plural:!1,selections:[{alias:null,args:null,concreteType:"QueryTemplatesConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"AgentTemplateDefinition",kind:"LinkedField",name:"node",plural:!1,selections:[n,l,a,t,{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},i],storageKey:null},s],storageKey:null},r],storageKey:"templates(first:100,forCreateLindyOnly:true)"},{alias:null,args:o,filters:["forCreateLindyOnly"],handle:"connection",key:"CreateLindySectionTemplatesForCreateLindyQuery_templates",kind:"LinkedHandle",name:"templates"}]},params:{cacheID:"a235fa04693b209268f3299066e12ffe",id:null,metadata:{connection:[{count:null,cursor:null,direction:"forward",path:["templates"]}]},name:"CreateLindySectionTemplatesForCreateLindyQuery",operationKind:"query",text:"query CreateLindySectionTemplatesForCreateLindyQuery {\n  templates(forCreateLindyOnly: true, first: 100) {\n    edges {\n      node {\n        id\n        name\n        subTitle\n        icon {\n          name\n          color\n        }\n        nodeId\n        __typename\n      }\n      cursor\n    }\n    pageInfo {\n      endCursor\n      hasNextPage\n    }\n  }\n}\n"}}}();i.hash="98db0878e64226f4565c57a703edfeff";var s=l(86278),r=l(85739),o=l(85680);let d=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},s={alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinition",plural:!1,selections:[t,i],storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},o={alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinitions",plural:!0,selections:[t,i,r,{alias:null,args:null,concreteType:"AgentIcon",kind:"LinkedField",name:"icon",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null}],storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"CreateAgentMutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"createAgent",plural:!1,selections:[l,a,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CreateAgentOutput",kind:"LinkedField",name:"data",plural:!1,selections:[s,{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CreateAgentMutationIdentityFragment"}],storageKey:null}],storageKey:null}],type:"MutationCreateAgentSuccess",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"CreateAgentMutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"createAgent",plural:!1,selections:[l,a,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CreateAgentOutput",kind:"LinkedField",name:"data",plural:!1,selections:[s,{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:[t,i,o,{alias:null,args:null,concreteType:"AgentFolders",kind:"LinkedField",name:"agentFolders",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentRootFolder",kind:"LinkedField",name:"root",plural:!1,selections:[o],storageKey:null},{alias:null,args:null,concreteType:"AgentFolder",kind:"LinkedField",name:"folders",plural:!0,selections:[t,{alias:null,args:null,kind:"ScalarField",name:"clientId",storageKey:null},o],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationCreateAgentSuccess",abstractKey:null}],storageKey:null}]},params:{cacheID:"d3e4c49d0f2bbdb90c0b5bee460d8450",id:null,metadata:{},name:"CreateAgentMutation",operationKind:"mutation",text:"mutation CreateAgentMutation(\n  $input: CreateAgentInput!\n) {\n  createAgent(input: $input) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationCreateAgentSuccess {\n      data {\n        agentDefinition {\n          id\n          nodeId\n        }\n        owner {\n          ...CreateAgentMutationIdentityFragment\n          nodeId\n        }\n      }\n    }\n  }\n}\n\nfragment CreateAgentMutationIdentityFragment on Identity {\n  id\n  nodeId\n  agentDefinitions {\n    id\n    nodeId\n    name\n    icon {\n      name\n      color\n    }\n  }\n  agentFolders {\n    root {\n      agentDefinitions {\n        id\n        nodeId\n        name\n        icon {\n          name\n          color\n        }\n      }\n    }\n    folders {\n      id\n      clientId\n      agentDefinitions {\n        id\n        nodeId\n        name\n        icon {\n          name\n          color\n        }\n      }\n    }\n  }\n}\n"}}}();d.hash="42bbc43f1bcc8598375e91126eb48b7e";let u=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},a={alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinitions",plural:!0,selections:[e,n,l,{alias:null,args:null,concreteType:"AgentIcon",kind:"LinkedField",name:"icon",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null}],storageKey:null}],storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CreateAgentMutationIdentityFragment",selections:[e,n,a,{alias:null,args:null,concreteType:"AgentFolders",kind:"LinkedField",name:"agentFolders",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentRootFolder",kind:"LinkedField",name:"root",plural:!1,selections:[a],storageKey:null},{alias:null,args:null,concreteType:"AgentFolder",kind:"LinkedField",name:"folders",plural:!0,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"clientId",storageKey:null},a],storageKey:null}],storageKey:null}],type:"Identity",abstractKey:null}}();u.hash="27db19cf781d4126f2a94e13b5789e5f";var c=l(20923),g=l(91777),m=l(67434),y=l(98502),p=l(94344),f=l(79124);l(97244);let h=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"InstallAgentTemplateMutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"installAgentTemplate",plural:!1,selections:[l,a,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"InstallAgentTemplateOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinition",plural:!1,selections:[t],storageKey:null}],storageKey:null}],type:"MutationInstallAgentTemplateSuccess",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"InstallAgentTemplateMutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"installAgentTemplate",plural:!1,selections:[l,a,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"InstallAgentTemplateOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinition",plural:!1,selections:[t,{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationInstallAgentTemplateSuccess",abstractKey:null}],storageKey:null}]},params:{cacheID:"c7f6d28f9ca09b43d1a3a096164610bb",id:null,metadata:{},name:"InstallAgentTemplateMutation",operationKind:"mutation",text:"mutation InstallAgentTemplateMutation(\n  $input: InstallAgentTemplateInput!\n) {\n  installAgentTemplate(input: $input) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationInstallAgentTemplateSuccess {\n      data {\n        agentDefinition {\n          id\n          nodeId\n        }\n      }\n    }\n  }\n}\n"}}}();h.hash="5c18924f157105ab238b14ddf8dc4b81";var k=l(90769),F=l(67373),x=l(91871),v=l(85926),b=l(76804),S=l(18099),T=l(98448),K=l(95674),I=l(81486),C=l(81778),A=l(25919),j=l(67145),N=l(66153);function L(e){return(0,a.jsxs)("button",{className:(0,A.QP)("flex w-full cursor-pointer items-center gap-3 rounded-xl border border-slate-4 bg-white p-4 shadow-sm hover:bg-slate-3 active:bg-slate-4 dark:bg-slate-1",x.Y),onClick:e.onClick,children:[(0,a.jsx)("div",{className:"inline-flex h-12 w-12 items-center justify-center rounded-lg bg-amber-3",children:(0,a.jsx)(N.f,{className:"h-[22px] w-[22px]"})}),(0,a.jsx)("div",{className:"text-lg font-semibold text-slate-12",children:"Start from scratch"})]})}function _(e){let n=(0,f.useFragment)(t,e.identityFragmentRef),l=(0,f.useLazyLoadQuery)(i,{}),[N,_]=function(e){let n=(0,f.useFragment)(u,e),[l,a]=(0,f.useMutation)(d),t=(0,o.aV)(),i=(0,p.useCallback)(e=>{t({id:"create-agent-mutation-error",level:"danger",label:"Error",message:null!=e?e:"An error occurred while trying create your new Lindy",duration:3e3})},[t]),s=(0,p.useCallback)(e=>{l({variables:e.variables,optimisticResponse:function(e,n){let l=new g.GD().toHexString(),a=(0,c.F)("AgentDefinition",l),t=(0,y.jM)(n,n=>{let t={id:l,nodeId:a,name:e.input.name||"New Lindy",icon:e.input.icon||null};if(e.input.folderClientId){let l=n.agentFolders.folders.find(n=>n.clientId===e.input.folderClientId);l&&l.agentDefinitions.push(t)}else n.agentFolders.root.agentDefinitions.push(t);n.agentDefinitions.push(t)});return{createAgent:{__typename:"MutationCreateAgentSuccess",__isError:"MutationCreateAgentSuccess",message:"",data:{agentDefinition:{id:l,nodeId:a},owner:{id:n.id,nodeId:n.nodeId,agentDefinitions:t.agentDefinitions.map(e=>({id:e.id,nodeId:e.nodeId,name:e.name,icon:e.icon})),agentFolders:{folders:t.agentFolders.folders.map(e=>({id:e.id,clientId:e.clientId,agentDefinitions:e.agentDefinitions.map(e=>({id:e.id,nodeId:e.nodeId,name:e.name,icon:e.icon}))})),root:{agentDefinitions:t.agentFolders.root.agentDefinitions.map(e=>({id:e.id,nodeId:e.nodeId,name:e.name,icon:e.icon}))}}}}}}}(e.variables,n),onError:e=>{m.Cp(e),i()},onCompleted:n=>{var l,a;"Error"===n.createAgent.__typename&&i(n.createAgent.message);let t=null==n?void 0:null===(l=n.createAgent)||void 0===l?void 0:l.data;t&&(null===(a=e.onSuccess)||void 0===a||a.call(e,t))}})},[l,i,n]);return(0,p.useMemo)(()=>[s,a],[s,a])}(n),[w,R]=(0,f.useMutation)(h),D=_||R,P=(0,o.aV)(),M=(0,p.useCallback)(e=>{P({id:"create-lindy-mutation",level:"danger",label:"Error",message:e,duration:3e3})},[P]),E=(0,p.useCallback)(()=>{var l,a;if(D)return;let t=null!==(l=(0,S.i)(I.D))&&void 0!==l?l:I.D.BotIcon,i=null!==(a=(0,S.i)(K.fJ))&&void 0!==a?a:K.fJ.Blue;N({variables:{input:{identityId:n.id,icon:(0,T.wl)(t,i),folderClientId:e.folderClientId}},onSuccess:n=>{e.onCreate(n.agentDefinition.id,!1)}})},[N,n.id,e,D]),V=(0,p.useCallback)(l=>()=>{D||w({variables:{input:{identityId:n.id,templateId:l,origin:(0,T.eD)(k.rt.CreateLindyModal,k.rt),folderClientId:e.folderClientId}},onCompleted:n=>{var l,a;n.installAgentTemplate.message&&M(null!==(a=n.installAgentTemplate.message)&&void 0!==a?a:"An unexpected error occurred while creating the folder"),"MutationInstallAgentTemplateSuccess"===n.installAgentTemplate.__typename&&(null===(l=n.installAgentTemplate.data)||void 0===l?void 0:l.agentDefinition)&&e.onCreate(n.installAgentTemplate.data.agentDefinition.id,!0)}})},[w,n.id,e,D,M]),G=(0,C.useRouter)(),B=(0,p.useCallback)(()=>{"/home"===G.pathname?e.toggle():G.push("/home",void 0,{shallow:!0})},[G,e]);return(0,a.jsxs)("div",{className:(0,A.QP)(D&&"pointer-events-none opacity-40","h-full w-full grid grid-rows-[auto,auto,auto,1fr,auto] overflow-y-hidden relative"),children:[D&&(0,a.jsx)("div",{className:"absolute flex size-full items-center justify-center",children:(0,a.jsx)(b.y,{size:"lg"})}),(0,a.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-2xl font-semibold text-slate-12",children:"New Lindy"}),(0,a.jsx)(r.K,{onClick:e.toggle,className:(0,A.QP)("mr-0 border-transparent hover:border-slate-6",x.Y),children:(0,a.jsx)(s.A,{className:"size-5 stroke-[2px] text-gray-11"})})]}),(0,a.jsx)("div",{className:"mb-10",children:(0,a.jsx)(L,{onClick:E})}),(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"pb-3 text-sm text-slate-11",children:"Or choose from our templates:"})}),(0,a.jsx)("div",{className:"size-full overflow-y-hidden",children:(0,a.jsx)(v.OY,{children:(0,a.jsx)("div",{className:"grid w-full grid-cols-2 gap-6",children:l.templates.edges.map(e=>{var n,l,t;if(!(null==e?void 0:e.node))return null;let i=(0,T._0)(null===(n=e.node.icon)||void 0===n?void 0:n.name,null===(l=e.node.icon)||void 0===l?void 0:l.color);return(0,a.jsx)(j.Q,{templateName:e.node.name,templateSubTitle:null!==(t=e.node.subTitle)&&void 0!==t?t:void 0,templateIcon:i,onClick:V(e.node.id)},e.node.id)})})})}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)(F.$,{level:"outline",onClick:B,children:"See all templates"})})]})}},44446:(e,n,l)=>{"use strict";l.d(n,{V:()=>i});var a=l(50612),t=l(76804);function i(){return(0,a.jsx)("div",{className:"flex h-72 items-center justify-center",children:(0,a.jsx)(t.y,{size:"lg"})})}},40998:(e,n,l)=>{"use strict";l.d(n,{G:()=>o});var a=l(50612),t=l(37361),i=l(13941),s=l(66679),r=l(31284);let o=(0,l(8678).PA)(function(e){let n=(0,t.AD)();return r.a.ui.isCommonSidebarAnimating?(0,a.jsx)(a.Fragment,{children:e.children}):(0,a.jsxs)(s.m_,{children:[(0,a.jsx)(s.k$,{asChild:!0,children:e.children}),(0,a.jsx)(s.ZI,{openDelay:.5,children:(0,a.jsxs)("div",{className:"flex items-center gap-x-1",children:["Toggle ",(0,a.jsx)(i.n,{children:n})," ",(0,a.jsx)(i.n,{children:"/"})]})})]})})},86192:(e,n,l)=>{"use strict";l.d(n,{KA:()=>g});let a=function(){var e={defaultValue:null,kind:"LocalArgument",name:"agentId"},n={defaultValue:null,kind:"LocalArgument",name:"ownerId"},l=[{fields:[{kind:"Variable",name:"agentDefinitionId",variableName:"agentId"},{kind:"Variable",name:"identityId",variableName:"ownerId"}],kind:"ObjectValue",name:"input"}],a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},t={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},o={alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinitions",plural:!0,selections:[i,r,s,{alias:null,args:null,concreteType:"AgentIcon",kind:"LinkedField",name:"icon",plural:!1,selections:[s,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[e,n],kind:"Fragment",metadata:null,name:"CopyAgentDefinitionMutation",selections:[{alias:null,args:l,concreteType:null,kind:"LinkedField",name:"copyAgent",plural:!1,selections:[a,t,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CopyAgentOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinition",plural:!1,selections:[i,s],storageKey:null},{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CopyAgentDefinitionMutationIdentityFragment"}],storageKey:null},{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"onboardingConversation",plural:!1,selections:[i],storageKey:null}],storageKey:null}],type:"MutationCopyAgentSuccess",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e],kind:"Operation",name:"CopyAgentDefinitionMutation",selections:[{alias:null,args:l,concreteType:null,kind:"LinkedField",name:"copyAgent",plural:!1,selections:[a,t,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CopyAgentOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinition",plural:!1,selections:[i,s,r],storageKey:null},{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:[i,r,o,{alias:null,args:null,concreteType:"AgentFolders",kind:"LinkedField",name:"agentFolders",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentRootFolder",kind:"LinkedField",name:"root",plural:!1,selections:[o],storageKey:null},{alias:null,args:null,concreteType:"AgentFolder",kind:"LinkedField",name:"folders",plural:!0,selections:[i,o],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"onboardingConversation",plural:!1,selections:[i,r],storageKey:null}],storageKey:null}],type:"MutationCopyAgentSuccess",abstractKey:null}],storageKey:null}]},params:{cacheID:"6c920fe3e6d53ad68b811dbb4bec49be",id:null,metadata:{},name:"CopyAgentDefinitionMutation",operationKind:"mutation",text:"mutation CopyAgentDefinitionMutation(\n  $ownerId: ID!\n  $agentId: ID!\n) {\n  copyAgent(input: {identityId: $ownerId, agentDefinitionId: $agentId}) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationCopyAgentSuccess {\n      data {\n        agentDefinition {\n          id\n          name\n          nodeId\n        }\n        owner {\n          ...CopyAgentDefinitionMutationIdentityFragment\n          nodeId\n        }\n        onboardingConversation {\n          id\n          nodeId\n        }\n      }\n    }\n  }\n}\n\nfragment CopyAgentDefinitionMutationIdentityFragment on Identity {\n  id\n  nodeId\n  agentDefinitions {\n    id\n    nodeId\n    name\n    icon {\n      name\n      color\n    }\n    createdAt\n  }\n  agentFolders {\n    root {\n      agentDefinitions {\n        id\n        nodeId\n        name\n        icon {\n          name\n          color\n        }\n        createdAt\n      }\n    }\n    folders {\n      id\n      agentDefinitions {\n        id\n        nodeId\n        name\n        icon {\n          name\n          color\n        }\n        createdAt\n      }\n    }\n  }\n}\n"}}}();a.hash="f3209c7ce9cea6013d49617d9c241869";let t=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},a={alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinitions",plural:!0,selections:[e,n,l,{alias:null,args:null,concreteType:"AgentIcon",kind:"LinkedField",name:"icon",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null}],storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CopyAgentDefinitionMutationIdentityFragment",selections:[e,n,a,{alias:null,args:null,concreteType:"AgentFolders",kind:"LinkedField",name:"agentFolders",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentRootFolder",kind:"LinkedField",name:"root",plural:!1,selections:[a],storageKey:null},{alias:null,args:null,concreteType:"AgentFolder",kind:"LinkedField",name:"folders",plural:!0,selections:[e,a],storageKey:null}],storageKey:null}],type:"Identity",abstractKey:null}}();t.hash="00a74a543b5f44cffe8c967774a5ab6d";var i=l(85680),s=l(20923),r=l(91777),o=l(67434),d=l(98502),u=l(94344),c=l(79124);function g(e){let n=(0,c.useFragment)(t,e),l=(0,i.aV)(),g=(0,u.useCallback)(e=>{l({id:"copy-agent-definition-error",level:"danger",label:"Error",message:null!=e?e:"An unexpected error occurred while trying to duplicate your Lindy",duration:3e3})},[l]),[m,y]=(0,c.useMutation)(a),p=(0,u.useCallback)(e=>{m({variables:e.variables,optimisticResponse:function(e,n){let l="Copy",a=(0,d.jM)(n,n=>{let a=n.agentDefinitions.find(n=>n.id===e.agentId);if(!a)return;let t=new r.GD().toString(),i=(0,s.F)("AgentDefinition",t),o={id:t,nodeId:i,name:l="".concat(a.name," (Copy)"),icon:a.icon&&{name:a.icon.name,color:a.icon.color},createdAt:new Date().toISOString()};for(let l of n.agentFolders.root.agentDefinitions)if(l.id===e.agentId){n.agentFolders.root.agentDefinitions.push(o);break}for(let l of n.agentFolders.folders)for(let n of l.agentDefinitions)if(n.id===e.agentId){l.agentDefinitions.push(o);break}n.agentDefinitions.push(o)}),t=new r.GD().toString(),i=(0,s.F)("AgentDefinition",t);return{copyAgent:{__typename:"MutationCopyAgentSuccess",__isError:"MutationCopyAgentSuccess",message:"",data:{agentDefinition:{id:t,name:l,nodeId:i},owner:{id:a.id,nodeId:a.nodeId,agentDefinitions:a.agentDefinitions.map(e=>({id:e.id,nodeId:e.nodeId,name:e.name,icon:e.icon,createdAt:e.createdAt})),agentFolders:{root:{agentDefinitions:a.agentFolders.root.agentDefinitions.map(e=>({id:e.id,nodeId:e.nodeId,name:e.name,icon:e.icon,createdAt:e.createdAt}))},folders:a.agentFolders.folders.map(e=>({id:e.id,agentDefinitions:e.agentDefinitions.map(e=>({id:e.id,nodeId:e.nodeId,name:e.name,icon:e.icon,createdAt:e.createdAt}))}))}},onboardingConversation:null}}}}(e.variables,n),onError:e=>{o.Cp(e),g()},onCompleted:n=>{var l,a,t,i,s;if((null===(l=n.copyAgent)||void 0===l?void 0:l.__typename)==="Error"){g(n.copyAgent.message);return}if(!(null===(a=n.copyAgent.data)||void 0===a?void 0:a.agentDefinition)){g();return}null===(i=e.onSuccess)||void 0===i||i.call(e,{id:n.copyAgent.data.agentDefinition.id,name:n.copyAgent.data.agentDefinition.name,onboarding:{conversationId:null!==(s=null===(t=n.copyAgent.data.onboardingConversation)||void 0===t?void 0:t.id)&&void 0!==s?s:null}})}})},[m,g,n]);return(0,u.useMemo)(()=>[p,y],[p,y])}l(97244)},72768:(e,n,l)=>{"use strict";l.d(n,{k:()=>u});let a=function(){var e={defaultValue:null,kind:"LocalArgument",name:"agentId"},n={defaultValue:null,kind:"LocalArgument",name:"ownerId"},l=[{fields:[{kind:"Variable",name:"agentDefinitionId",variableName:"agentId"},{kind:"Variable",name:"id",variableName:"ownerId"}],kind:"ObjectValue",name:"input"}],a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},t={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},r={alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinitions",plural:!0,selections:[i,s],storageKey:null};return{fragment:{argumentDefinitions:[e,n],kind:"Fragment",metadata:null,name:"DeleteAgentDefinitionMutation",selections:[{alias:null,args:l,concreteType:null,kind:"LinkedField",name:"deleteAgent",plural:!1,selections:[a,t,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DeleteAgentOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"DeleteAgentDefinitionMutationFragment"}],storageKey:null}],storageKey:null}],type:"MutationDeleteAgentSuccess",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e],kind:"Operation",name:"DeleteAgentDefinitionMutation",selections:[{alias:null,args:l,concreteType:null,kind:"LinkedField",name:"deleteAgent",plural:!1,selections:[a,t,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DeleteAgentOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:[i,s,r,{alias:null,args:null,concreteType:"AgentFolders",kind:"LinkedField",name:"agentFolders",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentRootFolder",kind:"LinkedField",name:"root",plural:!1,selections:[r],storageKey:null},{alias:null,args:null,concreteType:"AgentFolder",kind:"LinkedField",name:"folders",plural:!0,selections:[i,r],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationDeleteAgentSuccess",abstractKey:null}],storageKey:null}]},params:{cacheID:"b02394392b767f93dacc0c74c1d0955f",id:null,metadata:{},name:"DeleteAgentDefinitionMutation",operationKind:"mutation",text:"mutation DeleteAgentDefinitionMutation(\n  $ownerId: ID!\n  $agentId: ID!\n) {\n  deleteAgent(input: {id: $ownerId, agentDefinitionId: $agentId}) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationDeleteAgentSuccess {\n      data {\n        owner {\n          ...DeleteAgentDefinitionMutationFragment\n          nodeId\n        }\n      }\n    }\n  }\n}\n\nfragment DeleteAgentDefinitionMutationFragment on Identity {\n  id\n  nodeId\n  agentDefinitions {\n    id\n    nodeId\n  }\n  agentFolders {\n    root {\n      agentDefinitions {\n        id\n        nodeId\n      }\n    }\n    folders {\n      id\n      agentDefinitions {\n        id\n        nodeId\n      }\n    }\n  }\n}\n"}}}();a.hash="a14ed06c273f76a52a40a3d643a74e44";let t=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},l={alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinitions",plural:!0,selections:[e,n],storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DeleteAgentDefinitionMutationFragment",selections:[e,n,l,{alias:null,args:null,concreteType:"AgentFolders",kind:"LinkedField",name:"agentFolders",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentRootFolder",kind:"LinkedField",name:"root",plural:!1,selections:[l],storageKey:null},{alias:null,args:null,concreteType:"AgentFolder",kind:"LinkedField",name:"folders",plural:!0,selections:[e,l],storageKey:null}],storageKey:null}],type:"Identity",abstractKey:null}}();t.hash="93be5148245db4e6aecb0f77aca30741";var i=l(85680),s=l(67434),r=l(98502),o=l(94344),d=l(79124);function u(e){let n=(0,d.useFragment)(t,e),l=(0,i.aV)(),u=(0,o.useCallback)(e=>{l({id:"delete-agent-definition-error",level:"danger",label:"Error",message:null!=e?e:"An unexpected error occurred while trying to delete your Lindy",duration:3e3})},[l]),[c,g]=(0,d.useMutation)(a),m=(0,o.useCallback)(e=>{c({variables:e.variables,optimisticResponse:function(e,n){let l=(0,r.jM)(n,n=>{let l=n=>n.id!==e.agentId;for(let e of(n.agentFolders.root.agentDefinitions=n.agentFolders.root.agentDefinitions.filter(l),n.agentFolders.folders))e.agentDefinitions=e.agentDefinitions.filter(l);n.agentDefinitions=n.agentDefinitions.filter(l)});return{deleteAgent:{__typename:"MutationDeleteAgentSuccess",__isError:"MutationDeleteAgentSuccess",message:"",data:{owner:{id:n.id,nodeId:n.nodeId,agentDefinitions:l.agentDefinitions.map(e=>({id:e.id,nodeId:e.nodeId})),agentFolders:{root:{agentDefinitions:l.agentFolders.root.agentDefinitions.map(e=>({id:e.id,nodeId:e.nodeId}))},folders:l.agentFolders.folders.map(e=>({id:e.id,agentDefinitions:e.agentDefinitions.map(e=>({id:e.id,nodeId:e.nodeId}))}))}}}}}}(e.variables,n),onError:e=>{s.Cp(e),u()},onCompleted:n=>{var l,a;if((null===(l=n.deleteAgent)||void 0===l?void 0:l.__typename)==="Error"){u(n.deleteAgent.message);return}null===(a=e.onSuccess)||void 0===a||a.call(e)}})},[c,u,n]);return(0,o.useMemo)(()=>[m,g],[m,g])}l(97244)},24263:(e,n,l)=>{"use strict";l.d(n,{HW:()=>d});let a=function(){var e={defaultValue:null,kind:"LocalArgument",name:"agentDefinitionId"},n={defaultValue:null,kind:"LocalArgument",name:"enabled"},l={defaultValue:null,kind:"LocalArgument",name:"ownerId"},a=[{alias:null,args:[{fields:[{kind:"Variable",name:"agentDefinitionId",variableName:"agentDefinitionId"},{kind:"Variable",name:"enabled",variableName:"enabled"},{kind:"Variable",name:"id",variableName:"ownerId"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"updateAgent",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UpdateAgentOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agent",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"enabled",storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationUpdateAgentSuccess",abstractKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n,l],kind:"Fragment",metadata:null,name:"UpdateAgentDefinitionEnabledMutation",selections:a,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[l,e,n],kind:"Operation",name:"UpdateAgentDefinitionEnabledMutation",selections:a},params:{cacheID:"53eb394bb6a20cefbc46416a730547da",id:null,metadata:{},name:"UpdateAgentDefinitionEnabledMutation",operationKind:"mutation",text:"mutation UpdateAgentDefinitionEnabledMutation(\n  $ownerId: ID!\n  $agentDefinitionId: ID!\n  $enabled: Boolean!\n) {\n  updateAgent(input: {id: $ownerId, agentDefinitionId: $agentDefinitionId, enabled: $enabled}) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationUpdateAgentSuccess {\n      data {\n        agent {\n          id\n          nodeId\n          enabled\n        }\n      }\n    }\n  }\n}\n"}}}();a.hash="a37c2f4abd860072dfd77501a7fa3907";var t=l(85680),i=l(20923),s=l(67434),r=l(94344),o=l(79124);function d(){let e=(0,t.aV)(),n=(0,r.useCallback)(n=>{e({id:"update-agent-definition-enabled-error",level:"danger",label:"Error",message:null!=n?n:"An unexpected error occurred while trying to update your Lindy's enabled status.",duration:3e3})},[e]),[l,d]=(0,o.useMutation)(a),u=(0,r.useCallback)(e=>{var a;l({variables:e.variables,optimisticResponse:(a=e.variables,{updateAgent:{__typename:"MutationUpdateAgentSuccess",__isError:"MutationUpdateAgentSuccess",message:"",data:{agent:{nodeId:(0,i.F)("AgentDefinition",a.agentDefinitionId),id:a.agentDefinitionId,enabled:a.enabled}}}}),onError:e=>{s.Cp(e),n()},onCompleted:e=>{var l;(null===(l=e.updateAgent)||void 0===l?void 0:l.__typename)==="Error"&&n(e.updateAgent.message)}})},[l,n]);return(0,r.useMemo)(()=>[u,d],[u,d])}l(97244)},22498:(e,n,l)=>{"use strict";l.d(n,{_E:()=>o});let a=function(){var e={defaultValue:null,kind:"LocalArgument",name:"agentDefinitionId"},n={defaultValue:null,kind:"LocalArgument",name:"isFavorite"},l={defaultValue:null,kind:"LocalArgument",name:"ownerId"},a=[{alias:null,args:[{fields:[{kind:"Variable",name:"agentDefinitionId",variableName:"agentDefinitionId"},{kind:"Variable",name:"id",variableName:"ownerId"},{kind:"Variable",name:"isFavorite",variableName:"isFavorite"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"updateAgent",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UpdateAgentOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agent",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isFavorite",storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationUpdateAgentSuccess",abstractKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n,l],kind:"Fragment",metadata:null,name:"UpdateAgentDefinitionIsFavoriteMutation",selections:a,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[l,e,n],kind:"Operation",name:"UpdateAgentDefinitionIsFavoriteMutation",selections:a},params:{cacheID:"7c7f1d2f21a174e276e938d296ea5dc1",id:null,metadata:{},name:"UpdateAgentDefinitionIsFavoriteMutation",operationKind:"mutation",text:"mutation UpdateAgentDefinitionIsFavoriteMutation(\n  $ownerId: ID!\n  $agentDefinitionId: ID!\n  $isFavorite: Boolean!\n) {\n  updateAgent(input: {id: $ownerId, agentDefinitionId: $agentDefinitionId, isFavorite: $isFavorite}) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationUpdateAgentSuccess {\n      data {\n        agent {\n          id\n          nodeId\n          isFavorite\n        }\n      }\n    }\n  }\n}\n"}}}();a.hash="151761bce9f658a5583703daac1a53ae";var t=l(85680),i=l(20923),s=l(94344),r=l(79124);function o(){let e=(0,t.aV)(),n=(0,s.useCallback)(n=>{e({id:"update-agent-definition-is-favorite-error",level:"danger",label:"Error",message:n,duration:3e3})},[e]),[l,o]=(0,r.useMutation)(a),d=(0,s.useCallback)(e=>{var a;l({variables:e.variables,optimisticResponse:(a=e.variables,{updateAgent:{__typename:"MutationUpdateAgentSuccess",__isError:"MutationUpdateAgentSuccess",message:"",data:{agent:{nodeId:(0,i.F)("AgentDefinition",a.agentDefinitionId),id:a.agentDefinitionId,isFavorite:a.isFavorite}}}}),onError:e=>{n(e.message)},onCompleted:e=>{var l,a;(null===(l=e.updateAgent)||void 0===l?void 0:l.__typename)==="Error"&&n(null!==(a=e.updateAgent.message)&&void 0!==a?a:"An unexpected error occurred while updating the Lindy")}})},[l,n]);return(0,s.useMemo)(()=>[d,o],[d,o])}l(97244)},43329:(e,n,l)=>{"use strict";l.d(n,{RW:()=>d});let a=function(){var e={defaultValue:null,kind:"LocalArgument",name:"agentDefinitionId"},n={defaultValue:null,kind:"LocalArgument",name:"isMuted"},l={defaultValue:null,kind:"LocalArgument",name:"ownerId"},a=[{alias:null,args:[{fields:[{kind:"Variable",name:"agentDefinitionId",variableName:"agentDefinitionId"},{kind:"Variable",name:"id",variableName:"ownerId"},{kind:"Variable",name:"isMuted",variableName:"isMuted"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"updateAgent",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UpdateAgentOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agent",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isMuted",storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationUpdateAgentSuccess",abstractKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n,l],kind:"Fragment",metadata:null,name:"UpdateAgentDefinitionIsMutedMutation",selections:a,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[l,e,n],kind:"Operation",name:"UpdateAgentDefinitionIsMutedMutation",selections:a},params:{cacheID:"84d4e9940866d476c477f4601c6f13d0",id:null,metadata:{},name:"UpdateAgentDefinitionIsMutedMutation",operationKind:"mutation",text:"mutation UpdateAgentDefinitionIsMutedMutation(\n  $ownerId: ID!\n  $agentDefinitionId: ID!\n  $isMuted: Boolean!\n) {\n  updateAgent(input: {id: $ownerId, agentDefinitionId: $agentDefinitionId, isMuted: $isMuted}) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationUpdateAgentSuccess {\n      data {\n        agent {\n          id\n          nodeId\n          isMuted\n        }\n      }\n    }\n  }\n}\n"}}}();a.hash="56aff109c5bf6d83b090350d9b914ea1";var t=l(85680),i=l(20923),s=l(67434),r=l(94344),o=l(79124);function d(){let e=(0,t.aV)(),n=(0,r.useCallback)(n=>{e({id:"update-agent-definition-is-muted-error",level:"danger",label:"Error",message:null!=n?n:"An unexpected error occurred while updating your Lindy's mute status",duration:3e3})},[e]),[l,d]=(0,o.useMutation)(a),u=(0,r.useCallback)(e=>{var a;l({variables:e.variables,optimisticResponse:(a=e.variables,{updateAgent:{__typename:"MutationUpdateAgentSuccess",__isError:"MutationUpdateAgentSuccess",message:"",data:{agent:{nodeId:(0,i.F)("AgentDefinition",a.agentDefinitionId),id:a.agentDefinitionId,isMuted:a.isMuted}}}}),onError:e=>{s.Cp(e),n()},onCompleted:e=>{var l;(null===(l=e.updateAgent)||void 0===l?void 0:l.__typename)==="Error"&&n(e.updateAgent.message)}})},[l,n]);return(0,r.useMemo)(()=>[u,d],[u,d])}l(97244)},86565:(e,n,l)=>{"use strict";l.d(n,{HC:()=>o});let a=function(){var e={defaultValue:null,kind:"LocalArgument",name:"agentDefinitionId"},n={defaultValue:null,kind:"LocalArgument",name:"name"},l={defaultValue:null,kind:"LocalArgument",name:"ownerId"},a=[{alias:null,args:[{fields:[{kind:"Variable",name:"agentDefinitionId",variableName:"agentDefinitionId"},{kind:"Variable",name:"id",variableName:"ownerId"},{kind:"Variable",name:"name",variableName:"name"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"updateAgent",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UpdateAgentOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agent",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationUpdateAgentSuccess",abstractKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n,l],kind:"Fragment",metadata:null,name:"UpdateAgentDefinitionNameMutation",selections:a,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[l,n,e],kind:"Operation",name:"UpdateAgentDefinitionNameMutation",selections:a},params:{cacheID:"fe656ec845b9009d5b2e0a509fc8af8b",id:null,metadata:{},name:"UpdateAgentDefinitionNameMutation",operationKind:"mutation",text:"mutation UpdateAgentDefinitionNameMutation(\n  $ownerId: ID!\n  $name: String!\n  $agentDefinitionId: ID!\n) {\n  updateAgent(input: {id: $ownerId, name: $name, agentDefinitionId: $agentDefinitionId}) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationUpdateAgentSuccess {\n      data {\n        agent {\n          id\n          nodeId\n          name\n        }\n      }\n    }\n  }\n}\n"}}}();a.hash="30cb4a675ce6d24e9dc1b5d75ee95993";var t=l(85680),i=l(20923),s=l(94344),r=l(79124);function o(){let e=(0,t.aV)(),n=(0,s.useCallback)(n=>{e({id:"update-agent-definition-name-error",level:"danger",label:"Error",message:null!=n?n:"An unexpected error occurred while trying to update your Lindy's name",duration:3e3})},[e]),[l,o]=(0,r.useMutation)(a),d=(0,s.useCallback)(e=>{l({variables:e.variables,optimisticResponse:function(e){let n=(0,i.F)("AgentDefinition",e.agentDefinitionId);return{updateAgent:{__typename:"MutationUpdateAgentSuccess",__isError:"MutationUpdateAgentSuccess",message:"",data:{agent:{id:e.agentDefinitionId,nodeId:n,name:e.name}}}}}(e.variables),onError:e=>{n(e.message)},onCompleted:e=>{var l,a;(null===(l=e.updateAgent)||void 0===l?void 0:l.__typename)==="Error"&&n(null!==(a=e.updateAgent.message)&&void 0!==a?a:"An unexpected error occurred while updating the Lindy")}})},[l,n]);return(0,s.useMemo)(()=>[d,o],[d,o])}l(97244)},33848:(e,n,l)=>{"use strict";l.d(n,{L:()=>r});let a=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:null,kind:"LinkedField",name:"updateCurrentAgentDefinition",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"UpdateCurrentAgentDefinitionMutation",selections:n,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"UpdateCurrentAgentDefinitionMutation",selections:n},params:{cacheID:"41582f4a0ea7c8296b437757c6d87a4e",id:null,metadata:{},name:"UpdateCurrentAgentDefinitionMutation",operationKind:"mutation",text:"mutation UpdateCurrentAgentDefinitionMutation(\n  $input: UpdateCurrentAgentDefinitionInput!\n) {\n  updateCurrentAgentDefinition(input: $input) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n  }\n}\n"}}}();a.hash="1fc93e87702dffd6b90f97817538a90b";var t=l(94344),i=l(79124),s=l(97244);function r(e){let n=(0,i.useRelayEnvironment)(),l=e.identityId,r=e.agentDefinitionId;(0,t.useEffect)(()=>{(0,s.commitMutation)(n,{mutation:a,variables:{input:{identityId:l,agentDefinitionId:r}}})},[l,r,n])}},14135:(e,n,l)=>{"use strict";l.r(n),l.d(n,{EditorLayout:()=>dl,editorLayoutQuery:()=>dn});var a=l(50612);let t=function(){var e={defaultValue:!1,kind:"LocalArgument",name:"hasTestRunId"},n={defaultValue:null,kind:"LocalArgument",name:"nodeId"},l={defaultValue:"",kind:"LocalArgument",name:"testRunId"},a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"isAdmin",storageKey:null},i=[{kind:"Variable",name:"id",variableName:"nodeId"}],s={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},o=[{kind:"Variable",name:"id",variableName:"testRunId"}],d={alias:null,args:null,kind:"ScalarField",name:"isFavorite",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"notificationsCount",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"isMuted",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},y={alias:null,args:null,concreteType:"AgentIcon",kind:"LinkedField",name:"icon",plural:!1,selections:[r,m],storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},f=[a,p],h={alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinitions",plural:!0,selections:[a,p,r,y,u],storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"creditAllocation",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"arePremiumFeaturesEnabled",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"fields",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"method",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"provider",storageKey:null},T={alias:null,args:null,kind:"ScalarField",name:"scopes",storageKey:null},K={alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null},I={alias:null,args:null,concreteType:"DynamicLoaderDefaultValue",kind:"LinkedField",name:"defaultValue",plural:!1,selections:[r,K],storageKey:null},C={alias:null,args:null,kind:"ScalarField",name:"dependencies",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},N={alias:null,args:null,kind:"ScalarField",name:"field",storageKey:null},L={alias:null,args:null,kind:"ScalarField",name:"icon",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"placeholder",storageKey:null},R=[I,C,A,j,N,L,_,w],D={alias:null,args:null,kind:"ScalarField",name:"tool",storageKey:null},P={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},M=[b,S],E={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"authConfig",plural:!1,selections:[s,{kind:"InlineFragment",selections:[b,S,T],type:"OAuth2AuthConfig",abstractKey:null},{kind:"InlineFragment",selections:[b,S,x],type:"CustomAuthConfig",abstractKey:null},{kind:"InlineFragment",selections:[x,b,S,T],type:"CustomOAuth2AuthConfig",abstractKey:null},{kind:"InlineFragment",selections:M,type:"TokenAuthConfig",abstractKey:null},{kind:"InlineFragment",selections:M,type:"PipedreamAuthConfig",abstractKey:null}],storageKey:null},V={alias:null,args:null,kind:"ScalarField",name:"statefulToolKey",storageKey:null},G=[{alias:null,args:null,kind:"ScalarField",name:"agentMessageReceivedSchema",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"immediateEdgeLabel",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"observableEdgeLabel",storageKey:null},V],B={alias:null,args:null,kind:"ScalarField",name:"isPremium",storageKey:null},O={alias:null,args:null,kind:"ScalarField",name:"createdByNodeId",storageKey:null},z={alias:null,args:null,concreteType:"Auth",kind:"LinkedField",name:"auth",plural:!1,selections:f,storageKey:null},Q=[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],q={alias:null,args:null,concreteType:"NodePosition",kind:"LinkedField",name:"position",plural:!1,selections:Q,storageKey:null},U={alias:null,args:null,kind:"ScalarField",name:"manuallyPositioned",storageKey:null},W={alias:null,args:null,kind:"ScalarField",name:"guidelines",storageKey:null},H={alias:null,args:null,kind:"ScalarField",name:"model",storageKey:null},$={alias:null,args:null,kind:"ScalarField",name:"requireConfirmation",storageKey:null},Z={alias:null,args:null,kind:"ScalarField",name:"tooltip",storageKey:null},Y={alias:null,args:null,kind:"ScalarField",name:"isRequired",storageKey:null},J={alias:null,args:null,kind:"ScalarField",name:"canBeSharedWithTemplate",storageKey:null},X=[v,w,A,Z,Y,J,P,x],ee=[v,w,A,Z,Y,J,P,x,{alias:null,args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],en={alias:null,args:null,kind:"ScalarField",name:"isContextDependent",storageKey:null},el={alias:null,args:null,kind:"ScalarField",name:"eventSchema",storageKey:null},ea={alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:f,storageKey:null},et={alias:null,args:null,kind:"ScalarField",name:"enabled",storageKey:null},ei={kind:"InlineFragment",selections:[p],type:"Node",abstractKey:"__isNode"},es={alias:null,args:null,kind:"ScalarField",name:"from",storageKey:null},er={alias:null,args:null,kind:"ScalarField",name:"to",storageKey:null},eo={alias:null,args:null,kind:"ScalarField",name:"inflectionY",storageKey:null},ed={alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinitions",plural:!0,selections:[a,u,{alias:null,args:null,kind:"ScalarField",name:"updatedAt",storageKey:null},p,r,y],storageKey:null},eu=[{kind:"Literal",name:"first",value:10}],ec=[{kind:"Literal",name:"shouldRemoveFieldsHiddenFromUI",value:!0}],eg={alias:null,args:ec,kind:"ScalarField",name:"payload",storageKey:"payload(shouldRemoveFieldsHiddenFromUI:true)"},em={alias:null,args:null,concreteType:"TriggerShouldRunCheck",kind:"LinkedField",name:"shouldRunCheck",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"shouldRun",storageKey:null},{alias:null,args:null,concreteType:"TriggerShouldRunCheckReason",kind:"LinkedField",name:"reasons",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"softFilter",storageKey:null}],storageKey:null},ey={alias:null,args:null,kind:"ScalarField",name:"llmSummary",storageKey:null};return{fragment:{argumentDefinitions:[e,n,l],kind:"Fragment",metadata:null,name:"EditorLayoutQuery",selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"me",plural:!1,selections:[a,t,{args:null,kind:"FragmentSpread",name:"CommonLayoutSidebarIdentityFragment"},{args:null,kind:"FragmentSpread",name:"useSaveAgentWithPremiumModal_Identity"},{args:null,kind:"FragmentSpread",name:"SubscriptionContext_Identity"},{args:null,kind:"FragmentSpread",name:"CommonLayout_Identity"}],storageKey:null},{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[s,{kind:"InlineFragment",selections:[a,r,{alias:null,args:null,concreteType:"StateGraph",kind:"LinkedField",name:"stateGraph",plural:!1,selections:[a],storageKey:null},{args:null,kind:"FragmentSpread",name:"HeaderTitleSection_AgentDefinition"},{args:null,kind:"FragmentSpread",name:"EditorGraphSectionAgentDefinitionFragment"},{args:null,kind:"FragmentSpread",name:"useSaveAgentWithPremiumModal_AgentDefinition"},{args:null,kind:"FragmentSpread",name:"SaveChangesOnLeavingModalAgentDefinitionFragment"},{args:null,kind:"FragmentSpread",name:"AgentEnabledSwitch_AgentDefinition"},{args:null,kind:"FragmentSpread",name:"HeaderNavButtons_AgentDefinition"}],type:"AgentDefinition",abstractKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"EditorGraphSectionQueryFragment"},{condition:"hasTestRunId",kind:"Condition",passingValue:!0,selections:[{alias:"stateGraphTestRun",args:o,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"EditorGraphSectionStateGraphTestRunFragment"}],type:"StateGraphTestRun",abstractKey:null}],storageKey:null}]}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e,l],kind:"Operation",name:"EditorLayoutQuery",selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"me",plural:!1,selections:[a,t,r,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"avatar",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinitions",plural:!0,selections:[a,r,d,{alias:null,args:null,kind:"ScalarField",name:"lastRunAt",storageKey:null},u,c,g,y,{alias:null,args:null,concreteType:"StateGraph",kind:"LinkedField",name:"stateGraph",plural:!1,selections:f,storageKey:null},p],storageKey:null},p,{alias:null,args:null,concreteType:"AgentFolders",kind:"LinkedField",name:"agentFolders",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentRootFolder",kind:"LinkedField",name:"root",plural:!1,selections:[h],storageKey:null},{alias:null,args:null,concreteType:"AgentFolder",kind:"LinkedField",name:"folders",plural:!0,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"clientId",storageKey:null},h],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"IdentityFlags",kind:"LinkedField",name:"flags",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"dismissedQualifiedSignupUpsell",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isQualifiedSignup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isMedicalScribe",storageKey:null},{alias:null,args:null,concreteType:"SubscriptionInfo",kind:"LinkedField",name:"billingInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"billingPeriodEndsAt",storageKey:null},{alias:null,args:null,concreteType:"SubscriptionPlan",kind:"LinkedField",name:"subscriptionPlan",plural:!1,selections:[r,k],storageKey:null},{alias:null,args:null,concreteType:"CreditsInfo",kind:"LinkedField",name:"creditsInfo",plural:!1,selections:[k,{alias:null,args:null,kind:"ScalarField",name:"consumed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"percentConsumed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"creditBalance",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"TrialInfo",kind:"LinkedField",name:"trialInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"expiresAt",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"SubscriptionFeatures",kind:"LinkedField",name:"features",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isEligibleForFreePlan",storageKey:null},F,{alias:null,args:null,kind:"ScalarField",name:"hasKnowledgeBaseIncreasedLimits",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"UpcomingPlan",kind:"LinkedField",name:"upcomingPlan",plural:!1,selections:[{alias:null,args:null,concreteType:"SubscriptionPlan",kind:"LinkedField",name:"subscriptionPlan",plural:!1,selections:[k,{alias:null,args:null,kind:"ScalarField",name:"planType",storageKey:null},r],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"startDate",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"billingVersion",storageKey:null},{alias:null,args:null,concreteType:"PaymentFailure",kind:"LinkedField",name:"lastPaymentFailure",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"date",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"enabledFeatureFlags",storageKey:null},{alias:null,args:null,concreteType:"Auth",kind:"LinkedField",name:"auth",plural:!0,selections:[x,a,{alias:null,args:null,kind:"ScalarField",name:"isConnected",storageKey:null},v,b,S,T,p],storageKey:null}],storageKey:null},{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[s,p,{kind:"InlineFragment",selections:[a,r,{alias:null,args:null,concreteType:"StateGraph",kind:"LinkedField",name:"stateGraph",plural:!1,selections:[a,p,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[s,{kind:"InlineFragment",selections:[a,{alias:null,args:null,concreteType:"StateGraphAction",kind:"LinkedField",name:"actionDefinition",plural:!1,selections:[{alias:null,args:null,concreteType:"ActionDetails",kind:"LinkedField",name:"action",plural:!1,selections:[{alias:null,args:null,concreteType:"DynamicLoaders",kind:"LinkedField",name:"dynamicLoaders",plural:!1,selections:[{alias:null,args:null,concreteType:"DynamicLoaderDetails",kind:"LinkedField",name:"loaders",plural:!0,selections:R,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"refetchInputAfterLoad",storageKey:null}],storageKey:null},p,{alias:null,args:null,kind:"ScalarField",name:"inputSchema",storageKey:null},_,D,{alias:null,args:null,kind:"ScalarField",name:"toolDisplayName",storageKey:null},C,A,j,{alias:null,args:null,concreteType:"InputTree",kind:"LinkedField",name:"inputTree",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"fields",plural:!0,selections:[s,{kind:"InlineFragment",selections:[P,_,{alias:null,args:null,kind:"ScalarField",name:"output",storageKey:null},j,A,w,I,L],type:"InputTreeDynamicField",abstractKey:null},{kind:"InlineFragment",selections:[P,{alias:null,args:null,kind:"ScalarField",name:"schema",storageKey:null},N],type:"InputTreeStaticField",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"parentFields",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"outputSchema",storageKey:null},E,{alias:null,args:null,kind:"ScalarField",name:"deprecated",storageKey:null},{alias:null,args:null,concreteType:"ObservableChannelMetadata",kind:"LinkedField",name:"observableChannel",plural:!1,selections:G,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasSideEffects",storageKey:null},B,{alias:null,args:null,kind:"ScalarField",name:"premiumActionCost",storageKey:null},{alias:null,args:null,concreteType:"ActionProperty",kind:"LinkedField",name:"outputProperties",plural:!0,selections:[j,P,K],storageKey:null}],storageKey:null},O,V,{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[p,A,j,{alias:null,args:null,kind:"ScalarField",name:"isPopular",storageKey:null},D],storageKey:null}],storageKey:null},z,P,p,j,q,U,{alias:null,args:null,concreteType:"ActionConfigurationMember",kind:"LinkedField",name:"actionConfiguration",plural:!0,selections:[P,{alias:null,args:null,kind:"ScalarField",name:"allowAdditionalArrayEntries",storageKey:null},{alias:null,args:null,concreteType:"ActionConfigurationMemberManualResult",kind:"LinkedField",name:"manualResult",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isUndefined",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isNull",storageKey:null},K],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"path",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"prompt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"unionType",storageKey:null}],storageKey:null},W,{alias:null,args:null,concreteType:"KnowledgeSource",kind:"LinkedField",name:"knowledgeSources",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"entryCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entryCountDisabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEnabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"source",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"syncStatus",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"syncToBeCompletedBy",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalFileSize",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalNumCharacters",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalNumEmbeddings",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalNumErrors",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalNumTokens",storageKey:null}],storageKey:null},H,{alias:null,args:null,kind:"ScalarField",name:"occurrence",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"statefulToolOccurrence",storageKey:null},$],type:"ActionNode",abstractKey:null},{kind:"InlineFragment",selections:[a,z,{alias:null,args:null,concreteType:"TriggerDefinition",kind:"LinkedField",name:"triggerDefinition",plural:!1,selections:[a,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"fields",plural:!0,selections:[s,_,{kind:"InlineFragment",selections:[v,w,A,Z,Y,J,P,x,{alias:"defaultText",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldText",abstractKey:null},{kind:"InlineFragment",selections:[v,w,A,Z,Y,J,P,x,{alias:"defaultNumber",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"step",storageKey:null}],type:"TriggerFieldNumber",abstractKey:null},{kind:"InlineFragment",selections:X,type:"TriggerFieldLindyEmbedConfig",abstractKey:null},{kind:"InlineFragment",selections:[v,w,A,Z,Y,J,P,x,{alias:"defaultDate",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldDateTime",abstractKey:null},{kind:"InlineFragment",selections:ee,type:"TriggerFieldAutoObserve",abstractKey:null},{kind:"InlineFragment",selections:[v,w,A,Z,Y,J,P,x,{alias:"defaultLindyMail",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldLindyMail",abstractKey:null},{kind:"InlineFragment",selections:[v,w,A,Z,Y,J,P,x,{alias:"defaultWebhook",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldLindyWebhook",abstractKey:null},{kind:"InlineFragment",selections:X,type:"TriggerFieldLindyPhoneNumber",abstractKey:null},{kind:"InlineFragment",selections:ee,type:"TriggerFieldElevenLabsVoice",abstractKey:null},{kind:"InlineFragment",selections:[v,w,A,Z,Y,J,P,x,{alias:"defaultRecurringSchedule",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldRecurringSchedule",abstractKey:null},{kind:"InlineFragment",selections:[v,w,A,Z,Y,J,P,x,{alias:"defaultChecked",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldCheckbox",abstractKey:null},{kind:"InlineFragment",selections:X,type:"TriggerFieldLabel",abstractKey:null},{kind:"InlineFragment",selections:[v,w,A,Z,Y,J,P,x,{alias:null,args:null,kind:"ScalarField",name:"aliases",storageKey:null}],type:"TriggerFieldComparableText",abstractKey:null},{kind:"InlineFragment",selections:[v,w,A,Z,Y,J,P,x,{alias:"defaultItem",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"selectFirstByDefault",storageKey:null},en],type:"TriggerFieldSelect",abstractKey:null},{kind:"InlineFragment",selections:[v,w,A,Z,Y,J,P,x,{alias:"defaultItems",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasAllowAllOption",storageKey:null},en],type:"TriggerFieldMultiSelect",abstractKey:null},{kind:"InlineFragment",selections:[v,w,A,Z,Y,J,P,x,{alias:null,args:null,concreteType:"DynamicLoaderDetails",kind:"LinkedField",name:"loader",plural:!1,selections:R,storageKey:null}],type:"TriggerFieldDynamicLoader",abstractKey:null}],storageKey:null},p,{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[D,j,p],storageKey:null},r,E,{alias:null,args:null,concreteType:"ToolTriggerChannel",kind:"LinkedField",name:"channel",plural:!1,selections:[V],storageKey:null},A,j,el,{alias:null,args:null,kind:"ScalarField",name:"hasPublishableConfig",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isHighThroughput",storageKey:null},B,{alias:null,args:null,concreteType:"ObservableChannelMetadata",kind:"LinkedField",name:"otherObservableChannel",plural:!1,selections:G,storageKey:null},{alias:null,args:null,concreteType:"TriggerTestingPolicy",kind:"LinkedField",name:"testingPolicy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"supportsSyntheticPayload",storageKey:null}],storageKey:null}],storageKey:null},P,p,j,q,U,{alias:null,args:null,kind:"ScalarField",name:"triggerSetup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"triggerEnabled",storageKey:null},{alias:null,args:null,concreteType:"Trigger",kind:"LinkedField",name:"trigger",plural:!1,selections:[a,ea,et,{alias:null,args:null,kind:"ScalarField",name:"isConfigured",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPendingVerification",storageKey:null},{alias:null,args:null,concreteType:"TriggerSetup",kind:"LinkedField",name:"setup",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"actionArgs",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"actionName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"toolName",storageKey:null}],storageKey:null},p],storageKey:null}],type:"EntryPointTriggerNode",abstractKey:null},ei,{kind:"InlineFragment",selections:[a,P,p,j,q,U,W,H,$,{alias:null,args:null,concreteType:"StateGraphAction",kind:"LinkedField",name:"actions",plural:!0,selections:[{alias:null,args:null,concreteType:"ActionDetails",kind:"LinkedField",name:"action",plural:!1,selections:[B,D,_,E,p],storageKey:null},O,V],storageKey:null}],type:"AgentStateNode",abstractKey:null},{kind:"InlineFragment",selections:[a,P,p,j,q,U,{alias:null,args:null,kind:"ScalarField",name:"greetingMessage",storageKey:null},{alias:null,args:null,concreteType:"ConversationStarter",kind:"LinkedField",name:"conversationStarters",plural:!0,selections:[K],storageKey:null}],type:"EntryPointConversationNode",abstractKey:null},{kind:"InlineFragment",selections:[a,P,p,j,q,U,H],type:"LogicNode",abstractKey:null}],storageKey:null},ea,{alias:null,args:null,kind:"ScalarField",name:"version",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"autoLayoutEnabled",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"edges",plural:!0,selections:[s,{kind:"InlineFragment",selections:[a,P,es,er,eo],type:"ObserveEdge",abstractKey:null},{kind:"InlineFragment",selections:[a,P,es,er,eo,{alias:null,args:null,kind:"ScalarField",name:"condition",storageKey:null},v],type:"StandardEdge",abstractKey:null},ei],storageKey:null},{alias:null,args:null,concreteType:"StateGraphStickyNote",kind:"LinkedField",name:"stickyNotes",plural:!0,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"note",storageKey:null},{alias:null,args:null,concreteType:"StickyNotePosition",kind:"LinkedField",name:"position",plural:!1,selections:Q,storageKey:null},p],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AgentIcon",kind:"LinkedField",name:"icon",plural:!1,selections:[m,r],storageKey:null},{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:[a,{alias:null,args:null,concreteType:"AgentFolders",kind:"LinkedField",name:"agentFolders",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentRootFolder",kind:"LinkedField",name:"root",plural:!1,selections:[ed],storageKey:null},{alias:null,args:null,concreteType:"AgentFolder",kind:"LinkedField",name:"folders",plural:!0,selections:[ed,a],storageKey:null}],storageKey:null},p,h,{alias:null,args:null,concreteType:"SubscriptionInfo",kind:"LinkedField",name:"billingInfo",plural:!1,selections:[{alias:null,args:null,concreteType:"SubscriptionFeatures",kind:"LinkedField",name:"features",plural:!1,selections:[F],storageKey:null}],storageKey:null}],storageKey:null},et,d,g,{alias:null,args:null,kind:"ScalarField",name:"instructions",storageKey:null},H,{alias:null,args:null,kind:"ScalarField",name:"shouldAskForConfirmation",storageKey:null},{alias:null,args:null,concreteType:"Memory",kind:"LinkedField",name:"memories",plural:!0,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"isActive",storageKey:null},K],storageKey:null},{alias:null,args:null,concreteType:"AgentDefinitionTag",kind:"LinkedField",name:"tags",plural:!0,selections:[a,v,p],storageKey:null},c],type:"AgentDefinition",abstractKey:null}],storageKey:null},{condition:"hasTestRunId",kind:"Condition",passingValue:!0,selections:[{alias:"stateGraphTestRun",args:o,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[s,p,{kind:"InlineFragment",selections:[a,{alias:null,args:null,kind:"ScalarField",name:"initiallySelectedNodeId",storageKey:null},{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[a,p,{alias:null,args:null,kind:"ScalarField",name:"entryPointNodeId",storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:5e3}],concreteType:"ConversationBlocksConnection",kind:"LinkedField",name:"blocks",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationBlocksConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ConversationBlock",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"content",plural:!1,selections:[s,{alias:null,args:null,kind:"ScalarField",name:"asJSON",storageKey:null}],storageKey:null},p],storageKey:null}],storageKey:null}],storageKey:"blocks(first:5000)"},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,concreteType:"ConversationChannel",kind:"LinkedField",name:"openChannels",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"startingNodeId",storageKey:null},V,{alias:null,args:null,kind:"ScalarField",name:"instanceKey",storageKey:null},O,{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[D,p,j],storageKey:null},P,p,a],storageKey:null},{alias:null,args:null,concreteType:"TriggerRunAttempt",kind:"LinkedField",name:"startingTriggerRunAttempt",plural:!1,selections:[a,p,{alias:null,args:null,kind:"ScalarField",name:"createdByExternalPayloadId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"payloadId",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Trigger",kind:"LinkedField",name:"liveCaptureTrigger",plural:!1,selections:[a,p,et,{alias:null,args:null,concreteType:"TriggerDefinition",kind:"LinkedField",name:"definition",plural:!1,selections:[r,{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[D,p],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"payloadSchema",storageKey:null},el,{alias:null,args:null,concreteType:"TriggerTestingPolicy",kind:"LinkedField",name:"testingPolicy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"fullyProcessLiveCapturePayloads",storageKey:null}],storageKey:null},p],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"activeLiveCapturingInstructions",storageKey:null},{alias:null,args:eu,concreteType:"TriggerTestingPayloadsConnection",kind:"LinkedField",name:"testingPayloads",plural:!1,selections:[{alias:null,args:null,concreteType:"TriggerTestingPayloadsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"TriggerTestingPayload",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"externalId",storageKey:null},eg,em,ey,p,s],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:"testingPayloads(first:10)"},{alias:null,args:eu,filters:null,handle:"connection",key:"RailsTestingTriggerEntryPointView_testingPayloads",kind:"LinkedHandle",name:"testingPayloads"},{alias:null,args:[{kind:"Literal",name:"first",value:50}],concreteType:"TriggerRunAttemptsConnection",kind:"LinkedField",name:"runAttempts",plural:!1,selections:[{alias:null,args:null,concreteType:"TriggerRunAttemptsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"TriggerRunAttempt",kind:"LinkedField",name:"node",plural:!1,selections:[a,eg,{alias:null,args:ec,kind:"ScalarField",name:"processedPayload",storageKey:"processedPayload(shouldRemoveFieldsHiddenFromUI:true)"},u,em,ey,p],storageKey:null}],storageKey:null}],storageKey:"runAttempts(first:50)"}],storageKey:null}],type:"StateGraphTestRun",abstractKey:null}],storageKey:null}]}]},params:{cacheID:"67775488321a13270ee541bbb218a857",id:null,metadata:{},name:"EditorLayoutQuery",operationKind:"query",text:'query EditorLayoutQuery(\n  $nodeId: ID!\n  $hasTestRunId: Boolean = false\n  $testRunId: ID = ""\n) {\n  me {\n    id\n    isAdmin\n    ...CommonLayoutSidebarIdentityFragment\n    ...useSaveAgentWithPremiumModal_Identity\n    ...SubscriptionContext_Identity\n    ...CommonLayout_Identity\n    nodeId\n  }\n  node(id: $nodeId) {\n    __typename\n    ... on AgentDefinition {\n      id\n      name\n      stateGraph {\n        id\n        nodeId\n      }\n      ...HeaderTitleSection_AgentDefinition\n      ...EditorGraphSectionAgentDefinitionFragment\n      ...useSaveAgentWithPremiumModal_AgentDefinition\n      ...SaveChangesOnLeavingModalAgentDefinitionFragment\n      ...AgentEnabledSwitch_AgentDefinition\n      ...HeaderNavButtons_AgentDefinition\n    }\n    nodeId\n  }\n  ...EditorGraphSectionQueryFragment\n  stateGraphTestRun: node(id: $testRunId) @include(if: $hasTestRunId) {\n    __typename\n    ... on StateGraphTestRun {\n      ...EditorGraphSectionStateGraphTestRunFragment\n    }\n    nodeId\n  }\n}\n\nfragment ActionNodeEditor_Identity on Identity {\n  ...CustomActionNodeEditor_Identity\n}\n\nfragment ActionNode_Identity on Identity {\n  ...CustomNode_Identity\n}\n\nfragment ActionTraceCard_AgentDefinition on AgentDefinition {\n  ...AgentUi_AgentDefinition\n}\n\nfragment ActionTraceCard_Identity on Identity {\n  ...AgentUi_Identity\n}\n\nfragment AgentContextMenuAgentDefinitionFragment on AgentDefinition {\n  id\n  name\n  isMuted\n  isFavorite\n  notificationsCount\n}\n\nfragment AgentContextMenuIdentityFragment on Identity {\n  id\n  ...DeleteAgentDefinitionMutationFragment\n  ...CopyAgentDefinitionMutationIdentityFragment\n}\n\nfragment AgentEnabledSwitch_AgentDefinition on AgentDefinition {\n  id\n  enabled\n  owner {\n    id\n    ...useSaveAgentWithPremiumModal_Identity\n    nodeId\n  }\n  ...useSaveAgentWithPremiumModal_AgentDefinition\n}\n\nfragment AgentSidebarItemAgentDefinitionFragment on AgentDefinition {\n  id\n  name\n  notificationsCount\n  isMuted\n  icon {\n    name\n    color\n  }\n  stateGraph {\n    id\n    nodeId\n  }\n  ...AgentContextMenuAgentDefinitionFragment\n}\n\nfragment AgentSidebarItemIdentityFragment on Identity {\n  id\n  ...AgentContextMenuIdentityFragment\n}\n\nfragment AgentStateNodeEditor_Identity on Identity {\n  ...NodeContextMenu_Identity\n}\n\nfragment AgentStateNode_Identity on Identity {\n  ...CustomNode_Identity\n}\n\nfragment AgentUi_AgentDefinition on AgentDefinition {\n  ...FormBuilder_AgentDefinition\n}\n\nfragment AgentUi_Identity on Identity {\n  ...FormBuilder_Identity\n}\n\nfragment BlockResponses_AgentDefinition on AgentDefinition {\n  ...ActionTraceCard_AgentDefinition\n}\n\nfragment BlockResponses_Identity on Identity {\n  ...ActionTraceCard_Identity\n}\n\nfragment CommonLayoutSidebarIdentityFragment on Identity {\n  id\n  name\n  avatar {\n    url\n  }\n  agentDefinitions {\n    id\n    name\n    isFavorite\n    lastRunAt\n    createdAt\n    ...AgentSidebarItemAgentDefinitionFragment\n    nodeId\n  }\n  ...CreateLindySection_Identity\n  ...QualifiedSignupCtaFooter_Identity\n  ...CreditsFooterMe\n  ...AgentSidebarItemIdentityFragment\n}\n\nfragment CommonLayout_Identity on Identity {\n  ...PlansModal_Identity\n}\n\nfragment ConversationViewQueryFragment on Query {\n  me {\n    ...PromptInputQueryFragment\n    ...SubscriptionContext_Identity\n    ...Transcript_Identity\n    nodeId\n  }\n}\n\nfragment ConversationView_AgentDefinition on AgentDefinition {\n  ...Transcript_AgentDefinition\n}\n\nfragment CopyAgentDefinitionMutationIdentityFragment on Identity {\n  id\n  nodeId\n  agentDefinitions {\n    id\n    nodeId\n    name\n    icon {\n      name\n      color\n    }\n    createdAt\n  }\n  agentFolders {\n    root {\n      agentDefinitions {\n        id\n        nodeId\n        name\n        icon {\n          name\n          color\n        }\n        createdAt\n      }\n    }\n    folders {\n      id\n      agentDefinitions {\n        id\n        nodeId\n        name\n        icon {\n          name\n          color\n        }\n        createdAt\n      }\n    }\n  }\n}\n\nfragment CreateAgentMutationIdentityFragment on Identity {\n  id\n  nodeId\n  agentDefinitions {\n    id\n    nodeId\n    name\n    icon {\n      name\n      color\n    }\n  }\n  agentFolders {\n    root {\n      agentDefinitions {\n        id\n        nodeId\n        name\n        icon {\n          name\n          color\n        }\n      }\n    }\n    folders {\n      id\n      clientId\n      agentDefinitions {\n        id\n        nodeId\n        name\n        icon {\n          name\n          color\n        }\n      }\n    }\n  }\n}\n\nfragment CreateLindySection_Identity on Identity {\n  id\n  ...CreateAgentMutationIdentityFragment\n}\n\nfragment CreditsFooterMe on Identity {\n  nodeId\n  isMedicalScribe\n  billingInfo {\n    billingPeriodEndsAt\n    subscriptionPlan {\n      name\n    }\n    creditsInfo {\n      creditAllocation\n      consumed\n      percentConsumed\n    }\n    trialInfo {\n      expiresAt\n    }\n  }\n  ...PlansModal_Identity\n}\n\nfragment CustomActionNodeEditor_Identity on Identity {\n  ...KnowledgeBaseNodeEditor_Identity\n}\n\nfragment CustomNode_Identity on Identity {\n  ...NodeContextMenu_Identity\n}\n\nfragment DeleteAgentDefinitionMutationFragment on Identity {\n  id\n  nodeId\n  agentDefinitions {\n    id\n    nodeId\n  }\n  agentFolders {\n    root {\n      agentDefinitions {\n        id\n        nodeId\n      }\n    }\n    folders {\n      id\n      agentDefinitions {\n        id\n        nodeId\n      }\n    }\n  }\n}\n\nfragment EditorGraphCanvas_Identity on Identity {\n  ...ActionNode_Identity\n  ...AgentStateNode_Identity\n  ...EntryPointNode_Identity\n  ...LogicNode_Identity\n}\n\nfragment EditorGraphSectionAgentDefinitionFragment on AgentDefinition {\n  ...EditorSidebarPanelAgentDefinitionFragment\n  ...LindyStoreLoader_AgentDefinition\n}\n\nfragment EditorGraphSectionQueryFragment on Query {\n  me {\n    ...LindyStoreLoader_Identity\n    ...EditorGraphCanvas_Identity\n    ...EditorGraphTools_Identity\n    nodeId\n  }\n  ...EditorSidebarPanelQueryFragment\n}\n\nfragment EditorGraphSectionStateGraphTestRunFragment on StateGraphTestRun {\n  ...EditorSidebarPanelStateGraphTestRunFragment\n}\n\nfragment EditorGraphTools_Identity on Identity {\n  ...Tools_Identity\n}\n\nfragment EditorSidebarPanelAgentDefinitionFragment on AgentDefinition {\n  ...RailsTestingAgentDefinitionFragment\n}\n\nfragment EditorSidebarPanelQueryFragment on Query {\n  ...RailsTestingQueryFragment\n  me {\n    ...GraphEntityEditorPanel_Identity\n    nodeId\n  }\n}\n\nfragment EditorSidebarPanelStateGraphTestRunFragment on StateGraphTestRun {\n  ...RailsTestingStateGraphTestRunFragment\n  ...RailsTestingStateGraphTestRunRefetchableFragment\n}\n\nfragment EntryPointNodeEditor_Identity on Identity {\n  ...NodeContextMenu_Identity\n}\n\nfragment EntryPointNode_Identity on Identity {\n  ...CustomNode_Identity\n}\n\nfragment Execution_AgentDefinition on AgentDefinition {\n  ...BlockResponses_AgentDefinition\n}\n\nfragment Execution_Identity on Identity {\n  ...BlockResponses_Identity\n}\n\nfragment FormBuilderActionField_ActionNode on ActionNode {\n  __typename\n  actionDefinition {\n    action {\n      inputSchema\n      nodeId\n    }\n  }\n}\n\nfragment FormBuilderAuthInput_Identity on Identity {\n  id\n}\n\nfragment FormBuilderElement_AgentDefinition on AgentDefinition {\n  ...FormBuilderStateGraphNodeField_AgentDefinition\n}\n\nfragment FormBuilderElement_Identity on Identity {\n  ...FormBuilderAuthInput_Identity\n}\n\nfragment FormBuilderStateGraphNodeField_AgentDefinition on AgentDefinition {\n  stateGraph {\n    id\n    nodes {\n      __typename\n      ... on ActionNode {\n        __typename\n        id\n        actionDefinition {\n          action {\n            dynamicLoaders {\n              loaders {\n                defaultValue {\n                  name\n                  value\n                }\n                dependencies\n                description\n                displayName\n                field\n                icon\n                key\n                placeholder\n              }\n            }\n            nodeId\n          }\n        }\n        auth {\n          id\n          nodeId\n        }\n        ...FormBuilderActionField_ActionNode\n      }\n      ... on EntryPointTriggerNode {\n        __typename\n        id\n        auth {\n          id\n          nodeId\n        }\n        triggerDefinition {\n          id\n          fields {\n            __typename\n            key\n          }\n          nodeId\n        }\n      }\n      ... on Node {\n        __isNode: __typename\n        nodeId\n      }\n    }\n    nodeId\n  }\n}\n\nfragment FormBuilder_AgentDefinition on AgentDefinition {\n  ...FormBuilderElement_AgentDefinition\n}\n\nfragment FormBuilder_Identity on Identity {\n  ...FormBuilderElement_Identity\n}\n\nfragment GraphEntityEditorPanel_Identity on Identity {\n  ...ActionNodeEditor_Identity\n  ...AgentStateNodeEditor_Identity\n  ...EntryPointNodeEditor_Identity\n  ...LogicNodeEditor_Identity\n}\n\nfragment HeaderNavButtons_AgentDefinition on AgentDefinition {\n  ...ThreadsNavButton_AgentDefinition\n}\n\nfragment HeaderTitleSection_AgentDefinition on AgentDefinition {\n  id\n  name\n  icon {\n    color\n    name\n  }\n  owner {\n    id\n    agentFolders {\n      root {\n        agentDefinitions {\n          id\n          createdAt\n          updatedAt\n          nodeId\n        }\n      }\n      folders {\n        agentDefinitions {\n          id\n          createdAt\n          updatedAt\n          nodeId\n        }\n      }\n    }\n    ...CopyAgentDefinitionMutationIdentityFragment\n    ...DeleteAgentDefinitionMutationFragment\n    nodeId\n  }\n  enabled\n  isFavorite\n  isMuted\n}\n\nfragment KbModal_Identity on Identity {\n  ...SetupKb_Identity\n}\n\nfragment KnowledgeBaseEditor_Identity on Identity {\n  ...KbModal_Identity\n}\n\nfragment KnowledgeBaseEntriesList_Identity on Identity {\n  billingInfo {\n    features {\n      hasKnowledgeBaseIncreasedLimits\n    }\n  }\n}\n\nfragment KnowledgeBaseNodeContextMenu_Identity on Identity {\n  ...KbModal_Identity\n}\n\nfragment KnowledgeBaseNodeEditor_Identity on Identity {\n  ...KnowledgeBaseEditor_Identity\n  ...NodeContextMenu_Identity\n}\n\nfragment LindyStoreLoader_AgentDefinition on AgentDefinition {\n  id\n  name\n  instructions\n  model\n  shouldAskForConfirmation\n  icon {\n    name\n    color\n  }\n  memories {\n    id\n    isActive\n    value\n  }\n  tags {\n    id\n    label\n    nodeId\n  }\n  stateGraph {\n    id\n    nodeId\n    owner {\n      id\n      nodeId\n    }\n    version\n    autoLayoutEnabled\n    edges {\n      __typename\n      ... on ObserveEdge {\n        __typename\n        id\n        type\n        from\n        to\n        inflectionY\n      }\n      ... on StandardEdge {\n        __typename\n        id\n        type\n        from\n        to\n        inflectionY\n        condition\n        label\n      }\n      ... on Node {\n        __isNode: __typename\n        nodeId\n      }\n    }\n    nodes {\n      __typename\n      ... on AgentStateNode {\n        __typename\n        id\n        type\n        nodeId\n        displayName\n        position {\n          x\n          y\n        }\n        manuallyPositioned\n        guidelines\n        model\n        requireConfirmation\n        actions {\n          action {\n            isPremium\n            tool\n            key\n            authConfig {\n              __typename\n              ... on OAuth2AuthConfig {\n                __typename\n                method\n                provider\n                scopes\n              }\n              ... on CustomAuthConfig {\n                __typename\n                method\n                provider\n                fields\n              }\n              ... on CustomOAuth2AuthConfig {\n                __typename\n                fields\n                method\n                provider\n                scopes\n              }\n              ... on TokenAuthConfig {\n                __typename\n                method\n                provider\n              }\n              ... on PipedreamAuthConfig {\n                __typename\n                method\n                provider\n              }\n            }\n            nodeId\n          }\n          createdByNodeId\n          statefulToolKey\n        }\n      }\n      ... on ActionNode {\n        __typename\n        id\n        type\n        nodeId\n        displayName\n        position {\n          x\n          y\n        }\n        manuallyPositioned\n        actionDefinition {\n          createdByNodeId\n          statefulToolKey\n          tool {\n            nodeId\n            description\n            displayName\n            isPopular\n            tool\n          }\n          action {\n            nodeId\n            key\n            tool\n            toolDisplayName\n            dependencies\n            description\n            displayName\n            inputTree {\n              fields {\n                __typename\n                ... on InputTreeDynamicField {\n                  type\n                  key\n                  output\n                  displayName\n                  description\n                  placeholder\n                  defaultValue {\n                    name\n                    value\n                  }\n                  icon\n                }\n                ... on InputTreeStaticField {\n                  type\n                  schema\n                  field\n                }\n              }\n              parentFields\n            }\n            inputSchema\n            outputSchema\n            authConfig {\n              __typename\n              ... on OAuth2AuthConfig {\n                __typename\n                method\n                provider\n                scopes\n              }\n              ... on CustomAuthConfig {\n                __typename\n                method\n                provider\n                fields\n              }\n              ... on CustomOAuth2AuthConfig {\n                __typename\n                fields\n                method\n                provider\n                scopes\n              }\n              ... on TokenAuthConfig {\n                __typename\n                method\n                provider\n              }\n              ... on PipedreamAuthConfig {\n                __typename\n                method\n                provider\n              }\n            }\n            deprecated\n            dynamicLoaders {\n              loaders {\n                defaultValue {\n                  name\n                  value\n                }\n                dependencies\n                description\n                displayName\n                field\n                icon\n                key\n                placeholder\n              }\n              refetchInputAfterLoad\n            }\n            observableChannel {\n              agentMessageReceivedSchema\n              immediateEdgeLabel\n              observableEdgeLabel\n              statefulToolKey\n            }\n            hasSideEffects\n            isPremium\n            premiumActionCost\n            outputProperties {\n              displayName\n              type\n              value\n            }\n          }\n        }\n        actionConfiguration {\n          type\n          allowAdditionalArrayEntries\n          manualResult {\n            isUndefined\n            isNull\n            value\n          }\n          path\n          prompt\n          unionType\n        }\n        auth {\n          id\n          nodeId\n        }\n        guidelines\n        knowledgeSources {\n          entryCount\n          entryCountDisabled\n          isEnabled\n          source\n          syncStatus\n          syncToBeCompletedBy\n          totalFileSize\n          totalNumCharacters\n          totalNumEmbeddings\n          totalNumErrors\n          totalNumTokens\n        }\n        model\n        occurrence\n        statefulToolOccurrence\n        requireConfirmation\n      }\n      ... on EntryPointConversationNode {\n        __typename\n        id\n        type\n        nodeId\n        displayName\n        position {\n          x\n          y\n        }\n        manuallyPositioned\n        greetingMessage\n        conversationStarters {\n          value\n        }\n      }\n      ... on EntryPointTriggerNode {\n        __typename\n        id\n        type\n        nodeId\n        displayName\n        position {\n          x\n          y\n        }\n        manuallyPositioned\n        auth {\n          id\n          nodeId\n        }\n        triggerSetup\n        triggerEnabled\n        trigger {\n          id\n          owner {\n            id\n            nodeId\n          }\n          enabled\n          isConfigured\n          isPendingVerification\n          setup {\n            actionArgs\n            actionName\n            toolName\n          }\n          nodeId\n        }\n        triggerDefinition {\n          tool {\n            tool\n            displayName\n            nodeId\n          }\n          name\n          authConfig {\n            __typename\n            ... on OAuth2AuthConfig {\n              __typename\n              method\n              provider\n              scopes\n            }\n            ... on CustomAuthConfig {\n              __typename\n              method\n              provider\n              fields\n            }\n            ... on CustomOAuth2AuthConfig {\n              __typename\n              fields\n              method\n              provider\n              scopes\n            }\n            ... on TokenAuthConfig {\n              __typename\n              method\n              provider\n            }\n            ... on PipedreamAuthConfig {\n              __typename\n              method\n              provider\n            }\n          }\n          channel {\n            statefulToolKey\n          }\n          description\n          displayName\n          eventSchema\n          fields {\n            __typename\n            ... on TriggerFieldText {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              defaultText: defaultValue\n            }\n            ... on TriggerFieldNumber {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              defaultNumber: defaultValue\n              min\n              max\n              step\n            }\n            ... on TriggerFieldLindyEmbedConfig {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n            }\n            ... on TriggerFieldDateTime {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              defaultDate: defaultValue\n            }\n            ... on TriggerFieldAutoObserve {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              defaultValue\n            }\n            ... on TriggerFieldLindyMail {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              defaultLindyMail: defaultValue\n            }\n            ... on TriggerFieldLindyWebhook {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              defaultWebhook: defaultValue\n            }\n            ... on TriggerFieldLindyPhoneNumber {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n            }\n            ... on TriggerFieldElevenLabsVoice {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              defaultValue\n            }\n            ... on TriggerFieldRecurringSchedule {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              defaultRecurringSchedule: defaultValue\n            }\n            ... on TriggerFieldCheckbox {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              defaultChecked: defaultValue\n            }\n            ... on TriggerFieldLabel {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n            }\n            ... on TriggerFieldComparableText {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              aliases\n            }\n            ... on TriggerFieldSelect {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              defaultItem: defaultValue\n              selectFirstByDefault\n              isContextDependent\n            }\n            ... on TriggerFieldMultiSelect {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              defaultItems: defaultValue\n              hasAllowAllOption\n              isContextDependent\n            }\n            ... on TriggerFieldDynamicLoader {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              loader {\n                defaultValue {\n                  name\n                  value\n                }\n                dependencies\n                description\n                displayName\n                field\n                icon\n                key\n                placeholder\n              }\n            }\n          }\n          hasPublishableConfig\n          isHighThroughput\n          isPremium\n          otherObservableChannel {\n            agentMessageReceivedSchema\n            immediateEdgeLabel\n            observableEdgeLabel\n            statefulToolKey\n          }\n          testingPolicy {\n            supportsSyntheticPayload\n          }\n          nodeId\n        }\n      }\n      ... on LogicNode {\n        __typename\n        id\n        type\n        nodeId\n        displayName\n        position {\n          x\n          y\n        }\n        manuallyPositioned\n        model\n      }\n      ... on Node {\n        __isNode: __typename\n        nodeId\n      }\n    }\n    stickyNotes {\n      id\n      note\n      position {\n        x\n        y\n      }\n      nodeId\n    }\n  }\n}\n\nfragment LindyStoreLoader_Identity on Identity {\n  id\n  enabledFeatureFlags\n  auth {\n    fields\n    id\n    isConnected\n    label\n    method\n    provider\n    scopes\n    nodeId\n  }\n}\n\nfragment LogicNodeEditor_Identity on Identity {\n  ...NodeContextMenu_Identity\n}\n\nfragment LogicNode_Identity on Identity {\n  ...CustomNode_Identity\n}\n\nfragment NodeContextMenu_Identity on Identity {\n  ...KnowledgeBaseNodeContextMenu_Identity\n}\n\nfragment PlansModal_Identity on Identity {\n  nodeId\n  isMedicalScribe\n  billingInfo {\n    trialInfo {\n      expiresAt\n    }\n    features {\n      isEligibleForFreePlan\n    }\n  }\n  ...ProPlanMe\n  ...ProPlanMedicalMe\n  ...UpcomingPlanMe\n}\n\nfragment ProPlanMe on Identity {\n  billingInfo {\n    subscriptionPlan {\n      creditAllocation\n    }\n    upcomingPlan {\n      subscriptionPlan {\n        creditAllocation\n        planType\n      }\n    }\n  }\n}\n\nfragment ProPlanMedicalMe on Identity {\n  billingInfo {\n    creditsInfo {\n      creditAllocation\n    }\n    upcomingPlan {\n      subscriptionPlan {\n        planType\n      }\n    }\n  }\n}\n\nfragment PromptInputQueryFragment on Identity {\n  nodeId\n  billingInfo {\n    creditsInfo {\n      creditBalance\n    }\n    lastPaymentFailure {\n      date\n    }\n  }\n  ...PlansModal_Identity\n}\n\nfragment QualifiedSignupCtaFooter_Identity on Identity {\n  id\n  nodeId\n  flags {\n    dismissedQualifiedSignupUpsell\n  }\n  isQualifiedSignup\n}\n\nfragment RailsTestingAgentDefinitionFragment on AgentDefinition {\n  id\n  nodeId\n  ...RailsTestingTaskView_AgentDefinition\n  ...RailsTestingTriggerEntryPointViewAgentDefinitionFragment\n  ...useRetryStateGraphTestRunExecutionMutation_AgentDefinition\n}\n\nfragment RailsTestingQueryFragment on Query {\n  ...RailsTestingTaskView_Query\n}\n\nfragment RailsTestingStateGraphTestRunFragment on StateGraphTestRun {\n  id\n  nodeId\n  initiallySelectedNodeId\n  conversation {\n    id\n    nodeId\n    entryPointNodeId\n    blocks(first: 5000) {\n      edges {\n        node {\n          content {\n            __typename\n            asJSON\n          }\n          nodeId\n        }\n      }\n    }\n  }\n  liveCaptureTrigger {\n    id\n    nodeId\n    enabled\n  }\n  ...RailsTestingTaskView_StateGraphTestRun\n  ...RailsTestingTriggerEntryPointViewStateGraphTestRunFragment\n  ...useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun\n}\n\nfragment RailsTestingStateGraphTestRunRefetchableFragment on StateGraphTestRun {\n  id\n  nodeId\n  initiallySelectedNodeId\n  conversation {\n    id\n    nodeId\n    entryPointNodeId\n    blocks(first: 5000) {\n      edges {\n        node {\n          content {\n            __typename\n            asJSON\n          }\n          nodeId\n        }\n      }\n    }\n  }\n  liveCaptureTrigger {\n    id\n    nodeId\n    enabled\n  }\n  ...RailsTestingTaskView_StateGraphTestRun\n  ...RailsTestingTriggerEntryPointViewStateGraphTestRunFragment\n  ...useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun\n}\n\nfragment RailsTestingTaskView_AgentDefinition on AgentDefinition {\n  id\n  nodeId\n  owner {\n    id\n    nodeId\n  }\n  ...useRetryStateGraphTestRunExecutionMutation_AgentDefinition\n  ...ConversationView_AgentDefinition\n}\n\nfragment RailsTestingTaskView_Query on Query {\n  ...ConversationViewQueryFragment\n}\n\nfragment RailsTestingTaskView_StateGraphTestRun on StateGraphTestRun {\n  id\n  conversation {\n    id\n    nodeId\n    entryPointNodeId\n    status\n    openChannels {\n      startingNodeId\n      statefulToolKey\n      instanceKey\n      createdByNodeId\n      tool {\n        tool\n        nodeId\n      }\n      type\n      nodeId\n    }\n    ...useAutoUpdatePucksConversationFragment\n    blocks(first: 5000) {\n      edges {\n        node {\n          content {\n            __typename\n            asJSON\n          }\n          nodeId\n        }\n      }\n    }\n  }\n  ...useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun\n}\n\nfragment RailsTestingTriggerEntryPointViewAgentDefinitionFragment on AgentDefinition {\n  id\n  nodeId\n}\n\nfragment RailsTestingTriggerEntryPointViewLiveCaptureTriggerRefetchableFragment on Trigger {\n  runAttempts(first: 50) {\n    edges {\n      node {\n        id\n        payload(shouldRemoveFieldsHiddenFromUI: true)\n        processedPayload(shouldRemoveFieldsHiddenFromUI: true)\n        createdAt\n        shouldRunCheck {\n          shouldRun\n          reasons {\n            message\n          }\n          softFilter\n        }\n        llmSummary\n        nodeId\n      }\n    }\n  }\n  nodeId\n}\n\nfragment RailsTestingTriggerEntryPointViewStateGraphTestRunFragment on StateGraphTestRun {\n  id\n  liveCaptureTrigger {\n    definition {\n      name\n      tool {\n        tool\n        nodeId\n      }\n      payloadSchema\n      eventSchema\n      testingPolicy {\n        fullyProcessLiveCapturePayloads\n      }\n      nodeId\n    }\n    id\n    nodeId\n    activeLiveCapturingInstructions\n    testingPayloads(first: 10) {\n      edges {\n        node {\n          externalId\n          payload(shouldRemoveFieldsHiddenFromUI: true)\n          shouldRunCheck {\n            shouldRun\n            reasons {\n              message\n            }\n            softFilter\n          }\n          llmSummary\n          nodeId\n          __typename\n        }\n        cursor\n      }\n      pageInfo {\n        endCursor\n        hasNextPage\n      }\n    }\n    ...RailsTestingTriggerEntryPointViewLiveCaptureTriggerRefetchableFragment\n  }\n  conversation {\n    startingTriggerRunAttempt {\n      id\n      nodeId\n      createdByExternalPayloadId\n      payloadId\n    }\n    nodeId\n  }\n  nodeId\n}\n\nfragment SaveChangesOnLeavingModalAgentDefinitionFragment on AgentDefinition {\n  ...useSaveAgentAgentDefinitionFragment\n}\n\nfragment SetupDataSourceKb_Identity on Identity {\n  ...KnowledgeBaseEntriesList_Identity\n}\n\nfragment SetupFilesKb_Identity on Identity {\n  ...KnowledgeBaseEntriesList_Identity\n}\n\nfragment SetupKb_Identity on Identity {\n  ...SetupDataSourceKb_Identity\n  ...SetupFilesKb_Identity\n  ...SetupTextKb_Identity\n  ...SetupWebsiteKb_Identity\n}\n\nfragment SetupTextKb_Identity on Identity {\n  ...KnowledgeBaseEntriesList_Identity\n}\n\nfragment SetupWebsiteKb_Identity on Identity {\n  ...KnowledgeBaseEntriesList_Identity\n}\n\nfragment SubscriptionContext_Identity on Identity {\n  billingInfo {\n    billingVersion\n    features {\n      arePremiumFeaturesEnabled\n      hasKnowledgeBaseIncreasedLimits\n    }\n  }\n  ...PlansModal_Identity\n}\n\nfragment ThreadsNavButton_AgentDefinition on AgentDefinition {\n  notificationsCount\n  isMuted\n}\n\nfragment ToolsListItemRequest_Identity on Identity {\n  name\n}\n\nfragment ToolsListItemsRow_Identity on Identity {\n  ...ToolsListItemRequest_Identity\n}\n\nfragment ToolsList_Identity on Identity {\n  ...ToolsListItemsRow_Identity\n}\n\nfragment ToolsView_Identity on Identity {\n  ...ToolsList_Identity\n}\n\nfragment Tools_Identity on Identity {\n  ...ToolsView_Identity\n}\n\nfragment Transcript_AgentDefinition on AgentDefinition {\n  ...Execution_AgentDefinition\n}\n\nfragment Transcript_Identity on Identity {\n  name\n  avatar {\n    url\n  }\n  ...Execution_Identity\n}\n\nfragment UpcomingPlanMe on Identity {\n  isMedicalScribe\n  billingInfo {\n    trialInfo {\n      expiresAt\n    }\n    subscriptionPlan {\n      creditAllocation\n    }\n    upcomingPlan {\n      subscriptionPlan {\n        creditAllocation\n        name\n        planType\n      }\n      startDate\n    }\n  }\n}\n\nfragment useAutoUpdatePucksConversationFragment on Conversation {\n  id\n  openChannels {\n    id\n    startingNodeId\n    createdByNodeId\n    tool {\n      tool\n      displayName\n      nodeId\n    }\n    nodeId\n  }\n}\n\nfragment useRetryStateGraphTestRunExecutionMutation_AgentDefinition on AgentDefinition {\n  id\n  owner {\n    id\n    nodeId\n  }\n}\n\nfragment useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun on StateGraphTestRun {\n  id\n  conversation {\n    blocks(first: 5000) {\n      edges {\n        node {\n          content {\n            __typename\n            asJSON\n          }\n          nodeId\n        }\n      }\n    }\n    nodeId\n  }\n}\n\nfragment useSaveAgentAgentDefinitionFragment on AgentDefinition {\n  id\n  name\n  icon {\n    name\n    color\n  }\n  owner {\n    id\n    nodeId\n  }\n}\n\nfragment useSaveAgentWithPremiumModal_AgentDefinition on AgentDefinition {\n  ...useSaveAgentAgentDefinitionFragment\n}\n\nfragment useSaveAgentWithPremiumModal_Identity on Identity {\n  id\n  billingInfo {\n    features {\n      arePremiumFeaturesEnabled\n    }\n  }\n}\n'}}}();t.hash="bac9e23d2a6314dc3e7a124fe0e4b138";var i=l(32588),s=l(68457),r=l(46772),o=l(72735),d=l(9234),u=l(57511),c=l(6779),g=l(10639),m=l(55563),y=l(61082),p=l(59051),f=l(7061),h=l(57414),k=l(84075),F=l(35686),x=l(31284),v=l(8678),b=l(27966),S=l.n(b),T=l(48790),K=l(25919);let I=S()(()=>l.e(3927).then(l.bind(l,43927)).then(e=>e.RailsDebugger),{loadableGenerated:{webpack:()=>[43927]},ssr:!1,loading:()=>null});function C(){let e=(0,F.C)(e=>e.railsDebuggerOptions.position);return(0,k.P)()?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.TW,{children:(0,a.jsx)("div",{className:(0,K.QP)("right"===e?"w-0.5 h-full":"w-full h-0.5","flex items-center justify-center bg-neutral-300 dark:bg-neutral-700")})}),(0,a.jsx)(T.Zk,{defaultSize:15,children:(0,a.jsx)(I,{})})]}):null}let A=(0,v.PA)(function(e){let{children:n}=e,l=(0,F.C)(e=>e.railsDebuggerOptions.position),t=x.a.ui.isDebugPanelOpen;return(0,a.jsxs)(T.YZ,{autoSaveId:"lindy-rails-console",direction:"right"===l?"horizontal":"vertical",children:[(0,a.jsx)(T.Zk,{className:"relative",children:n}),t&&(0,a.jsx)(C,{})]})});var j=l(959);let N=(0,v.PA)(function(){let e=x.a.ui.isDebugPanelOpen;return(0,a.jsx)(j.U,{enabled:e,onClick:x.a.ui.toggleDebugPanel})});var L=l(50470),_=l(20923),w=l(45785),R=l(49321),D=l.n(R),P=l(81778),M=l(79124),E=l(66213),V=l(33848),G=l(41910),B=l(52954),O=l(90386),z=l(2096),Q=l(19762),q=l(1102);let U={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"EditorGraphSectionQueryFragment",selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"me",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"LindyStoreLoader_Identity"},{args:null,kind:"FragmentSpread",name:"EditorGraphCanvas_Identity"},{args:null,kind:"FragmentSpread",name:"EditorGraphTools_Identity"}],storageKey:null},{args:null,kind:"FragmentSpread",name:"EditorSidebarPanelQueryFragment"}],type:"Query",abstractKey:null};U.hash="84d1a8f54b867a58aab4fe5cdc0fd359";let W={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"EditorGraphSectionAgentDefinitionFragment",selections:[{args:null,kind:"FragmentSpread",name:"EditorSidebarPanelAgentDefinitionFragment"},{args:null,kind:"FragmentSpread",name:"LindyStoreLoader_AgentDefinition"}],type:"AgentDefinition",abstractKey:null};W.hash="f16a8d85f2f6c3c4f6665d00a41d8df7";let H={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"EditorGraphSectionStateGraphTestRunFragment",selections:[{args:null,kind:"FragmentSpread",name:"EditorSidebarPanelStateGraphTestRunFragment"}],type:"StateGraphTestRun",abstractKey:null};H.hash="f4222c6494e9a0b6afc19a8d436a9089";var $=l(31634),Z=l(3641),Y=l(84370),J=l(34372),X=l(92428),ee=l(39528),en=l(53758);l(97244);let el={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"EditorGraphCanvas_Identity",selections:[{args:null,kind:"FragmentSpread",name:"ActionNode_Identity"},{args:null,kind:"FragmentSpread",name:"AgentStateNode_Identity"},{args:null,kind:"FragmentSpread",name:"EntryPointNode_Identity"},{args:null,kind:"FragmentSpread",name:"LogicNode_Identity"}],type:"Identity",abstractKey:null};el.hash="337ab4471ed7209e33ecf1e3dfc37c5a",l(9147);var ea=l(25347),et=l(90819),ei=l(91141),es=l(94344),er=l(19362),eo=l(16008),ed=l(35774);let eu={opacity:0,scale:.95},ec={opacity:1,scale:1},eg={opacity:0,scale:.95};function em(e){let{disabled:n=!1,items:l,children:t}=e,{isLongPressed:i,dismissLongPress:s,handleMouseDown:r,handleMouseUp:o}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,[n,l]=(0,es.useState)(!1),a=(0,es.useRef)(void 0),t=(0,es.useCallback)(()=>{a.current=setTimeout(()=>{l(!0)},e)},[e]),i=(0,es.useCallback)(()=>{clearTimeout(a.current)},[]);return{isLongPressed:n,dismissLongPress:(0,es.useCallback)(()=>{l(!1)},[]),handleMouseDown:t,handleMouseUp:i}}();return(0,es.useEffect)(()=>{if(i)return window.addEventListener("mousedown",s),()=>window.removeEventListener("mousedown",s)},[s,i]),(0,es.useEffect)(()=>{n&&s()},[n,s]),(0,a.jsx)("div",{className:n?"pointer-events-none":"",onMouseDown:r,onMouseUp:o,children:(0,a.jsxs)(ei.W1,{children:[(0,a.jsx)(ei.IU,{as:"div",className:i?"pointer-events-none":"",children:t(i)}),(0,a.jsx)(eo.N,{children:i&&!n&&(0,a.jsx)(ei.c,{static:!0,as:ed.P.div,initial:eu,animate:ec,exit:eg,anchor:"bottom start",className:er.IJ,style:er.i3,children:l})})]})})}var ey=l(91657),ep=l(63620),ef=l(46251),eh=l(71792),ek=l(57802),eF=l(23664);let ex=(0,v.PA)(function(e){let{node:n}=e;if(n instanceof eh.Uf)return(0,a.jsx)(ef.LD,{children:ep.f[ek.cs.AgentState].icon});if(n instanceof eh.Ap)return(0,eh.B2)(n)?(0,a.jsx)(ef.if,{tool:n.trigger.tool,className:(0,K.QP)(!n.triggerEnabled&&"mix-blend-luminosity")}):(0,eh.jq)(n)?(0,a.jsx)(ev,{}):(0,eh.Eq)(n)?(0,a.jsx)(ef.if,{tool:eF.h6.Channels}):null;if(n instanceof eh._M){let e=n.isKnowledgeBaseNode?ep.f[ek.b7.KnowledgeBase]:n.isTalkToUserNode?ep.f[ek.b7.TalkToUser]:void 0,l=ep.f[ek.cs.Action];return n.action&&(!n.isCustomActionNode||n.isCustomConfigured)?(0,a.jsx)(ef.si,{tool:n.action.tool,className:(0,K.QP)("size-5 shrink-0",null==e?void 0:e.color)}):(0,a.jsx)(ef.LD,{className:(0,K.QP)("flex size-5 shrink-0 items-center justify-center rounded-[5px]",(null!=e?e:l).color),children:(null!=e?e:l).icon})}return n instanceof eh.in?(0,a.jsx)(ef.LD,{children:ep.f[ek.cs.Logic].icon}):null});function ev(){return(0,a.jsx)("div",{className:(0,K.QP)("flex h-5 w-5 shrink-0 items-center justify-center rounded-[5px]",ep.f[ek.cs.EntryPoint].color),children:ep.f[ek.cs.EntryPoint].icon})}var eb=l(67373),eS=l(77218),eT=l(34927),eK=l(96050),eI=l(23860),eC=l(41546);let eA=(0,v.PA)(function(e){let{stateGraph:n}=e,l=(0,es.useCallback)(()=>{n.undo()},[n]),t=!n.canUndo,{scaleUp:i}=e_(eC.S.Undo,t,l),s=(0,es.useMemo)(()=>({scale:i?1.05:1}),[i]);return(0,a.jsx)(em,{disabled:t,items:n.undoEntries.slice(-10).reverse().map(e=>(0,a.jsx)(ej,{entry:e,restoreEntry:n.undo},e.id)),children:e=>(0,a.jsx)(ed.P.div,{animate:s,children:(0,a.jsx)(eb.$,{size:"sm",level:"outline",className:(0,K.QP)("bg-panel px-2 disabled:bg-slate-1",e&&"bg-slate-4 border-slate-8"),icon:(0,a.jsx)(eL,{}),disabled:t,onClick:l,children:"Undo"})})})}),ej=(0,v.PA)(function(e){let{entry:n,restoreEntry:l}=e,t=(0,es.useCallback)(()=>{l(n)},[n,l]),{description:i,affectedEntity:s}=n.info;return(0,a.jsx)(ei.Dr,{children:(0,a.jsxs)(eS.VJ,{onClick:t,children:[(0,a.jsx)(eN,{entity:s}),(0,a.jsx)(eS.AB,{children:i})]})})}),eN=(0,v.PA)(function(e){let{entity:n}=e;return n instanceof eh.I4?(0,a.jsx)(ex,{node:n}):n instanceof eK.nN&&n.from?(0,a.jsx)(ex,{node:n.from}):n instanceof eI.n?(0,a.jsx)(eT.t,{className:eS.b3}):null});function eL(){return(0,a.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M16.6667 15.8333V10.8333C16.6667 8.99234 15.1743 7.49996 13.3333 7.49996H3.95833M6.25 10.8333L3.50592 8.08921C3.18048 7.76378 3.18048 7.23614 3.50592 6.9107L6.25 4.16663",stroke:"#7E868C",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})})}function e_(e,n,l){let[a,t]=(0,es.useState)(!1);return(0,ey.q)(e,()=>{l(),t(!0)},!n,{addPreventDefault:!0}),(0,es.useEffect)(()=>{if(a){let e=setTimeout(()=>{t(!1)},200);return()=>clearTimeout(e)}},[a]),{scaleUp:a}}let ew=(0,v.PA)(function(e){let{stateGraph:n}=e,l=(0,es.useCallback)(()=>{n.redo()},[n]),t=!n.canRedo,{scaleUp:i}=e_(eC.S.Redo,t,l),s=(0,es.useMemo)(()=>({scale:i?1.05:1}),[i]);return(0,a.jsx)(em,{disabled:t,items:n.redoEntries.slice(-10).reverse().map(e=>(0,a.jsx)(ej,{entry:e,restoreEntry:n.redo},e.id)),children:e=>(0,a.jsx)(ed.P.div,{animate:s,children:(0,a.jsx)(eb.$,{size:"sm",level:"outline",className:(0,K.QP)("bg-panel px-2",t&&"opacity-0",e&&"bg-slate-4 border-slate-8"),icon:(0,a.jsx)(eR,{}),onClick:l,children:"Redo"})})})});function eR(){return(0,a.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M3.33337 15.8333V10.8333C3.33337 8.99234 4.82576 7.49996 6.66671 7.49996H16.0417M13.75 10.8333L16.4941 8.08921C16.8196 7.76378 16.8196 7.23614 16.4941 6.9107L13.75 4.16663",stroke:"#7E868C",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})})}var eD=l(8178),eP=l(60213),eM=l(13249),eE=l(14306),eV=l(13056),eG=l(6897),eB=l(29659),eO=l(77940);let ez=2*eM.IR;function eQ(e,n){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=eU(n.nodes);if(!a)return;let t=eW(e);if(!t)return;let i=Math.min(Math.max(Math.min(t.clientWidth/a.width,t.clientHeight/a.height),.75),1);a.height=Math.min(a.height,t.clientHeight/i),eZ({canvas:e,bounds:a,zoom:i,noAnimation:l.noAnimation})}function eq(e,n){let l=eH(e);if(!l)return;let a=Math.max(n-l.bottom,0);e$(e.reactFlow,0,a)}function eU(e){if(0===e.length)return null;let n=e.reduce((e,n)=>({minX:Math.min(n.position.x,e.minX),minY:Math.min(n.position.y,e.minY),maxX:Math.max(n.position.x+eM.M4,e.maxX),maxY:Math.max(n.position.y+n.nodeHeight,e.maxY)}),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});return{x:n.minX-ez,y:n.minY-ez,width:n.maxX-n.minX+2*ez,height:n.maxY-n.minY+2*ez+12*ez}}function eW(e){let n=document.querySelector(".".concat(o8));if(!n)return null;let l=n.clientWidth;return e.isEditorPanelOpen&&(l-=(0,Z.bt)(Z.Y4.EditorSidebar)),{clientWidth:l,clientHeight:n.clientHeight}}function eH(e){let n=eW(e);if(!n)return null;let{x:l,y:a,zoom:t}=e.reactFlow.getViewport(),i=-l/t,s=-a/t,r=n.clientWidth/t,o=n.clientHeight/t;return{left:i,right:i+r,top:s,bottom:s+o,width:r,height:o}}function e$(e,n,l){let a=e.getViewport();a.x-=n*a.zoom,a.y-=l*a.zoom,e.setViewport(a,{duration:500})}function eZ(e){let{canvas:n,bounds:l,zoom:a,noAnimation:t=!1}=e,i=l.x+l.width/2,s=l.y+l.height/2,r=eH(n);if(!r)return;let o=n.reactFlow.getZoom();a=null!=a?a:o,n.reactFlow.setViewport({x:-(i*a-r.width/2*o),y:-(s*a-r.height/2*o),zoom:a},{duration:t?void 0:500})}function eY(e){let{className:n}=e;return(0,a.jsxs)("svg",{width:"16",height:"18",viewBox:"0 0 16 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:(0,K.QP)("group",n),children:[(0,a.jsx)("path",{d:"M1.4861 5.17332C1.56674 5.133 1.63212 5.06762 1.67244 4.98698L2.20987 3.91212C2.36342 3.60502 2.80167 3.60502 2.95522 3.91212L3.49266 4.98698C3.53297 5.06762 3.59836 5.133 3.67899 5.17332L4.75386 5.71075C5.06096 5.8643 5.06096 6.30256 4.75386 6.45611L3.67899 6.99354C3.59836 7.03386 3.53297 7.09924 3.49266 7.17988L2.95522 8.25474C2.80167 8.56185 2.36342 8.56185 2.20987 8.25474L1.67244 7.17988C1.63212 7.09924 1.56673 7.03386 1.4861 6.99354L0.411236 6.45611C0.104132 6.30256 0.104133 5.8643 0.411236 5.71075L1.4861 5.17332Z"}),(0,a.jsx)("path",{d:"M5.96533 2.10037C6.02338 2.07135 6.07046 2.02427 6.09949 1.96621L6.48088 1.20342C6.59144 0.982307 6.90698 0.982306 7.01754 1.20342L7.39894 1.96621C7.42797 2.02427 7.47504 2.07135 7.5331 2.10037L8.29589 2.48177C8.517 2.59233 8.51701 2.90787 8.29589 3.01843L7.5331 3.39982C7.47504 3.42885 7.42797 3.47593 7.39894 3.53398L7.01754 4.29677C6.90698 4.51789 6.59144 4.51789 6.48088 4.29677L6.09949 3.53398C6.07046 3.47593 6.02338 3.42885 5.96533 3.39982L5.20254 3.01843C4.98142 2.90787 4.98142 2.59233 5.20254 2.48177L5.96533 2.10037Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.4168 1.60203C15.5881 1.30239 15.4841 0.92057 15.1845 0.749214C14.8848 0.577859 14.503 0.681855 14.3317 0.981496L10.0726 8.42905L9.38153 8.17914C7.68654 7.56621 5.98434 8.50351 5.11241 9.86631C4.33199 11.0861 3.29568 11.9225 2.02909 12.7614C1.83678 12.8888 1.73027 13.1118 1.752 13.3414C1.77374 13.571 1.9202 13.77 2.13299 13.8591L10.3215 17.285C10.557 17.3835 10.8287 17.3289 11.0079 17.1471C12.6099 15.5217 13.4599 14.0852 13.7408 12.097C13.9409 10.6811 12.9793 9.48013 11.7522 9.03639L11.2659 8.86053L15.4168 1.60203ZM6.16533 10.54C6.82397 9.51057 7.97038 8.99807 8.95645 9.35464L11.3271 10.2119C12.1259 10.5007 12.6028 11.2168 12.5031 11.9221C12.286 13.4588 11.682 14.6079 10.4091 15.9666L7.23213 14.6375L7.79671 12.9411C7.86042 12.7497 7.64202 12.5885 7.47789 12.7059L5.68258 13.9892L3.6625 13.144C4.61067 12.4361 5.47001 11.6267 6.16533 10.54Z"})]})}var eJ=l(66679);let eX="h-5 !max-h-5 w-5 !max-w-5 !stroke-none !fill-none",e0="!stroke-[#11181C] dark:!stroke-slate-12 group-hover:!stroke-gray-11",e1="!fill-[#11181C] dark:!fill-slate-12 group-hover:!fill-gray-11",e2=(0,v.PA)(function(){let e=(0,eD.Z)(),n=(0,w.VH)(),l=(0,es.useCallback)(()=>n.zoomIn({duration:100}),[n]),t=(0,es.useCallback)(()=>n.zoomOut({duration:100}),[n]),i=(0,es.useCallback)(()=>{eQ({reactFlow:n,isEditorPanelOpen:x.a.ui.isEditorPanelOpen},e)},[n,e]),{enabled:s}=(0,ea.u)(eE.T.AutoLayoutState,{defaultEnabled:!1});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.H2,{showFitView:!1,showInteractive:!1,showZoom:!1,className:(0,K.QP)("absolute !bottom-[115px] overflow-hidden !rounded-md border-1 !border-slate-5 !shadow-none dark:!border-slate-5 transition",e.autoLayoutEnabled&&"!border-blue-6 dark:!border-blue-6"),children:s?(0,a.jsx)(e3,{stateGraph:e}):(0,a.jsx)(e6,{stateGraph:e})}),(0,a.jsxs)(w.H2,{showFitView:!1,showInteractive:!1,showZoom:!1,className:"overflow-hidden !rounded-md border-1 !border-slate-5 !shadow-none dark:!border-slate-5",children:[(0,a.jsx)(e5,{onClick:l,className:"border-b-1 !border-b-slate-5 dark:!border-b-slate-5",children:(0,a.jsx)(eG.A,{className:(0,K.QP)(eX,e0)})}),(0,a.jsx)(e5,{onClick:t,className:"border-b-1 !border-b-slate-5 dark:!border-b-slate-5",children:(0,a.jsx)(eB.A,{className:(0,K.QP)(eX,e0)})}),(0,a.jsx)(e5,{onClick:i,children:(0,a.jsx)(eO.A,{className:(0,K.QP)(eX,e0)})})]})]})}),e3=(0,v.PA)(function(e){let{stateGraph:n}=e,{autoLayoutEnabled:l,disableAutoLayoutViaDragCount:t}=n,[i,s]=(0,es.useState)(!1);return(0,es.useEffect)(()=>{if(t>0){s(!0);let e=setTimeout(()=>{s(!1)},3e3);return()=>clearTimeout(e)}s(!1)},[t]),(0,a.jsxs)(eJ.m_,{children:[(0,a.jsx)(eJ.ZI,{visible:i,children:i?"Click to enable auto-positioning":l?"Disable auto-positioning":"Enable auto-positioning"}),(0,a.jsx)(eJ.k$,{asChild:!0,children:(0,a.jsx)("div",{children:(0,a.jsx)(e5,{className:(0,K.QP)(l&&"!bg-blue-3 dark:!bg-blue-3 hover:!bg-blue-4 dark:hover:!bg-blue-4"),onClick:n.toggleAutoLayoutEnabled,children:(0,a.jsx)(eY,{className:(0,K.QP)(eX,l?"!fill-blue-11 dark:!fill-blue-11":e1)})})})})]})}),e6=(0,v.PA)(function(e){let{stateGraph:n}=e;return(0,a.jsx)(e5,{onClick:n.manualCleanUp,children:(0,a.jsx)(eY,{className:(0,K.QP)(eX,e1)})})});function e5(e){let{children:n,className:l,onClick:t}=e;return(0,a.jsx)(w.aV,{onClick:t,className:(0,K.QP)("group !h-8 !w-8 !bg-white dark:!bg-[#1C2024] hover:!bg-slate-2 dark:hover:!bg-slate-2",l),children:n})}let e4=(0,v.PA)(function(){let e=(0,eD.Z)();return(0,a.jsx)(eb.$,{size:"sm",level:"outline",className:"bg-panel px-2",onClick:e.createNewActionNode,children:(0,a.jsxs)($.f,{children:[(0,a.jsx)("div",{className:(0,K.QP)("flex h-5 w-5 shrink-0 items-center justify-center rounded-[5px]",ep.f[ek.cs.Action].color),children:ep.f[ek.cs.Action].icon}),"Add Action"]})})}),e7=(0,v.PA)(function(){let e=(0,eD.Z)();return(0,a.jsx)(eb.$,{size:"sm",level:"outline",className:"bg-panel px-2",onClick:e.createNewTriggerNode,children:(0,a.jsxs)($.f,{children:[(0,a.jsx)("div",{className:(0,K.QP)("flex h-5 w-5 shrink-0 items-center justify-center rounded-[5px]",ep.f[ek.cs.EntryPoint].color),children:ep.f[ek.cs.EntryPoint].icon}),"Add Trigger"]})})});var e9=l(915),e8=l(35114);let ne=(0,es.memo)(function(e){return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",...e,children:(0,a.jsx)("path",{d:"M16.305 7.5H11.25a.417.417 0 0 1-.417-.417V2.001a.417.417 0 0 0-.763-.231L3.349 11.852a.417.417 0 0 0 .346.648H8.75c.23 0 .417.187.417.417v5.082c0 .412.534.574.763.231l6.721-10.082a.417.417 0 0 0-.346-.648Z",strokeWidth:"1.667",strokeLinejoin:"round"})})});var nn=l(91777);let nl=(0,v.PA)(function(e){var n;let l=(0,eD.Z)(),{screenToFlowPosition:t}=(0,w.VH)(),{clientX:i,clientY:s}=null!==(n=l.paneContextMenu)&&void 0!==n?n:{},r=(0,es.useCallback)(()=>{null!=i&&null!=s&&(l.setPaneContextMenu(null),l.addStickyNote({id:(0,nn.Kh)(),note:"",position:t({x:i,y:s})}),e.onClickItem())},[i,s,t,l,e]),o=(0,es.useCallback)(n=>{if(null==i||null==s)return;l.setPaneContextMenu(null);let a=t({x:i,y:s});l.createNewTopLevelNode(n,a),e.onClickItem()},[i,s,t,l,e]),d=(0,es.useCallback)(()=>{o(ek.cs.EntryPoint)},[o]),u=(0,es.useCallback)(()=>{o(ek.cs.Action)},[o]);return(0,a.jsxs)(e9.l,{children:[(0,a.jsxs)(eS.VJ,{onClick:d,children:[(0,a.jsx)(eS.Hf,{children:(0,a.jsx)(ne,{className:eS.b3})}),(0,a.jsx)(eS.AB,{children:"Add trigger"})]}),(0,a.jsxs)(eS.VJ,{onClick:u,children:[(0,a.jsx)(eS.Hf,{children:(0,a.jsx)(e8.k,{className:(0,K.QP)(eS.b3,"-my-0.5 -ml-0.5 h-5 w-5")})}),(0,a.jsx)(eS.AB,{children:"Add action"})]}),(0,a.jsxs)(eS.VJ,{onClick:r,children:[(0,a.jsx)(eS.Hf,{children:(0,a.jsx)(eT.t,{className:eS.b3})}),(0,a.jsx)(eS.AB,{children:"Add note"})]})]})});var na=l(30375);function nt(){return(0,a.jsx)("svg",{style:{position:"absolute",top:0,left:0},children:(0,a.jsx)("defs",{children:(0,a.jsx)("marker",{className:"react-flow__arrowhead",id:na.Dx,markerWidth:"80",markerHeight:"12.5",viewBox:"-10 -10 20 20",markerUnits:"strokeWidth",orient:"auto-start-reverse",refX:"0",refY:"0",children:(0,a.jsx)("polyline",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,stroke:na.Gy,fill:"none",points:"-5,-4 0,0 -5,4"})})})})}let ni={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ActionNode_Identity",selections:[{args:null,kind:"FragmentSpread",name:"CustomNode_Identity"}],type:"Identity",abstractKey:null};ni.hash="bd611d073be9215950e8c3cff36eadeb";var ns=l(52105),nr=l(5862),no=l(98279),nd=l(7094);let nu=(0,nr._)({get:{query:nd.z.object({skip:nd.z.string().optional(),limit:nd.z.string().optional(),tools:nd.z.string().optional(),triggers:nd.z.enum(["true","false"]).optional(),actions:nd.z.enum(["true","false"]).optional()}),data:nd.z.object({data:nd.z.array(no.CM),nextPage:nd.z.object({skip:nd.z.string()}).optional()})}});var nc=l(98354),ng=l(94559),nm=l(79879);let ny=(0,ns.In)("GET","/api/tools",nu.get.data);function np(e){let n=function(e){let n=(0,nm.f)(e.query);return(0,es.useMemo)(()=>["tools","get",n],[n])}(e),l=(0,ng.lB)(()=>null==e?void 0:e.options,[null==e?void 0:e.options]),a=(0,nc.I)({queryKey:n,queryFn:async()=>{let{data:n,error:l}=await ny(e);if(l)throw l;return n},...null==e?void 0:e.options}),t=(0,ng.lB)(()=>a,[a]);return(0,nm.R)(n,t,l)}function nf(){let e=np({query:{triggers:"true",actions:"true"}}),n=(0,es.useMemo)(()=>{var n,l;return(null!==(l=null===(n=e.data)||void 0===n?void 0:n.data)&&void 0!==l?l:[]).flatMap(e=>Object.values(e.triggers).filter(e=>e.isPremium)).reduce((e,n)=>(e[n.tool]||(e[n.tool]=new Set),e[n.tool].add(n.name),e),{})},[e.data]),l=(0,es.useMemo)(()=>{var n,l;return(null!==(l=null===(n=e.data)||void 0===n?void 0:n.data)&&void 0!==l?l:[]).flatMap(e=>Object.values(e.actions).filter(e=>e.isPremium)).reduce((e,n)=>(e[n.tool]||(e[n.tool]=new Set),e[n.tool].add(n.key),e),{})},[e.data]);return{isPremiumAction:(0,es.useCallback)(e=>{var n,a;return null!==(a=null===(n=l[e.tool])||void 0===n?void 0:n.has(e.action))&&void 0!==a&&a},[l]),isPremiumTrigger:(0,es.useCallback)(e=>{var l,a;return null!==(a=null===(l=n[e.tool])||void 0===l?void 0:l.has(e.name))&&void 0!==a&&a},[n]),premiumTriggers:n,premiumActions:l}}var nh=l(21429),nk=l(25054),nF=l(99281);let nx={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CustomNode_Identity",selections:[{args:null,kind:"FragmentSpread",name:"NodeContextMenu_Identity"}],type:"Identity",abstractKey:null};nx.hash="02b4a25429e7f043029f1a4298043483";var nv=l(59917),nb=l(15727),nS=l(91318),nT=l(77773),nK=l(56887);let nI={duration:0},nC={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"NodeContextMenu_Identity",selections:[{args:null,kind:"FragmentSpread",name:"KnowledgeBaseNodeContextMenu_Identity"}],type:"Identity",abstractKey:null};nC.hash="54f6629cf457c6e2b00d65c289f01317";var nA=l(89073),nj=l(13433);function nN(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{triggers:n=!1,actions:l=!0,agent:a=!1,...t}=e,i=(0,nA.jE)(),s=(0,es.useMemo)(()=>["infinite","toolsGet","triggers=".concat(n),"actions=".concat(l),"agent=".concat(a)],[l,n,a]),r=(0,nj.q)({queryKey:s,queryFn:e=>(0,ns.oA)(ny({query:{skip:String(e.pageParam||0),limit:"42",actions:l?"true":"false",triggers:n?"true":"false"}})),getNextPageParam:e=>{if(e.nextPage)return e.nextPage.skip},...t}),o=(0,es.useCallback)(async e=>{let a=await (0,ns.oA)(ny({query:{tools:e.join(","),actions:l?"true":"false",triggers:n?"true":"false"}}));i.setQueryData(s,e=>{var n,l;let t=new Set((null!==(n=null==e?void 0:e.pages.flatMap(e=>e.data))&&void 0!==n?n:[]).map(e=>e.tool));return a.data.some(e=>!t.has(e.tool))?{...e,pages:[{...a,nextPage:{skip:0}},...null!==(l=null==e?void 0:e.pages)&&void 0!==l?l:[]]}:e})},[l,i,s,n]),d=(0,es.useMemo)(()=>{var e,n,l;return Object.fromEntries(null!==(l=(null!==(n=null===(e=r.data)||void 0===e?void 0:e.pages.flatMap(e=>e.data))&&void 0!==n?n:[]).map(e=>[e.tool,e]))&&void 0!==l?l:[])},[r.data]);return{query:r,tools:d,fetchTools:o}}var nL=l(73850);let n_=(0,v.PA)(function(e){let{children:n,open:l,setClosed:t,onAfterClosed:i,className:s,hasBottomPadding:r=!1}=e;return(0,a.jsx)(nL.aF,{open:l,setClosed:t,afterClosed:i,hasBottomPadding:r,className:s,children:n})}),nw=(0,nr._)({get:{data:no.au.array(),params:nd.z.object({tool:nd.z.nativeEnum(eF.h6)})}}),nR=(0,ns.In)("GET","/api/tools/:tool/actions",nw.get.data);var nD=l(5375),nP=l(19632),nM=l(54345),nE=l(86383),nV=l(31928),nG=l(85739),nB=l(77235);function nO(e){let{title:n,subtitle:l}=e;return(0,a.jsx)("div",{children:(0,a.jsx)(nB.V,{label:(0,a.jsx)("span",{className:"text-xl font-medium text-slate-12",children:n}),subtitle:l,className:"pb-0",optional:!0})})}function nz(e){let{onClick:n}=e;return(0,a.jsx)(nG.K,{onClick:n,tooltip:"Close",className:"mr-0 border-transparent hover:border-slate-6",tabIndex:-1,children:(0,a.jsx)(nE.A,{className:"h-5 w-5 text-gray-11"})})}let nQ=(0,v.PA)(function(e){let{title:n,subtitle:l,onClose:t,onBack:i,topLeftElement:s,hideCloseButton:r=!1}=e;return i||s?(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)($.f,{between:!0,className:"mb-6 w-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[i&&(0,a.jsx)(nG.K,{onClick:i,tooltip:"Back",tabIndex:-1,className:"border-transparent hover:border-slate-6",children:(0,a.jsx)(nV.A,{className:"h-5 w-5  text-gray-11"})}),s]}),!r&&t&&(0,a.jsx)(nz,{onClick:t})]}),(0,a.jsx)(nO,{title:n,subtitle:l})]}):(0,a.jsxs)($.f,{top:!0,between:!0,children:[(0,a.jsx)(nO,{title:n,subtitle:l}),!r&&t&&(0,a.jsx)(nz,{onClick:t})]})});var nq=l(22283),nU=l(13813),nW=l(13268),nH=l(95654);let n$=(0,es.memo)(function(e){let{inputSchema:n,size:l=5}=e;return(0,a.jsx)(nU.I,{className:"relative z-modal-overlay-tooltips p-4 pt-0",iconClassName:(0,K.QP)(5===l?"h-5 w-5":"h-4 w-4","text-slate-9"),placement:"right",triggerAsChild:!0,children:(0,a.jsx)(nZ,{inputSchema:n})})});function nZ(e){let{inputSchema:n,name:l,additionalTypes:t=[],isRoot:i=!0}=e,{types:s,description:r,children:o}=(0,es.useMemo)(()=>{let e=nW.D.dedup([...(0,nH.bX)(n),...t]),l=(0,nH.l$)(n),a=[];if(nH.KQ.isArray(n)&&n.items){var i;let e=null!==(i=(0,nH.ub)(n.items))&&void 0!==i?i:"Item";a=[{inputSchema:n.items,name:e}]}else nH.KQ.isObject(n)&&(a=[],Object.entries(n.properties).forEach(e=>{let[l,t]=e,i=(0,nH.ub)(t,l),s=n.required&&!n.required.includes(l)?["optional"]:void 0;null==a||a.push({inputSchema:t,name:i,additionalTypes:s})}));return{types:e,description:l,children:a}},[t,n]),d=o.length>0;return(0,a.jsxs)("div",{className:(0,K.QP)("flex flex-col gap-4 text-sm",d?"w-min":"w-80"),children:[(0,a.jsx)("section",{className:"flex flex-col gap-y-0.5",children:l&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"mr-0.5 font-semibold",children:l})," ",(0,a.jsx)("span",{className:"text-slate-9 dark:text-slate-12",children:s.join(" ")})]}),r?(0,a.jsx)("p",{className:"text-slate-9 dark:text-slate-12",children:r}):null]})}),o.length>0&&(0,a.jsx)("div",{className:(0,K.QP)(!i&&"mb-2 ml-4","flex flex-col gap-1"),children:o.map(e=>(0,es.createElement)(nZ,{...e,isRoot:!1,key:e.name}))})]})}var nY=l(31024);let nJ=e=>(0,a.jsx)("svg",{...e,width:"11",height:"13",viewBox:"0 0 11 13",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 4.11576C0 3.67574 0.238167 3.26994 0.623021 3.05421L4.90079 0.65641C5.27285 0.447863 5.72714 0.447863 6.0992 0.656411L10.377 3.05423C10.7618 3.26995 11 3.67576 11 4.11577L11 8.88424C11 9.32426 10.7618 9.73007 10.377 9.94579L6.09918 12.3436C5.72713 12.5521 5.27286 12.5521 4.90081 12.3436L0.623051 9.94597C0.23818 9.73025 0 9.32444 0 8.88441V4.11576ZM3.36113 6.49997C3.36113 5.32282 4.31874 4.36855 5.50001 4.36855C6.68129 4.36855 7.6389 5.32282 7.6389 6.49997C7.6389 7.67712 6.68129 8.63139 5.50001 8.63139C4.31874 8.63139 3.36113 7.67712 3.36113 6.49997Z",fill:"currentColor"})});function nX(e){return(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"mr-2 flex items-center rounded-full bg-blue-3 px-2 text-xs font-medium leading-5 text-ai-blue",children:"Premium"}),!!e.premiumActionCost&&(0,a.jsxs)(eJ.m_,{children:[(0,a.jsxs)(eJ.ZI,{children:["This action costs ",e.premiumActionCost," credit",e.premiumActionCost>1?"s":""]}),(0,a.jsx)(eJ.k$,{asChild:!0,children:(0,a.jsxs)("div",{className:"flex cursor-pointer items-center rounded-full bg-blue-3 px-2 py-0.5 align-middle text-xs font-medium leading-5 text-ai-blue",children:[(0,a.jsx)(nJ,{className:"text-ai-blue"}),(0,a.jsx)("p",{className:"pl-1",children:e.premiumActionCost})]})})]})]})}nJ.displayName="PremimCreditIcon";let n0=(0,v.PA)(function(e){let{tool:n,displayName:l,description:t,inputSchema:i,isPremium:s,premiumActionCost:r,onCheck:o}=e,d=(0,es.useCallback)(()=>{null==o||o()},[o]);return(0,a.jsx)("div",{className:"group w-full cursor-pointer rounded-lg border-1 border-transparent p-2 hover:border-slate-7",onClick:d,children:(0,a.jsxs)($.f,{top:!0,className:"group",children:[(0,a.jsx)(ef.si,{tool:n,className:"group mr-1 size-5 shrink-0 rounded-md bg-white"}),(0,a.jsxs)(nY.V,{left:!0,className:"group w-full gap-y-1",children:[(0,a.jsxs)("div",{className:"group flex items-center gap-2 text-left text-sm text-slate-12",children:[(0,a.jsx)("span",{"data-testid":"action-tile-display-name",children:l}),s&&(0,a.jsx)(nX,{premiumActionCost:r}),i&&Object.keys(i.properties).length>0?(0,a.jsx)(n$,{inputSchema:i,size:4}):null]}),(0,a.jsx)("div",{className:"flex gap-2",children:t&&(0,a.jsx)("div",{className:"group text-left text-xs font-normal text-slate-9 group-hover:text-slate-11",children:(0,a.jsx)(nq.o,{className:"[&_a:hover]:no-underline [&_a]:underline",allowHTML:!1,disableCopyUI:!0,isInput:!1,children:t})})})]})]})})});function n1(e,n){let{tool:l,key:a}=n;return!1}function n2(e,n,l){let{tool:a,key:t}=l;return[].some(e=>{var l;let{key:t}=e;return!(null===(l=n[a])||void 0===l?void 0:l.has(t))})}let n3=new Set(["BrowseAI","GitHub","YouTube"]);class n6{static splitLast(e,n){let l=e.lastIndexOf(n);return -1===l?[e]:[e.slice(0,l),e.slice(l+1)]}static fromPascalCase(e){if(n3.has(e))return e;let n=[""],l=!1;for(let a of Array.from(e))a.toUpperCase()===a?(l||n.push(""),l=!0):l=!1,n[n.length-1]+=a;return n.filter(Boolean).join(" ")}static fromCamelCase(e){let n=n6.fromPascalCase(e);return n[0]&&(n="".concat(n[0].toUpperCase()).concat(n.slice(1))),n}static isDigit(e){return"0"===e||"1"===e||"2"===e||"3"===e||"4"===e||"5"===e||"6"===e||"7"===e||"8"===e||"9"===e}static truncate(e,n){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"...";return e.length>n-l.length?e.slice(0,n-l.length)+l:e}static getLastWords(e,n){return e.split(" ").slice(-n).join(" ")}static replaceAllOccurrencesFromMap(e,n){return Array.from(n.entries()).reduce((e,n)=>{let[l,a]=n;return e.replaceAll(l,a)},e)}static recursivelyApplyForString(e,n){if(Array.isArray(e))return e.map(e=>n6.recursivelyApplyForString(e,n));if("object"==typeof e&&null!==e){let l={};return Object.entries(e).forEach(e=>{let[a,t]=e;l[a]=n6.recursivelyApplyForString(t,n)}),l}return"string"==typeof e?n(e):e}}let n5=(0,v.PA)(function(e){var n,l;let{handleSetSelectedTool:t,selectedTool:i,tools:s,selectedToolsAndActions:r,addAction:o,closeModal:d,checkedActions:u,setCheckedActions:c,maxActions:g}=e,[m,y]=(0,es.useState)(!1),p=function(e){let n=(0,es.useMemo)(()=>["tools/[tool]/actions","get",e.params.tool],[e.params.tool]),l=(0,ng.lB)(()=>null==e?void 0:e.options,[null==e?void 0:e.options]),a=(0,nc.I)({queryKey:n,queryFn:async()=>{let{data:n,error:l}=await nR(e);if(l)throw l;return n},...null==e?void 0:e.options}),t=(0,ng.lB)(()=>a,[a]);return(0,nm.R)(n,t,l)}({params:{tool:i},options:{enabled:!!i}});(0,nM.l)(()=>{i||y(!1)},[i]);let f=Object.values(u).reduce((e,n)=>e+=n.size,0),h=(0,nS.q2)(()=>{var e;return new Set((null!==(e=r[i])&&void 0!==e?e:[]).map(e=>e.action))},[i,r]),k=(0,nS.q2)(()=>{var e;return null!==(e=u[i])&&void 0!==e?e:new Set},[u,i]),F=h.size,x=k.size,v=(0,nS.q2)(()=>Object.entries(u).flatMap(e=>{let[n,l]=e;return[...l].map(e=>({tool:n,key:e}))}).filter(n1.bind(null,s)).filter(n2.bind(null,s,u)).map(e=>({toolAction:e,missingDependencies:[].filter(n=>{var l;let{key:a}=n;return!(null===(l=u[e.tool])||void 0===l?void 0:l.has(a))})})),[s,u]),b=(0,nS.q2)(()=>0===f?"Add Actions":1===f?"Add 1 Action":"Add ".concat(f," Actions"),[f]),S=0===f||v.length>0,T=0===f?"Select at least one action to add":v.length>0?function(e,n,l){let t=n=>{var a,t,i;let s=null===(a=e[n.tool])||void 0===a?void 0:a.tool,r=null===(i=e[n.tool])||void 0===i?void 0:null===(t=i.actions[n.key])||void 0===t?void 0:t.displayName;return"".concat(s===l?"":"".concat(s,": ")).concat(r)};return(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"mb-1",children:"Some actions are missing dependencies:"}),n.map(e=>{let{toolAction:n,missingDependencies:l}=e;return(0,a.jsx)("span",{children:"".concat(t(n)," depends on ").concat(l.map(t).join(", "),".")},"".concat(n.tool,"::").concat(n.key))})]})}(s,v,i):null,K=(0,es.useCallback)(()=>{r&&i&&!S&&(Object.entries(u).flatMap(e=>{let[n,l]=e;return[...l].map(e=>({tool:n,action:e}))}).filter(e=>!h.has(e.action)).forEach(o),y(!1),d())},[u,i,r,o,d,S,h]),I=Object.values(u).reduce((e,n)=>e+n.size,0),C=null!=g&&1===g,A=(0,es.useCallback)(e=>{let{key:n,alreadyAdded:l,observableChannel:a}=e;return()=>{if(C){o({tool:i,action:n,observableChannel:a}),d();return}!l&&(k.has(n)||void 0===g||!(I>=g))&&(k.has(n)?k.delete(n):[n,...[].map(e=>e.key)].forEach(e=>k.add(e)),c({...u,[i]:k}))}},[C,k,g,I,u,i,c,o,d,s]),j=(0,es.useCallback)(()=>{if(i&&void 0===g){if(m)c({...u,[i]:new Set([])});else{var e;c({...u,[i]:new Set(null===(e=p.data)||void 0===e?void 0:e.filter(e=>!h.has(e.actionKey)).map(e=>e.actionKey))})}y(!m)}},[i,g,m,c,u,p.data,h]),N=(0,es.useCallback)(()=>{t(null)()},[t]),L=(0,es.useCallback)(e=>n=>{"Enter"===n.key&&A(e)()},[A]),_=(0,es.useCallback)(e=>{"Enter"===e.key&&j()},[j]),w=(0,nS.q2)(()=>k&&Array.from(k).pop(),[k]);return(0,a.jsxs)("div",{className:"flex size-full flex-col gap-6 overflow-auto",children:[(0,a.jsx)(nQ,{title:n6.fromPascalCase(i),subtitle:"Select actions to add to your Lindy.",onClose:d,onBack:N}),!C&&(0,a.jsxs)($.f,{className:"mb-3 w-full gap-x-4 pl-1",children:[(0,a.jsx)(nD.S,{id:"select-all",label:"",checked:F+x===(null===(n=p.data)||void 0===n?void 0:n.length),onChange:j,onKeyDown:_,disabled:void 0!==g}),(0,a.jsx)("div",{className:"text-sm font-normal text-slate-11 hover:cursor-pointer",onClick:j,children:"Select all"})]}),(0,a.jsx)(nP.o,{query:p,className:"flex h-full flex-col justify-between space-y-6 overflow-y-auto pb-4",children:(0,a.jsx)(nY.V,{className:"w-full gap-y-4 pl-1",children:null===(l=p.data)||void 0===l?void 0:l.map(e=>{let n=h.has(e.actionKey);return(0,a.jsxs)($.f,{top:!0,className:"w-full",inView:e.actionKey===w,children:[!C&&(0,a.jsx)(nD.S,{id:e.actionKey,"data-testid":"lindy.agent-wizard.action-checkbox",className:"mt-3","data-tool-name":i,"data-action-name":e.actionKey,label:"",disabled:n||!k.has(e.actionKey)&&void 0!==g&&I>=g,checked:k.has(e.actionKey)||n,onChange:A({key:e.actionKey,alreadyAdded:n,observableChannel:e.observableChannel}),onKeyDown:L({key:e.actionKey,alreadyAdded:n,observableChannel:e.observableChannel})}),(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(n0,{tool:i,displayName:e.displayName,description:e.description,inputSchema:e.inputSchema,isPremium:e.isPremium,premiumActionCost:e.premiumActionCost,onCheck:A({key:e.actionKey,alreadyAdded:n,observableChannel:e.observableChannel})},e.actionKey)})]},e.actionKey)})})}),!C&&(0,a.jsxs)(eJ.m_,{placement:"top",children:[T&&(0,a.jsx)(eJ.ZI,{className:"z-modal-overlay-tooltips p-4",children:T}),(0,a.jsx)(eJ.k$,{asChild:!0,children:(0,a.jsx)(eb.$,{className:"self-end","data-testid":"lindy.agent-wizard.add-actions-button",onClick:K,"aria-disabled":S,children:b})})]})]})});var n4=l(76916),n7=l(61745),n9=l(76804);let n8=(0,v.PA)(function(e){var n;let{handleSetSelectedStatefulTool:l,selectedStatefulTool:t,addAction:i,closeModal:s}=e,r=(0,es.useCallback)(e=>()=>{i(e),s()},[i,s]),o=(0,es.useCallback)(()=>{l(null)()},[l]),d=(0,nk.JL)(t.nodeId),{data:u,fetchStatus:c}=(0,n7.ax)(d,t.key);return(0,a.jsxs)("div",{className:"flex h-full w-full flex-col gap-6 overflow-auto",children:[(0,a.jsx)(nQ,{title:null!==(n=null==u?void 0:u.displayName)&&void 0!==n?n:"Tool",subtitle:"Select action",onClose:s,onBack:o}),(0,a.jsx)(nY.V,{className:"w-full gap-y-4 pb-6 pl-1",children:u||"idle"!==c?void 0===u?(0,a.jsx)(n9.y,{}):Object.values(u.actions).map(e=>(0,a.jsx)($.f,{top:!0,className:"w-full",children:(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(n0,{tool:e.tool,displayName:e.displayName,description:e.description,isPremium:e.isPremium,onCheck:r({tool:e.tool,statefulToolKey:t.key,action:e.actionKey,createdByNodeId:t.nodeId,observableChannel:e.observableChannel})},e.actionKey)})},e.actionKey)):(0,a.jsx)(n4.$,{error:"Stateful tool details not found for node",errorMessage:"This tool has no actions"})})]})});var le=l(3764);function ln(e){var n;let l=(0,es.useRef)(null),t=null!==(n=e.buffer)&&void 0!==n?n:300,i=(0,es.useCallback)(n=>{ll(e.query)&&n.currentTarget.scrollHeight-n.currentTarget.scrollTop-n.currentTarget.clientHeight<t&&!e.query.isFetchingNextPage&&e.query.fetchNextPage()},[t,e.query]);(0,es.useEffect)(()=>{ll(e.query)&&!e.query.isFetchingNextPage&&e.query.hasNextPage&&l.current&&l.current.scrollHeight<l.current.clientHeight+t&&e.query.fetchNextPage()},[t,e.query]);let s=(0,es.useMemo)(()=>"boolean"==typeof e.isLoading?{...e.query,isLoading:e.isLoading}:e.query,[e.isLoading,e.query]);return(0,a.jsxs)("div",{ref:l,onScroll:i,className:(0,K.QP)("h-full w-full overflow-y-auto relative",e.className),children:[(0,le.YW)(s).with({isLoading:!0},()=>(0,a.jsx)("div",{className:"flex w-full items-center justify-center p-4",children:(0,a.jsx)(n9.y,{})})).with({isError:!0},n=>{let{error:l}=n;return(0,a.jsx)(n4.$,{error:l,errorMessage:e.errorMessage})}).with({isSuccess:!0},n=>(0,a.jsx)(a.Fragment,{children:"function"==typeof e.children?e.children(ll(n)?n.data.pages.flat():n.data):e.children})).exhaustive(),ll(s)&&s.hasNextPage&&(0,a.jsx)("div",{className:"relative col-span-full flex w-full items-center justify-center py-10",children:(0,a.jsx)(n9.y,{className:s.isFetchingNextPage?"opacity-100":"opacity-0"})})]})}function ll(e){return"fetchNextPage"in e}var la=l(77576),lt=l(9966),li=l(70073),ls=l(93311),lr=l(71552);let lo=e=>"isPremium"in e&&!0===e.isPremium,ld=e=>"premiumActionCost"in e&&e.premiumActionCost||null;function lu(e){return"actionKey"in e?e.actionKey:e.name}let lc=e=>e?"request"===e.type?"request":"tool"===e.type?"tool:".concat(e.name):"actionOrTrigger:".concat(e.toolName,":").concat(lu(e.actionOrTrigger)):"loader",lg=function(e){let{index:n,style:l,data:t}=e,i=t.rows[n],s=(0,es.useRef)(null),r=(0,es.useCallback)(()=>{var e;let l=null===(e=s.current)||void 0===e?void 0:e.clientHeight;if(null!=l){let e=lc(i);t.setRowHeight(e,n,l)}},[t,n,i]);if((0,lt.A)(s,r),!i)return(0,a.jsx)("div",{style:l,children:(0,a.jsx)("div",{ref:s,className:"flex w-full items-center justify-center p-8",children:(0,a.jsx)(n9.y,{})})});if("request"===i.type)return(0,a.jsx)("div",{style:l,children:(0,a.jsx)("div",{ref:s,children:i.element})});if("tool"===i.type)return(0,a.jsx)("div",{style:l,children:(0,a.jsx)("div",{ref:s,children:(0,a.jsx)("button",{onClick:t.handleSetSelectedTool(i.name),"data-testid":"lindy.agent-wizard.tool-tile","data-tool-name":i.name,className:"mb-1 mt-3 cursor-pointer p-px text-sm font-medium text-slate-12 underline-offset-2 hover:underline",children:n6.fromPascalCase(i.name)})})});let o=lu(null==i?void 0:i.actionOrTrigger),d=lo(i.actionOrTrigger),u=ld(i.actionOrTrigger);return(0,a.jsx)("div",{style:l,children:(0,a.jsx)("div",{ref:s,children:(0,a.jsx)("button",{className:"w-full",onClick:t.selectToolAndAddAction(i.toolName,o),children:(0,a.jsx)(n0,{tool:i.toolName,displayName:i.actionOrTrigger.displayName,description:i.actionOrTrigger.description,isPremium:d,premiumActionCost:u},o)})})})},lm=(0,v.PA)(function(e){let{tools:n,searchInput:l,toolsQuery:t,isTrigger:i,handleSetSelectedTool:s,closeModal:r,setCheckedActions:o,checkedActions:d,requestToolTile:u,selectedToolsAndActions:c,addAction:g,maxActions:m}=e,y=(0,es.useCallback)((e,n)=>{var l;return!!(lu(e).toLowerCase().includes(n)||e.displayName.toLowerCase().includes(n)||(null===(l=e.description)||void 0===l?void 0:l.toLowerCase().includes(n)))},[]),p=(0,es.useCallback)((e,l)=>a=>{var t,u,y,p,f,h,k;a.stopPropagation();let F=null===(u=n[e])||void 0===u?void 0:null===(t=u.actions)||void 0===t?void 0:t[l],x=null===(p=n[e])||void 0===p?void 0:null===(y=p.triggers)||void 0===y?void 0:y[l];if(!i&&F&&1===m&&g){g({tool:F.tool,action:F.actionKey,observableChannel:F.observableChannel?{statefulToolKey:F.observableChannel.statefulToolKey}:void 0}),r();return}if(i&&x&&1===m&&g){g({tool:x.tool,action:x.name});return}if(s(e)(),o&&c&&d&&!(null!==(h=c&&(null===(f=c[e])||void 0===f?void 0:f.some(n=>{let{tool:a,action:t}=n;return a===e&&t===l})))&&void 0!==h&&h)){let n=null!==(k=d[e])&&void 0!==k?k:new Set;n.add(l),o({...d,[e]:n})}},[n,i,m,g,s,o,c,d,r]),f=(0,es.useRef)(null),h=(0,es.useRef)(null),k=(0,es.useCallback)(e=>n=>{e(n),h.current=n},[h]),F=(0,es.useCallback)(()=>{h.current&&h.current.resetAfterIndex(0,!1),f.current&&f.current.resetloadMoreItemsCache()},[]);(0,nM.l)(()=>{F()},[F,l]);let x=(0,nS.q2)(()=>{let e=l.split(/[\s,]+/).filter(e=>e.length>0).map(e=>e.toLowerCase()),a=[];return Object.values(n).forEach(n=>{let l=e.reduce((e,l)=>!e.length||n.tool.toLowerCase().includes(l)?e:e.filter(e=>y(e,l)),Object.values(i?n.triggers:n.actions));0!==l.length&&(a.push({type:"tool",name:n.tool}),l.forEach(e=>{a.push({type:"actionOrTrigger",toolName:n.tool,actionOrTrigger:e})}))}),0===a.length&&a.push({type:"request",element:u}),a},[u,l,n,y,i]),v=(0,es.useRef)(new Map),b=(0,es.useCallback)((e,n,l)=>{v.current.get(e)!==l&&(v.current.set(e,l),h.current&&h.current.resetAfterIndex(n))},[]),S=(null==t?void 0:t.hasNextPage)?x.length+1:x.length,T=(0,es.useCallback)(e=>e<x.length,[x]),K=(0,es.useCallback)(e=>{var n;let l=lc(x[e]);return null!==(n=v.current.get(l))&&void 0!==n?n:43},[x]),I=(0,es.useCallback)(e=>lc(x[e]),[x]),[C,A]=(0,es.useState)(!1),[j,N]=(0,es.useState)(0),L=(0,es.useCallback)(async()=>{t&&t.hasNextPage&&(A(!0),N(x.length),await (null==t?void 0:t.fetchNextPage()))},[x.length,t]);(0,nM.l)(()=>{t&&!t.isFetching&&C&&x.length===j&&(A(!1),L())},[L,C,j,x,t]);let _=(0,nS.q2)(()=>({rows:x,handleSetSelectedTool:s,selectToolAndAddAction:p,setRowHeight:b}),[x,b,s,p]);return(0,a.jsx)(nY.V,{left:!0,"data-testid":"lindy.agent-wizard.tools-with-actions-search-results.wrapper",className:"size-full min-h-screen",children:(0,a.jsx)(li.Ay,{children:e=>{let{height:n,width:l}=e;return(0,a.jsx)(lr.A,{isItemLoaded:T,loadMoreItems:L,itemCount:S,ref:f,children:e=>{let{onItemsRendered:t,ref:i}=e;return(0,a.jsx)(ls._m,{itemData:_,itemCount:S,itemKey:I,width:l,height:n,onItemsRendered:t,ref:k(i),itemSize:K,className:"pb-6",children:lg})}})}})})});var ly=l(82484);let lp=function(e){let{as:n,label:l,tool:t,iconElement:i,searchInput:s,description:r,...o}=e;return(0,es.createElement)(null!=n?n:"button",{className:"flex h-[92px] select-none flex-col items-start justify-between gap-y-2 rounded-lg border border-slate-7 p-4 hover:cursor-pointer hover:border-slate-8 hover:bg-slate-2 active:bg-slate-3","data-testid":"lindy.agent-wizard.tool-tile",...t?{"data-tool-name":t}:{},...o},(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)($.f,{between:!0,top:!0,className:"w-full",children:[i,(0,a.jsx)(nU.I,{placement:"top",className:"z-modal-overlay-tooltips max-w-[225px]",iconClassName:"-mr-1 -mt-0.5 h-5 w-5 text-slate-11",triggerAsChild:!0,children:r})]}),(0,a.jsx)("div",{className:"text-left text-sm font-medium text-slate-12",children:s&&s.length>0?function(e,n){let l=e.split(RegExp("(".concat((0,ly.A)(n),")"),"gi"));return(0,a.jsx)("span",{children:l.map((e,l)=>(0,a.jsx)("span",{className:(0,K.QP)(e.toLowerCase()===n.toLowerCase()&&"bg-warning-9"),children:e},l))})}(l,s):l})]}))};var lf=l(69507),lh=l(58522);let lk=(0,es.memo)(function(e){return(0,a.jsxs)(lh.a,{...e,viewBox:"0 0 24 24",children:[(0,a.jsx)("rect",{width:"24",height:"24",fill:"url(#paint0_linear_715_3367)"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.9997 5.33301C8.31778 5.33301 5.33301 8.31778 5.33301 11.9997C5.33301 15.6816 8.31778 18.6663 11.9997 18.6663C15.6816 18.6663 18.6663 15.6816 18.6663 11.9997C18.6663 8.31778 15.6816 5.33301 11.9997 5.33301ZM11.9997 9.99967C11.7481 9.99967 11.5281 10.1387 11.414 10.3474C11.2373 10.6704 10.8322 10.789 10.5092 10.6123C10.1862 10.4357 10.0675 10.0306 10.2442 9.70753C10.5828 9.08855 11.2414 8.66634 11.9997 8.66634C13.0095 8.66634 13.7109 9.33729 13.9106 10.1257C14.1114 10.9182 13.8064 11.8417 12.8941 12.2978C12.7545 12.3676 12.6663 12.5103 12.6663 12.6663C12.6663 13.0345 12.3679 13.333 11.9997 13.333C11.6315 13.333 11.333 13.0345 11.333 12.6663C11.333 12.0052 11.7065 11.4009 12.2978 11.1052C12.601 10.9537 12.6789 10.6928 12.6181 10.4531C12.5563 10.2091 12.3519 9.99967 11.9997 9.99967ZM11.9997 15.333C12.3679 15.333 12.6663 15.0345 12.6663 14.6663C12.6663 14.2982 12.3679 13.9997 11.9997 13.9997C11.6315 13.9997 11.333 14.2982 11.333 14.6663C11.333 15.0345 11.6315 15.333 11.9997 15.333Z",fill:"url(#paint1_linear_715_3367)"}),(0,a.jsxs)("defs",{children:[(0,a.jsxs)("linearGradient",{id:"paint0_linear_715_3367",x1:"34.9447",y1:"-11.5388",x2:"3.29643",y2:"21.0986",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"#353535"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#A3A3A3"})]}),(0,a.jsxs)("linearGradient",{id:"paint1_linear_715_3367",x1:"16.2304",y1:"5.33301",x2:"10.7817",y2:"25.2048",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"white"}),(0,a.jsx)("stop",{offset:"1",stopColor:"white"})]})]})]})});var lF=l(95814),lx=l(20335),lv=l(41285);let lb=(0,v.PA)(function(e){let{node:n,handleSetSelectedTool:l,handleSetSelectedStatefulTool:t,searchInput:i,handleSearchInputChange:s,closeModal:r,setCheckedActions:o,checkedActions:d,selectedToolsAndActions:u,isTrigger:c=!1,addAction:g,maxActions:m,required:y=!1}=e,{isMobileOnly:p}=(0,lf.Y0)(),{data:f}=(0,la.U)(),{tools:h,query:k}=nN({triggers:c,actions:!c}),F=(0,nS.q2)(()=>Object.values(h),[h]),x=(0,nS.q2)(()=>F.filter(e=>e.popular),[F]),v=(0,nS.q2)(()=>F.filter(e=>!e.popular),[F]),b=(0,nS.q2)(()=>{var e;let n=new URL("mailto:support@lindy.ai");return n.search=new URLSearchParams({subject:"".concat(c?"Trigger":"Action"," Request"),body:"Hey, ".concat(null!==(e=null==f?void 0:f.name)&&void 0!==e?e:"Lindy's user"," here. I want to be able to create ").concat(c?"a trigger":"an action"," using __________")}).toString(),n.toString().replaceAll("+","%20")},[null==f?void 0:f.name,c]),S=(0,nS.q2)(()=>(0,a.jsx)(lp,{as:"a",href:b,target:"_blank",iconElement:(0,a.jsx)(lk,{className:"size-6"}),label:"Request ".concat(c?"a trigger":"an action")}),[b,c]),T=(0,n7.dF)(n),I=(0,nS.q2)(()=>{var e;let n=null!==(e=null==T?void 0:T.filter(e=>!c&&Object.keys(e.actions).length>0))&&void 0!==e?e:[],l=new Map;return n.forEach(e=>{var n;let a=null!==(n=l.get(e.statefulToolKey))&&void 0!==n?n:0;l.set(e.statefulToolKey,a+1)}),n.map(e=>{var n;return{...e,label:(null!==(n=l.get(e.statefulToolKey))&&void 0!==n?n:0)>1?"".concat(e.displayName,": ").concat(e.occurrence):e.displayName}})},[T,c]),C=k.isLoading||!T;return(0,a.jsxs)("div",{className:"flex size-full flex-col overflow-auto",children:[(0,a.jsx)(nQ,{title:"Add ".concat(c?"Trigger":"Action"),subtitle:c?"Select a trigger that will initiate a response from Lindy.":"Select an action to add to your Lindy.",onClose:r,hideCloseButton:y}),(0,a.jsx)(lx.pd,{placeholder:"Search by App or Action",className:"mx-px my-3 border-transparent bg-slate-3 text-sm font-medium",value:i,onChange:s,preIcon:(0,a.jsx)(lF.W,{}),"data-testid":"lindy.agent-wizard.search-input",autoFocus:!0}),i.length>0?(0,a.jsx)(lm,{tools:h,isTrigger:c,toolsQuery:k,searchInput:i,handleSetSelectedTool:l,closeModal:r,setCheckedActions:o,checkedActions:d,requestToolTile:S,selectedToolsAndActions:u,maxActions:m,addAction:g}):(0,a.jsxs)(ln,{query:k,isLoading:C,className:(0,K.QP)("mt-1 h-auto w-full gap-4 overflow-y-auto pr-0.5 pb-6",!C&&!k.error&&(p?"grid grid-cols-2":"grid grid-cols-3")),children:[I.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(lv.J,{className:"col-span-full -mb-2 mt-2 text-lg font-medium text-slate-12",children:"Recommended"}),I.map(e=>(0,a.jsx)(lp,{iconElement:(0,a.jsx)(ef.si,{className:"size-6",tool:e.tool}),label:e.label,onClick:t({key:e.statefulToolKey,nodeId:e.createdByNodeId}),searchInput:i,tool:e.statefulToolKey},"".concat(e.createdByNodeId,":").concat(e.statefulToolKey)))]}),x.length&&v.length?(0,a.jsx)(lv.J,{className:"col-span-full -mb-2 mt-2 text-lg font-medium text-slate-12",children:"Popular Tools"}):null,x.map(e=>(0,a.jsx)(lp,{iconElement:(0,a.jsx)(ef.si,{className:"size-6",tool:e.tool}),label:e.displayName,onClick:l(e.tool),searchInput:i,tool:e.tool,description:e.description},e.tool)),x.length&&v.length?(0,a.jsx)(lv.J,{className:"col-span-full -mb-2 mt-2 text-lg font-medium text-slate-12",children:"Other Tools"}):null,v.map(e=>(0,a.jsx)(lp,{iconElement:(0,a.jsx)(ef.si,{className:"size-6",tool:e.tool}),label:e.displayName,onClick:l(e.tool),searchInput:i,tool:e.tool,description:e.description},e.tool)),S]})]})}),lS=(0,v.PA)(function(e){let{node:n,open:l,onClose:t,addAction:i,selectedToolsAndActions:s,tools:r,maxActions:o,required:d=!1}=e,[u,c]=(0,es.useState)(null),[g,m]=(0,es.useState)(null),[y,p]=(0,es.useState)(""),[f,h]=(0,es.useState)({});(0,es.useEffect)(()=>{l||p("")},[u,l]);let k=(0,es.useCallback)(e=>()=>{c(e)},[c]),F=(0,es.useCallback)(e=>()=>{m(e)},[m]),x=(0,es.useCallback)(e=>{p(e)},[p]),v=!!u,b=!!g;return(0,a.jsx)(n_,{open:l,setClosed:t,"data-testid":"lindy.agent-wizard.action-modal",hasBottomPadding:v,children:v?(0,a.jsx)(n5,{handleSetSelectedTool:k,selectedTool:u,tools:r,selectedToolsAndActions:s,addAction:i,closeModal:t,checkedActions:f,setCheckedActions:h,maxActions:o}):b?(0,a.jsx)(n8,{handleSetSelectedStatefulTool:F,selectedStatefulTool:g,addAction:i,closeModal:t}):(0,a.jsx)(lb,{node:n,required:d,handleSetSelectedTool:k,handleSetSelectedStatefulTool:F,searchInput:y,handleSearchInputChange:x,closeModal:t,setCheckedActions:h,checkedActions:f,selectedToolsAndActions:s,isTrigger:!1,addAction:i,maxActions:o})})});var lT=l(99100),lK=l(60171),lI=l(12355);let lC=(0,v.PA)(function(e){var n;let{data:l,references:t}=e,i=(0,nk.JL)(l._id),s=null==i?void 0:i.tool,r=(0,eh.HY)(i)?i.occurrence:null,o=!!(0,eh.HY)(i)&&i.isRepeatedAction,d=null!==(n=null==i?void 0:i.displayNamePrimary)&&void 0!==n?n:"Action",u=null==i?void 0:i.displayNameSecondary;return(0,a.jsx)("li",{children:(0,a.jsxs)(nY.V,{left:!0,className:"gap-2",children:[(0,a.jsx)(lI.J,{icon:s&&(0,a.jsx)(ef.si,{tool:s,className:"size-5 shrink-0"}),title:d,subtitle:u,occurrence:r,showOccurrence:o}),t&&(0,a.jsx)("ul",{className:"flex flex-col gap-2",children:t.map(e=>(0,a.jsx)("li",{className:"pl-[28px]",children:(0,a.jsx)("p",{className:"relative inline-flex items-center gap-x-1 whitespace-nowrap rounded-md border border-solid bg-indigo-4 p-0.5 align-baseline text-sm leading-[21px] text-indigo-9 transition-colors",children:e.path})},e.path))})]})})}),lA=(0,v.PA)(function(e){let{node:n}=e,{actionReferencesToNode:l,outputReferencesToNode:t}=n;return(0,a.jsxs)(nY.V,{className:"gap-6",children:[t.length>0&&(0,a.jsxs)(nY.V,{children:[(0,a.jsx)("p",{className:"font-medium text-slate-10",children:"There are steps using data from the step being deleted. By deleting this step, that data will no longer be available. If you continue, you will need to replace or remove the following data."}),(0,a.jsx)("ul",{className:"flex w-full appearance-none flex-col gap-2 rounded-md border border-slate-4 bg-slate-1 px-3 py-2 text-slate-12 dark:bg-slate-1",children:t.map(e=>(0,a.jsx)(lC,{data:e.node,references:e.references},e.node._id))})]}),l.length>0&&(0,a.jsxs)(nY.V,{children:[(0,a.jsx)("p",{className:"font-medium text-slate-10",children:"".concat(l.length?"Additionally, there":"There"," are actions that are dependent on the step being deleted. If you continue, you will need to replace or remove the following actions.")}),(0,a.jsx)("ul",{className:"flex w-full appearance-none flex-col gap-2 rounded-md border border-slate-4 bg-slate-1 px-3 py-2 text-slate-12 dark:bg-slate-1",children:l.map(e=>(0,a.jsx)(lC,{data:e},e._id))})]})]})});var lj=l(84093);let lN=(0,v.PA)((0,es.forwardRef)(function(e,n){let{isDangerousNodeDeletion:l}=e.node,t=(0,nb.j)(),i=(0,es.useCallback)(()=>{var n;null===(n=e.onClick)||void 0===n||n.call(e),e.node.delete()},[e]),s=(0,es.useCallback)(()=>{if(l){t.onOpen();return}i()},[t,l,i]),r=(0,es.useCallback)(()=>{var n;t.onClose(),null===(n=e.onClick)||void 0===n||n.call(e)},[t,e]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(eS.VJ,{ref:n,className:"hover:bg-red-3",onClick:s,children:[(0,a.jsx)(eS.Hf,{children:(0,a.jsx)(lj.u,{className:(0,K.QP)(eS.b3,"stroke-red-8")})}),(0,a.jsx)(eS.AB,{className:"text-danger-9",children:"Delete"})]}),(0,a.jsx)(lK.u,{open:t.isOpen,onCancel:r,onConfirm:i,title:"Warning",text:(0,a.jsx)(lA,{node:e.node}),level:"danger",confirmLabel:"Delete"})]})})),lL=(0,es.memo)(function(e){let{stroke:n=1.5,join:l="round",...t}=e;return(0,a.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:(0,a.jsx)("path",{d:"M2.75 5.75H8M8 5.75H13.25M8 5.75V18.25M16.75 2.75H19M19 2.75H21.25M19 2.75V21.25M19 21.25H16.75M19 21.25H21.25",stroke:"currentColor",strokeWidth:n,strokeLinecap:l,strokeLinejoin:"round"===l?"round":"bevel"})})}),l_=(0,es.forwardRef)(function(e,n){return(0,a.jsxs)(eS.VJ,{ref:n,onClick:e.onClick,children:[(0,a.jsx)(eS.Hf,{children:(0,a.jsx)(lL,{className:eS.b3})}),(0,a.jsx)(eS.AB,{children:"Rename"})]})});var lw=l(55210);let lR=(0,es.forwardRef)(function(e,n){return(0,a.jsxs)(eS.VJ,{ref:n,onClick:e.onClick,children:[(0,a.jsx)(eS.Hf,{children:(0,a.jsx)(lw.R,{className:eS.b3})}),(0,a.jsx)(eS.AB,{children:"Replace"})]})}),lD=(0,v.PA)(function(e){var n,l;let t=x.a.enabledFeatureFlags.includes(eE.T.NewToolsModal),{tools:i}=nN({actions:!0,agent:!0}),s=(0,nb.j)(),r=null===(n=e.node.action)||void 0===n?void 0:n.tool,o=null===(l=e.node.action)||void 0===l?void 0:l.action,d=(0,es.useMemo)(()=>r&&o?{[r]:[{tool:r,action:o}]}:{},[r,o]),u=(0,es.useCallback)(()=>{var n,l;null===(n=e.onClose)||void 0===n||n.call(e),null===(l=e.onRename)||void 0===l||l.call(e)},[e]),c=(0,es.useCallback)(()=>{var n;null===(n=e.onClose)||void 0===n||n.call(e),e.node.openToolsModal()},[e]),g=(0,es.useCallback)(()=>{s.onOpen()},[s]),m=(0,es.useCallback)(n=>{var l,a,t;e.node.addAction(n),null===(l=e.onClose)||void 0===l||l.call(e),null===(t=x.a.lindies)||void 0===t||null===(a=t.currentLindy)||void 0===a||a.stateGraph.setSelectedEntityById(e.node.id)},[e]),y=(0,es.useCallback)(()=>{var n;s.onClose(),null===(n=e.onClose)||void 0===n||n.call(e)},[s,e]);return e.node?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{onClick:lT.d,children:[e.onRename&&(0,a.jsx)(l_,{onClick:u}),(0,a.jsx)(lR,{onClick:t?c:g}),(0,a.jsx)(lN,{node:e.node,onClick:e.onClose})]}),(0,a.jsx)(lS,{node:e.node,tools:i,open:s.isOpen,onClose:y,selectedToolsAndActions:d,maxActions:1,addAction:m},String(s.isOpen)+e.node.id)]}):null}),lP=(0,v.PA)(function(e){let n=(0,es.useCallback)(n=>{var l,a;n.stopPropagation(),null===(l=e.onRename)||void 0===l||l.call(e),null===(a=e.onClose)||void 0===a||a.call(e)},[e]);return(0,a.jsxs)(a.Fragment,{children:[e.onRename&&(0,a.jsx)(l_,{onClick:n}),(0,a.jsx)(lN,{node:e.node,onClick:e.onClose})]})});var lM=l(70732),lE=l(51042),lV=l(45801);function lG(e){let n=(0,es.useRef)(null),l=(0,es.useCallback)(()=>{if(n.current&&n.current.scrollTop+n.current.clientHeight+100>=n.current.scrollHeight&&!e.isLoading){var l;null===(l=e.fetchMore)||void 0===l||l.call(e)}},[e]);return(0,a.jsxs)("div",{ref:n,onScroll:l,className:(0,K.QP)("h-full w-full overflow-y-auto",lV.Oc),children:[(0,a.jsx)("div",{children:e.children}),e.isLoading&&(0,a.jsx)("div",{className:"flex h-16 items-center justify-center",children:(0,a.jsx)(n9.y,{})})]})}function lB(e){return(0,a.jsxs)("div",{children:[(0,a.jsx)("button",{"data-testid":"lindy.agent-wizard.tool-tile","data-tool-name":e.toolName,className:"mb-1 mt-3 cursor-pointer p-[1px] text-sm font-medium text-slate-12 underline-offset-2 hover:underline",onClick:e.onClick,children:e.label}),e.children]})}function lO(e){return!1===e.if?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(lv.J,{className:"col-span-full mb-2 text-lg font-medium text-slate-12",children:e.label}),(0,a.jsx)("div",{className:"mb-8",children:e.children})]})}var lz=l(48422);let lQ=function(e){let{as:n,label:l,tool:t,iconElement:i,searchInput:s,description:r,...o}=e;return(0,es.createElement)(null!=n?n:"button",{className:"flex h-[92px] select-none flex-col items-start justify-between gap-y-2 rounded-lg border border-slate-7 p-4 hover:cursor-pointer hover:border-slate-8 hover:bg-slate-2 active:bg-slate-3","data-testid":"lindy.agent-wizard.tool-tile",...t?{"data-tool-name":t}:{},...o},(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)($.f,{between:!0,top:!0,className:"w-full",children:[i,(0,a.jsx)(nU.I,{placement:"top",className:"z-modal-overlay-tooltips max-w-[225px]",iconClassName:"-mr-1 -mt-0.5 h-5 w-5 text-slate-11",triggerAsChild:!0,children:r})]}),(0,a.jsx)("div",{className:"text-left text-sm font-medium text-slate-12",children:s&&s.length>0?(0,lz.Z)(l,s):l})]}))};function lq(e){let n=(0,es.useCallback)(n=>()=>{e.onClick(n)},[e]);return(0,a.jsx)("div",{className:"grid w-full grid-cols-3 gap-4",children:e.tools.map(l=>(0,a.jsx)(lQ,{iconElement:(0,a.jsx)(ef.si,{className:"h-6 w-6",tool:l.tool}),label:l.displayName,onClick:n(l),searchInput:e.searchInput,tool:l.tool,description:l.description},l.tool))})}function lU(e){let n=e.tools.filter(e=>e.popular),l=e.tools.filter(e=>!e.popular);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(lO,{if:n.length>0,label:"Popular Triggers",children:(0,a.jsx)(lq,{tools:n,searchInput:e.searchInput,onClick:e.onClick})}),(0,a.jsx)(lO,{if:l.length>0,label:"Other Triggers",children:(0,a.jsx)(lq,{tools:l,searchInput:e.searchInput,onClick:e.onClick})})]})}function lW(e){var n;return(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsx)(lx.pd,{placeholder:null!==(n=e.placeholder)&&void 0!==n?n:"Search by App or Action",className:"mx-px border-transparent bg-slate-3 text-sm font-medium",value:e.value,onChange:e.onChange,preIcon:(0,a.jsx)(lF.W,{}),"data-testid":"lindy.agent-wizard.search-input",autoFocus:!0})})}function lH(e){return(0,a.jsx)("h3",{className:(0,K.QP)("text-sm text-slate-9",e.className),children:e.children})}var l$=l(20628);let lZ=(0,es.memo)(function(e){let{inputSchema:n,size:l=5}=e;return(0,a.jsx)(nU.I,{className:"z-modal-overlay-tooltips p-4",iconClassName:(0,K.QP)(5===l?"h-5 w-5":"h-4 w-4","text-slate-9"),placement:"right",triggerAsChild:!0,children:(0,a.jsx)(lY,{inputSchema:n})})});function lY(e){let{inputSchema:n,name:l,additionalTypes:t=[],isRoot:i=!0}=e,{types:s,description:r,children:o}=(0,es.useMemo)(()=>{let e=nW.D.dedup([...(0,nH.bX)(n),...t]),l=(0,nH.l$)(n),a=[];if(nH.KQ.isArray(n)&&n.items){var i;let e=null!==(i=(0,nH.ub)(n.items))&&void 0!==i?i:"Item";a=[{inputSchema:n.items,name:e}]}else nH.KQ.isObject(n)&&(a=[],Object.entries(n.properties).forEach(e=>{let[l,t]=e,i=(0,nH.ub)(t,l),s=n.required&&!n.required.includes(l)?["optional"]:void 0;null==a||a.push({inputSchema:t,name:i,additionalTypes:s})}));return{types:e,description:l,children:a}},[t,n]),d=o.length>0;return(0,a.jsxs)("div",{className:(0,K.QP)("flex flex-col gap-4 text-sm",d?"w-min":"w-80"),children:[(0,a.jsx)("section",{className:"flex flex-col gap-y-0.5",children:l&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"mr-0.5 font-semibold",children:l})," ",(0,a.jsx)("span",{className:"text-slate-9 dark:text-slate-12",children:s.join(" ")})]}),r?(0,a.jsx)("p",{className:"text-slate-9 dark:text-slate-12",children:r}):null]})}),o.length>0&&(0,a.jsx)("div",{className:(0,K.QP)(!i&&"mb-2 ml-4","flex flex-col gap-1"),children:o.map(e=>(0,es.createElement)(lY,{...e,isRoot:!1,key:e.name}))})]})}let lJ=es.memo(function(e){let{tool:n,displayName:l,description:t,onCheck:i,inputSchema:s,isPremium:r}=e;return(0,a.jsx)("div",{className:"group w-full cursor-pointer rounded-lg border-1 border-transparent p-2 hover:border-slate-7",onClick:i,children:(0,a.jsxs)($.f,{top:!0,className:"group",children:[(0,a.jsx)(ef.si,{tool:n,className:"group mr-1 size-5 shrink-0 rounded-md bg-white"}),(0,a.jsxs)(nY.V,{left:!0,className:"group w-full gap-y-1",children:[(0,a.jsxs)("div",{className:"group flex items-center gap-2 text-left text-sm text-slate-12",children:[(0,a.jsx)("span",{"data-testid":"action-tile-display-name",children:l}),r&&(0,a.jsx)(nX,{premiumActionCost:null}),s&&Object.keys(s.properties).length>0?(0,a.jsx)(lZ,{inputSchema:s,size:4}):null]}),(0,a.jsx)("div",{className:"flex gap-2",children:t&&(0,a.jsx)("div",{className:"group text-left text-xs font-normal text-slate-9 group-hover:text-slate-11",children:t})})]})]})})});function lX(e){let n=(0,es.useCallback)(n=>()=>{e.onClick(n)},[e]);return(0,a.jsx)(nY.V,{className:"w-full gap-y-4 pb-6 pl-1",children:e.triggers.map(e=>(0,a.jsx)($.f,{top:!0,className:"w-full",children:(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(lJ,{tool:e.tool,displayName:e.displayName,description:e.description,onCheck:n(e),isPremium:e.isPremium})})},e.displayName+e.tool))})}function l0(e){let[n,l]=(0,es.useState)(""),t=(0,es.useCallback)(n=>()=>{l(""),e.onSelectTool(n)},[e]),i=(0,es.useCallback)(n=>l=>{e.onSelectTrigger({toolDetails:n,trigger:l})},[e]),s=(0,es.useMemo)(()=>e.tools.filter(e=>{var l;return Object.values(null!==(l=e.triggers)&&void 0!==l?l:[]).some(e=>e.displayName.toLowerCase().includes(n.toLowerCase())||e.tool.toLowerCase().includes(n.toLowerCase()))}),[e.tools,n]),r=(0,es.useMemo)(()=>n.length?(0,a.jsx)(a.Fragment,{children:s.map(e=>{var l;let s=Object.values(null!==(l=e.triggers)&&void 0!==l?l:[]).filter(e=>e.displayName.toLowerCase().includes(n.toLowerCase())||e.tool.toLowerCase().includes(n.toLowerCase()));return(0,a.jsx)(lB,{toolName:e.tool,label:e.displayName,onClick:t(e),children:(0,a.jsx)(lX,{triggers:s,onClick:i(e)})},e.tool)})}):(0,a.jsx)(lU,{tools:e.tools,searchInput:n,onClick:e.onSelectTool}),[n,e.tools,e.onSelectTool,s,t,i]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(l$.r,{children:"Add Trigger"}),(0,a.jsx)(lH,{children:"Select a trigger that will initiate a response from Lindy."})]}),(0,a.jsx)(lW,{value:n,onChange:l,placeholder:"Search by App or Action"}),(0,a.jsx)(lG,{children:r})]})}function l1(e,n){var l;switch(n.type){case"select-tool":return(null===(l=e.toolDetails)||void 0===l?void 0:l.tool)===n.toolDetails.tool?e:{toolDetails:n.toolDetails};case"select-trigger":return n.toolDetails?{toolDetails:n.toolDetails,triggerName:n.trigger.name}:e.toolDetails&&n.trigger.tool===e.toolDetails.tool?{...e,triggerName:n.trigger.name}:e;case"go-back":return"trigger-selection"===l3(e).step?{...e,toolDetails:void 0,triggerName:void 0}:e;default:return e}}function l2(){return{}}function l3(e){return e.toolDetails?e.triggerName?{step:"trigger-selected",toolDetails:e.toolDetails,trigger:{tool:e.toolDetails.tool,name:e.triggerName}}:{step:"trigger-selection",toolDetails:e.toolDetails}:{step:"tool-selection"}}var l6=l(30495);function l5(e){let n=(0,es.useMemo)(()=>{var n;return null!==(n=e.tool.triggers)&&void 0!==n?n:{}},[e.tool]),l=(0,es.useMemo)(()=>Object.values(n),[n]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l6.o,{onClick:e.onCancel}),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsxs)(l$.r,{children:[e.tool.displayName,(0,a.jsx)("span",{className:"mb-0 ml-1 inline-block select-none text-sm font-medium text-gray-400",children:"*"})]}),(0,a.jsx)(lH,{children:"Select the trigger you would like to add to your Lindy."})]}),(0,a.jsx)(lX,{onClick:e.onSelectTrigger,triggers:l})]})}var l4=l(16908);let l7=(0,v.PA)(function(e){let{selectTrigger:n}=e,{hasConversationEntryPointNode:l}=(0,eD.Z)(),[t,i]=function(){let[e,n]=(0,es.useReducer)(l1,null,l2);return[(0,es.useMemo)(()=>l3(e),[e]),n]}(),s=np({query:{triggers:"true",actions:"false"}}),r=(0,es.useCallback)(e=>{i({type:"select-tool",toolDetails:e})},[i]),o=(0,es.useCallback)(e=>{i({type:"select-trigger",trigger:e}),n(e)},[i,n]),d=(0,es.useCallback)(e=>{let{toolDetails:l,trigger:a}=e;i({type:"select-trigger",toolDetails:l,trigger:a}),n(a)},[i,n]),u=(0,es.useCallback)(()=>{i({type:"go-back"})},[i]),c=(0,es.useMemo)(()=>{var e,n;let a=null!==(n=null===(e=s.data)||void 0===e?void 0:e.data)&&void 0!==n?n:[];return l?a:[lE.J,...a]},[s.data,l]);return"tool-selection"===t.step?(0,a.jsx)(l4.$,{children:(0,a.jsx)(l0,{tools:c,onSelectTool:r,onSelectTrigger:d})}):"trigger-selection"===t.step?(0,a.jsx)(l4.$,{children:(0,a.jsx)(l5,{tool:t.toolDetails,onSelectTrigger:o,onCancel:u},t.toolDetails.tool)}):null}),l9=(0,v.PA)(function(e){var n;let l=x.a.enabledFeatureFlags.includes(eE.T.NewToolsModal),t=(0,nb.j)(),i=t.onClose,s=(0,es.useCallback)(n=>{var l,a,t;i(),e.node.addTrigger(n),null===(l=e.onClose)||void 0===l||l.call(e),null===(t=x.a.lindies)||void 0===t||null===(a=t.currentLindy)||void 0===a||a.stateGraph.setSelectedEntityById(e.node.id)},[i,e]),r=(0,es.useCallback)(n=>{var l;n.stopPropagation(),n.preventDefault(),null===(l=e.node)||void 0===l||l.toggleTriggerEnabled()},[e]),o=(0,es.useCallback)(()=>{var n,l;null===(n=e.onRename)||void 0===n||n.call(e),null===(l=e.onClose)||void 0===l||l.call(e)},[e]),d=(0,es.useCallback)(()=>{var n;null===(n=e.onClose)||void 0===n||n.call(e),e.node.openToolsModal()},[e]),u=(0,es.useCallback)(()=>{var n,l,a;t.onClose(),null===(n=e.onClose)||void 0===n||n.call(e),null===(a=x.a.lindies)||void 0===a||null===(l=a.currentLindy)||void 0===l||l.stateGraph.setSelectedEntityById(e.node.id)},[t,e]);return(0,a.jsxs)(a.Fragment,{children:[(0,eh.jq)(e.node)&&(0,a.jsx)(eS.kt,{onClick:r,children:(0,a.jsxs)("span",{className:"flex w-full items-center justify-between gap-x-1",children:[(0,a.jsxs)("span",{className:"flex items-center gap-x-3",children:[(0,a.jsx)(eS.Hf,{children:(0,a.jsx)(ne,{className:eS.b3})}),(0,a.jsx)(eS.AB,{children:"Enabled"})]}),(0,a.jsx)("div",{className:"contents",onClick:lT.d,children:(0,a.jsx)(lM.d,{onChange:null===(n=e.node)||void 0===n?void 0:n.toggleTriggerEnabled,checked:e.node.triggerEnabled})})]})}),e.onRename&&(0,a.jsx)(l_,{onClick:o}),(0,a.jsx)(lR,{onClick:l?d:t.onOpen}),(0,a.jsx)(lN,{node:e.node,onClick:e.onClose}),(0,a.jsx)(nL.aF,{className:"w-auto max-w-none py-0 sm:w-auto sm:max-w-none",open:t.isOpen,setClosed:u,children:(0,a.jsx)(l7,{selectTrigger:s})})]})}),l8={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KnowledgeBaseNodeContextMenu_Identity",selections:[{args:null,kind:"FragmentSpread",name:"KbModal_Identity"}],type:"Identity",abstractKey:null};l8.hash="b2c52db0031831fc490c66c959b7e722";let ae={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KbModal_Identity",selections:[{args:null,kind:"FragmentSpread",name:"SetupKb_Identity"}],type:"Identity",abstractKey:null};ae.hash="86654efdf0111c7d57c6473a7012bae9";var an=l(14980);function al(e){let{title:n,subtitle:l}=e;return(0,a.jsx)("div",{children:(0,a.jsx)(nB.V,{label:(0,a.jsx)("span",{className:"text-xl font-medium text-slate-12",children:n}),subtitle:l,className:"pb-0",optional:!0})})}function aa(e){let{onClick:n}=e;return(0,a.jsx)(nG.K,{onClick:n,tooltip:"Close",className:"mr-0 border-transparent hover:border-slate-6",tabIndex:-1,children:(0,a.jsx)(nE.A,{className:"size-5 text-gray-11"})})}let at=(0,es.memo)(function(e){let{title:n,subtitle:l,onClose:t,onBack:i,topLeftElement:s,hideCloseButton:r=!1}=e;return i||s?(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)($.f,{between:!0,className:"mb-6 w-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[i&&(0,a.jsx)(nG.K,{onClick:i,tooltip:"Back",tabIndex:-1,className:"border-transparent hover:border-slate-6",children:(0,a.jsx)(nV.A,{className:"size-5 text-gray-11"})}),s]}),!r&&t&&(0,a.jsx)(aa,{onClick:t})]}),(0,a.jsx)(al,{title:n,subtitle:l})]}):(0,a.jsxs)($.f,{top:!0,between:!0,children:[(0,a.jsx)(al,{title:n,subtitle:l}),!r&&t&&(0,a.jsx)(aa,{onClick:t})]})}),ai=(0,es.memo)(function(e){return(0,a.jsxs)(lh.a,{viewBox:"0 0 24 24",width:24,height:24,...e,children:[(0,a.jsx)("rect",{width:"24",height:"24",fill:"url(#paint0_linear_6028_6538)"}),(0,a.jsx)("path",{d:"M18.6667 18.6663L15.375 15.3747M17 11.1663C17 14.388 14.3884 16.9997 11.1667 16.9997C7.94505 16.9997 5.33337 14.388 5.33337 11.1663C5.33337 7.94468 7.94505 5.33301 11.1667 5.33301C14.3884 5.33301 17 7.94468 17 11.1663Z",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round"}),(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"paint0_linear_6028_6538",x1:"24",y1:"-0.999999",x2:"-1",y2:"27",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"#A79EB1"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#615F65"})]})})]})}),as=e=>{let{source:n,className:l}=e,t=an.EA.get(n);return t?t.Icon?(0,a.jsx)(t.Icon,{name:t.source,className:(0,K.QP)("size-6",l)}):t.relatedTool?(0,a.jsx)(ef.si,{tool:t.relatedTool,className:(0,K.QP)("size-6",l)}):(0,a.jsx)(a.Fragment,{}):null},ar=(0,es.memo)(function(e){let{option:n,onClick:l}=e,t=(0,es.useCallback)(()=>l(n),[n,l]),{enabled:i}=(0,ea.u)(n.flag,{defaultEnabled:!1});return i?(0,a.jsx)(lQ,{iconElement:(0,a.jsx)(as,{source:n.source,className:"size-6"}),label:n.title,onClick:t,tool:n.source,"data-ph-capture-attribute-button-action":"kb-select-source","data-ph-capture-attribute-kb-source":n.source}):null}),ao=(0,es.memo)(function(e){let{options:n,onSelect:l,onClose:t}=e,{isMobileOnly:i}=(0,lf.Y0)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(at,{title:"Select Knowledge Base",subtitle:"Add data to this Lindy's knowledge base.",onClose:t,topLeftElement:(0,a.jsx)(ai,{})}),(0,a.jsx)("div",{className:(0,K.QP)("mt-1 h-auto w-full gap-4 overflow-y-auto pr-0.5",i?"grid grid-cols-2":"grid grid-cols-3"),children:n.map(e=>(0,a.jsx)(ar,{option:e,onClick:l},e.source))})]})}),ad={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SetupKb_Identity",selections:[{args:null,kind:"FragmentSpread",name:"SetupDataSourceKb_Identity"},{args:null,kind:"FragmentSpread",name:"SetupFilesKb_Identity"},{args:null,kind:"FragmentSpread",name:"SetupTextKb_Identity"},{args:null,kind:"FragmentSpread",name:"SetupWebsiteKb_Identity"}],type:"Identity",abstractKey:null};ad.hash="22799f74c1685dbc07116b1dd702f044";var au=l(1058),ac=l(72628),ag=l(38928);let am=(0,ac.F)(au.t8),ay=(0,nr._)({post:{body:au.qN,data:au.t8},get:{query:nd.z.object({ids:ag.k.coercedArray(ag.k.objectIdString(),",").optional(),agentDefinitionId:nd.z.string().optional(),graphId:nd.z.string().optional(),nodeId:nd.z.string().optional(),source:ag.k.coercedArray(nd.z.string()).optional(),enabled:nd.z.string().optional(),syncRequestIds:ag.k.coercedArray(nd.z.string(),",").optional(),after:nd.z.string().optional(),before:nd.z.string().optional(),limit:nd.z.string().optional()}),data:am}}),ap=(0,ns.In)("GET","/api/kb/entries",ay.get.data);var af=l(51580),ah=l(76971),ak=l(23913);let aF={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SetupDataSourceKb_Identity",selections:[{args:null,kind:"FragmentSpread",name:"KnowledgeBaseEntriesList_Identity"}],type:"Identity",abstractKey:null};aF.hash="e9c07b391e1944691ab5683163627c67";var ax=l(81511),av=l(22149);let ab=(0,nr._)({get:{params:nd.z.object({source:nd.z.nativeEnum(au.rW)}),query:nd.z.object({authId:nd.z.string().optional()}),data:nd.z.discriminatedUnion("authorized",[nd.z.object({authorized:nd.z.literal(!0),auth:av.bt}),nd.z.object({authorized:nd.z.literal(!1),auth:av.bt,needs:ax.T})])}}),aS=(0,ns.In)("GET","/api/kb/provider/carbon/connect/:source/auth",ab.get.data);function aT(e){let n=function(e){let n=(0,nm.f)(e.query);return(0,es.useMemo)(()=>["kb/provider/carbon/connect/[source]/auth","get",e.params.source,n],[e.params.source,n])}(e),l=(0,ng.lB)(()=>null==e?void 0:e.options,[null==e?void 0:e.options]),a=(0,nc.I)({queryKey:n,queryFn:async()=>{let{data:n,error:l}=await aS(e);if(l)throw l;return n},...null==e?void 0:e.options}),t=(0,ng.lB)(()=>a,[a]);return(0,nm.R)(n,t,l)}let aK=(0,nr._)({post:{params:nd.z.object({source:nd.z.nativeEnum(au.rW)}),body:nd.z.object({authId:av.DV}),data:nd.z.discriminatedUnion("authorized",[nd.z.object({authorized:nd.z.literal(!0),auth:av.bt,url:nd.z.string().nullish(),isEmbeddingAllowed:nd.z.boolean(),shouldUseCustomFilePicker:nd.z.boolean(),syncRequestId:nd.z.string().nullable(),providerSourceId:nd.z.string().nullable()}),nd.z.object({authorized:nd.z.literal(!1),auth:av.bt,needs:ax.T})])}}),aI=(0,ns.In)("POST","/api/kb/provider/carbon/connect/:source",aK.post.data),aC=(0,nr._)({post:{params:nd.z.object({entryId:ag.k.objectIdString()}),data:nd.z.void()}}),aA=(0,ns.In)("POST","/api/kb/entries/:entryId/sync",aC.post.data),aj=(0,nr._)({post:{query:nd.z.object({source:nd.z.nativeEnum(au.rW).optional(),agentDefinitionId:ag.k.objectIdString().optional(),graphId:ag.k.objectIdString().optional(),nodeId:ag.k.objectIdString().optional()}),data:nd.z.void()}}),aN=(0,ns.In)("POST","/api/kb/entries/sync",aj.post.data);var aL=l(85680),a_=l(40453),aw=l(77566);function aR(e,n){let l=(0,aL.aV)(),a=(0,aw.n)({mutationFn:async e=>(e.setSyncStatus(au.DW.QueueForSync),await (0,ns.oA)(aA({params:{entryId:e.id}})),e),onError(e,n){let a=(0,a_.SP)(e);l({level:"danger",label:"Error",message:"Failed to refresh entry: ".concat(a),duration:6e3}),n.setSyncStatus(au.DW.SyncError),n.setError(a)}}),t=(0,aw.n)({mutationFn:async l=>{l.forEach(e=>e.setSyncStatus(au.DW.QueueForSync));let a=n?Object.fromEntries(Object.entries(n).filter(e=>{let[,n]=e;return null!==n})):{};await (0,ns.oA)(aN({query:{...a,source:e.source}}))},onError(e){let n=(0,a_.SP)(e);l({level:"danger",label:"Error",message:"Failed to refresh one or more entries: ".concat(n),duration:6e3})}});return{handleRefresh:(0,es.useCallback)(e=>{if(Array.isArray(e)){t.mutate(e);return}e.canResync&&a.mutate(e)},[a,t])}}var aD=l(72672),aP=l(48675),aM=l(11607),aE=l(3673),aV=l(84814),aG=l(56486),aB=l(15153);let aO=(0,nr._)({get:{params:nd.z.object({source:nd.z.nativeEnum(au.rW)}),data:aB.Y}}),az=(0,ns.In)("GET","/api/kb/provider/carbon/connect/:source/dataSource",aO.get.data),aQ=(0,nr._)({get:{params:nd.z.object({source:nd.z.nativeEnum(au.rW)}),data:(0,ac.F)(nd.z.object({name:nd.z.string(),externalId:nd.z.string(),isSelectable:nd.z.boolean(),isExpandable:nd.z.boolean(),parentExternalId:nd.z.string().nullish(),rootExternalId:nd.z.string().nullish(),type:ag.k.nativeEnumWithDefault(au.qV,au.qV.Unknown)})),query:nd.z.object({after:nd.z.string().optional(),before:nd.z.string().optional(),parentId:nd.z.string().optional(),first:nd.z.string().optional(),providerSourceId:nd.z.string().optional()})}}),aq=(0,ns.In)("GET","/api/kb/provider/carbon/connect/:source/items",aQ.get.data),aU=(0,nr._)({post:{params:nd.z.object({source:nd.z.nativeEnum(au.rW)}),data:nd.z.object({syncRequestId:nd.z.string()}),body:nd.z.object({providerSourceId:nd.z.string(),syncRequestId:nd.z.string(),entries:nd.z.array(nd.z.object({name:nd.z.string(),externalFileId:nd.z.string(),isFolder:nd.z.boolean().optional(),rootExternalFileId:nd.z.string().nullish(),providerFileFormat:nd.z.string()}))})}}),aW=(0,ns.In)("POST","/api/kb/provider/carbon/connect/:source/items/sync",aU.post.data);var aH=l(85397),a$=l(21968);function aZ(e){let{onSave:n,onCancel:l,disabled:t,loading:i,saveLabel:s="Save",...r}=e,o=(0,es.useCallback)(()=>{n()},[n]);return(0,a.jsxs)("div",{className:"-mx-6 flex justify-end gap-2 border-t border-slate-4 px-6 pt-6",children:[l&&(0,a.jsx)(eb.$,{...r,onClick:l,level:"outline",isLoading:i,children:"Cancel"}),(0,a.jsx)(eb.$,{...r,onClick:o,level:"primary",isLoading:i,disabled:t,children:s})]})}var aY=l(40017);let aJ=(0,es.memo)(function(e){return(0,a.jsx)(lh.a,{viewBox:"0 0 16 16",width:16,height:16,...e,children:(0,a.jsx)("path",{fill:"#5EB0EF",d:"M3.333 2a2 2 0 0 0-2 2v7.333a2 2 0 0 0 2 2h9.334a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-4.31l-.74-1.11A2 2 0 0 0 5.953 2h-2.62Z"})})});function aX(e){return(0,a.jsx)("div",{className:(0,K.QP)("h-[76vh] w-full",e.className),children:e.children})}let a0={duration:.3},a1=()=>44,a2="font-normal text-slate-11 disabled:font-medium disabled:text-slate-12 disabled:opacity-100 aria-disabled:opacity-100 hover:border-transparent hover:bg-transparent hover:text-slate-12 active:border-transparent active:bg-transparent active:font-medium";function a3(e){return e.type===au.qV.Repository?e.externalId:e.name}function a6(e,n){return{displayName:e.map(e=>e.label).concat(a3(n)).join("/"),item:n,parents:e.map(e=>e.externalId)}}function a5(e){let{index:n,style:l,data:t}=e,{items:i,addItem:s,removeItem:r,getItemSelected:o,onNavigateToItem:d}=t,u=i[n],c=o(null==u?void 0:u.externalId),g=(0,es.useCallback)(()=>{u&&d(u.externalId)},[u,d]),m=(0,es.useCallback)(e=>{u&&(e.stopPropagation(),c?r(u):s(u))},[c,r,s,u]);if(!u)return(0,a.jsx)(ed.P.div,{layout:!0,transition:a0,style:l,children:(0,a.jsx)($.f,{center:!0,className:"w-full p-3",children:(0,a.jsx)(n9.y,{className:"size-5"})})},"loading-spinner");let y=u.type===au.qV.File?a$.A:u.type===au.qV.Repository?aY.H:aJ,p=u.isExpandable&&!c;return(0,a.jsx)(ed.P.div,{layout:!0,transition:a0,style:l,children:(0,a.jsxs)($.f,{onClick:p?g:void 0,className:(0,K.QP)("flex p-3 border-b border-slate-4 text-slate-12 font-medium text-sm",p&&"cursor-pointer hover:text-slate-11 active:text-slate-8"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[u.isSelectable&&(0,a.jsx)(nD.S,{id:u.externalId,name:u.externalId,value:u.externalId,checked:c,onClick:m,className:"mr-1",readOnly:!0}),(0,a.jsx)(y,{className:"size-4"}),a3(u)]}),p&&(0,a.jsx)(aH.A,{className:"ml-auto size-5 shrink-0 text-slate-12"})]})},u.externalId)}function a4(e){let{rootBreadcrumbLabel:n="Root",data:l,breadcrumbs:t,onNavigateToItem:i,syncStatus:s,isFetching:r,loadMoreItems:o,hasNextPage:d,onSave:u,isSaving:c}=e,[g,m]=(0,es.useState)({}),y=(0,es.useCallback)(()=>{u(Object.values(g).map(e=>{let n=e.item.type===au.qV.Repository||e.item.type===au.qV.Directory;return{name:e.item.name,externalFileId:e.item.externalId,isFolder:n,rootExternalFileId:e.item.rootExternalId,providerFileFormat:n?au.HW.Folder:au.HW.Txt}}))},[g,u]),p=(0,es.useMemo)(()=>(null==l?void 0:l.pages)?l.pages.flatMap(e=>e.data||[]):[],[l]),f=d||r?p.length+1:p.length,h=Object.entries(g),k=(0,es.useCallback)(()=>i(null),[i]),F=(0,es.useCallback)(e=>{let n=e.currentTarget.dataset.itemId;n&&i(n)},[i]),x=(0,es.useCallback)(e=>!d||e<p.length,[d,p]),v=(0,es.useMemo)(()=>function(){return(0,a.jsx)("div",{className:"flex size-full flex-col items-center justify-center gap-3 text-sm font-medium text-slate-11",children:s===au.DW.QueueForSync?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n9.y,{}),(0,a.jsx)("p",{children:"Fetching files..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(a$.A,{className:"size-5 text-slate-9"}),(0,a.jsx)("p",{children:"No files found"})]})})},[s]),b=(0,es.useCallback)(e=>{m(n=>!e.isSelectable||n[e.externalId]?n:{...Object.fromEntries(Object.entries(n).filter(n=>{let[l,a]=n;return!a.parents.includes(e.externalId)})),[e.externalId]:a6(t,e)})},[t]),S=(0,es.useCallback)((e,n)=>{let l=e.parentExternalId&&g[e.parentExternalId];if(l&&!(null==n?void 0:n.force)){K(e);return}m(a=>{if(l){let{[e.parentExternalId]:l,...i}=a;return(null==n?void 0:n.isRemovingAll)||p.filter(n=>n.externalId!==e.externalId&&n.isSelectable).forEach(e=>{i[e.externalId]=a6(t,e)}),i}let{[e.externalId]:i,...s}=a;return s})},[t,p,g]),[T,K]=(0,es.useState)(null),I=(0,es.useCallback)(()=>K(null),[]),C=(0,es.useCallback)(()=>{T&&(S(T,{force:!0}),K(null))},[S,T]),A=(0,es.useCallback)(e=>!!e&&(!!g[e]||t.some(e=>!!g[e.externalId])),[g,t]),j=p.every(e=>!e.isSelectable||A(e.externalId)),N=(0,es.useCallback)(()=>{p.forEach(e=>{e.isSelectable&&(j?S(e,{force:!0,isRemovingAll:!0}):b(e))})},[p,j,S,b]),L=(0,es.useMemo)(()=>({items:p,addItem:b,removeItem:S,onNavigateToItem:i,getItemSelected:A}),[p,b,S,A,i]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(aX,{className:"mb-6 h-[450px] overflow-hidden rounded-xl border border-slate-4",children:(0,a.jsxs)("div",{className:"flex size-full flex-col",children:[(0,a.jsx)("div",{className:"flex min-h-11 items-center bg-slate-3 px-1",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(eb.$,{level:"text",size:"xs",onClick:k,disabled:0===t.length,className:a2,children:n}),t.map((e,n)=>(0,a.jsxs)(es.Fragment,{children:[(0,a.jsx)("span",{className:"text-xs text-slate-9",children:"/"}),(0,a.jsx)(eb.$,{level:"text",size:"xs",disabled:n===t.length-1,"data-item-id":e.externalId,onClick:F,className:a2,children:e.label})]},e.externalId))]})}),p.some(e=>e.isSelectable)&&(0,a.jsx)("div",{className:"flex flex-row border-b border-slate-4 p-3 text-sm font-medium text-slate-12",children:(0,a.jsx)(nD.S,{label:"Select all",id:"select-all",name:"select-all",value:"select-all",checked:j,onChange:N})}),(0,a.jsx)("div",{className:"size-full",children:(0,a.jsx)(li.Ay,{children:e=>{let{height:n,width:l}=e;return(0,a.jsx)(lr.A,{isItemLoaded:x,itemCount:f,loadMoreItems:o,threshold:0,children:e=>{let{onItemsRendered:t,ref:i}=e;return(0,a.jsx)(ls._m,{ref:i,onItemsRendered:t,outerElementType:lV.yE,height:n,itemCount:f,itemData:L,innerElementType:f>0?"div":v,itemSize:a1,width:l,className:"px-6",children:a5})}})}})})]})}),(0,a.jsx)(aZ,{"data-testid":"lindy.agent-wizard.kb-modal.connect-data-source.done",onSave:y,disabled:0===h.length,loading:c,saveLabel:"Add"}),(0,a.jsx)(lK.u,{open:!!T,onCancel:I,onConfirm:C,text:"Unchecking this file will stop syncing new files added to this folder.",level:"danger",confirmLabel:"Confirm"})]})}let a7=(0,es.memo)(function(e){var n,l,t,i;let{onDone:s,source:r,syncRequestId:o,providerSourceId:d}=e,[u,c]=(0,es.useState)([]),g=null===(n=u.at(-1))||void 0===n?void 0:n.externalId,m=function(e){let n=(0,es.useMemo)(()=>["kb/provider/carbon/connect/[source]/dataSource","get",e.params.source],[e.params.source]),l=(0,ng.lB)(()=>null==e?void 0:e.options,[null==e?void 0:e.options]),a=(0,nc.I)({queryKey:n,queryFn:async()=>{let{data:n,error:l}=await az(e);if(l)throw l;return n},...null==e?void 0:e.options}),t=(0,ng.lB)(()=>a,[a]);return(0,nm.R)(n,t,l)}({params:{source:r},options:{refetchOnWindowFocus:!0}}),y=["kb/provider/carbon/connect/[source]/items","get",(i={params:{source:r},query:{parentId:g}}).params.source,i.query],p=(0,aL.aV)(),f=(0,aw.n)({mutationFn:async e=>{if(o&&d)return await (0,ns.oA)(aW({params:{source:r},body:{syncRequestId:o,providerSourceId:d,entries:e}}))},onSuccess:()=>{s()},onError:e=>{p({level:"danger",label:"Failed to sync",message:(0,a_.SP)(e,"Unknown error"),duration:7e3})}}),h=null===(l=m.data)||void 0===l?void 0:l.lastSyncStatus,k=h!==au.DW.Ready,{data:F,fetchNextPage:x,hasNextPage:v,isFetching:b,isFetchingNextPage:S,refetch:T}=(0,nj.q)(y,async e=>(0,ns.oA)(aq({params:{source:r},query:{first:"30",after:e.pageParam,parentId:g,providerSourceId:d}})),{refetchOnMount:!0,refetchOnWindowFocus:!0,refetchInterval:!!k&&5e3,onError:e=>{p({level:"danger",label:"Failed to connect",message:(0,a_.SP)(e,"Unknown error"),duration:7e3})},getPreviousPageParam:e=>{var n,l,a;return null!==(a=null===(l=e.paging)||void 0===l?void 0:null===(n=l.cursors)||void 0===n?void 0:n.before)&&void 0!==a?a:null},getNextPageParam:e=>{var n,l,a,t;return null!==(t=(null===(n=e.paging)||void 0===n?void 0:n.hasNextPage)?null===(a=e.paging)||void 0===a?void 0:null===(l=a.cursors)||void 0===l?void 0:l.after:null)&&void 0!==t?t:null}}),K=(0,es.useRef)(k);(0,es.useEffect)(()=>{K.current=k,!k&&K.current&&T()},[T,k]);let I=(0,es.useCallback)((e,n)=>v&&!S?x():Promise.resolve(),[x,S,v]),C=(0,es.useMemo)(()=>new Map(null==F?void 0:F.pages.flatMap(e=>e.data.map(e=>[e.externalId,e]))),[F]),A=(0,es.useCallback)(e=>{if(!e){c([]);return}c(n=>{let l=n.find(n=>n.externalId===e);if(l)return n.slice(0,n.indexOf(l)+1);let a=C.get(e);return a?n.some(n=>n.externalId===e)?n.slice(0,n.findIndex(n=>n.externalId===e)+1):[...n,{label:a.type===au.qV.Repository?a.externalId:a.name,externalId:a.externalId}]:n})},[C]);return(0,a.jsx)(a4,{rootBreadcrumbLabel:function(e){if(e===au.rW.GitHub)return"All repositories"}(r),breadcrumbs:u,onNavigateToItem:A,syncStatus:h,isFetching:b,hasNextPage:v,data:F,loadMoreItems:I,onSave:f.mutate,isSaving:f.isLoading||!!(null===(t=f.data)||void 0===t?void 0:t.syncRequestId)})}),a9=(0,nr._)({post:{data:nd.z.void(),body:nd.z.object({entries:nd.z.array(nd.z.object({name:nd.z.string(),source:nd.z.nativeEnum(au.rW),externalFileId:nd.z.string(),isFolder:nd.z.boolean().optional(),rootExternalFileId:nd.z.string().nullish(),syncRequestId:nd.z.string().nullish(),providerSourceId:nd.z.string().nullish(),providerFileFormat:nd.z.string()}))})}}),a8=(0,ns.In)("POST","/api/kb/entries/seedMultiple",a9.post.data),te=(0,es.memo)(function(e){let{url:n,source:l,syncRequestId:t,providerSourceId:i,onDone:s}=e,r=(0,aL.aV)(),o=(0,aw.n)({mutationFn:async e=>{if(t&&i)return await (0,ns.oA)(a8({body:{entries:e.map(e=>{var n;return{name:e.name,source:l,syncRequestId:t,providerSourceId:i,externalFileId:e.external_id,isFolder:e.is_folder,providerFileFormat:e.is_folder?au.HW.Folder:null!==(n=e.file_format)&&void 0!==n?n:au.HW.Unknown}})}}))},onSuccess:()=>{s()},onError:e=>{r({level:"danger",label:"Failed to Sync",message:(0,a_.SP)(e,"Unknown error"),duration:7e3})}});return(0,es.useEffect)(()=>{let e=e=>{"SELECTED"===e.data.event&&Array.isArray(e.data.data)&&o.mutate(e.data.data)};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[o]),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(aX,{className:"h-[80vh] pt-6",children:!!n&&(0,a.jsx)("iframe",{src:n,allow:"autoplay; encrypted-media",allowFullScreen:!0,title:"Select the files | Close when done",className:"size-full"})})})}),tn=(0,es.memo)(function(e){let{topLeftElement:n,title:l,onClose:t,shouldUseCustomFilePicker:i,url:s,...r}=e;return(0,a.jsxs)(nL.aF,{open:i||!!s,setClosed:t,className:"sm:w-full sm:max-w-5xl md:max-w-6xl",children:[(0,a.jsx)(at,{topLeftElement:n,title:l,onClose:t}),i?(0,a.jsx)(a7,{...r}):(0,a.jsx)(te,{url:s,...r})]})}),tl={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KnowledgeBaseEntriesList_Identity",selections:[{alias:null,args:null,concreteType:"SubscriptionInfo",kind:"LinkedField",name:"billingInfo",plural:!1,selections:[{alias:null,args:null,concreteType:"SubscriptionFeatures",kind:"LinkedField",name:"features",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hasKnowledgeBaseIncreasedLimits",storageKey:null}],storageKey:null}],storageKey:null}],type:"Identity",abstractKey:null};tl.hash="ffc358017332d868add7a68476c09799";var ta=l(30900),tt=l(48389),ti=l(5021);let ts=(0,es.memo)(function(e){return(0,a.jsx)(lh.a,{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{d:"M3.33366 13.3337V11.0003C3.33366 10.8162 3.4829 10.667 3.66699 10.667H5.83366M12.6749 2.66699V5.00033C12.6749 5.18442 12.5256 5.33366 12.3416 5.33366H10.0082M2.66699 8.00033C2.66699 5.05481 5.05481 2.66699 8.00033 2.66699C9.75781 2.66699 11.3539 3.51707 12.3337 4.82848M13.3337 8.00033C13.3337 10.9458 10.9458 13.3337 8.00033 13.3337C6.24284 13.3337 4.64678 12.4836 3.66699 11.1722",stroke:"#687076",strokeWidth:"1.33333",strokeLinecap:"round",strokeLinejoin:"round"})})});var tr=l(51183),to=l(41324);function td(e){switch(e){case au.DW.Uploading:return{message:"Uploading"};case au.DW.CrawlingWebsite:return{message:"Crawling"};case au.DW.Syncing:case au.DW.Delayed:case au.DW.QueueForSync:case au.DW.QueuedForOcr:return{message:"Syncing"};case au.DW.SyncError:return{message:"Error",tooltip:"Open the configuration for more details"};case au.DW.EvaluatingResync:return{message:"Evaluating resync"};case au.DW.RateLimited:return{message:"Rate limited"};case au.DW.SyncAborted:return{message:"Aborted"};case au.DW.Ready:return{message:"Ready"};default:return{message:""}}}let tu=(0,es.memo)((0,es.forwardRef)(function(e,n){let{children:l,title:t,subtitle:i,Icon:s,enabled:r,onRefresh:o,onDelete:d,onToggle:u,disabled:c=!1,className:g,loading:m,showTooltipOnLargeTitle:y,phEventPrefix:p="lindy-configuration-tile",...f}=e,{isMobileOnly:h}=(0,lf.Y0)();return(0,a.jsxs)("div",{ref:n,className:(0,K.QP)("flex w-full items-center justify-end gap-4 px-4 py-3 odd:bg-slate-2 even:bg-transparent",g),...f,children:[h?(0,a.jsx)("div",{className:"truncate text-sm font-medium text-slate-12",children:t}):(0,a.jsxs)("div",{className:"flex w-full min-w-0 flex-row items-center gap-x-2",children:[(0,a.jsx)("div",{children:s}),(0,a.jsxs)("div",{className:"min-w-0 text-sm font-medium text-slate-12",children:[(0,a.jsxs)(eJ.m_,{children:[y&&t.length>=45&&(0,a.jsx)(eJ.ZI,{className:"z-modal-overlay flex flex-col items-center",children:(0,a.jsx)("div",{children:t})}),(0,a.jsx)(eJ.k$,{asChild:!0,children:(0,a.jsx)("div",{className:"truncate",children:t})})]}),i&&(0,a.jsx)("div",{className:"text-sm text-slate-9",children:i})]})]}),o&&(0,a.jsxs)("div",{className:"flex shrink-0 flex-row items-center gap-x-3",children:[" ",(0,a.jsx)(nG.K,{tooltip:"Re-sync this entry",className:"mr-0 size-6 border border-transparent bg-none hover:border-slate-7",onClick:o,disabled:c,"data-ph-capture-attribute-button-action":"".concat(p,"-re-sync"),children:(0,a.jsx)(ts,{className:"size-4 text-slate-9 group-hover:text-slate-12"})})]}),!m&&u?(0,a.jsx)(lM.d,{disabled:c,checked:r,onChange:u,className:"ml-auto","data-ph-capture-attribute-button-action":"".concat(p,"-toggle"),"data-ph-capture-attribute-button-action-current-state":r?"on":"off"}):(0,a.jsx)("div",{className:"grow"}),m?(0,a.jsx)(n9.y,{size:"sm"}):(0,a.jsxs)("div",{className:"flex shrink-0 flex-row items-center gap-x-3",children:[l,d&&(0,a.jsx)(nG.K,{tooltip:"Remove",className:"mr-0 size-6 border border-transparent bg-none hover:border-slate-7",onClick:d,"data-ph-capture-attribute-button-action":"".concat(p,"-remove"),children:(0,a.jsx)(nE.A,{className:"size-4 text-slate-9 group-hover:text-slate-12"})})]})]})}));var tc=l(30970);let tg=(0,v.PA)((0,es.forwardRef)(function(e,n){let{className:l,config:t,entry:i,onRefresh:s}=e,r=(0,es.useCallback)(()=>null==s?void 0:s(i),[i,s]),o=!!s&&i.canResync;return(0,a.jsx)(tu,{ref:n,Icon:(0,a.jsx)(as,{source:t.source,className:"size-6"}),title:i.label,subtitle:function(e){if(e.error)return(0,a.jsx)("div",{className:"text-danger-10",children:e.error});if(e.isReady&&e.lastSyncAt){let n=tc.A(e.lastSyncAt,{includeSeconds:!1,addSuffix:!0});return"Last synced: ".concat(n)}if(e.syncStatus)return td(e.syncStatus).message}(i),enabled:i.enabled,onRefresh:o?r:void 0,onToggle:i.isTemp?void 0:i.toggle,onDelete:i.isTemp?void 0:i.remove,className:l,loading:i.isLoading,showTooltipOnLargeTitle:!0,phEventPrefix:"kb-entry"})})),tm=(0,v.PA)(function(e){var n,l,t,i;let{knowledgeSource:s,onRefresh:r,onSave:o,onBeforeSave:d,onCancel:u,forceDisable:c,forceEnable:g,loading:m,shouldShowSlowLoadingHint:y=!1,confirmBeforeCancel:p,confirmBeforeSave:f,identityFragmentRef:h}=e,k=(0,M.useFragment)(tl,h),F=s.entries,[x,v]=(0,es.useState)(!1),b=s.newEntries.length,S=(0,es.useRef)(0),T=(0,nb.j)(),K=(0,nb.j)(!1),I=(0,es.useRef)(null),C=(0,es.useRef)(new Map),A=(0,es.useCallback)(()=>{if(p){T.onOpen();return}u()},[p,T,u]),j=(0,es.useCallback)(()=>{T.onClose(),u()},[T,u]),N=(0,nb.j)(),L=(0,es.useCallback)(async()=>{if(v(!1),f){N.onOpen();return}o()},[f,N,o]),_=(0,es.useCallback)(async()=>{if(await (null==d?void 0:d())){v(!0),S.current=b;return}await L()},[L,d,b]),w=(0,to.YQ)(L,300);(0,es.useEffect)(()=>{if(x&&b>S.current)S.current=b,w();else if(x){let e=setTimeout(()=>v(!1),3e3);return()=>{clearTimeout(e)}}},[x,b,w]);let R=(0,es.useCallback)(()=>{N.onClose(),o()},[N,o]),D=s.resyncableEntries,P=(0,es.useCallback)(()=>null==r?void 0:r(D),[r,D]),E=(0,es.useCallback)(e=>{var n;return null!==(n=C.current.get(e))&&void 0!==n?n:66},[]),V=(0,es.useCallback)((e,n)=>{var l;let a=Math.max(66,Math.min(n,132));null===(l=I.current)||void 0===l||l.resetAfterIndex(0),C.current.set(e,a)},[]),G=(0,es.useMemo)(()=>({entries:F,knowledgeSource:s,onRefresh:r,setRowHeight:V}),[F,s,r,V]),B=66*Math.min(F.length,4)-(F.length>4?22:0),O=!(null===(l=k.billingInfo)||void 0===l?void 0:null===(n=l.features)||void 0===n?void 0:n.hasKnowledgeBaseIncreasedLimits)&&F.some(e=>e.syncStatus===au.DW.SyncErrorCharacterLimitExceeded);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"-mb-3 flex items-center justify-between",children:[(0,a.jsx)(lv.J,{className:"select-none py-1 font-semibold text-slate-12",children:F.length?null!==(t=s.options.notEmptyLabel)&&void 0!==t?t:"Items":null!==(i=s.options.emptyLabel)&&void 0!==i?i:"Nothing added yet"}),r&&(0,a.jsx)("div",{className:"flex shrink-0 flex-row items-center gap-x-3",children:(0,a.jsx)(nG.K,{tooltip:"Re-sync all entries",className:"mr-0 size-6 border border-transparent bg-none hover:border-slate-7",onClick:P,disabled:!D.length,"data-ph-capture-attribute-button-action":"kb-re-sync-all",children:(0,a.jsx)(ts,{className:"size-4 text-slate-9 group-hover:text-slate-12"})})})]}),y&&0===F.length&&(0,a.jsx)(ta.F,{type:"warning",withIcon:!0,iconSize:"sm",children:"Selected files may take a moment to appear below"}),F.length>0&&(0,a.jsx)("div",{className:"overflow-hidden rounded-md border border-slate-4",style:{height:B},children:(0,a.jsx)(li.Ay,{children:e=>{let{width:n,height:l}=e;return(0,a.jsx)(ls._m,{ref:I,itemData:G,itemCount:F.length,layout:"vertical",width:n,height:l,itemSize:E,children:ty})}})}),O&&(0,a.jsx)("div",{children:(0,a.jsx)(eb.$,{onClick:K.onOpen,children:"Upgrade to Pro"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(aZ,{"data-testid":"lindy.agent-wizard.kb-modal.edit-entries.save",onSave:_,onCancel:A,disabled:c&&!g,loading:m||x}),(0,a.jsx)(ti.o,{open:K.isOpen,onClose:K.onClose,title:"Upgrade to Pro to index up to ".concat((0,tr.ZV)(tt.Q,0)," characters"),description:(0,a.jsxs)(a.Fragment,{children:["To index up to"," ",(0,a.jsxs)("span",{className:"font-semibold",children:[(0,tr.ZV)(tt.Q,0)," characters"]})," ","in your knowledge base you will need to upgrade to a"," ",(0,a.jsx)("span",{className:"font-semibold",children:"Pro Plan"}),". Free accounts are limited to ",(0,tr.ZV)(tt.B,0)," ","characters."]})}),(0,a.jsx)(lK.u,{level:"danger",open:T.isOpen,onCancel:T.onClose,onConfirm:j}),(0,a.jsx)(lK.u,{level:"danger",open:N.isOpen,onCancel:N.onClose,onConfirm:R})]})]})});function ty(e){let{index:n,style:l,data:t}=e,{entries:i,knowledgeSource:s,onRefresh:r,setRowHeight:o}=t,d=i[n],u=(0,es.useRef)(null),c=(0,es.useCallback)(()=>{u.current&&o(n,u.current.clientHeight)},[n,o]);return((0,lt.A)(u,c),d)?(0,a.jsx)("div",{style:l,children:(0,a.jsx)(tg,{className:(0,K.QP)(n%2==0?"odd:bg-slate-1 even:bg-slate-1":"odd:bg-transparent even:bg-transparent"),config:s.options,entry:d,onRefresh:r,ref:u})}):null}function tp(e){let{title:n,subtitle:l,onBack:t,confirmBeforeBack:i}=e,{isOpen:s,onOpen:r,onClose:o}=(0,nb.j)(),d=(0,es.useCallback)(()=>{if(i){r();return}null==t||t()},[i,t,r]),u=(0,es.useCallback)(()=>{o(),null==t||t()},[t,o]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(at,{title:n,subtitle:l,onBack:t?d:void 0}),(0,a.jsx)(lK.u,{level:"danger",open:s,onCancel:o,onConfirm:u})]})}let tf=(0,v.PA)(function(e){let n=aT({params:{source:e.knowledgeSource.source},query:{}});return n.data?(0,a.jsx)(th,{...e,authConfig:(0,aG.h)(n.data.auth)}):null}),th=(0,v.PA)(function(e){var n,l,t,i,s,r,o,d;let{authConfig:u,knowledgeBase:c,knowledgeSource:g,agentResource:m,onClose:y,onBack:p,onSave:f,identityFragmentRef:h}=e,k=(0,M.useFragment)(aF,h),{handleRefresh:F}=aR(g,m),v=(0,aL.aV)(),b=x.a.auth.authList,S=(0,es.useMemo)(()=>(0,aV.c)(b,u),[u,b]),[T,K]=(0,es.useState)(null!==(s=S.at(0))&&void 0!==s?s:null),I=(0,es.useRef)(null),[C,A]=(0,es.useState)(!1),j=aT({params:{source:g.source},query:T?{authId:T.id}:{},options:{refetchOnWindowFocus:!0}}),N=(0,es.useMemo)(()=>{var e;return!(0,aM.Dq)({availableScopes:null!==(e=null==T?void 0:T.scopes)&&void 0!==e?e:[],requiredScopes:(0,aE.a)(u)}).hasAllScopes},[T,u]),L=(0,aw.n)({mutationFn:async()=>await (0,ns.oA)(aI({params:{source:g.source},body:{authId:null==T?void 0:T.id}})),onSuccess:e=>{e.authorized?(e.syncRequestId&&c.addSyncRequestId(e.syncRequestId),I.current||(I.current=Date.now()),A(!0),e.url?e.isEmbeddingAllowed||window.open(e.url,"_blank"):j.setQueryData(e)):j.setQueryData(e)},onError(e){v({level:"danger",label:"Failed to connect",message:(0,a_.SP)(e,"Unknown error"),duration:7e3})}}),_=(0,es.useCallback)(()=>{j.data&&L.mutate()},[j.data,L]),w=j.isFetching||L.isLoading||!(null===(n=j.data)||void 0===n?void 0:n.authorized)&&!(null===(l=g.entries)||void 0===l?void 0:l.length),R=!w&&g.removedEntryById.size>0,D=(null===(t=L.data)||void 0===t?void 0:t.authorized)?L.data:null,P=!!(null==D?void 0:D.isEmbeddingAllowed)&&D.url,E=!!(null==D?void 0:D.shouldUseCustomFilePicker),V=null!==(r=null==D?void 0:D.syncRequestId)&&void 0!==r?r:"",G=null!==(o=null==D?void 0:D.providerSourceId)&&void 0!==o?o:"";return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tn,{topLeftElement:(0,a.jsx)(as,{source:g.source,className:"size-5"}),url:P,shouldUseCustomFilePicker:E,source:g.source,title:"Select files",syncRequestId:V,providerSourceId:G,onDone:L.reset,onClose:L.reset}),(0,a.jsx)(tp,{title:g.options.title,subtitle:g.options.description,onBack:p,confirmBeforeBack:g.hasUnsavedEntries}),!!u&&(0,a.jsx)(aD.a,{identityId:x.a.auth.owner,authConfig:u,authList:S,auth:T,isMissingScopes:N,displayName:g.options.title,tool:g.options.relatedTool,onChange:K}),!j.data&&(0,a.jsx)(aP.b,{title:"Loading...",className:"text-slate-9",children:(0,a.jsx)(n9.y,{className:"size-5"})}),(null===(i=j.data)||void 0===i?void 0:i.authorized)&&(0,a.jsx)(eb.$,{className:"self-start",level:"outline",onClick:_,isLoading:j.isInitialLoading||L.isLoading,children:null!==(d=g.options.addLabel)&&void 0!==d?d:"Add Document"}),(0,a.jsx)(tm,{knowledgeSource:g,forceDisable:w,forceEnable:R,loading:L.isLoading,onSave:f,onRefresh:F,onCancel:y,confirmBeforeCancel:g.hasUnsavedEntries,shouldShowSlowLoadingHint:C,identityFragmentRef:k})]})}),tk={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SetupFilesKb_Identity",selections:[{args:null,kind:"FragmentSpread",name:"KnowledgeBaseEntriesList_Identity"}],type:"Identity",abstractKey:null};function tF(e){let{label:n,syncStatus:l=au.DW.Uploading,numCharacters:a=0}=e;return{_id:(0,nn.Ak)(),isTemp:!0,label:n,syncStatus:l,syncRequestId:null,createdAt:new Date,enabled:!0,syncRequestIds:new Set,entryCount:1,entriesNumCharacters:0,numCharacters:a}}tk.hash="685ebe72d220708cf6eef80377890407";let tx=(0,ns.In)("POST","/api/kb/entries",ay.post.data),tv=(0,nr._)({get:{data:nd.z.object({accessToken:nd.z.string().nullable(),endpoint:nd.z.string().url().nullable()})}}),tb=(0,ns.In)("GET","/api/kb/provider/carbon/accessToken",tv.get.data);var tS=l(43161);let tT=es.createContext({carbonClient:null});function tK(e){let{enabled:n}=(0,ea.u)(eE.T.KnowledgeBase,{defaultEnabled:!1}),{data:l}=function(e){let n=(0,es.useMemo)(()=>["kb/provider/carbon/accessToken","get"],[]),l=(0,nc.I)({queryKey:n,queryFn:async()=>{let{data:e,error:n}=await tb();if(n)throw n;return e},...null==e?void 0:e.options}),a=(0,ng.lB)(()=>l,[l]);return(0,nm.R)(n,a)}({options:{enabled:n}}),t=es.useMemo(()=>(null==l?void 0:l.accessToken)&&(null==l?void 0:l.endpoint)?new tS.Carbon({basePath:l.endpoint,accessToken:l.accessToken}):null,[null==l?void 0:l.accessToken,null==l?void 0:l.endpoint]),i=es.useMemo(()=>({carbonClient:t}),[t]);return(0,a.jsx)(tT.Provider,{value:i,children:e.children})}function tI(){return es.useContext(tT)}var tC=l(9187),tA=l(44904),tj=l(67434),tN=l(5165);function tL(e,n){let{carbonClient:l}=tI(),a=(0,et.T)(),t=(0,aL.aV)();return(0,aw.n)({mutationFn:async e=>{var t,i;if(!l)throw Error("Adding new Knowledge Base entries is disabled at the moment");let s=await n(e);s.request_id||(s.request_id=(0,nn.gZ)()),s.request_id&&e.entry.addSyncRequestId(s.request_id);let r=await (0,ns.oA)(tx({body:{name:s.name,billingAgentDefinitionId:null!=a?a:null,providerFileId:s.id.toString(),providerSourceId:"number"==typeof s.organization_user_data_source_id?s.organization_user_data_source_id.toString():null,providerFileFormat:null!==(i=null===(t=s.file_statistics)||void 0===t?void 0:t.file_format)&&void 0!==i?i:"WEB_SCRAPE"===s.source?au.HW.Html:au.HW.Unknown,providerSource:s.source,providerSyncStatus:s.sync_status,syncRequestId:s.request_id}}));return[s,r]},onSuccess(n,l){var a,t;let{entry:i}=l,[s,r]=null!=n?n:[];if((null==s?void 0:s.request_id)&&e.addSyncRequestId(s.request_id),!r){i.setSyncStatus(au.DW.SyncError),i.setError("File upload failed");return}i.syncWithRemote({_id:r._id,error:null!==(a=null==r?void 0:r.syncErrorMessage)&&void 0!==a?a:null,isTemp:!1,syncRequestId:r.syncRequestId,syncRequestIds:new Set(null!==(t=r.syncRequestIds)&&void 0!==t?t:[]),syncStatus:r.syncStatus})},onError(e,n){var l,a,i;let{entry:s}=n,r=e instanceof tN.pe&&(null===(l=e.response)||void 0===l?void 0:l.status)===0,o=e instanceof tN.pe?null===(a=e.response)||void 0===a?void 0:a.status:null;r||tj.Cp(e,{tags:{[tC.V.EngProject]:tC.t.KnowledgeBase,is_kb_related:!0,status_code:o},extra:e instanceof tN.pe?{ApiResponse:null===(i=e.response)||void 0===i?void 0:i.data}:void 0}),s.setSyncStatus(au.DW.SyncError),s.setError((0,tA.UI)(e));let d=(0,a_.SP)(e);t({level:"danger",label:"Error",message:"Failed to upload the file: ".concat(d),duration:1e4})}})}var t_=l(53762);let tw={"application/json":[".json"],"application/pdf":[".pdf"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":[".pptx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"text/*":[".csv",".txt",".md",".rtf",".tsv"],"audio/*":[".mp3",".mp4",".mp2",".aac",".wav",".flac",".pcm",".m4a",".ogg",".opus"]};function tR(e){let{onDropAccepted:n}=e,{isMobileOnly:l}=(0,lf.Y0)(),t=(0,t_.VB)({accept:tw,onDropAccepted:n,noClick:!0}),i=(0,es.useCallback)(e=>e.isDragAccept?{...e.getRootProps().style,transition:"all 0.2s ease-in-out",...e.isDragActive&&{opacity:.5}}:e.getRootProps().style,[]);return(0,a.jsx)("div",{...t.getRootProps({style:i(t)}),className:"w-full focus:outline-none",children:(0,a.jsxs)("label",{className:"flex h-32 w-full cursor-pointer appearance-none justify-center rounded-md border-2 border-dashed border-gray-200 bg-gray-100 px-4 transition focus:outline-none hover:border-gray-300 dark:border-neutral-500 dark:bg-neutral-400 dark:hover:border-neutral-400",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3 text-sm text-slate-11 dark:text-zinc-100",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),(0,a.jsxs)("p",{className:(0,K.QP)("max-w-md text-center",l&&"text-xxs w-[330px]"),children:["We support documents and audio files.",(0,a.jsx)("br",{}),"20MB maximum."]})]}),(0,a.jsx)("input",{...t.getInputProps(),type:"file",name:"file-upload",className:"hidden"})]})})}let tD=(0,v.PA)(function(e){let{knowledgeBase:n,knowledgeSource:l,agentResource:t,onClose:i,onBack:s,onSave:r,identityFragmentRef:o}=e,d=(0,M.useFragment)(tk,o),{handleRefresh:u}=aR(l,t),{carbonClient:c}=tI(),{mutate:g,isLoading:m}=tL(n,async e=>{if(!c)throw Error("Adding new Knowledge Base entries is disabled at the moment");let n=e.data.name.endsWith(".pdf"),{data:l}=await c.files.upload({file:e.data,skipEmbeddingGeneration:!1,embeddingModel:"OPENAI",generateSparseVectors:n,parsePdfTablesWithOcr:n,useOcr:n});return l}),y=(0,es.useCallback)(async e=>{e.forEach(e=>{let n=tF({label:e.name,numCharacters:e.size/8});g({entry:l.updateOrCreateEntry(n),data:e})})},[l,g]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tp,{title:"Files",subtitle:"You can add one or multiple sources.",onBack:s,confirmBeforeBack:l.hasUnsavedEntries}),(0,a.jsx)(tR,{onDropAccepted:y}),(0,a.jsx)(tm,{knowledgeSource:l,loading:m,onRefresh:u,onSave:r,onCancel:i,confirmBeforeCancel:l.hasUnsavedEntries,identityFragmentRef:d})]})}),tP={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SetupTextKb_Identity",selections:[{args:null,kind:"FragmentSpread",name:"KnowledgeBaseEntriesList_Identity"}],type:"Identity",abstractKey:null};function tM(e){let{entryName:n,onAdd:l,setEntryName:t,setText:i,text:s,minTextLength:r}=e,o=(0,es.useCallback)(e=>i(e.target.value),[i]),d=(0,es.useCallback)(e=>t(tV(e)),[t]),u=(0,es.useCallback)(e=>{e.preventDefault(),s.trim()&&l(n.trim()||"text",s.trim())},[l,n,s]);return(0,es.useEffect)(()=>{n.trim()||s.length<r||d(tV(s))},[s,n,d,r]),(0,a.jsxs)("form",{className:"flex flex-col gap-6",onSubmit:u,children:[(0,a.jsx)("textarea",{"data-testid":"lindy.agent-wizard.kb-modal.setup-text-kb.text",className:(0,K.QP)(lx.jp,lV.Oc,"bg-slate-1 h-full"),placeholder:"Insert text",value:s,onChange:o,autoFocus:!0,minLength:r}),(0,a.jsx)(lx.pd,{placeholder:"Name",value:n,onChange:t}),(0,a.jsx)("div",{children:(0,a.jsx)(eb.$,{type:"submit",level:"primary",disabled:s.trim().length<r,children:"Add"})})]})}function tE(e){return e.replace(/[^\d A-Za-z]/g,"").trim()}function tV(e){var n;let l=tE(null!==(n=e.split("\n").at(0))&&void 0!==n?n:"");if(l.length>2&&l.length<50)return l;let a=e.split(/\s+/);return a.length>2?tE(a.slice(0,3).join(" ")):""}tP.hash="e3415f3cd3dd06d70c78fe3cfb574943";let tG=(0,v.PA)(function(e){let{knowledgeBase:n,knowledgeSource:l,agentResource:t,onClose:i,onBack:s,onSave:r,identityFragmentRef:o}=e,d=(0,M.useFragment)(tP,o),{handleRefresh:u}=aR(l,t),[c,g]=(0,es.useState)(""),[m,y]=(0,es.useState)(""),{carbonClient:p}=tI(),{mutateAsync:f,isLoading:h}=tL(n,async e=>{if(!p)throw Error("Adding new Knowledge Base entries is disabled at the moment");let{data:n}=await p.files.uploadText({name:e.entry.label,contents:e.data,skip_embedding_generation:!1,embedding_model:"OPENAI",generate_sparse_vectors:!0});return n}),k=(0,es.useCallback)(async(e,n)=>{g(""),y("");let a=tF({label:e,numCharacters:n.length}),t=l.updateOrCreateEntry(a);await f({entry:t,data:n})},[l,f]),F=(0,es.useMemo)(()=>c.trim().length>=10,[c]),x=(0,es.useCallback)(async()=>!!F&&(await k(m,c),!0),[k,m,c,F]),v=(0,es.useMemo)(()=>c.trim().length>0,[c]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tp,{title:"Text",subtitle:"Copy and paste text for your Lindy to use as a source.",onBack:s,confirmBeforeBack:l.hasUnsavedEntries}),(0,a.jsx)(tM,{onAdd:k,text:c,setText:g,entryName:m,setEntryName:y,minTextLength:10}),(0,a.jsx)(tm,{knowledgeSource:l,loading:h,onRefresh:u,onBeforeSave:x,onSave:r,onCancel:i,confirmBeforeCancel:l.hasUnsavedEntries||v,confirmBeforeSave:!!c.trim()&&!F,identityFragmentRef:d})]})}),tB={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SetupWebsiteKb_Identity",selections:[{args:null,kind:"FragmentSpread",name:"KnowledgeBaseEntriesList_Identity"}],type:"Identity",abstractKey:null};tB.hash="72332749c00e3a6b725eaa3725bb9e99";var tO=l(95704);function tz(e){let n=e.trim();return n.startsWith("http")?n:"https://".concat(n)}function tQ(e){try{let n=new URL(tz(e)).hostname,l=tO.parse(n);return"domain"in l?l.domain:null}catch(e){return null}}var tq=l(15207);async function tU(e){let{carbonClient:n,url:l,depth:a,allUrls:t,onResult:i}=e;if(a<0)return[];let s=(await n.utilities.fetchUrls({url:l})).data.urls.filter(function(e){let n=tQ(e);return e=>n===tQ(e)}(l)).filter(e=>!t.has(e));return s.forEach(e=>t.add(e)),i(s),await Promise.all(s.map(e=>tU({carbonClient:n,url:e,depth:a-1,allUrls:t,onResult:i}))),[...t]}let tW=(0,v.PA)(function(e){let{knowledgeBase:n,knowledgeSource:l,agentResource:t,onClose:i,onBack:s,onSave:r,identityFragmentRef:o}=e,d=(0,M.useFragment)(tB,o),[u,c]=(0,es.useState)(""),{handleRefresh:g}=aR(l,t),m=(0,aL.aV)(),y=(0,es.useCallback)(e=>!!(e&&tq.D.validateURL(e))||(m({level:"danger",label:"Error",message:"Invalid URL",duration:3e3}),!1),[m]),{carbonClient:p}=tI(),{mutate:f,isLoading:h}=tL(n,async e=>{if(!p)throw Error("Adding new Knowledge Base entries is disabled at the moment");return(await p.utilities.scrapeWeb([{url:e.data,recursion_depth:1,max_pages_to_scrape:1,skip_embedding_generation:!1,enable_auto_sync:!1,generate_sparse_vectors:!0,html_tags_to_skip:[],css_classes_to_skip:[],css_selectors_to_skip:[],embedding_model:"OPENAI"}])).data.at(0)}),k=(0,es.useCallback)(e=>e.length?(e.forEach(e=>{let n=tF({label:e});f({entry:l.updateOrCreateEntry(n),data:e})}),e):[],[l,f]),F=(0,es.useCallback)(()=>{let e=tz(u);y(e)&&(c(""),k([e]))},[k,u,y]),x=(0,nc.I)({enabled:!1,queryKey:[u,p,2,k],queryFn:async()=>{var e,n;if(!p)throw Error("Carbon client not available");let l=tz(u);if(!tq.D.validateURL(l))throw Error("Invalid URL");c(""),k([l]);let a=null!==(n=null===(e=(await p.utilities.processSitemap({url:l})).data)||void 0===e?void 0:e.urls)&&void 0!==n?n:[];if(a.length)return{url:l,urls:k(a.filter(e=>e!==l))};let t=await tU({carbonClient:p,url:l,depth:2,allUrls:new Set([l]),onResult:e=>k(e)});return{url:l,urls:t}},onError(e){m({level:"danger",message:e.message,duration:3e3})},onSuccess(e){let{url:n,urls:l}=e;l.length||m({level:"warning",message:"No links found on ".concat(n),duration:3e3})}}),v=(0,es.useCallback)(()=>x.refetch(),[x]),{isMobileOnly:b}=(0,lf.Y0)(),S=(0,es.useMemo)(()=>u.trim().length>0,[u]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tp,{title:"Website",subtitle:"Add a website to this Lindyâ€™s knowledge base.",onBack:s,confirmBeforeBack:l.hasUnsavedEntries}),(0,a.jsx)(lv.J,{className:"-mb-3 select-none font-semibold text-slate-11",children:"Add website"}),(0,a.jsxs)("div",{className:(0,K.QP)("flex gap-2",b&&"flex-wrap"),children:[(0,a.jsx)("div",{className:(0,K.QP)("grow",b&&"w-full"),children:(0,a.jsx)(lx.pd,{placeholder:"https://example.com",value:u,onChange:c,autoFocus:!0})}),(0,a.jsx)(eb.$,{disabled:!u.trim(),level:u.trim()?"primary":"outline",onClick:F,children:"Add single link"}),(0,a.jsx)(eb.$,{disabled:!u.trim(),level:"outline",onClick:v,children:"Crawl"})]}),(0,a.jsx)(tm,{knowledgeSource:l,loading:x.isFetching||h,onRefresh:g,onSave:r,onCancel:i,confirmBeforeCancel:l.hasUnsavedEntries||S,confirmBeforeSave:S,identityFragmentRef:d})]})}),tH=(0,v.PA)(function(e){var n,l;let{knowledgeBase:t,source:i,onClose:s,onBack:r,onComplete:o,identityFragmentRef:d}=e,u=(0,M.useFragment)(ad,d),c=null==t?void 0:t.nodeId,g=null===(n=x.a.lindies.currentLindy)||void 0===n?void 0:n.stateGraph.id,m=null===(l=x.a.lindies.currentLindy)||void 0===l?void 0:l.stateGraph.owner,y=t.sourceMap.get(i),p=(0,nS.q2)(()=>{if(c&&g)return{nodeId:c,graphId:g}},[c,g]);return(!function(e){let n=function(e){let n=(0,nm.f)(e.query);return(0,es.useMemo)(()=>["kb/entries","get",n],[n])}(e),l=(0,ng.lB)(()=>null==e?void 0:e.options,[null==e?void 0:e.options]),a=(0,nc.I)({queryKey:n,queryFn:async()=>{let{data:n,error:l}=await ap(e);if(l)throw l;return n},...null==e?void 0:e.options}),t=(0,ng.lB)(()=>a,[a]);(0,nm.R)(n,t,l)}({query:{source:[i],...p,syncRequestIds:t.syncRequestIds,limit:"1000"},options:{enabled:!!p||t.syncRequestIds.length>0,refetchOnWindowFocus:!0,refetchOnMount:!0,onSuccess(e){e.data.forEach(e=>{t.updateOrCreateEntry(e,!1)})}}}),(0,af.S)(ah.B.knowledgeBaseSource,"entryAdded",m,e=>{t.updateOrCreateEntry(e.entry)}),(0,af.S)(ah.B.knowledgeBaseSource,"entryDeleted",m,e=>{t.removeEntryById(e.entryId)}),(0,af.S)(ah.B.knowledgeBaseSource,"entryUpdated",m,e=>{t.updateOrCreateEntry(e.entry)}),y)?(0,a.jsx)(t$,{knowledgeBase:t,knowledgeSource:y,agentResource:p,onClose:s,onBack:r,onSave:o,identityFragmentRef:u}):null});function t$(e){let n=e.knowledgeSource.source;switch(n){case au.rW.UploadedFile:return(0,a.jsx)(tD,{...e});case au.rW.RawText:return(0,a.jsx)(tG,{...e});case au.rW.WebScrape:return(0,a.jsx)(tW,{...e});case au.rW.RssFeed:return(0,a.jsx)("p",{children:"Not supported"});default:if((0,au.TI)(n))return(0,a.jsx)(tf,{...e});throw new ak.j(n)}}let tZ=(0,v.PA)(function(e){var n;let{node:l,sourceToEdit:t,open:i,closeModal:s,onAfterClosed:r,identityFragmentRef:o}=e,d=(0,M.useFragment)(ae,o),[u,c]=(0,es.useState)(null),g=(0,es.useCallback)(e=>{l&&(l.addKnowledgeBase().addSource(e.source),c(e.source))},[l]),m=(0,es.useCallback)(()=>{c(null),null==r||r()},[r]),y=(0,es.useCallback)(()=>c(null),[]),p=null!==(n=null==l?void 0:l.knowledgeBase)&&void 0!==n?n:null,f=null!=t?t:u;return(0,a.jsx)(nL.aF,{"data-testid":"lindy.agent-wizard.kb-modal",open:i,setClosed:s,afterClosed:m,hasBottomPadding:!0,className:"max-h-[85vh] overflow-y-auto",children:f&&p?(0,a.jsx)(tH,{knowledgeBase:p,source:f,onClose:s,onBack:u?y:void 0,onComplete:s,identityFragmentRef:d}):(0,a.jsx)(ao,{options:an.ae,onSelect:g,onClose:s})})}),tY=(0,v.PA)(function(e){let n=(0,M.useFragment)(l8,e.identityFragmentRef),l=(0,nb.j)(),t=(0,es.useCallback)(()=>{var n,l;null===(n=e.onRename)||void 0===n||n.call(e),null===(l=e.onClose)||void 0===l||l.call(e)},[e]),i=(0,es.useCallback)(()=>{l.onOpen()},[l]),s=(0,es.useCallback)(()=>{var n,a,t;l.onClose(),null===(n=e.onClose)||void 0===n||n.call(e),null===(t=x.a.lindies)||void 0===t||null===(a=t.currentLindy)||void 0===a||a.stateGraph.setSelectedEntityById(e.node.id)},[l,e]);return(0,a.jsxs)(a.Fragment,{children:[e.onRename&&(0,a.jsx)(l_,{onClick:t}),(0,a.jsx)(lR,{onClick:i}),(0,a.jsx)(lN,{node:e.node,onClick:e.onClose}),(0,a.jsx)(tK,{children:(0,a.jsx)(tZ,{node:e.node,open:l.isOpen,closeModal:s,identityFragmentRef:n})})]})}),tJ=(0,v.PA)(function(e){let n=(0,es.useCallback)(()=>{var n,l;null===(n=e.onRename)||void 0===n||n.call(e),null===(l=e.onClose)||void 0===l||l.call(e)},[e]);return(0,a.jsxs)(a.Fragment,{children:[e.onRename&&(0,a.jsx)(l_,{onClick:n}),(0,a.jsx)(lN,{node:e.node,onClick:e.onClose})]})}),tX=(0,v.PA)(function(e){let{node:n,onRename:l,onClose:t,identityFragmentRef:i}=e,s=(0,M.useFragment)(nC,i);return n.isKnowledgeBaseNode?(0,a.jsx)(tY,{node:n,onRename:l,onClose:t,identityFragmentRef:s}):(0,eh.HY)(n)?(0,a.jsx)(lD,{node:n,onRename:l,onClose:t}):(0,eh.ji)(n)?(0,a.jsx)(l9,{node:n,onRename:l,onClose:t}):(0,eh.Ri)(n)?(0,a.jsx)(tJ,{node:n,onRename:l,onClose:t}):(0,eh.P8)(n)?(0,a.jsx)(lP,{node:n,onRename:l,onClose:t}):null});var t0=l(79058);function t1(e){let n=(0,es.useCallback)((n,l)=>{var a;null===(a=e.targetRef.current)||void 0===a||a.dispatchEvent(new MouseEvent("contextmenu",{bubbles:!0,cancelable:!0,view:window,clientX:n,clientY:l}))},[e.targetRef]),l=(0,es.useCallback)(e=>{e.preventDefault(),n(e.clientX,e.clientY)},[n]),t=(0,es.useCallback)(e=>{if("Enter"===e.key){e.preventDefault();let l=e.target.getBoundingClientRect();n(l.right-8,l.bottom-8)}},[n]);return(0,a.jsx)(eb.$,{level:"text",className:"group h-5 w-5 p-0.5 hover:border-slate-8 hover:bg-slate-5 active:border-slate-8 active:bg-slate-7",onClick:l,onKeyDown:t,tabIndex:0,children:(0,a.jsx)(t0.A,{"aria-label":"Expand context menu",className:"group h-5 w-5 text-slate-11 transition-colors group-hover:text-slate-12"})})}var t2=l(95147);let t3=(0,v.PA)(function(e){let{type:n,position:l,isSelected:t,className:i,isStateNode:s,hasInputEdges:r}=e,o="target"===n&&r;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.h7,{type:n,position:l,className:(0,K.QP)("target"===n&&"!pointer-events-none","z-50 opacity-0")}),!o&&(0,a.jsx)("div",{className:(0,K.QP)("absolute z-10 flex h-3 w-3 items-center justify-center rounded-full border bg-slate-1 transition-opacity","transform -translate-x-1/2 left-1/2",t?s?"border-sky-6":"border-blue-6":"border-slate-6 opacity-0",i),children:(0,a.jsx)("div",{className:(0,K.QP)("rounded-full",t?s?"bg-sky-11":"bg-blue-9":"bg-slate-8"),style:{height:8,width:8}})})]})}),t6={sm:"size-5",md:"size-8",lg:"size-12"},t5={sm:20,md:32,lg:48},t4={hidden:{opacity:0},show:{opacity:1,transition:{duration:0,staggerChildren:.1}}},t7={hidden:{opacity:0,scale:0},show:{opacity:1,scale:1,transition:{duration:.3}}},t9=(0,es.createContext)({}),t8={sm:"-ml-[calc(theme(spacing.8)/3.35)]",md:"-ml-[calc(theme(spacing.10)/3.35)]",lg:"-ml-[calc(theme(spacing.12)/3.35)]"},ie={scale:1.15},il={scale:.9},ia=(0,es.memo)((0,es.forwardRef)(function(e,n){let{size:l="sm",children:t,className:i,style:s}=e,{reversedChildrenArray:r,overflowText:o}=(0,es.useMemo)(()=>{let e=es.Children.toArray(t);return{reversedChildrenArray:e.slice(0,3).reverse(),overflowText:e.length>3?"+".concat(e.length-3):null}},[t]),d=(0,es.useMemo)(()=>({size:l}),[l]),u=(0,es.useMemo)(()=>({scale:1,mask:function(e){let n=t5[e],l="calc(".concat(n," / 2 + ").concat(4,"px)"),a="calc(".concat(n," * 1.5 + ").concat(4,"px - (").concat(n," / 3) - ",0,"px)");return"radial-gradient(circle ".concat(l," at ").concat(a," center, transparent 99%,#fff 100%)")}(l)}),[l]);return(0,a.jsx)(t9.Provider,{value:d,children:(0,a.jsxs)(ed.P.div,{ref:n,className:(0,K.QP)("flex items-center flex-row-reverse",i),style:s,variants:t4,initial:"hidden",animate:"show",children:[o&&(0,a.jsx)(ed.P.div,{className:"text-xs font-medium tabular-nums text-slate-10",variants:t7,children:o},"overflow-text"),r.map((e,n,t)=>(0,a.jsx)(ed.P.div,{className:(0,K.QP)("relative z-0 hover:z-10 focus-within:z-10",n!==t.length-1&&t8[l]),style:u,whileHover:ie,whileTap:il,variants:t7,children:e},n))]})})})),it=(0,es.forwardRef)(function(e,n){let{size:l="md",className:t,...i}=e,{size:s}=(0,es.useContext)(t9);return(0,a.jsx)("div",{ref:n,...i,className:(0,K.QP)("relative rounded-full bg-white flex items-center justify-center",t),children:i.children({className:(0,K.QP)("rounded-full bg-white shadow-sm hover:shadow-md",t6[null!=s?s:l])})})});var ii=l(36441);let is=(0,v.PA)(function(e){let{node:n,className:l,style:t}=e,{channelsPuck:i}=n.testingState;if(!i.length)return null;let s=1===i.length?i[0].tool===eF.h6.Timer?"Lindy will resume here when the timer goes off":"Lindy will resume here when a reply is received":"Lindy is subscribed to these events";return(0,a.jsxs)(eJ.m_,{placement:"top",children:[(0,a.jsx)(eJ.ZI,{showArrow:!0,children:s}),(0,a.jsx)(eJ.k$,{asChild:!0,children:(0,a.jsx)(ia,{size:"sm",className:l,style:t,children:i.map((e,n)=>(0,a.jsx)(ir,{puck:e},n))})})]})}),ir=(0,v.PA)(function(e){let{puck:n}=e,l=(0,eD.Z)(),t=(0,nk.JL)(n.createdByNodeId),i=(0,es.useCallback)(e=>{e.stopPropagation(),t&&(0,ii.h5)(()=>{l.selectEntity(t),x.a.ui.closeTestingPanel()})},[l,t]),s=(0,es.useCallback)(e=>{e.preventDefault(),e.stopPropagation()},[]);return(0,a.jsx)(it,{children:e=>{let{className:l}=e;return(0,a.jsx)("div",{onClickCapture:i,onMouseDownCapture:s,onMouseUpCapture:s,className:"cursor-pointer",children:(0,a.jsx)(ef.si,{tool:n.tool,className:l})})}})});var io=l(89893),id=l(54240);let iu=()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"absolute left-[-1.25px] top-[calc(50%-6px)] h-1.5 w-0.5 bg-slate-1"}),(0,a.jsx)("div",{className:"absolute left-[0.5px] top-[calc(50%-6px)] h-1.5 w-0.5 bg-sky-3"}),(0,a.jsx)(io.A,{className:"absolute -left-2 top-[calc(50%-6px)] h-4 w-4 translate-x-[-0.5px] text-sky-11"}),(0,a.jsx)("div",{className:"absolute right-[-1px] top-[calc(50%+6px)] h-1.5 w-0.5 -translate-y-full bg-slate-1"}),(0,a.jsx)("div",{className:"absolute right-[0.5px] top-[calc(50%+6px)] h-1.5 w-0.5 -translate-y-full bg-sky-3"}),(0,a.jsx)(id.A,{className:"absolute -right-2 top-[calc(50%+6px)] h-4 w-4 -translate-y-full translate-x-[0.5px] text-sky-11"})]}),ic=e=>e.stopPropagation(),ig=e=>{var n;return null===(n=e.connection.fromHandle)||void 0===n?void 0:n.nodeId},im={z:0,backfaceVisibility:"hidden"},iy=(0,v.PA)(function(e){let{node:n,allowInput:l=!0,attentionMsg:t="",disabled:i=!1,locked:s=!1,requireAttention:r=!1,onRename:o,children:d,identityFragmentRef:u}=e,c=(0,M.useFragment)(nx,u),g=(0,eD.Z)(),{isSelected:m,nodeHeight:y,isSourceOfSelectedEdge:p,latestValidationIssue:f,testingState:h,isHighlighted:k}=n,F=(0,eh.P8)(n),x=(0,nb.j)(),v=(0,w.Pj)(ig),b=!!v,S=(0,nS.q2)(()=>b&&l&&eM.NV.isValidConnection({source:v,target:n.id},g.serializedStateGraph),[l,v,n.id,b,g]),T=!na.Kd.has(h.state)&&g.isTestCurrentlyRunning,I=(0,es.useCallback)(()=>{g.selectEntity(n),x.isOpen&&x.onClose()},[n,g,x]),C=(0,es.useRef)(null),A=(0,es.useMemo)(()=>({height:y,width:eM.M4,opacity:0,backgroundColor:"rgba(0, 0, 0, 0)",borderRadius:"0.75rem",top:.5*y,zIndex:10,pointerEvents:S?"auto":"none"}),[y,S]),j=(0,es.useMemo)(()=>({right:45}),[]),N=(0,es.useMemo)(()=>({width:0===h.channelsPuck.length?0:20+(h.channelsPuck.length-1)*10}),[h.channelsPuck.length]),{nodeAnimationTransition:L,nodeAnimationVariants:_,nodeAnimationCurrentVariant:R}=function(e){let n=(0,eD.Z)(),{nodeAnimationDurationMs:l,nodeAnimationKind:a,nodeScale:t,nodeMovePixels:i,nodeTransitionBezier:s}=(0,nK._5)({"Rails Testing":(0,nK.TV)({nodeAnimationDurationMs:{value:200,step:50,min:50,max:1e3},nodeAnimationKind:{value:"scale",options:["scale","move"]},nodeScale:{value:1.06,step:.002,min:1,max:2},nodeMovePixels:{value:18,step:1,min:5,max:50},nodeTransitionBezier:(0,nT.a)("ease-in-out")},{collapsed:!0})}),r=(0,es.useMemo)(()=>({inactive:{scale:1,y:"0",opacity:.5},active:{..."scale"===a?{scale:[1,t,1]}:{y:["0px","".concat(i,"px"),"0px"]},opacity:1}}),[a,t,i]),o=(0,es.useMemo)(()=>({duration:l/1e3,type:"tween",ease:s,opacity:{duration:.1,ease:"easeInOut"}}),[l,s]);return{nodeAnimationCurrentVariant:e?"inactive":"active",nodeAnimationVariants:r,nodeAnimationTransition:n.isTestCurrentlyRunning?o:nI}}(T);return(0,a.jsxs)(ed.P.div,{className:(0,K.QP)("group relative h-full transition-transform",!b&&"hover:translate-y-[-1px]"),animate:R,initial:!1,style:im,variants:_,transition:L,children:[l&&(0,a.jsx)(w.h7,{type:"target",position:eV.yX.Top,isConnectable:l,style:A}),(0,a.jsx)(t3,{type:"source",position:eV.yX.Bottom,isSelected:m||p,className:"-bottom-1.5 duration-75 group-hover:opacity-100",isStateNode:F}),(0,a.jsxs)("div",{className:(0,K.QP)(F&&"rounded-[20px] border border-sky-11 bg-sky-3 p-2","relative"),style:{width:eM.M4,height:y},children:[F&&(0,a.jsx)(iu,{}),(0,a.jsxs)("div",{ref:C,className:(0,K.QP)(S&&"group-hover:ring-2 dark:ring-offset-black ring-offset-white ring-offset-2 group-hover:ring-blue-9/55",!S&&!b&&"hover:border-blue-9","cursor-pointer rounded-xl bg-white dark:bg-slate-1 active:bg-slate-3 shadow-sm border-slate-6 w-full border-1 hover:shadow-lg transition-shadow h-full duration-75",i&&"bg-slate-2 border-slate-6",(r||(null==f?void 0:f.message))&&"bg-amber-2 border-amber-6",(m||k)&&"border-blue-9"),onClick:I,children:[(0,a.jsx)("div",{className:"size-full overflow-hidden",children:(0,a.jsxs)($.f,{between:!0,top:!0,className:"size-full gap-0",children:[(0,a.jsx)("div",{className:"min-w-0 flex-1 overflow-hidden",children:d}),(0,a.jsx)("div",{className:"shrink-0",onClick:ic,children:(0,a.jsxs)($.f,{className:"h-full items-center gap-x-2 py-3 pr-3",children:[(r||(null==f?void 0:f.message))&&(0,a.jsxs)(eJ.m_,{placement:"top",children:[(0,a.jsx)(eJ.ZI,{showArrow:!0,children:t||(null==f?void 0:f.message)}),(0,a.jsx)(eJ.k$,{asChild:!0,children:(0,a.jsx)(eb.$,{level:"text",className:"group flex size-5 !cursor-pointer items-center justify-center p-0.5 hover:border-slate-8 hover:bg-slate-5 active:border-slate-8 active:bg-slate-7",onClick:I,children:(0,a.jsx)(t2.Y,{"aria-label":"Show validation error message",className:"group size-4 text-slate-11 transition-colors group-hover:text-slate-12"})})})]}),s&&(0,a.jsx)(nv.A,{className:"size-[14px] fill-slate-9"}),!!h.channelsPuck.length&&(0,a.jsx)("div",{className:"mr-3 h-full",style:N}),(0,a.jsx)("div",{className:(0,K.QP)("invisible flex w-5 items-center group-hover:visible",x.isOpen&&"visible"),children:(0,a.jsx)(t1,{targetRef:C})})]})})]})}),(0,a.jsx)(is,{node:n,className:(0,K.QP)("absolute top-[14px]",F&&"top-[20px]"),style:j}),(0,a.jsx)(eP.j,{targetRef:C,isOpen:x.isOpen,onOpen:x.onOpen,onClose:x.onClose,returnFocus:!1,children:(0,a.jsx)(e9.l,{children:(0,a.jsx)(tX,{node:n,identityFragmentRef:c,onRename:o,onClose:x.onClose})})})]})]})]})});function ip(e){let{className:n,list:l}=e,[t,i]=(0,es.useState)(""),[s,r]=(0,es.useState)(0),o=(0,es.useCallback)(e=>{if(!e)return;r(e.getBoundingClientRect().width||0);let n=window.getComputedStyle(e),l=n.getPropertyValue("font-family"),a=n.getPropertyValue("font-size");a&&l&&i("".concat(a," ").concat(l))},[]),d=(0,es.useMemo)(()=>{var e;return null===(e=document.createElement("canvas"))||void 0===e?void 0:e.getContext("2d")},[]),u=(0,es.useMemo)(()=>l.map(e=>(null==e?void 0:e.toString)?e.toString():"".concat(e)),[l]),c=(0,es.useMemo)(()=>{if(!s)return"";if(u.length<=1)return u[0];let e="",n=u.length;for(let i=0;i<u.length;i++){var l,a;if(l=u.slice(0,n-i),e=(a=u.slice(n-i))&&a.length?"".concat(l.join(", ")," and ").concat(a.length," more"):[l.slice(0,-1).join(", "),l.slice(-1)].filter(Boolean).join(" and "),!d||!t||(d.font=t,d.measureText(e).width<=s))break}return e},[d,t,s,u]);return(0,a.jsx)("div",{ref:o,className:(0,K.QP)("w-full",n,"whitespace-nowrap text-ellipsis overflow-hidden"),children:c})}let ih=(0,v.PA)(function(e){var n;let{node:l}=e,t=null==l?void 0:null===(n=l.knowledgeBase)||void 0===n?void 0:n.enabledSources,i=(0,es.useMemo)(()=>t?t.map(e=>e.options.title).sort((e,n)=>e.length-n.length):[],[t]);return i.length>0?(0,a.jsx)(ip,{list:i}):(0,a.jsx)("p",{children:"No knowledge source yet"})});var ik=l(1023);let iF=JSON.parse('{"assets":[{"id":"edb3aZGbopIYt6zBh1qic","layers":[]},{"id":"3gy9CEAuYfSFBC7UQUU-4","layers":[{"ddd":0,"ind":7,"ty":4,"nm":"","ln":"5mJ9aHbOD97MHYHfE79f17","sr":1,"ks":{"a":{"a":0,"k":[0,0]},"o":{"a":0,"k":100},"p":{"a":0,"k":[49996.5,49997.5]},"r":{"a":0,"k":0},"s":{"a":0,"k":[133.33,133.33]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0}},"ao":0,"ip":0,"op":92,"st":0,"bm":0,"shapes":[{"ty":"gr","nm":"surface176","it":[{"ty":"gr","it":[{"ty":"gr","it":[{"ty":"sh","d":1,"ks":{"a":0,"k":{"c":false,"i":[[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0]],"v":[[1.14,2.89],[2.64,4.39],[6.14,0.89]]}}},{"ty":"st","bm":0,"c":{"a":0,"k":[1,1,1,1]},"lc":2,"lj":2,"ml":4,"o":{"a":0,"k":100},"w":{"a":0,"k":1}},{"ty":"tr","nm":"Transform","a":{"a":0,"k":[0,0]},"o":{"a":0,"k":100},"p":{"a":0,"k":[0,0]},"r":{"a":0,"k":0},"s":{"a":0,"k":[75,75]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0}}]},{"ty":"tr","nm":"Transform","a":{"a":0,"k":[0,0]},"o":{"a":0,"k":100},"p":{"a":0,"k":[0,0]},"r":{"a":0,"k":0},"s":{"a":0,"k":[100,100]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0}}]},{"ty":"tr","nm":"Transform","a":{"a":0,"k":[0,0]},"o":{"a":0,"k":100},"p":{"a":0,"k":[0,0]},"r":{"a":0,"k":0},"s":{"a":0,"k":[100,100]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0}}]}]}]},{"id":"jqwBrnW9CcP6doovkf4xh","layers":[{"ddd":0,"ind":9,"ty":4,"nm":"","ln":"4YwORHRsHn_yFHJr4r9iu9","sr":1,"ks":{"a":{"a":0,"k":[0,0]},"o":{"a":0,"k":100},"p":{"a":0,"k":[50000,50000]},"r":{"a":0,"k":0},"s":{"a":0,"k":[100,100]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0}},"ao":0,"ip":0,"op":92,"st":0,"bm":0,"shapes":[{"ty":"gr","hd":false,"bm":0,"it":[{"ty":"rc","hd":false,"p":{"a":0,"k":[0,0]},"r":{"a":0,"k":0},"s":{"a":0,"k":[7,5]}},{"ty":"fl","hd":false,"bm":0,"c":{"a":0,"k":[0,0,0]},"r":1,"o":{"a":0,"k":100}},{"ty":"tr","nm":"Transform","a":{"a":0,"k":[0,0]},"o":{"a":0,"k":100},"p":{"a":0,"k":[0,0]},"r":{"a":0,"k":0},"s":{"a":0,"k":[100,100]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0}}],"np":0}]}]},{"id":"KM3vOH4U9P6ZkpawmaQOG","layers":[{"ddd":0,"ind":8,"ty":0,"nm":"","td":1,"ln":"precomp_40GBGrWy6lZOveNEbMzA98","sr":1,"ks":{"a":{"a":0,"k":[50000,50000]},"o":{"a":0,"k":100},"p":{"a":0,"k":[50000,50000]},"r":{"a":0,"k":0},"s":{"a":0,"k":[100,100]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0}},"ao":0,"w":100000,"h":100000,"ip":0,"op":92,"st":0,"bm":0,"refId":"jqwBrnW9CcP6doovkf4xh"},{"ddd":0,"ind":6,"ty":0,"nm":"","tt":1,"ln":"precomp_t748Ofker_s-Dn5kBpBeh6","sr":1,"ks":{"a":{"a":0,"k":[100000,100000]},"o":{"a":0,"k":100},"p":{"a":0,"k":[100000,100000]},"r":{"a":0,"k":0},"s":{"a":0,"k":[100,100]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0}},"ao":0,"w":100000,"h":100000,"ip":0,"op":92,"st":0,"bm":0,"refId":"3gy9CEAuYfSFBC7UQUU-4"}]},{"id":"Y5QOR8GH_8bUly5P1ltdQ","layers":[]},{"id":"Y31iDhZoquKrcssV-l9rV","layers":[{"ddd":0,"ind":4,"ty":0,"nm":"","ln":"precomp_0d5xeldvx6dKwc_SHxBdy4","sr":1,"ks":{"a":{"a":0,"k":[50000,50000]},"o":{"a":0,"k":100},"p":{"a":0,"k":[50000,50000]},"r":{"a":0,"k":0},"s":{"a":0,"k":[100,100]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0}},"ao":0,"w":100000,"h":100000,"ip":0,"op":92,"st":0,"bm":0,"refId":"edb3aZGbopIYt6zBh1qic"},{"ddd":0,"ind":5,"ty":0,"nm":"","ln":"precomp_t748Ofker_s-Dn5kBpBeh5","sr":1,"ks":{"a":{"a":0,"k":[50000,50000]},"o":{"a":0,"k":100},"p":{"a":0,"k":[50000,50000]},"r":{"a":0,"k":0},"s":{"a":0,"k":[100,100]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0}},"ao":0,"w":100000,"h":100000,"ip":0,"op":92,"st":0,"bm":0,"refId":"KM3vOH4U9P6ZkpawmaQOG"},{"ddd":0,"ind":10,"ty":0,"nm":"","ln":"precomp_H41hEOVtj4koJDSr9DX4x10","sr":1,"ks":{"a":{"a":0,"k":[50000,50000]},"o":{"a":0,"k":100},"p":{"a":0,"k":[50000,50000]},"r":{"a":0,"k":0},"s":{"a":0,"k":[100,100]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0}},"ao":0,"w":100000,"h":100000,"ip":0,"op":92,"st":0,"bm":0,"refId":"Y5QOR8GH_8bUly5P1ltdQ"}]},{"id":"lgVVV_dl3gc5pePUhiQo7","layers":[{"ddd":0,"ind":14,"ty":4,"nm":"","ln":"mwPW8yFOYyZK-bkotqiZO14","sr":1,"ks":{"a":{"a":0,"k":[0,0]},"o":{"a":0,"k":100},"p":{"a":0,"k":[50004.14,50004.14]},"r":{"a":0,"k":0},"s":{"a":0,"k":[100,100]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0}},"ao":0,"ip":0,"op":92,"st":0,"bm":0,"shapes":[{"ty":"gr","hd":false,"bm":0,"it":[{"ty":"rc","hd":false,"p":{"a":0,"k":[0,0]},"r":{"a":0,"k":125},"s":{"a":0,"k":[24.29,24.29]}},{"ty":"st","hd":false,"bm":0,"c":{"a":0,"k":[0,0,0]},"lc":2,"lj":1,"o":{"a":0,"k":0},"w":{"a":0,"k":1.5}},{"ty":"tr","nm":"Transform","a":{"a":0,"k":[0,0]},"o":{"a":0,"k":100},"p":{"a":0,"k":[0,0]},"r":{"a":0,"k":0},"s":{"a":0,"k":[100,100]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0}}],"np":0}]},{"ddd":0,"ind":15,"ty":4,"nm":"","ln":"WqxZFZNZYccM8Fxi7YDEC15","sr":1,"ks":{"a":{"a":0,"k":[0,0]},"o":{"a":0,"k":100},"p":{"a":0,"k":[50004.14,50004.14]},"r":{"a":0,"k":0},"s":{"a":0,"k":[100,100]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0}},"ao":0,"ip":0,"op":92,"st":0,"bm":0,"shapes":[{"ty":"gr","hd":false,"bm":0,"it":[{"ty":"rc","hd":false,"p":{"a":0,"k":[0,0]},"r":{"a":0,"k":125},"s":{"a":0,"k":[9.29,9.29]}},{"ty":"st","hd":false,"bm":0,"c":{"a":0,"k":[1,1,1]},"lc":2,"lj":1,"o":{"a":0,"k":100},"w":{"a":0,"k":3}},{"ty":"tr","nm":"Transform","a":{"a":0,"k":[0,0]},"o":{"a":0,"k":100},"p":{"a":0,"k":[0,0]},"r":{"a":0,"k":0},"s":{"a":0,"k":[100,100]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0}}],"np":0}]}]},{"id":"2FXiiHzE9svVGXxF75kkh","layers":[{"ddd":0,"ind":16,"ty":4,"nm":"","td":1,"ln":"ZWT50i5W_oRxWVG_4rgvr16","sr":1,"ks":{"a":{"a":0,"k":[0,0]},"o":{"a":0,"k":100},"p":{"a":0,"k":[50004.14,50004.14]},"r":{"a":0,"k":0},"s":{"a":0,"k":[100,100]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0}},"ao":0,"ip":0,"op":92,"st":0,"bm":0,"shapes":[{"ty":"gr","hd":false,"bm":0,"it":[{"ty":"rc","hd":false,"p":{"a":0,"k":[0,0]},"r":{"a":0,"k":125},"s":{"a":0,"k":[9.29,9.29]}},{"ty":"fl","hd":false,"bm":0,"c":{"a":0,"k":[0,0,0]},"r":1,"o":{"a":0,"k":100}},{"ty":"tr","nm":"Transform","a":{"a":0,"k":[0,0]},"o":{"a":0,"k":100},"p":{"a":0,"k":[0,0]},"r":{"a":0,"k":0},"s":{"a":0,"k":[100,100]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0}}],"np":0}]},{"ddd":0,"ind":13,"ty":0,"nm":"","tt":2,"ln":"precomp_XpNsPd2AOWL3_Q3boFfyQ13","sr":1,"ks":{"a":{"a":0,"k":[100000,100000]},"o":{"a":0,"k":100},"p":{"a":0,"k":[100000,100000]},"r":{"a":0,"k":0},"s":{"a":0,"k":[100,100]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0}},"ao":0,"w":100000,"h":100000,"ip":0,"op":92,"st":0,"bm":0,"refId":"lgVVV_dl3gc5pePUhiQo7"}]},{"id":"v-a4zGOdHWbp5DRKtOSCx","layers":[{"ddd":0,"ind":12,"ty":0,"nm":"","ln":"precomp_XpNsPd2AOWL3_Q3boFfyQ12","sr":1,"ks":{"a":{"a":0,"k":[50000,50000]},"o":{"a":0,"k":100},"p":{"a":0,"k":[49995.86,49995.86]},"r":{"a":0,"k":0},"s":{"a":0,"k":[100,100]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0}},"ao":0,"w":100000,"h":100000,"ip":0,"op":92,"st":0,"bm":0,"refId":"2FXiiHzE9svVGXxF75kkh"}]},{"id":"CeFtRyzoh6k1-GfmSS-0J","layers":[{"ddd":0,"ind":18,"ty":4,"nm":"","ln":"3TXe3AYnzIkoCm7H6DuqG18","sr":1,"ks":{"a":{"a":0,"k":[0,0]},"o":{"a":0,"k":100},"p":{"a":0,"k":[50000,50000]},"r":{"a":0,"k":0},"s":{"a":0,"k":[100,100]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0}},"ao":0,"ip":0,"op":92,"st":0,"bm":0,"shapes":[{"ty":"gr","hd":false,"bm":0,"it":[{"ty":"rc","hd":false,"p":{"a":0,"k":[0,0]},"r":{"a":0,"k":125},"s":{"a":0,"k":[9.29,9.29]}},{"ty":"fl","hd":false,"bm":0,"c":{"a":0,"k":[0.05,0.79,0.43]},"r":1,"o":{"a":0,"k":100}},{"ty":"tr","nm":"Transform","a":{"a":0,"k":[0,0]},"o":{"a":0,"k":100},"p":{"a":0,"k":[0,0]},"r":{"a":0,"k":0},"s":{"a":0,"k":[100,100]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0}}],"np":0}]}]},{"id":"n9nOxKAshZeGpKMMxUPVe","layers":[{"ddd":0,"ind":3,"ty":0,"nm":"","ln":"precomp_NZE23HDY8Vm-S18BTCjiT3","sr":1,"ks":{"a":{"a":0,"k":[50000,50000]},"o":{"a":0,"k":100},"p":{"a":0,"k":[49999.86,49999.86]},"r":{"a":0,"k":0},"s":{"a":0,"k":[100,100]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0}},"ao":0,"w":100000,"h":100000,"ip":0,"op":92,"st":0,"bm":0,"refId":"Y31iDhZoquKrcssV-l9rV"},{"ddd":0,"ind":11,"ty":0,"nm":"","ln":"precomp_OmClrvgdAbhzIOLHscDhH11","sr":1,"ks":{"a":{"a":0,"k":[50000,50000]},"o":{"a":0,"k":100},"p":{"a":0,"k":[50000,50000]},"r":{"a":0,"k":0},"s":{"a":0,"k":[100,100]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0}},"ao":0,"w":100000,"h":100000,"ip":0,"op":92,"st":0,"bm":0,"refId":"v-a4zGOdHWbp5DRKtOSCx"},{"ddd":0,"ind":17,"ty":0,"nm":"","ln":"precomp_uA9O-v2hs26njcRzXtNY617","sr":1,"ks":{"a":{"a":0,"k":[50000,50000]},"o":{"a":0,"k":100},"p":{"a":0,"k":[50000,50000]},"r":{"a":0,"k":0},"s":{"a":0,"k":[100,100]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0}},"ao":0,"w":100000,"h":100000,"ip":0,"op":92,"st":0,"bm":0,"refId":"CeFtRyzoh6k1-GfmSS-0J"}]},{"id":"4hqf8T6ZvaB92iULAPFdP","layers":[{"ddd":0,"ind":2,"ty":0,"nm":"","ln":"precomp_zBc4zJj2fnAbbg2b8GjXo2","sr":1,"ks":{"a":{"a":0,"k":[50000,50000]},"o":{"a":0,"k":100},"p":{"a":0,"k":[50000,50000]},"r":{"a":1,"k":[{"t":0,"s":[0],"h":1},{"t":0,"s":[-45],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":1,"s":[-43.81],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":2,"s":[-41],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":3,"s":[-37.02],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":4,"s":[-32.25],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":5,"s":[-27.06],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":6,"s":[-21.75],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":7,"s":[-16.57],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":8,"s":[-11.71],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":9,"s":[-7.31],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":10,"s":[-3.47],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":11,"s":[-0.25],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":12,"s":[2.35],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":13,"s":[4.34],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":14,"s":[5.75],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":15,"s":[6.64],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":16,"s":[7.07],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":17,"s":[7.11],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":18,"s":[6.85],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":19,"s":[6.35],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":20,"s":[5.68],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":21,"s":[4.9],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":22,"s":[4.07],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":23,"s":[3.23],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":24,"s":[2.41],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":25,"s":[1.66],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":26,"s":[0.99],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":27,"s":[0.4],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":28,"s":[-0.08],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":29,"s":[-0.47],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":30,"s":[-0.76],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":31,"s":[-0.96],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":32,"s":[-1.08],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":33,"s":[-1.13],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":34,"s":[-1.12],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":35,"s":[-1.07],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":36,"s":[-0.98],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":37,"s":[-0.87],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":38,"s":[-0.74],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":39,"s":[-0.61],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":40,"s":[-0.48],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":41,"s":[-0.35],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":42,"s":[-0.23],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":43,"s":[-0.13],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":44,"s":[-0.04],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":45,"s":[0.03],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":46,"s":[0.09],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":47,"s":[0.13],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":48,"s":[0.16],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":49,"s":[0.17],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":50,"s":[0.18],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":51,"s":[0.18],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":52,"s":[0.17],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":53,"s":[0.15],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":54,"s":[0.13],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":55,"s":[0.11],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":56,"s":[0.09],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":57,"s":[0.07],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":58,"s":[0.05],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":59,"s":[0.03],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":60,"s":[0.02],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":61,"s":[0],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":62,"s":[-0.01],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":63,"s":[-0.02],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":64,"s":[-0.02],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":65,"s":[-0.03],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":66,"s":[-0.03],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":67,"s":[-0.03],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":68,"s":[-0.03],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":69,"s":[-0.03],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":70,"s":[-0.02],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":71,"s":[-0.02],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":72,"s":[-0.02],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":73,"s":[-0.01],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":74,"s":[-0.01],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":75,"s":[-0.01],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":76,"s":[0],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":77,"s":[0],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":78,"s":[0],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":79,"s":[0],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":80,"s":[0],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":81,"s":[0],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":82,"s":[0],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":83,"s":[0],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":84,"s":[0],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":85,"s":[0],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":86,"s":[0],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":87,"s":[0],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":88,"s":[0],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":89,"s":[0],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":90,"s":[0],"h":1}]},"s":{"a":1,"k":[{"t":0,"s":[100,100],"h":1},{"t":0,"s":[0,0],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":1,"s":[2.64,2.64],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":2,"s":[8.88,8.88],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":3,"s":[17.74,17.74],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":4,"s":[28.33,28.33],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":5,"s":[39.86,39.86],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":6,"s":[51.66,51.66],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":7,"s":[63.18,63.18],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":8,"s":[73.98,73.98],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":9,"s":[83.75,83.75],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":10,"s":[92.28,92.28],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":11,"s":[99.45,99.45],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":12,"s":[105.23,105.23],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":13,"s":[109.64,109.64],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":14,"s":[112.77,112.77],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":15,"s":[114.75,114.75],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":16,"s":[115.71,115.71],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":17,"s":[115.81,115.81],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":18,"s":[115.22,115.22],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":19,"s":[114.11,114.11],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":20,"s":[112.62,112.62],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":21,"s":[110.89,110.89],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":22,"s":[109.04,109.04],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":23,"s":[107.17,107.17],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":24,"s":[105.37,105.37],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":25,"s":[103.69,103.69],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":26,"s":[102.19,102.19],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":27,"s":[100.9,100.9],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":28,"s":[99.82,99.82],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":29,"s":[98.96,98.96],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":30,"s":[98.32,98.32],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":31,"s":[97.87,97.87],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":32,"s":[97.61,97.61],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":33,"s":[97.49,97.49],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":34,"s":[97.51,97.51],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":35,"s":[97.63,97.63],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":36,"s":[97.82,97.82],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":37,"s":[98.07,98.07],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":38,"s":[98.35,98.35],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":39,"s":[98.65,98.65],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":40,"s":[98.94,98.94],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":41,"s":[99.22,99.22],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":42,"s":[99.48,99.48],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":43,"s":[99.71,99.71],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":44,"s":[99.91,99.91],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":45,"s":[100.07,100.07],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":46,"s":[100.2,100.2],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":47,"s":[100.29,100.29],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":48,"s":[100.35,100.35],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":49,"s":[100.39,100.39],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":50,"s":[100.4,100.4],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":51,"s":[100.39,100.39],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":52,"s":[100.37,100.37],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":53,"s":[100.34,100.34],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":54,"s":[100.29,100.29],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":55,"s":[100.25,100.25],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":56,"s":[100.2,100.2],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":57,"s":[100.16,100.16],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":58,"s":[100.11,100.11],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":59,"s":[100.07,100.07],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":60,"s":[100.04,100.04],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":61,"s":[100.01,100.01],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":62,"s":[99.98,99.98],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":63,"s":[99.96,99.96],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":64,"s":[99.95,99.95],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":65,"s":[99.94,99.94],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":66,"s":[99.94,99.94],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":67,"s":[99.94,99.94],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":68,"s":[99.94,99.94],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":69,"s":[99.94,99.94],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":70,"s":[99.95,99.95],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":71,"s":[99.96,99.96],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":72,"s":[99.96,99.96],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":73,"s":[99.97,99.97],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":74,"s":[99.98,99.98],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":75,"s":[99.98,99.98],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":76,"s":[99.99,99.99],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":77,"s":[100,100],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":78,"s":[100,100],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":79,"s":[100,100],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":80,"s":[100.01,100.01],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":81,"s":[100.01,100.01],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":82,"s":[100.01,100.01],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":83,"s":[100.01,100.01],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":84,"s":[100.01,100.01],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":85,"s":[100.01,100.01],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":86,"s":[100.01,100.01],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":87,"s":[100.01,100.01],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":88,"s":[100.01,100.01],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":89,"s":[100.01,100.01],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":90,"s":[100,100],"h":1}]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0}},"ao":0,"w":100000,"h":100000,"ip":0,"op":92,"st":0,"bm":0,"refId":"n9nOxKAshZeGpKMMxUPVe"}]},{"id":"qv-YX1ziGwd__pU2fuaUW","layers":[]},{"id":"OvG_eGPxrRQpeNvCqN1BG","layers":[{"ddd":0,"ind":21,"ty":4,"nm":"","ln":"g8PcW_BIy7pBQZ6cYq5Ii21","sr":1,"ks":{"a":{"a":0,"k":[0,0]},"o":{"a":0,"k":100},"p":{"a":0,"k":[50000,50000]},"r":{"a":0,"k":0},"s":{"a":0,"k":[100,100]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0}},"ao":0,"ip":0,"op":92,"st":0,"bm":0,"shapes":[{"ty":"gr","hd":false,"bm":0,"it":[{"ty":"rc","hd":false,"p":{"a":0,"k":[0,0]},"r":{"a":0,"k":0},"s":{"a":0,"k":[15,15]}},{"ty":"fl","hd":false,"bm":0,"c":{"a":0,"k":[1,1,1]},"r":1,"o":{"a":0,"k":0}},{"ty":"tr","nm":"Transform","a":{"a":0,"k":[0,0]},"o":{"a":0,"k":100},"p":{"a":0,"k":[0,0]},"r":{"a":0,"k":0},"s":{"a":0,"k":[100,100]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0}}],"np":0}]}]},{"id":"lC0WzGTUk8AqvB7iBYHF4","layers":[{"ddd":0,"ind":1,"ty":0,"nm":"","ln":"precomp_q96YR9xfR0BJx_xwmClbl1","sr":1,"ks":{"a":{"a":0,"k":[50000,50000]},"o":{"a":1,"k":[{"t":0,"s":[100],"h":1},{"t":0,"s":[100],"i":{"x":1,"y":1},"o":{"x":0,"y":0}},{"t":0,"s":[100],"h":1}]},"p":{"a":0,"k":[50000,50000]},"r":{"a":0,"k":0},"s":{"a":0,"k":[100,100]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0}},"ao":0,"w":100000,"h":100000,"ip":0,"op":92,"st":0,"bm":0,"refId":"4hqf8T6ZvaB92iULAPFdP"},{"ddd":0,"ind":19,"ty":0,"nm":"","ln":"precomp_NkdGamraPlGzIk0UL8Im019","sr":1,"ks":{"a":{"a":0,"k":[50000,50000]},"o":{"a":0,"k":100},"p":{"a":0,"k":[50000,50000]},"r":{"a":0,"k":0},"s":{"a":0,"k":[100,100]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0}},"ao":0,"w":100000,"h":100000,"ip":0,"op":92,"st":0,"bm":0,"refId":"qv-YX1ziGwd__pU2fuaUW"},{"ddd":0,"ind":20,"ty":0,"nm":"","ln":"precomp_s4wy91Cc8VWtc-yMNzkHe20","sr":1,"ks":{"a":{"a":0,"k":[50000,50000]},"o":{"a":0,"k":100},"p":{"a":0,"k":[50000,50000]},"r":{"a":0,"k":0},"s":{"a":0,"k":[100,100]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0}},"ao":0,"w":100000,"h":100000,"ip":0,"op":92,"st":0,"bm":0,"refId":"OvG_eGPxrRQpeNvCqN1BG"}]}],"ddd":0,"fr":60,"h":15,"ip":0,"layers":[{"ddd":0,"ind":0,"ty":0,"nm":"","ln":"precomp_I3iw-gHhSF3IvMMJ85imn0","sr":1,"ks":{"a":{"a":0,"k":[50000,50000]},"o":{"a":0,"k":100},"p":{"a":0,"k":[7.5,7.5]},"r":{"a":0,"k":0},"s":{"a":0,"k":[100,100]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0}},"ao":0,"w":100000,"h":100000,"ip":0,"op":92,"st":0,"bm":0,"refId":"lC0WzGTUk8AqvB7iBYHF4"}],"meta":{"g":"https://jitter.video"},"nm":"New-file","op":91,"v":"5.7.4","w":15}');function ix(e){let n=(0,es.useMemo)(()=>({animationData:iF,loop:!1,...e}),[e]),{View:l}=(0,ik.useLottie)(n);return l}let iv=e=>{let{children:n}=e;return(0,a.jsx)("div",{className:"absolute left-[24.5px] top-[21.5px] z-5 box-content flex size-[13px] items-center justify-center rounded-full bg-white",children:n})};function ib(e){let{icon:n,disabled:l,title:t,subtitle:i,occurrence:s,showOccurrence:r,description:o,footer:d,currentNodeTestingState:u,isRenaming:c,confirmRename:g}=e,[m,y]=(0,es.useState)(t),p=(0,es.useRef)(null);(0,es.useLayoutEffect)(()=>{c&&(y(t),p.current&&(p.current.select(),p.current.setSelectionRange(0,t.length)))},[c,t]);let f=(0,es.useCallback)(()=>null==g?void 0:g(m),[g,m]),h=(0,es.useCallback)(()=>null==g?void 0:g(t),[g,t]),k=(0,es.useCallback)(e=>{"Enter"===e.key&&(e.preventDefault(),f()),"Escape"===e.key&&(e.preventDefault(),h())},[f,h]);return(0,a.jsxs)("div",{className:"relative size-full overflow-hidden p-3",children:[(0,a.jsxs)(nY.V,{top:!0,className:"size-full items-start",children:[c&&g?(0,a.jsxs)($.f,{left:!0,between:!0,className:"w-full items-center justify-start",children:[n,(0,a.jsx)("div",{className:"flex h-[21px] w-full items-center",children:(0,a.jsx)(lx.pd,{ref:p,className:"w-full translate-x-[-5px] truncate px-1 py-0.5 text-sm font-medium text-slate-12",value:m,onChange:y,onClick:lT.d,onKeyDown:k,onBlur:f})})]}):(0,a.jsx)(lI.J,{icon:n,title:t,disabled:l,subtitle:i,occurrence:s,showOccurrence:r}),o&&(0,a.jsx)("div",{className:"line-clamp-1 w-full pl-[28px] text-sm text-slate-9",children:o}),d&&(0,a.jsx)($.f,{className:"w-full flex-wrap pl-[28px]",children:d})]}),"testing"===u?(0,a.jsx)(iv,{children:(0,a.jsx)(n9.y,{className:"size-[9px]"})}):"tested"===u?(0,a.jsx)(iv,{children:(0,a.jsx)(ix,{})}):null]})}let iS=(0,v.PA)(function(e){let{node:n,disabled:l,title:t,subtitle:i,occurrence:s,showOccurrence:r,description:o,footer:d,isRenaming:u,confirmRename:c}=e,g=n.testingState.state;return(0,a.jsx)(ib,{icon:(0,a.jsx)(ex,{node:n}),disabled:l,title:t,subtitle:i,occurrence:s,showOccurrence:r,description:o,footer:d,isRenaming:u,confirmRename:c,currentNodeTestingState:g})});function iT(e){let[n,l]=(0,es.useState)(!1);return{isRenaming:n,confirmRename:(0,es.useCallback)(n=>{null==e||e.setDisplayName(n),l(!1)},[e]),onRename:(0,es.useCallback)(()=>{l(e=>!e)},[])}}let iK=(0,v.PA)(function(e){var n,l,t,i;let{id:s,identityFragmentRef:o}=e,d=(0,M.useFragment)(ni,o),{arePremiumFeaturesEnabled:u}=(0,r.b)(),{isPremiumAction:c}=nf(),g=(0,nk.JL)(s);(0,nh.K)(g);let{isRenaming:m,confirmRename:y,onRename:p}=iT(g);if(!(0,eh.HY)(g))return null;let f=!u&&!!g.action&&c({tool:g.action.tool,action:g.action.action}),h=g.isCustomActionNode&&g.isKnowledgeBaseNode&&!(null===(n=g.knowledgeBase)||void 0===n?void 0:n.sources.length),k=(0,eh.N)(g)&&function(e,n){var l,a;let t=[];for(let[i,s]of new Map(null==n?void 0:null===(l=n.dynamicLoaders)||void 0===l?void 0:l.loaders.map(e=>[e.key,e])).entries())(0,nF.Fp)(null!==(a=e.action.actionConfiguration)&&void 0!==a?a:[],i)||t.push('"'.concat(s.displayName,'"'));return t}(g,g.actionDetails),F=k&&0!==k.length,x=null!==(t=null===(l=g.actionDetails)||void 0===l?void 0:l.deprecated)&&void 0!==t&&t,v=g.isUnauthorized||g.isMissingAuthScopes||g.createdByNodeDoesNotExist||g.hasInvalidOutputReferences||h||F||x||!1,b=g.isMissingAuthScopes?"More permissions needed":g.isUnauthorized?"Authentication needed":v&&g.isKnowledgeBaseNode?"Knowledge configuration needed":g.createdByNodeDoesNotExist?"This action depends on a node that was disconnected or deleted":g.hasInvalidOutputReferences?"Action configuration references a node that was disconnected or deleted":F?"Field".concat(k.length>1?"s":""," ").concat(k.join(", ")," ").concat(k.length>1?"are":"is"," missing configurations"):x?"This action is no longer supported":"",S=null!==(i=g.displayNamePrimary)&&void 0!==i?i:"Select Action";return(0,a.jsx)(iy,{node:g,attentionMsg:b,locked:f,requireAttention:v,onRename:p,identityFragmentRef:d,children:g.action&&(!g.isCustomActionNode||g.isCustomConfigured)?(0,a.jsx)(iS,{node:g,title:S,occurrence:g.occurrence,showOccurrence:g.isRepeatedAction,description:g.isKnowledgeBaseNode&&(0,a.jsx)(ih,{node:g}),isRenaming:m,confirmRename:y}):(0,a.jsx)(iS,{node:g,title:S,isRenaming:m,confirmRename:y})})});function iI(e){return(0,a.jsx)(iK,{id:e.id,identityFragmentRef:e.identityFragmentRef})}let iC={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AgentStateNode_Identity",selections:[{args:null,kind:"FragmentSpread",name:"CustomNode_Identity"}],type:"Identity",abstractKey:null};iC.hash="b25a371c8826a6c84564e188d8454f0a";let iA=(0,v.PA)(function(e){var n;let{id:l,identityFragmentRef:t}=e,i=(0,M.useFragment)(iC,t),s=(0,nk.JL)(l),{isRenaming:r,confirmRename:o,onRename:d}=iT(s);if(!(0,eh.P8)(s))return null;let u=[...new Set(s.agentStateNodeActions.map(e=>e))],c=u.length>0?u.map(e=>(0,a.jsxs)(eJ.m_,{children:[(0,a.jsx)(eJ.ZI,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2 rounded-md",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:e.tool}),(0,a.jsx)("span",{className:"grow truncate whitespace-pre-wrap text-sm",children:n6.fromPascalCase(e.action)})]})}),(0,a.jsx)(eJ.k$,{children:(0,a.jsx)(ef.si,{tool:e.tool,className:"size-5"})})]},"".concat(e.tool,".").concat(e.action))):null;return(0,a.jsx)(iy,{node:s,onRename:d,identityFragmentRef:i,children:(0,a.jsx)(iS,{node:s,title:null!==(n=s.displayNamePrimary)&&void 0!==n?n:"AI Agent",description:s.guidelines,footer:c,isRenaming:r,confirmRename:o})})});function ij(e){return(0,a.jsx)(iA,{id:e.id,identityFragmentRef:e.identityFragmentRef})}var iN=l(86280),iL=l(62898);function i_(e,n){return e.reduce((l,a,t)=>l+(t>0&&t<e.length-1?function(e,n,l,a){let t=Math.min(iR(e,n)/2,iR(n,l)/2,a),{x:i,y:s}=n;if(e.x===i&&i===l.x||e.y===s&&s===l.y)return"L".concat(i," ").concat(s);if(e.y===s){let n=e.x<l.x?-1:1,a=e.y<l.y?1:-1;return"L ".concat(i+t*n,",").concat(s,"Q ").concat(i,",").concat(s," ").concat(i,",").concat(s+t*a)}let r=e.x<l.x?1:-1,o=e.y<l.y?-1:1;return"L ".concat(i,",").concat(s+t*o,"Q ").concat(i,",").concat(s," ").concat(i+t*r,",").concat(s)}(e[t-1],a,e[t+1],n):"".concat(0===t?"M":"L").concat(a.x," ").concat(a.y)),"")}let iw={[eV.yX.Left]:{x:-1,y:0},[eV.yX.Right]:{x:1,y:0},[eV.yX.Top]:{x:0,y:-1},[eV.yX.Bottom]:{x:0,y:1}},iR=(e,n)=>Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2));function iD(e){let{sourceX:n,sourceY:l,targetX:a,targetY:t}=e,i=Math.abs(a-n)/2,s=Math.abs(t-l)/2;return[a<n?a+i:a-i,t<l?t+s:t-s,i,s]}let iP=e=>e>=0&&e<=3*eM.IR;var iM=l(7461),iE=l(73156),iV=l(48246),iG=l(6063),iB=l(23653);let iO={width:eM.M4,transform:"translateX(-50%)"},iz=(0,v.PA)(function(e){let{edgeId:n,edgeType:l,isInactive:t,ephemeralConditionalEdge:i,targetX:s,targetY:r,parent:o}=e,d=(0,w.VH)(),u=(0,eh.ji)(o),{isOpen:c,onOpen:g,onClose:m}=(0,nb.j)(),[y,p]=(0,es.useState)(null),f=(0,es.useCallback)(e=>{p(e)},[]),h=(0,es.useCallback)(()=>{p(null),d&&eq({reactFlow:d,isEditorPanelOpen:x.a.ui.isEditorPanelOpen},r+5*eM.Km)},[d,r]);(0,es.useEffect)(()=>{if(!y)return;let e=setTimeout(()=>{let e=document.querySelector('[data-id="'.concat(n,'"].react-flow__edge .react-flow__edgeupdater-target'));null==e||e.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0,clientX:y.clientX,clientY:y.clientY}))},200);return()=>clearTimeout(e)},[n,y]);let k={position:"absolute",width:eM.YD,height:eM.$i,pointerEvents:"all",cursor:"pointer",left:s-.5*eM.YD,top:r+2},F={width:eM.YD,height:eM.$i,pointerEvents:"all"};return(0,a.jsx)("div",{style:k,className:(0,K.QP)(c&&"z-add-node-edge-label-open"),children:(0,a.jsx)(iB.A,{alwaysShow:u&&l===ek.xr.Standard,trigger:(0,a.jsxs)(eJ.m_,{placement:"bottom",children:[(0,a.jsx)(eJ.ZI,{children:"Add step"}),(0,a.jsx)(eJ.k$,{asChild:!0,children:(0,a.jsx)("button",{"data-testid":"add-new-node-button","data-edge-type":l,style:F,onMouseDown:f,onMouseUp:h,className:(0,K.QP)("z-5 -mb-2.5 flex h-5 w-5 items-center justify-center rounded-full border-[1.5px] bg-slate-1 p-0.5","hover:scale-110 transition-transform border-blue-9",t&&"opacity-50"),children:(0,a.jsx)(eG.A,{className:(0,K.QP)("h-3 w-3 stroke-[3px] transition-colors","text-blue-9 group-hover:text-blue-10")})})})]}),position:"bottom-right",style:iO,className:"ml-2.5 rounded-[14px] border-transparent bg-slate-1 p-0 shadow-none ring-0",beforeEnter:g,afterLeave:m,children:(0,a.jsx)(ep.R,{parent:o,isEdgeObservable:"Observe"===l,existingEdge:i})})})});var iQ=l(21649),iq=l(94783),iU=l(42717),iW=l(42069);let iH=(0,es.forwardRef)(function(e,n){let{isSelected:l,isInactive:t,...i}=e;return(0,a.jsx)("div",{ref:n,className:(0,K.QP)("flex flex-row items-center gap-1 rounded-full border bg-blue-3 px-2 py-1 h-8 min-w-12 justify-center z-graph-canvas-edge group","text-[10px] text-slate-12 overflow-hidden",l?"border-blue-9":"border-blue-6",t&&"opacity-50",l&&"z-graph-canvas-edge-selected"),...i,children:i.children})}),i$=(0,v.PA)(function(e){let n=!!e.edge.isSelected,l=!!e.edge.isInactive,t=e.edge.latestValidationIssue,i=(0,nS.q2)(()=>{if(!e.edge.isStandardEdge)return null;if(e.label)return e.edge.condition?e.label:(0,a.jsx)(iZ,{children:e.label});if(e.edge.condition)return e.edge.condition;let n=(null==t?void 0:t.label)||(null==t?void 0:t.message);return n?(0,a.jsx)(iZ,{children:n}):(0,a.jsx)(iZ,{children:"Define a condition"})},[null==t?void 0:t.label,null==t?void 0:t.message,e.edge.condition,e.edge.isStandardEdge,e.label]);return e.edge.isStandardEdge&&i?(0,a.jsxs)(iH,{isSelected:n,isInactive:l,style:e.style,onClick:e.onClick,children:[(0,a.jsx)("span",{className:"flex max-w-40 items-center gap-x-1 text-xxs text-slate-12",children:(0,a.jsx)("span",{className:"truncate",children:i})}),(0,a.jsx)(ei.W1,{children:n=>{let{open:l}=n;return(0,a.jsxs)("div",{className:(0,K.QP)("absolute right-1 h-7 bg-pink-5 p-1 rounded-full","hidden group-hover:flex items-center justify-center bg-blue-3",!!l&&"flex"),children:[(0,a.jsx)(ei.IU,{as:"div",children:(0,a.jsx)("button",{className:(0,K.QP)("transition-colors hover:bg-blue-5","flex h-5 w-5 items-center justify-center rounded-md hover:border border-blue-9"),children:(0,a.jsx)(iQ.A,{className:"inline-block size-3.5 text-blue-9"})})}),(0,a.jsx)(ei.c,{style:eS.i3,className:eS.IJ,anchor:"bottom start",children:(0,a.jsx)(iU.Dr,{children:(0,a.jsx)(iW.z,{onClick:e.edge.delete})})})]})}})]}):null});function iZ(e){return(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(iq.A,{className:"mr-1 size-4 text-amber-9"}),(0,a.jsx)("span",{children:e.children})]})}var iY=l(958);function iJ(e,n){let{isDark:l}=(0,iY.G)();return(null==e?void 0:e.isSelected)||n?{baseColor:na.U_,emphasisColor:na.U_}:{baseColor:l?na.Y:na.z3,emphasisColor:l?na.t8:na.QB}}let iX={width:eM.M4},i0=(0,v.PA)(function(e){let{edge:n,x:l,y:t,show:i}=e,s=(0,w.VH)(),r=(0,eD.Z)(),o=(0,w.Pj)(e=>e.unselectNodesAndEdges),[d,u]=(0,es.useState)(!1),{isOpen:c,onOpen:g,onClose:m}=(0,nb.j)(),{baseColor:y,emphasisColor:p}=iJ(n,d),f=(0,es.useCallback)(()=>{u(!0)},[]),h=(0,es.useCallback)(()=>{u(!1)},[]);(0,es.useEffect)(()=>{s&&c&&eq({reactFlow:s,isEditorPanelOpen:x.a.ui.isEditorPanelOpen},t+5*eM.Km)},[c,s,t]);let k=(0,es.useCallback)(e=>{e.stopPropagation()},[]),F=(0,es.useCallback)(()=>{o(),r.selectEntity(null)},[r,o]),v=(0,es.useCallback)(e=>{let n={width:eM.YD,height:eM.$i,borderColor:y,opacity:i||e?1:0};return(0,a.jsxs)(eJ.m_,{placement:"bottom",children:[(0,a.jsx)(eJ.ZI,{className:"mt-4",children:"Add step"}),(0,a.jsx)(eJ.k$,{asChild:!0,children:(0,a.jsx)("button",{className:"flex items-center justify-center rounded-full border-[1.5px] bg-slate-1 transition hover:scale-110",style:n,onMouseEnter:f,onMouseLeave:h,onClick:F,children:(0,a.jsx)(eG.A,{className:"size-3 stroke-[3px] transition-colors",style:{color:p}})})})]})},[y,p,f,h,F,i]),b={position:"absolute",transform:"translate(-50%, -50%) translate(".concat(l,"px,").concat(t,"px)"),pointerEvents:"all",cursor:"pointer",zIndex:c?1001:void 0};return(0,a.jsx)("div",{style:b,onClick:k,children:(0,a.jsx)(iB.A,{position:"bottom-right",trigger:v,beforeEnter:g,afterLeave:m,className:"ml-2.5 -translate-x-1/2 rounded-[14px] border-transparent bg-slate-1 p-0 shadow-none ring-0",style:iX,children:(0,a.jsx)(ep.R,{parent:n.from,isEdgeObservable:n.isObserveEdge,existingEdge:n})})})}),i1=(0,v.PA)(function(e){var n,l,t,i,s,r,o,d,u,c,g,m,y;let{id:p,sourceX:f,sourceY:h,targetX:k,targetY:F,sourcePosition:x,targetPosition:v,source:b,markerEnd:S}=e,T=(0,eD.Z)(),K=(0,nk.ip)(p),{isEphemeral:I,edgeType:C}=(0,iM.l8)(p)?{isEphemeral:!0,edgeType:(0,iE.Qc)(p).edgeType}:{isEphemeral:!!(null==K?void 0:K.isEphemeralConditionalEdge),edgeType:null!==(l=null==K?void 0:K.type)&&void 0!==l?l:"Standard"},A=(0,nk.JL)(b),j=!!(null==K?void 0:K.isInactive)||I&&T.isTestCurrentlyRunning,N=!!(null==K?void 0:K.isTested),L=(0,es.useRef)(null),_=(0,w.VH)(),R=h+2*eM.IR-4,D=null!==(n=null==K?void 0:K.inflectionY)&&void 0!==n?n:R,P=(t=C,i=K,s=(0,nh.K)(A),r=(0,iL._)(A),((null==i?void 0:i.isStandardEdge)?null!==(c=i.label)&&void 0!==c?c:i.condition:null)||("Standard"===t?null!==(g=null==s?void 0:null===(o=s.observableChannel)||void 0===o?void 0:o.immediateEdgeLabel)&&void 0!==g?g:null:null!==(y=null!==(m=null==s?void 0:null===(d=s.observableChannel)||void 0===d?void 0:d.observableEdgeLabel)&&void 0!==m?m:null==r?void 0:null===(u=r.otherObservableChannel)||void 0===u?void 0:u.observableEdgeLabel)&&void 0!==y?y:null)),M=!!(K&&(null==K?void 0:K.shouldRequireCondition)||P),{path:E,edgeMidpoint:V,labelPosition:G}=(0,nS.q2)(()=>{if(K&&T.autoLayoutEnabled){let e=function(e){let n,l,{edge:a,stateGraph:t,horizontalPadding:i,borderRadius:s=6,offset:r=.75*eM.IR}=e,{nodeRanksById:o}=t;if(!o)return null;let{from:d,to:u}=a;if(!d||!u)return null;let c=o.get(d.id),g=o.get(u.id);if(null==c||null==g||g===c+1)return null;g>c?(n=c+1,l=g-1):(n=g,l=c);let m=t.nodes.filter(e=>{let a=o.get(e.id);return null!=a&&a>=n&&a<=l}),y=d.position.x+eM.M4/2,p=d.position.y+d.nodeHeight+r,f=u.position.x+eM.M4/2,h=u.position.y-r,k=[{type:"preferred-x",x:y},{type:"preferred-x",x:f}];m.forEach(e=>{k.push({type:"enter",x:e.position.x-i},{type:"exit",x:e.position.x+eM.M4+i})});let F=a.id.split("").reduce((e,n)=>{var l;return e+(null!==(l=n.codePointAt(0))&&void 0!==l?l:0)},0)%2==0;k.sort((e,n)=>e.x!==n.x?(e.x-n.x)*(F?-1:1):"exit"===e.type?-1:1);let x=0,v=1/0,b=0;for(let e of k)if("enter"===e.type?b++:"exit"===e.type&&b--,0===b||e===k[0]){let n=Math.abs(e.x-y)+Math.abs(e.x-f);if(n<=v&&(v=n,x=e.x,"preferred-x"===e.type))break}return{path:i_([{x:y,y:p-r},{x:y,y:p},{x:x,y:p},{x:x,y:h},{x:f,y:h},{x:f,y:h+r}],s),edgeMidpoint:{x:(x+f)/2,y:h},labelPosition:{x:x,y:(p+h)/2}}}({edge:K,stateGraph:T,horizontalPadding:M?6*eM.IR:eM.IR-.001});if(e)return e}return function(e){let{sourceX:n,sourceY:l,sourcePosition:a,targetX:t,targetY:i,targetPosition:s,inflectionY:r}=e;return function(e){let{sourceX:n,sourceY:l,sourcePosition:a=eV.yX.Bottom,targetX:t,targetY:i,targetPosition:s=eV.yX.Top,borderRadius:r=6,centerX:o,offset:d=eM.IR,inflectionY:u}=e,[c,g]=iD({sourceX:n,sourceY:l,targetX:t,targetY:i});if(iP(i-l)){let[e,u,c]=(0,eV.oN)({sourceX:n,sourceY:l,sourcePosition:a,targetX:t,targetY:i,targetPosition:s,borderRadius:r,centerX:o,offset:i-l==0?0:i-l==eM.IR/2?eM.IR/4:d/2});return{path:e,edgeMidpoint:{x:u,y:c},labelPosition:{x:u,y:c}}}let[m,y,p]=function(e){var n,l;let{source:a,sourcePosition:t=eV.yX.Bottom,target:i,targetPosition:s=eV.yX.Top,center:r,offset:o}=e,d=iw[t],u=iw[s],c={x:a.x+d.x*(o-4),y:a.y+d.y*(o-4)},g={x:i.x+u.x*(o-4),y:i.y+u.y*(o-4)},m={x:0,y:0},y={x:0,y:0},[p,f]=iD({sourceX:a.x,sourceY:a.y,targetX:i.x,targetY:i.y}),h=null!==(n=r.x)&&void 0!==n?n:p,k=null!==(l=r.y)&&void 0!==l?l:f,F=(a.x<i.x?1:-1)*o,x=k<c.y+m.y?{x:c.x+m.x+F,y:c.y+m.y}:null,v=k>g.y+y.y?{x:g.x+y.x-F,y:g.y+y.y}:null;return[[a,{x:c.x+m.x,y:c.y+m.y},...x?[x]:[],{x:x?x.x:c.x,y:k},{x:v?v.x:g.x,y:k},...v?[v]:[],{x:g.x+y.x,y:g.y+y.y},i],h,k]}({source:{x:n,y:l},sourcePosition:a,target:{x:t,y:i},targetPosition:s,center:{x:null!=o?o:c,y:null!=u?u:g},offset:d}),f=i_(m,r),h=a===eV.yX.Bottom&&s===eV.yX.Top&&l<i;if(h&&n===t){let e=i-l;return{path:f,edgeMidpoint:{x:y,y:p},labelPosition:{x:n,y:l+.5*e}}}if(!h)return{path:f,edgeMidpoint:{x:y,y:p},labelPosition:{x:y,y:p}};{let e=i-2*eM.IR;return{path:f,edgeMidpoint:{x:y,y:p},labelPosition:{x:t,y:e>p?e:p}}}}({sourceX:n,sourceY:l,sourcePosition:a,targetX:t,targetY:i,targetPosition:s,borderRadius:6,inflectionY:r})}({sourceX:f,sourceY:h,sourcePosition:x,targetX:k,targetY:F,targetPosition:v,inflectionY:D})},[K,T,f,h,x,k,F,v,D,M]),B=function(e){let{edge:n,isEphemeral:l,isInactive:a}=e,t=!!(null==n?void 0:n.isSelected),{baseColor:i}=iJ(n);return(0,es.useMemo)(()=>({transition:"stroke 0.2s",strokeWidth:1.5,stroke:i,zIndex:t?1e4:0,strokeDasharray:l?"5 5":"none",opacity:a?.5:l?.75:1}),[i,l,a,t])}({edge:K,isEphemeral:I,isInactive:j});(0,es.useEffect)(()=>{if(!L.current||!K)return;let e=(0,iG.A)(L.current);return e.call((0,iV.A)().on("drag",e=>{var n;let l=_.getZoom(),a=null!==(n=K.inflectionY)&&void 0!==n?n:R;K.setInflectionY(a+e.dy/l)}).on("end",()=>{if(K){var e;let n=null!==(e=K.inflectionY)&&void 0!==e?e:R,l=eM.IR/2,a=Math.round(n/l)*l;K.setInflectionY(a)}})),()=>{e.on(".drag",null)}},[R,K,_]);let O=!!(null==K?void 0:K.isSelected),z=(0,es.useCallback)(async()=>{K&&T.selectEntity(K)},[K,T]),Q=(0,es.useMemo)(()=>({position:"absolute",transform:"translate(-50%, -50%) translate(".concat(G.x,"px,").concat(G.y,"px)"),pointerEvents:"all",cursor:"pointer"}),[G.x,G.y]),q=(0,nS.q2)(()=>K&&(null==K?void 0:K.shouldRequireCondition)?(0,a.jsx)(i$,{edge:K,labelX:G.x,labelY:G.y,style:Q,onClick:z,label:P}):P?(0,a.jsx)(iH,{style:Q,isSelected:O,onClick:z,isInactive:j,children:P}):null,[O,j,K,G.x,G.y,z,Q,P]),{scopeAnimation:U}=function(e,n){let[l,a]=(0,iN.l)(),t=(0,es.useMemo)(()=>({repeat:19,type:"tween",ease:"easeInOut",duration:1}),[]),i=null==n?void 0:n.from,s=null==n?void 0:n.to;return(0,af.S)(ah.B.stateGraphEdge,"stateGraphTraversal",e,async e=>{let{ts:r}=e;i&&s&&l.current&&(i.updateTestingState("tested",r),s.updateTestingState("pending",r),await a([[l.current,{opacity:1},{duration:.1}],[l.current,{pathLength:[0,1]},{...t,at:0}]]),null==n||n.updateTestingState("tested",r),s.updateTestingState("testing",r))}),{scopeAnimation:l}}(p,K);return A?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.tE,{id:p,path:E,markerEnd:N?"url(#".concat(na.Dx,")"):S,style:B}),(0,a.jsx)("path",{d:E,id:"animation-".concat(p),style:{...B,opacity:void 0,strokeDasharray:void 0,fill:"none",stroke:na.Gy},opacity:N?1:0,pathLength:N?1:0,ref:U}),(0,a.jsxs)(w.rV,{children:[q,!I&&(0,a.jsx)("div",{ref:L,style:{position:"absolute",left:"".concat(Math.min(f,k),"px"),top:"".concat(D-eM.IR/2,"px"),opacity:1,width:Math.abs(f-k),height:"".concat(eM.IR,"px"),pointerEvents:T.autoLayoutEnabled?"none":"all",cursor:"row-resize"}}),!I&&K&&(0,a.jsx)(i0,{edge:K,x:V.x,y:V.y,show:K.isHovered}),I&&(0,a.jsx)(iz,{edgeId:p,isInactive:j,edgeType:C,ephemeralConditionalEdge:null!=K?K:void 0,targetX:k,targetY:F,parent:A})]})]}):null}),i2={width:eM.YD,height:eM.$i,opacity:0,background:"rgba(0, 0, 0, 0)",pointerEvents:"none"},i3={pointerEvents:"none",opacity:0,background:"rgba(0, 0, 0, 0)"};function i6(e){let{id:n}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.h7,{id:n,position:eV.yX.Top,type:"target",style:i3}),(0,a.jsx)("div",{style:i2})]})}let i5={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"EntryPointNode_Identity",selections:[{args:null,kind:"FragmentSpread",name:"CustomNode_Identity"}],type:"Identity",abstractKey:null};i5.hash="0ba612c37cdaca2a42640a33fe171a77";var i4=l(85702);function i7(e,n){var l;return{...e,id:null!==(l=n.triggerId)&&void 0!==l?l:new nn.GD().toString(),enabled:n.triggerEnabled,actionArgs:n.triggerSetup,authId:n.authId,isConfigured:!0}}var i9=l(61268);let i8=(0,v.PA)(function(e){let{id:n,identityFragmentRef:l}=e,t=(0,M.useFragment)(i5,l),i=(0,nk.JL)(n);return(0,eh.B2)(i)?(0,a.jsx)(sn,{node:i,identity:t}):(0,eh.jq)(i)?(0,a.jsx)(sl,{node:i,identity:t}):(0,eh.Eq)(i)?(0,a.jsx)(se,{node:i,identity:t}):null}),se=(0,v.PA)(function(e){var n;let{node:l,identity:t}=e,{isRenaming:i,confirmRename:s,onRename:r}=iT(l);return(0,a.jsx)(iy,{node:l,allowInput:!1,disabled:!1,requireAttention:!1,onRename:r,identityFragmentRef:t,children:(0,a.jsx)(iS,{node:l,disabled:!1,title:null!==(n=l.displayNamePrimary)&&void 0!==n?n:"Message Received",isRenaming:i,confirmRename:s})})}),sn=(0,v.PA)(function(e){var n,l,t;let{node:i,identity:s}=e,o=i.trigger.tool,d=i.trigger.name,u=(0,i4.Mt)({params:{tool:o,trigger:d},query:i.authId&&!i.isMissingAuthScopes?{authId:i.authId}:{}});(0,es.useEffect)(()=>{u.data&&(0,eh.B2)(i)&&i.setTriggerDefinition(u.data)},[i,u.data]);let{arePremiumFeaturesEnabled:c}=(0,r.b)(),{isPremiumTrigger:g}=nf(),m=!c&&g(i.trigger),y=o===eF.h6.OnboardingV3&&"onLindyOnboardingStarted"===d,p=null!==(t=i.displayNamePrimary)&&void 0!==t?t:y?"When user installs this lindy":null!==(l=null===(n=u.data)||void 0===n?void 0:n.displayName)&&void 0!==l?l:n6.fromPascalCase(d),f=(0,nS.dX)(()=>{if(u.isLoading)return{isValid:!0};if(!u.data)return{isValid:!1,error:"Trigger not found"};let e=(0,i9.l_)(i7(u.data,i));if(!e.isValid){let n=Object.values(e.errors).map(e=>'"'.concat(e.fieldDisplayName,'"')),l=n.length>1?"Fields":"Field",a=n.length>1?"are":"is";return{isValid:!1,error:"".concat(l," ").concat(n.join(",")," ").concat(a," configured incorrectly")}}return{isValid:!0}},[i,u.data,u.isLoading]),h=i.triggerEnabled,k=h&&(i.isUnauthorized||i.isMissingAuthScopes||!f.isValid||!1),F=h?i.isMissingAuthScopes?"More permissions needed":i.isUnauthorized?"Authentication needed":f.isValid?"":f.error:"",{isRenaming:x,confirmRename:v,onRename:b}=iT(i);return(0,a.jsx)(iy,{node:i,allowInput:!1,attentionMsg:F,disabled:!h,locked:m,requireAttention:k,onRename:b,identityFragmentRef:s,children:(0,a.jsx)(iS,{node:i,disabled:!h,title:p,isRenaming:x,confirmRename:v})})}),sl=(0,v.PA)(function(e){let{node:n,identity:l}=e;return(0,a.jsx)(iy,{node:n,allowInput:!1,disabled:!n.triggerEnabled,requireAttention:!1,identityFragmentRef:l,children:(0,a.jsx)(iS,{node:n,disabled:!n.triggerEnabled,title:"Select Trigger"})})});function sa(e){return(0,a.jsx)(i8,{id:e.id,identityFragmentRef:e.identityFragmentRef})}let st={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LogicNode_Identity",selections:[{args:null,kind:"FragmentSpread",name:"CustomNode_Identity"}],type:"Identity",abstractKey:null};st.hash="6c6385e75c484d7742b226a3d8152af8";let si=(0,v.PA)(function(e){var n;let{id:l,identityFragmentRef:t}=e,i=(0,M.useFragment)(st,t),s=(0,nk.JL)(l),{isRenaming:r,confirmRename:o,onRename:d}=iT(s);return(0,eh.Ri)(s)?(0,a.jsx)(iy,{node:s,onRename:d,identityFragmentRef:i,children:(0,a.jsx)(iS,{node:s,title:null!==(n=s.displayNamePrimary)&&void 0!==n?n:ep.f[ek.cs.Logic].callToAction,isRenaming:r,confirmRename:o})}):null});function ss(e){return(0,a.jsx)(si,{id:e.id,identityFragmentRef:e.identityFragmentRef})}var sr=l(98755),so=l(33296),sd=l(459),su=l(16167),sc=l(48134);let sg=(0,es.forwardRef)(function(e,n){return(0,a.jsxs)(sd.V,{ref:n,onClick:e.onClick,children:[(0,a.jsx)(su.H,{children:(0,a.jsx)(lw.R,{className:su.b})}),(0,a.jsx)(sc.A,{children:"Edit"})]})}),sm="h-full w-[230px] break-words resize-none rounded-xl border-transparent bg-[#FAE07D] dark:bg-yellow-6 p-3 text-sm text-yellow-12 leading-5 scrollbar-none placeholder:text-yellow-11 placeholder:text-opacity-60 focus-within:border-transparent focus-within:ring-transparent hover:border-transparent focus-within:hover:border-transparent disabled:bg-yellow-6 disabled:text-yellow-12 !!!disabled:cursor-not-allowed disabled:placeholder-text-yellow-11 ",sy=(0,v.PA)(function(e){var n;let{id:l}=e,t=(0,eD.Z)(),i=(0,nk.ec)(l),[s,r]=(0,es.useState)(!1),o=null!==(n=null==i?void 0:i.isSelected)&&void 0!==n&&n;(0,es.useEffect)(()=>{o||r(!1)},[o]);let d=(0,es.useCallback)(()=>{o?r(!0):t.selectEntity(i)},[o,i,t]),u=(0,es.useRef)(null);(0,es.useEffect)(()=>{s&&u.current&&(u.current.focus(),u.current.selectionStart=u.current.value.length,u.current.selectionEnd=u.current.value.length)},[s]);let[c,g]=(0,es.useState)(null),m=(0,es.useCallback)(e=>{let n=e.metaKey||e.ctrlKey||e.shiftKey;if("Escape"===e.key||"Enter"===e.key&&n){r(!1);return}if(("b"===e.key||"i"===e.key||"u"===e.key)&&n){e.preventDefault();let n=u.current;if(n&&n.selectionStart!==n.selectionEnd){let l=n.selectionStart,a=n.selectionEnd,t=n.value.slice(l,a),s=e.key,r="<".concat(s,">").concat(t,"</").concat(s,">");null==i||i.setNote(n.value.slice(0,l)+r+n.value.slice(a)),g([l,l+r.length])}return}},[i]);(0,es.useEffect)(()=>{c&&u.current&&u.current.setSelectionRange(c[0],c[1])},[c]);let y=(0,es.useRef)(null),[p,f]=(0,es.useState)(!1),h=(0,es.useCallback)(()=>f(!0),[]),k=(0,es.useCallback)(()=>f(!1),[]),F=(0,es.useCallback)(()=>{t.selectEntity(i),requestAnimationFrame(()=>r(!0)),f(!1)},[i,t]),x=(0,es.useCallback)(()=>{null==i||i.delete(),f(!1)},[i]);return i?(0,a.jsxs)("div",{className:(0,K.QP)("rounded-[4px] bg-[#FAE07D] dark:bg-yellow-6 border-1 p-1 shadow-sm transition-shadow hover:shadow-lg cursor-pointer",o?"border-blue-9 shadow-lg cursor-text":"border-transparent"),onClick:d,ref:y,children:[(0,a.jsx)(eP.j,{targetRef:y,isOpen:p,onOpen:h,onClose:k,children:(0,a.jsxs)(e9.l,{children:[(0,a.jsx)(sg,{onClick:F}),(0,a.jsx)(iW.z,{onClick:x})]})}),s?(0,a.jsx)(sr.g,{ref:u,value:i.note,autoFocus:!0,onChange:i.setNote,onKeyDown:m,minHeight:32,maxHeight:1/0,className:sm,placeholder:"Write something..."}):(0,a.jsx)(nq.o,{components:so.RD,allowHTML:!0,disableCopyUI:!0,className:(0,K.QP)(sm,"[&_sup]:mr-1 [&_sup]:text-xxs [&_sup]:font-medium [&_sup]:text-blue-9 [&_a]:text-blue-9 [&_a]:underline [&_a]:break-words pl-[12.75px] pt-[12.5px]",!i.hasContent&&"text-yellow-11 opacity-60"),children:i.hasContent?i.noteMarkdown:"Write something..."})]}):null});function sp(e){return(0,a.jsx)(sy,{id:e.id})}let sf=["Delete","Backspace"],sh={[eK.WN]:i1},sk=[1],sF=[eM.IR/2,eM.IR/2],sx={hideAttribution:!0},sv={stroke:"rgb(0, 145, 255)",strokeWidth:1.5,strokeDasharray:"5 5",opacity:.75},sb={maxZoom:1},sS=(0,v.PA)(function(e){var n;let{identityFragmentRef:l}=e,t=(0,eD.Z)(),i=(0,M.useFragment)(el,l),s=(0,et.T)(),r=s?x.a.lindies.lindyById.get(s):null,o=s!==(null===(n=x.a.lindies.currentLindy)||void 0===n?void 0:n.id),d=o?[]:t.animatedReactFlowNodes,u=o?[]:t.reactFlowEdges,c=(0,es.useRef)(null),[g,m]=(0,es.useState)(!1),y=(0,es.useMemo)(()=>({[ek.cs.AgentState]:function(e){return(0,a.jsx)(ij,{...e,identityFragmentRef:i})},[ek.cs.EntryPoint]:function(e){return(0,a.jsx)(sa,{...e,identityFragmentRef:i})},[ek.cs.Action]:function(e){return(0,a.jsx)(iI,{...e,identityFragmentRef:i})},[ek.cs.Logic]:function(e){return(0,a.jsx)(ss,{...e,identityFragmentRef:i})},[ek.bK.StickyNote]:function(e){return(0,a.jsx)(sp,{...e})},[ek.s9.AddButton]:function(e){return(0,a.jsx)(i6,{...e})}}),[i]),p=(0,es.useRef)({nodes:[],edges:[]}),f=(0,es.useCallback)(e=>{p.current=e},[]),h=(0,es.useCallback)(e=>{(document.activeElement===document.body||!c.current||c.current.contains(document.activeElement))&&t.handleReactFlowDelete(e)},[t]),k=(0,es.useCallback)(e=>{t.setPaneContextMenu({top:e.top,left:e.left,right:e.right,bottom:e.bottom,clientX:e.x,clientY:e.y})},[t]),F=(0,es.useCallback)(e=>{e.preventDefault(),m(!0)},[]),v=(0,es.useCallback)(()=>{m(!1)},[]),b=(0,es.useCallback)(e=>eM.NV.isValidConnection(e,t.serializedStateGraph),[t]),S=(0,w.Pj)(e=>e.unselectNodesAndEdges),T=(0,es.useCallback)(()=>{S(),t.setPaneContextMenu(null),t.selectEntity(null)},[t,S]),K=(0,es.useRef)(null),I=(0,es.useCallback)(e=>!!(!(!e||"undefined"!=typeof TouchEvent&&e instanceof TouchEvent)&&e.target instanceof HTMLElement)&&e.target.classList.contains("react-flow__pane"),[]),C=(0,es.useCallback)(e=>{I(e)&&(K.current=e)},[I]),A=(0,es.useCallback)(e=>{if(K.current&&I(e)){let n=Math.abs(e.clientX-K.current.clientX),l=Math.abs(e.clientY-K.current.clientY);n<5&&l<5&&(0===e.button&&T(),2===e.button&&F(e))}},[T,F,I]);!function(e,n){!function(){let e=(0,w.VH)(),n=(0,eD.Z)();(0,es.useEffect)(()=>(0,ii.mJ)(()=>({agentDefinitionId:n.agentDefinitionId,manualLayoutCount:n.manualLayoutCount,selectedEntity:n.selectedEntity,reactFlowNodes:n.nodes.length,reactFlowEdges:n.edges.length,isEditorPanelOpen:x.a.ui.isEditorPanelOpen}),(l,a)=>{let t={reactFlow:e,isEditorPanelOpen:l.isEditorPanelOpen};a&&l.agentDefinitionId===a.agentDefinitionId?l.manualLayoutCount!==a.manualLayoutCount?eQ(t,n,{noAnimation:!0}):function(e){let{canvas:n,stateGraph:l,node:a}=e,t=eH(n);if(!t)return;let i=eU(l.nodes);if(!i)return;if(i.width<t.width&&i.height<t.height){eZ({canvas:n,bounds:i});return}if(!a)return;let s=a.position.x-ez,r=a.position.x+eM.M4+ez,o=a.position.y-ez,d=a.position.y+a.nodeHeight+ez,u=0,c=0;s<t.left&&(u=s-t.left),r>t.right&&(u=r-t.right),o<t.top&&(c=o-t.top),d>t.bottom&&(c=d-t.bottom),e$(n.reactFlow,u,c)}({canvas:t,stateGraph:n,node:(0,eh.SX)(l.selectedEntity)?l.selectedEntity:void 0}):eQ(t,n,{noAnimation:!0})},{fireImmediately:!0}),[n,e])}();let l=(0,w._N)(sf,{actInsideInputWithModifier:!1});(0,es.useEffect)(()=>{l&&n(e.current)},[l,n,e]);let a=(0,w._N)("Space",{actInsideInputWithModifier:!1}),t=(0,w.Pj)(e=>e.paneDragging);(0,es.useEffect)(()=>{let e=document.querySelector(".react-flow__pane");e&&(t?e.style.cursor="grabbing":a?e.style.cursor="grab":e.style.cursor="default")},[a,t])}(p,h);let{enabled:j}=(0,ea.u)(eE.T.GraphEditorUndo,{defaultEnabled:!1});return(0,a.jsxs)("div",{"data-testid":"graph-view",className:"relative size-full",children:[(0,a.jsx)(nt,{}),(0,a.jsxs)("div",{className:"absolute left-[15px] top-[15px] z-5 flex items-start gap-3",children:[(0,a.jsx)(e7,{}),(0,a.jsx)(e4,{}),j&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eA,{stateGraph:t}),(0,a.jsx)(ew,{stateGraph:t})]})]}),(0,a.jsxs)(w.Gc,{ref:c,nodes:d,edges:u,viewport:null==r?void 0:r.editorViewPort,fitView:!(null==r?void 0:r.editorViewPort),fitViewOptions:sb,onViewportChange:null==r?void 0:r.setEditorViewPort,onNodesChange:t.handleReactFlowNodeChange,onConnect:t.handleReactFlowConnect,onReconnect:t.handleReactFlowReconnect,onDelete:h,onEdgeClick:t.handleReactFlowEdgeClick,onEdgeMouseEnter:t.handleReactFlowEdgeMouseEnter,onEdgeMouseLeave:t.handleReactFlowEdgeMouseLeave,isValidConnection:b,nodeTypes:y,edgeTypes:sh,proOptions:sx,snapGrid:sF,snapToGrid:!0,edgesReconnectable:!0,deleteKeyCode:sf,onSelectionChange:f,selectionOnDrag:!0,panOnScroll:!0,panOnDrag:sk,panOnScrollSpeed:1,panActivationKeyCode:"Space",minZoom:.5,connectionLineType:eV.Do.SmoothStep,connectionLineStyle:sv,selectionMode:eV.Qc.Partial,nodesDraggable:!0,onPaneContextMenu:F,zoomOnDoubleClick:!1,onMouseDown:C,onMouseUp:A,nodeClickDistance:5,paneClickDistance:5,children:[(0,a.jsx)(e2,{}),(0,a.jsx)(w.VS,{className:"[--xy-background-color:#FBFCFD] dark:[--xy-background-color:#18181B]",gap:eM.IR}),(0,a.jsx)(eP.j,{targetRef:c,isOpen:g,onOpen:k,onClose:v,children:(0,a.jsx)(nl,{onClickItem:v})})]})]})}),sT={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"EditorGraphTools_Identity",selections:[{args:null,kind:"FragmentSpread",name:"Tools_Identity"}],type:"Identity",abstractKey:null};sT.hash="d46ccaa717a303945e871f68f2f4a325";var sK=l(57459),sI=l(35471),sC=l(95674),sA=l(32813);let sj=(0,es.memo)(function(e){let{color:n,onChange:l,buttonRef:t=(0,es.createRef)()}=e,i=(0,es.useMemo)(()=>({background:null!=n?n:sI.C}),[n]);return(0,a.jsx)("div",{children:(0,a.jsxs)(iB.A,{position:"bottom-right",trigger:(0,a.jsx)("div",{style:i,className:"my-3 size-5 cursor-pointer rounded-md focus:outline-none focus-visible:ring-2 focus-visible:ring-white/75 hover:text-white hover:shadow-accent-1",ref:t,children:" "}),className:"mt-3 w-fit p-2",children:[(0,a.jsx)(sA.jI,{color:n,onChange:l}),(0,a.jsx)("div",{className:"mt-2 flex items-center justify-between gap-2",children:Object.values(sC.lF).slice(1).map(e=>(0,a.jsx)(sN,{color:e,onChange:l},e))})]})})});function sN(e){let{color:n,onChange:l}=e,t=(0,es.useCallback)(()=>l(n),[n,l]);return(0,a.jsx)("div",{className:(0,K.QP)("cursor-pointer rounded-full h-5 w-5"),onClick:t,style:{background:n}})}var sL=l(6762),s_=l(66287),sw=l(93712);let sR={messengerId:"",domains:"",displayName:"",accentColor:"#F1F3F5",positioning:"popup",position:"right",shape:"circle",spacing:"default",horizontal:24,vertical:24,logo:"",icon:"",message:"",lindyEmbedConversationStarters:[],lindyEmbedGreetingMessage:""};var sD=l(48866),sP=l.n(sD),sM=l(14543);let sE=(0,es.memo)(function(e){let{control:n,agentDefinition:l,showPopup:t,setShowPopup:i}=e,{domains:s,displayName:r,accentColor:o,icon:d,logo:u,positioning:c,position:g,shape:m,vertical:y,horizontal:p,message:f,lindyEmbedGreetingMessage:h}=(0,sM.FH)({control:n,defaultValue:sR}),k=(0,es.useCallback)(()=>{i(e=>!e)},[i]),F=!t&&f,x=(0,es.useMemo)(()=>{let e=[{type:"message",from:"user",timestamp:"1",message:"Lorem ipsum dolor sit amet, consectetur adipiscing elit."},{type:"message",from:"bot",timestamp:"2",message:"Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."},{type:"message",from:"user",timestamp:"3",message:"Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."},{type:"message",from:"bot",timestamp:"4",message:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur."}];return h?[{type:"message",from:"bot",timestamp:"0",message:null!=h?h:""},...e]:e},[h]),v=(0,es.useMemo)(()=>({agentDefinition:l,closeSession:async()=>{},configuration:{accentColor:o||"#F1F3F5",darkMode:!1,displayName:null!=r?r:"",domains:s?[s]:[],iconUrl:d||"",logoUrl:u||"",messengerId:"mock-messenger-id",positioning:"embedded"===c?{type:"embedded"}:{type:"popup",iconShape:m||"circle",position:g||"right",spacing:{x:null!=p?p:24,y:null!=y?y:24},message:f||""},promptStarters:[],lindyEmbedPromptStarters:[]},conversationEvents:x,isPopup:"embedded"!==c,messengerConversationId:"",messengerId:"",minimizeChat:()=>{i(!1)},sendMessage:()=>{},setUserData:async()=>{},isSending:!1,isInConversation:!0,isInTestMode:!1,isInConfigurationPreview:!0}),[l,o,r,s,d,u,c,m,g,p,y,f,x,i]),b=(0,es.useMemo)(()=>({bottom:y+"px",..."right"===g?{right:p+"px",left:"16px"}:{left:p+"px",right:"16px"},top:"16px"}),[p,g,y]);return(0,a.jsx)(s_.nQ.Provider,{value:v,children:"embedded"===c?(0,a.jsx)(sw.y,{}):(0,a.jsx)("div",{className:"relative flex h-full flex-col justify-end overflow-hidden",children:(0,a.jsx)("div",{className:"absolute flex flex-col",style:b,children:(0,a.jsxs)("div",{className:(0,K.QP)("relative flex h-full w-full flex-col justify-end","right"===g&&"items-end"),children:[t&&(0,a.jsx)("div",{className:"h-[580px] max-h-full w-[380px] max-w-full overflow-hidden rounded-[12px] shadow-lg",children:(0,a.jsx)(sw.y,{})}),(0,a.jsxs)("div",{className:"relative mt-6 h-10 w-10",children:[(0,a.jsxs)("div",{className:(0,K.QP)("w-min whitespace-nowrap absolute top-1/2 bg-white translate-y-[-50%] drop-shadow rounded-lg text-sm p-2 transition-opacity ease-in-out duration-200 text-center","right"===g?"translate-x-[-16px] right-full":"translate-x-[16px] left-full",F?"opacity-100":"opacity-0"),children:[(0,a.jsx)("div",{children:f}),(0,a.jsx)("div",{className:(0,K.QP)("absolute top-1/2 transform -translate-y-1/2 border-transparent border-solid border-[5px]","right"===g?"left-full border-l-[6px] border-l-white":"right-full border-r-[6px] border-r-white")})]}),(0,a.jsx)("div",{className:(0,K.QP)("circle"===m?"rounded-full":"rounded-md","w-10 h-10 overflow-hidden shadow-lg shrink-0 cursor-pointer"),onClick:k,children:d?(0,a.jsx)(sP(),{src:d,alt:"Icon",className:"h-full w-full object-cover",width:40,height:40}):(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 44 44",fill:"none",children:[(0,a.jsx)("rect",{width:"44",height:"44",fill:"#fff",rx:"22"}),(0,a.jsx)("rect",{width:"44",height:"44",fill:"url(#a)",rx:"22"}),(0,a.jsx)("rect",{width:"43",height:"43",x:".5",y:".5",stroke:"#000",strokeOpacity:".05",rx:"21.5"}),(0,a.jsx)("path",{fill:"#007AFF",fillRule:"evenodd",d:"M13.667 19.5a5 5 0 0 1 5-5h6.666a5 5 0 0 1 5 5v5a5 5 0 0 1-5 5H13.667v-10Zm5 0v1.667h6.666V19.5h-6.666Zm0 3.333V24.5h4.166v-1.667h-4.166Z",clipRule:"evenodd"}),(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"a",x1:"44",x2:"30.505",y1:"44",y2:"-7.928",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"#B8E1FF"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#CDF9FF"})]})})]})})]})]})})})})});var sV=l(10293),sG=l(80936),sB=l(21069),sO=l(71016),sz=l(86278);let sQ=(0,nr._)({post:{body:nd.z.unknown(),data:nd.z.object({url:nd.z.string()})}}),sq=(0,ns.In)("POST","/api/files/image/upload",sQ.post.data);var sU=l(89275);let sW=(0,es.memo)(function(e){let{reset:n,getValues:l,field:t}=e,i=(0,aL.aV)(),s=(0,la.U)(),[r,o]=(0,es.useState)(!1),[d,u]=(0,es.useState)(null),[c,g]=(0,es.useState)(l()[t]),m=(0,aw.n)({mutationFn:async e=>{o(!0),u(e.name);let n=new FormData;n.append("file",e),n.append("field",t);let{data:l,error:a}=await sq({body:n});if(a)throw a;return l},onSuccess:async e=>{n({...l(),[t]:e.url}),g(e.url)},onError:e=>{i({level:"danger",label:"Error uploading ".concat(t),duration:3e3,message:e.type===sU.r.UserFacingError?e.message:"Please try again later"})},onSettled:()=>{s.invalidateQueries(),o(!1),u(null)}}),y=(0,es.useCallback)(async e=>{e.length&&e[0]&&m.mutate(e[0])},[m]),p=(0,t_.VB)({accept:{"image/png":[".png"],"image/jpg":[".jpg"]},onDropAccepted:y,noClick:!0}),f=(0,es.useCallback)(e=>e.isDragAccept?{...e.getRootProps().style,transition:"all 0.2s ease-in-out",...e.isDragActive&&{opacity:.5}}:e.getRootProps().style,[]),h=(0,es.useCallback)(e=>{e.stopPropagation(),n({...l(),[t]:""}),g(null)},[n,l,t]);return(0,a.jsx)("div",{...p.getRootProps({style:f(p)}),className:"my-2 w-full",children:(0,a.jsxs)("label",{className:(0,K.QP)(r?"bg-sky-50 border-sky-200":"border-gray-200","flex h-24 w-full cursor-pointer appearance-none justify-center rounded-md border-2 border-dashed px-4 text-gray-500 transition focus:outline-none hover:border-sky-200 hover:bg-slate-2 hover:text-sky-700 dark:border-neutral-500 dark:hover:border-neutral-400"),children:[(0,a.jsx)("div",{className:"flex items-center justify-end space-x-2",children:r?(0,a.jsxs)("div",{className:"flex-col items-center space-y-2",children:[(0,a.jsx)("div",{className:"mx-auto my-0 size-6 animate-spin rounded-full border-r-2 border-t-2 border-sky-500"}),(0,a.jsx)("div",{className:"text-sm font-normal text-sky-700",children:d})]}):c?(0,a.jsxs)("div",{className:"group relative",children:[(0,a.jsx)("img",{src:c,alt:"Uploaded file",className:"size-20 rounded-md object-cover"}),(0,a.jsx)("div",{onClick:h,className:"absolute right-0 top-0 hidden size-6 cursor-pointer rounded-full border border-slate-4 bg-slate-1 text-slate-9 group-hover:block",children:(0,a.jsx)("div",{className:"flex size-full items-center justify-center",children:(0,a.jsx)(sz.A,{className:"size-4"})})})]}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("span",{className:"text-sm font-semibold",children:"Click to upload"})," ",(0,a.jsx)("span",{className:"text-sm font-normal dark:text-zinc-100",children:"or drag and drop"})]}),(0,a.jsx)("div",{className:"text-center text-xs font-normal dark:text-zinc-100",children:"PNG or JPG (MAX. 1024x1024px)"})]})}),(0,a.jsx)("input",{...p.getInputProps(),type:"file",name:"file-upload",className:"hidden"})]})})}),sH="#F1F3F5",s$=(0,es.memo)(function(e){var n;let{actionArgs:l,onSave:t}=e,{data:i}=(0,sV.f)(),[s,r]=(0,es.useState)(null),[o,d]=(0,es.useState)(!0),u=(0,es.useMemo)(()=>{var e,n;return{name:null!==(e=null==i?void 0:i.name)&&void 0!==e?e:"Lindy Embed",icon:null!==(n=null==i?void 0:i.icon)&&void 0!==n?n:{name:sC.H0.AgentIcon1,color:sC.Pl.Sky}}},[i]),c=null==l?void 0:l.lindyMessengerConfig,g=(0,es.useMemo)(()=>{var e;return null!==(e=null==c?void 0:c.messengerId)&&void 0!==e?e:(0,sO.e2)()},[null==c?void 0:c.messengerId]),m=function(e){let{messengerId:n}=e;return'<script async src="'.concat("https://api.lindy.ai","/api/lindyEmbed/lindyEmbed.js?a=").concat(n,'" crossorigin="use-credentials"><\/script>\n')}({messengerId:g}),y=function(e){let{messengerId:n}=e;return'<iframe src="'.concat("https://chat.lindy.ai","/embedded/lindyEmbed/").concat(n,'" width="100%" height="100%" style="border: none" title="Lindy Embed"></iframe>\n')}({messengerId:g}),p=(0,es.useMemo)(()=>{var e,n,l,a,t,s,r,o,d,u,m,y,p,f,h,k,F,x;return{...sR,messengerId:g,domains:null!==(m=null==c?void 0:null===(e=c.domains)||void 0===e?void 0:e[0])&&void 0!==m?m:"",displayName:null!==(y=null==c?void 0:c.displayName)&&void 0!==y?y:null==i?void 0:i.name,accentColor:function(e){if((0,sB.Z)(e))return e;let n=document.createElement("canvas").getContext("2d");return n?(n.fillStyle=e,"#000000"===n.fillStyle&&"black"!==e.toLowerCase())?sH:n.fillStyle:sH}(null!==(p=null==c?void 0:c.accentColor)&&void 0!==p?p:sH),positioning:null!==(f=null==c?void 0:null===(n=c.positioning)||void 0===n?void 0:n.type)&&void 0!==f?f:"popup",position:(null==c?void 0:c.positioning.type)==="popup"?null==c?void 0:null===(l=c.positioning)||void 0===l?void 0:l.position:"right",shape:(null==c?void 0:c.positioning.type)==="popup"?null==c?void 0:null===(a=c.positioning)||void 0===a?void 0:a.iconShape:"circle",spacing:(null==c?void 0:c.positioning.type)==="popup"&&(null==c?void 0:null===(t=c.positioning)||void 0===t?void 0:t.spacing)&&(24!==c.positioning.spacing.x||24!==c.positioning.spacing.y)?"custom":"default",horizontal:(null==c?void 0:c.positioning.type)==="popup"?null==c?void 0:null===(r=c.positioning)||void 0===r?void 0:null===(s=r.spacing)||void 0===s?void 0:s.x:24,vertical:(null==c?void 0:c.positioning.type)==="popup"?null==c?void 0:null===(d=c.positioning)||void 0===d?void 0:null===(o=d.spacing)||void 0===o?void 0:o.y:24,message:(null==c?void 0:c.positioning.type)==="popup"?null==c?void 0:null===(u=c.positioning)||void 0===u?void 0:u.message:"",logo:null!==(h=null==c?void 0:c.logoUrl)&&void 0!==h?h:"",icon:null!==(k=null==c?void 0:c.iconUrl)&&void 0!==k?k:"",lindyEmbedConversationStarters:c?null!==(F=c.lindyEmbedConversationStarters)&&void 0!==F?F:null:[],lindyEmbedGreetingMessage:c?null!==(x=null==c?void 0:c.lindyEmbedGreetingMessage)&&void 0!==x?x:null:""}},[null==i?void 0:i.name,c,g]),{register:f,handleSubmit:h,reset:k,getValues:F,control:x,watch:v,setValue:b}=(0,sM.mN)({defaultValues:p}),S=v("spacing"),T="embedded"===v("positioning");(0,es.useEffect)(()=>{k({...F()})},[p,F,k]),(0,es.useEffect)(()=>{"default"===S&&(24!==F("horizontal")&&b("horizontal",24),24!==F("vertical")&&b("vertical",24))},[S,F,b]);let K=v("positioning"),I=(0,es.useCallback)(e=>{t({lindyMessengerConfig:{...c,messengerId:g,accentColor:e.accentColor,displayName:e.displayName,domains:e.domains?e.domains.split(","):[],promptStarters:[],lindyEmbedConversationStarters:e.lindyEmbedConversationStarters,lindyEmbedGreetingMessage:e.lindyEmbedGreetingMessage,lindyEmbedPromptStarters:null,darkMode:!1,logoUrl:e.logo,iconUrl:e.icon,positioning:"popup"===e.positioning?{type:"popup",position:e.position,spacing:{x:Number(e.horizontal),y:Number(e.vertical)},iconShape:e.shape,message:e.message}:{type:"embedded"}}})},[c,g,t]),C=(0,es.useCallback)(e=>{k({...F(),lindyEmbedConversationStarters:e})},[k,F]),A=(0,es.useCallback)(e=>{k({...F(),lindyEmbedGreetingMessage:e})},[k,F]),j=(0,es.useCallback)(e=>{r(null),k({...F(),accentColor:null!=e?e:sH})},[k,F,r]),N=(0,es.useCallback)(e=>{let n=e.target.value.startsWith("#")?e.target.value:"#".concat(e.target.value);j(n),(0,sB.Z)(n)||r("Color should be in the form #RGB or #RRGGBB")},[j,r]),L=(0,es.useCallback)(()=>{d(!1)},[d]),_=(0,es.useCallback)(()=>{d(!0)},[d]),w=(0,es.useRef)(null),R=(0,es.useCallback)(()=>{var e;null===(e=w.current)||void 0===e||e.dispatchEvent(new Event("click",{bubbles:!0}))},[w]),D=F().lindyEmbedConversationStarters||[],P=(0,es.useRef)(null);return(0,nL.kN)(()=>{h(I)()}),(0,a.jsxs)("div",{className:"flex size-full flex-col overflow-auto",children:[(0,a.jsxs)("div",{className:"grid size-full select-text grid-cols-1 gap-2 overflow-auto xl:grid-cols-2",children:[(0,a.jsxs)(lV.yE,{className:"flex flex-col gap-6 px-6 pb-6",children:[(0,a.jsx)(nB.V,{label:(0,a.jsx)("span",{className:"text-xl font-medium",children:"Configure Lindy Embed Trigger"}),subtitle:"Please configure this trigger.",className:"pb-0"}),(0,a.jsxs)("form",{ref:P,onSubmit:h(I),"data-testid":"lindy.agent-wizard.trigger-fields-form",className:"contents",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(nB.V,{htmlFor:"domains",subtitle:"This Lindy will only be embeddable under this domain. If left empty, it will be embeddable on any domain.",label:"Domain Name",optional:!0}),(0,a.jsx)("input",{...f("domains"),className:"block w-full appearance-none rounded-md border border-slate-4 bg-slate-1 px-3 py-2 pl-2 text-slate-12 placeholder:text-slate-9 dark:bg-slate-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(lv.J,{htmlFor:"displayName",children:"Display Name"}),(0,a.jsx)("input",{...f("displayName"),className:"block w-full appearance-none rounded-md border border-slate-4 bg-slate-1 px-3 py-2 pl-2 text-slate-12 placeholder:text-slate-9 dark:bg-slate-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(lv.J,{htmlFor:"accentColor",children:"Accent color"}),(0,a.jsxs)("div",{className:"relative w-full flex-row items-center",children:[(0,a.jsx)("div",{className:"absolute left-3",children:(0,a.jsx)(sj,{color:F("accentColor"),onChange:j,buttonRef:w})}),(0,a.jsx)("input",{...f("accentColor",{onChange:N,validate:e=>(0,sB.Z)(e)||"Invalid color"}),onFocus:R,className:"block w-full appearance-none rounded-md border border-slate-4 bg-slate-1 px-3 py-2 pl-12 text-slate-12 placeholder:text-slate-9 dark:bg-slate-1"}),s&&(0,a.jsx)("span",{className:"text-xs text-red-11",children:s})]})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex w-full rounded bg-slate-3",children:[(0,a.jsxs)("div",{className:"flex w-1/2 justify-center text-center",children:[(0,a.jsx)("input",{...f("positioning"),type:"radio",value:"popup",id:"popup",className:"peer hidden"}),(0,a.jsx)(lv.J,{htmlFor:"popup",className:"m-0 w-full cursor-pointer rounded border border-transparent px-2 py-1 text-center font-normal text-slate-11 peer-checked:border-slate-5 peer-checked:bg-slate-1 peer-checked:font-medium peer-checked:text-slate-12",children:"Popup"})]}),(0,a.jsxs)("div",{className:"flex w-1/2 justify-center text-center",children:[(0,a.jsx)("input",{...f("positioning"),type:"radio",value:"embedded",id:"embedded",className:"peer hidden"}),(0,a.jsx)(lv.J,{htmlFor:"embedded",className:"m-0 w-full cursor-pointer rounded border border-transparent px-2 py-1 text-center font-normal text-slate-11 peer-checked:border-slate-5 peer-checked:bg-slate-1 peer-checked:font-medium peer-checked:text-slate-12",children:"IFrame"})]})]})}),"popup"===K&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex w-full items-center space-x-4",children:[(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(lv.J,{htmlFor:"position",children:"Position"}),(0,a.jsxs)("select",{...f("position"),className:"block w-full appearance-none rounded-md border border-slate-4 bg-slate-1 px-3 py-2 pl-2 text-slate-12 placeholder:text-slate-9 dark:bg-slate-1",children:[(0,a.jsx)("option",{value:"right",children:"Right"}),(0,a.jsx)("option",{value:"left",children:"Left"})]})]}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(lv.J,{htmlFor:"shape",children:"Shape"}),(0,a.jsxs)("select",{...f("shape"),className:"block w-full appearance-none rounded-md border border-slate-4 bg-slate-1 px-3 py-2 pl-2 text-slate-12 placeholder:text-slate-9 dark:bg-slate-1",children:[(0,a.jsx)("option",{value:"circle",children:"Circle"}),(0,a.jsx)("option",{value:"rounded-rectangle",children:"Rounded Rectangle"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(lv.J,{className:"mt-2",children:"Spacing"}),(0,a.jsxs)("div",{className:"flex w-full flex-col gap-2 pl-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("input",{...f("spacing"),type:"radio",value:"default",id:"default-spacing"}),(0,a.jsx)(lv.J,{htmlFor:"default-spacing",className:"m-0",children:"Default spacing"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("input",{...f("spacing"),type:"radio",value:"custom",id:"custom-spacing"}),(0,a.jsx)(lv.J,{htmlFor:"custom-spacing",className:"m-0",children:"Custom spacing"})]})]}),"custom"===S&&(0,a.jsxs)("div",{className:"mt-2 flex w-3/4 items-center space-x-4",children:[(0,a.jsx)("label",{className:"m-0 text-sm",children:"Horizontal"}),(0,a.jsxs)("div",{className:"relative min-w-[54px] rounded-md",children:[(0,a.jsx)("input",{...f("horizontal"),type:"number",className:"block w-full rounded-md border border-slate-4 bg-slate-1 px-3 py-2 pl-2 text-slate-12 [appearance:textfield] placeholder:text-slate-9 dark:bg-slate-1 [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none"}),(0,a.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",children:(0,a.jsx)("span",{className:"text-gray-500 sm:text-sm",id:"price-currency",children:"px"})})]}),(0,a.jsx)("label",{className:"m-0 text-sm",children:"Vertical"}),(0,a.jsxs)("div",{className:"relative min-w-[54px] rounded-md",children:[(0,a.jsx)("input",{...f("vertical"),type:"number",className:"block w-full rounded-md border border-slate-4 bg-slate-1 px-3 py-2 pl-2 text-slate-12 [appearance:textfield] placeholder:text-slate-9 dark:bg-slate-1 [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none"}),(0,a.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",children:(0,a.jsx)("span",{className:"text-gray-500 sm:text-sm",id:"price-currency",children:"px"})})]})]})]})]}),(0,a.jsxs)("div",{className:"flex w-full items-center space-x-4",children:[(0,a.jsxs)("div",{className:"w-1/2 shrink-0 grow",children:[(0,a.jsx)(lv.J,{htmlFor:"logo",className:"text-sm font-semibold text-slate-12",children:"Logo"}),(0,a.jsx)(sW,{field:"logo",reset:k,getValues:F})]}),(0,a.jsxs)("div",{className:"w-1/2 shrink-0 grow",children:[(0,a.jsx)(lv.J,{htmlFor:"Icon",className:"text-sm font-semibold text-slate-12",children:"Icon"}),(0,a.jsx)(sW,{field:"icon",reset:k,getValues:F})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(nB.V,{optional:!0,labelClassName:"mb-0 block select-none text-sm font-medium text-slate-11",label:"Greeting Message",subtitle:"This is the introductory message users see when they start a conversation"}),(0,a.jsx)(sL.f,{id:"greeting",className:"bg-slate-1",onChange:A,value:null!==(n=F().lindyEmbedGreetingMessage)&&void 0!==n?n:""},"greeting")]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(nB.V,{optional:!0,labelClassName:"mb-0 block select-none text-sm font-medium text-slate-11",label:"Conversation Starters",subtitle:"These are pre-set prompts that users can click to start a conversation."}),(0,a.jsx)(sG.H,{value:D,onChange:C,placeholder:"Add a conversation starter"})]}),!T&&(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(nB.V,{subtitle:"Customize the message next to your chat bubble to prompt user engagement.",htmlFor:"message",label:"Callout Message",optional:!0}),(0,a.jsx)("input",{onFocus:L,...f("message",{onBlur:_}),maxLength:64,className:"block w-full appearance-none rounded-md border border-slate-4 bg-slate-1 px-3 py-2 pl-2 text-slate-12 placeholder:text-slate-9 dark:bg-slate-1"})]}),T?(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsx)(nB.V,{className:"m-0",label:"Code Snippet",subtitle:"Add this code to any page where you would like to use Lindy Embed.",optional:!0}),(0,a.jsx)("div",{className:"w-full select-text break-words rounded border border-slate-4 p-4 font-mono text-sm text-slate-10",children:y}),(0,a.jsx)(sK.T,{level:"outline",className:"flex w-full items-center justify-center px-4 py-2",text:y,useDefaultButtonText:!0})]}):(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsx)(nB.V,{className:"m-0",label:"Code Snippet",subtitle:"Add this code to the <head /> tag of any page where you would like to use Lindy Embed.",optional:!0}),(0,a.jsx)("div",{className:"w-full select-text break-words rounded border border-slate-4 p-4 font-mono text-sm text-slate-10",children:m}),(0,a.jsx)(sK.T,{level:"outline",className:"flex w-full items-center justify-center px-4 py-2",text:m,useDefaultButtonText:!0})]})]})]}),(0,a.jsx)("div",{className:"h-full overflow-auto border-l border-slate-4 bg-slate-2",children:(0,a.jsx)(sE,{control:x,agentDefinition:u,showPopup:o,setShowPopup:d})})]}),(0,a.jsx)("div",{className:"flex justify-end border-t border-slate-4 p-3",children:(0,a.jsx)(eb.$,{type:"button",onClick:h(I),"data-testid":"lindy.agent-wizard.lindy-messenger.done",disabled:!!s,children:"Done"})})]})});function sZ(e){let n=(0,n7.dF)(e);return(0,nS.q2)(()=>{if(!n||!e||(0,eh.jq)(e))return[];let l=n.filter(e=>Object.keys(e.actions).length>0),a=new Map;return l.forEach(e=>{var n;let l=null!==(n=a.get(e.statefulToolKey))&&void 0!==n?n:0;a.set(e.statefulToolKey,l+1)}),l.map(e=>{var n;let l=null!==(n=a.get(e.statefulToolKey))&&void 0!==n?n:0;return{...e,label:l>1?"".concat(e.displayName,": ").concat(e.occurrence):e.displayName}})},[n,e])}let sY=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"},{defaultValue:null,kind:"LocalArgument",name:"filter"},{defaultValue:null,kind:"LocalArgument",name:"search"}],n={kind:"Variable",name:"filter",variableName:"filter"},l={kind:"Variable",name:"search",variableName:"search"},a=[{kind:"Variable",name:"after",variableName:"cursor"},n,{kind:"Variable",name:"first",variableName:"count"},l],t={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"tool",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"dependencies",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"method",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"provider",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"scopes",storageKey:null},m={kind:"InlineFragment",selections:[u,c,g],type:"OAuth2AuthConfig",abstractKey:null},y={alias:null,args:null,kind:"ScalarField",name:"fields",storageKey:null},p={kind:"InlineFragment",selections:[u,c,y],type:"CustomAuthConfig",abstractKey:null},f={kind:"InlineFragment",selections:[y,u,c,g],type:"CustomOAuth2AuthConfig",abstractKey:null},h=[u,c],k={kind:"InlineFragment",selections:h,type:"TokenAuthConfig",abstractKey:null},F={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"placeholder",storageKey:null},b=[{alias:null,args:null,concreteType:"DynamicLoaderDefaultValue",kind:"LinkedField",name:"defaultValue",plural:!1,selections:[F,x],storageKey:null},d,t,i,{alias:null,args:null,kind:"ScalarField",name:"field",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"icon",storageKey:null},o,v],S={alias:null,args:null,kind:"ScalarField",name:"statefulToolKey",storageKey:null},T={alias:null,args:null,kind:"ScalarField",name:"isPremium",storageKey:null},K={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},I={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},C={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"tooltip",storageKey:null},N={alias:null,args:null,kind:"ScalarField",name:"isRequired",storageKey:null},L={alias:null,args:null,kind:"ScalarField",name:"canBeSharedWithTemplate",storageKey:null},_=[o,A,v,t,j,N,L,K,y];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ToolsQuery",selections:[{args:[{kind:"Variable",name:"count",variableName:"count"},{kind:"Variable",name:"cursor",variableName:"cursor"},n,l],kind:"FragmentSpread",name:"ToolsView_Tools"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ToolsQuery",selections:[{alias:null,args:a,concreteType:"QueryToolsConnection",kind:"LinkedField",name:"tools",plural:!1,selections:[{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:"QueryToolsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"node",plural:!1,selections:[t,i,{alias:null,args:null,kind:"ScalarField",name:"isPopular",storageKey:null},s,{alias:null,args:null,concreteType:"ToolActionsConnection",kind:"LinkedField",name:"actions",plural:!1,selections:[{alias:null,args:null,concreteType:"ToolActionsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ActionDetails",kind:"LinkedField",name:"node",plural:!1,selections:[r,o,s,{alias:null,args:null,kind:"ScalarField",name:"toolDisplayName",storageKey:null},d,t,i,{alias:null,args:null,kind:"ScalarField",name:"inputSchema",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"outputSchema",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"authConfig",plural:!1,selections:[r,m,p,f,k],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"deprecated",storageKey:null},{alias:null,args:null,concreteType:"DynamicLoaders",kind:"LinkedField",name:"dynamicLoaders",plural:!1,selections:[{alias:null,args:null,concreteType:"DynamicLoaderDetails",kind:"LinkedField",name:"loaders",plural:!0,selections:b,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"refetchInputAfterLoad",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ObservableChannelMetadata",kind:"LinkedField",name:"observableChannel",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"agentMessageReceivedSchema",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"immediateEdgeLabel",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"observableEdgeLabel",storageKey:null},S],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasSideEffects",storageKey:null},T,{alias:null,args:null,kind:"ScalarField",name:"premiumActionCost",storageKey:null},{alias:null,args:null,concreteType:"ActionProperty",kind:"LinkedField",name:"outputProperties",plural:!0,selections:[i,K,x],storageKey:null},I,C],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ToolTriggersConnection",kind:"LinkedField",name:"triggers",plural:!1,selections:[{alias:null,args:null,concreteType:"ToolTriggersConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"TriggerDefinition",kind:"LinkedField",name:"node",plural:!1,selections:[r,{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[s,i,I],storageKey:null},F,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"authConfig",plural:!1,selections:[r,m,p,f,k,{kind:"InlineFragment",selections:h,type:"PipedreamAuthConfig",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ToolTriggerChannel",kind:"LinkedField",name:"channel",plural:!1,selections:[S],storageKey:null},t,i,{alias:null,args:null,kind:"ScalarField",name:"eventSchema",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"fields",plural:!0,selections:[r,{kind:"InlineFragment",selections:[o,A,v,t,j,N,L,K,y,{alias:"defaultText",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldText",abstractKey:null},{kind:"InlineFragment",selections:[o,A,v,t,j,N,L,K,y,{alias:"defaultNumber",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"step",storageKey:null}],type:"TriggerFieldNumber",abstractKey:null},{kind:"InlineFragment",selections:_,type:"TriggerFieldLindyEmbedConfig",abstractKey:null},{kind:"InlineFragment",selections:[o,A,v,t,j,N,L,K,y,{alias:"defaultDate",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldDateTime",abstractKey:null},{kind:"InlineFragment",selections:[o,A,v,t,j,N,L,K,y,{alias:"defaultLindyMail",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldLindyMail",abstractKey:null},{kind:"InlineFragment",selections:[o,A,v,t,j,N,L,K,y,{alias:"defaultWebhook",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldLindyWebhook",abstractKey:null},{kind:"InlineFragment",selections:_,type:"TriggerFieldLindyPhoneNumber",abstractKey:null},{kind:"InlineFragment",selections:[o,A,v,t,j,N,L,K,y,{alias:null,args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldElevenLabsVoice",abstractKey:null},{kind:"InlineFragment",selections:[o,A,v,t,j,N,L,K,y,{alias:"defaultRecurringSchedule",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldRecurringSchedule",abstractKey:null},{kind:"InlineFragment",selections:[o,A,v,t,j,N,L,K,y,{alias:"defaultChecked",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldCheckbox",abstractKey:null},{kind:"InlineFragment",selections:_,type:"TriggerFieldLabel",abstractKey:null},{kind:"InlineFragment",selections:[o,A,v,t,j,N,L,K,y,{alias:null,args:null,kind:"ScalarField",name:"aliases",storageKey:null}],type:"TriggerFieldComparableText",abstractKey:null},{kind:"InlineFragment",selections:[o,A,v,t,j,N,L,K,y,{alias:"defaultItem",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"selectFirstByDefault",storageKey:null}],type:"TriggerFieldSelect",abstractKey:null},{kind:"InlineFragment",selections:[o,A,v,t,j,N,L,K,y,{alias:"defaultItems",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasAllowAllOption",storageKey:null}],type:"TriggerFieldMultiSelect",abstractKey:null},{kind:"InlineFragment",selections:[o,A,v,t,j,N,L,K,y,{alias:null,args:null,concreteType:"DynamicLoaderDetails",kind:"LinkedField",name:"loader",plural:!1,selections:b,storageKey:null}],type:"TriggerFieldDynamicLoader",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasPublishableConfig",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isHighThroughput",storageKey:null},T,{alias:null,args:null,concreteType:"TriggerTestingPolicy",kind:"LinkedField",name:"testingPolicy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"supportsSyntheticPayload",storageKey:null}],storageKey:null},I,C],storageKey:null}],storageKey:null}],storageKey:null},I,r],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:a,filters:["filter","search"],handle:"connection",key:"ToolsViewPaginationQuery_tools",kind:"LinkedHandle",name:"tools"}]},params:{cacheID:"7a29dca9f2b11c698526adc668b55272",id:null,metadata:{},name:"ToolsQuery",operationKind:"query",text:"query ToolsQuery(\n  $count: Int!\n  $cursor: String\n  $filter: ToolFilterInput\n  $search: String\n) {\n  ...ToolsView_Tools_3o95Jw\n}\n\nfragment AgentStateToolMembersList_Tool on Tool {\n  tool\n  actions {\n    edges {\n      node {\n        id\n        key\n        tool\n        observableChannel {\n          statefulToolKey\n        }\n        authConfig {\n          __typename\n          ... on OAuth2AuthConfig {\n            __typename\n            method\n            provider\n            scopes\n          }\n          ... on CustomAuthConfig {\n            __typename\n            method\n            provider\n            fields\n          }\n          ... on CustomOAuth2AuthConfig {\n            __typename\n            fields\n            method\n            provider\n            scopes\n          }\n          ... on TokenAuthConfig {\n            __typename\n            method\n            provider\n          }\n        }\n        ...ToolMemberItemAction_ActionDetails\n        nodeId\n      }\n    }\n  }\n}\n\nfragment ToolMemberItemAction_ActionDetails on ActionDetails {\n  key\n  tool\n  toolDisplayName\n  dependencies\n  description\n  displayName\n  inputSchema\n  outputSchema\n  authConfig {\n    __typename\n    ... on OAuth2AuthConfig {\n      __typename\n      method\n      provider\n      scopes\n    }\n    ... on CustomAuthConfig {\n      __typename\n      method\n      provider\n      fields\n    }\n    ... on CustomOAuth2AuthConfig {\n      __typename\n      fields\n      method\n      provider\n      scopes\n    }\n    ... on TokenAuthConfig {\n      __typename\n      method\n      provider\n    }\n  }\n  deprecated\n  dynamicLoaders {\n    loaders {\n      defaultValue {\n        name\n        value\n      }\n      dependencies\n      description\n      displayName\n      field\n      icon\n      key\n      placeholder\n    }\n    refetchInputAfterLoad\n  }\n  observableChannel {\n    agentMessageReceivedSchema\n    immediateEdgeLabel\n    observableEdgeLabel\n    statefulToolKey\n  }\n  hasSideEffects\n  isPremium\n  premiumActionCost\n  outputProperties {\n    displayName\n    type\n    value\n  }\n}\n\nfragment ToolMemberItemTrigger_TriggerDefinition on TriggerDefinition {\n  tool {\n    tool\n    displayName\n    nodeId\n  }\n  name\n  authConfig {\n    __typename\n    ... on OAuth2AuthConfig {\n      __typename\n      method\n      provider\n      scopes\n    }\n    ... on CustomAuthConfig {\n      __typename\n      method\n      provider\n      fields\n    }\n    ... on CustomOAuth2AuthConfig {\n      __typename\n      fields\n      method\n      provider\n      scopes\n    }\n    ... on TokenAuthConfig {\n      __typename\n      method\n      provider\n    }\n    ... on PipedreamAuthConfig {\n      __typename\n      method\n      provider\n    }\n  }\n  channel {\n    statefulToolKey\n  }\n  description\n  displayName\n  eventSchema\n  fields {\n    __typename\n    ... on TriggerFieldText {\n      __typename\n      key\n      label\n      placeholder\n      description\n      tooltip\n      isRequired\n      canBeSharedWithTemplate\n      type\n      fields\n      defaultText: defaultValue\n    }\n    ... on TriggerFieldNumber {\n      __typename\n      key\n      label\n      placeholder\n      description\n      tooltip\n      isRequired\n      canBeSharedWithTemplate\n      type\n      fields\n      defaultNumber: defaultValue\n      min\n      max\n      step\n    }\n    ... on TriggerFieldLindyEmbedConfig {\n      __typename\n      key\n      label\n      placeholder\n      description\n      tooltip\n      isRequired\n      canBeSharedWithTemplate\n      type\n      fields\n    }\n    ... on TriggerFieldDateTime {\n      __typename\n      key\n      label\n      placeholder\n      description\n      tooltip\n      isRequired\n      canBeSharedWithTemplate\n      type\n      fields\n      defaultDate: defaultValue\n    }\n    ... on TriggerFieldLindyMail {\n      __typename\n      key\n      label\n      placeholder\n      description\n      tooltip\n      isRequired\n      canBeSharedWithTemplate\n      type\n      fields\n      defaultLindyMail: defaultValue\n    }\n    ... on TriggerFieldLindyWebhook {\n      __typename\n      key\n      label\n      placeholder\n      description\n      tooltip\n      isRequired\n      canBeSharedWithTemplate\n      type\n      fields\n      defaultWebhook: defaultValue\n    }\n    ... on TriggerFieldLindyPhoneNumber {\n      __typename\n      key\n      label\n      placeholder\n      description\n      tooltip\n      isRequired\n      canBeSharedWithTemplate\n      type\n      fields\n    }\n    ... on TriggerFieldElevenLabsVoice {\n      __typename\n      key\n      label\n      placeholder\n      description\n      tooltip\n      isRequired\n      canBeSharedWithTemplate\n      type\n      fields\n      defaultValue\n    }\n    ... on TriggerFieldRecurringSchedule {\n      __typename\n      key\n      label\n      placeholder\n      description\n      tooltip\n      isRequired\n      canBeSharedWithTemplate\n      type\n      fields\n      defaultRecurringSchedule: defaultValue\n    }\n    ... on TriggerFieldCheckbox {\n      __typename\n      key\n      label\n      placeholder\n      description\n      tooltip\n      isRequired\n      canBeSharedWithTemplate\n      type\n      fields\n      defaultChecked: defaultValue\n    }\n    ... on TriggerFieldLabel {\n      __typename\n      key\n      label\n      placeholder\n      description\n      tooltip\n      isRequired\n      canBeSharedWithTemplate\n      type\n      fields\n    }\n    ... on TriggerFieldComparableText {\n      __typename\n      key\n      label\n      placeholder\n      description\n      tooltip\n      isRequired\n      canBeSharedWithTemplate\n      type\n      fields\n      aliases\n    }\n    ... on TriggerFieldSelect {\n      __typename\n      key\n      label\n      placeholder\n      description\n      tooltip\n      isRequired\n      canBeSharedWithTemplate\n      type\n      fields\n      defaultItem: defaultValue\n      selectFirstByDefault\n    }\n    ... on TriggerFieldMultiSelect {\n      __typename\n      key\n      label\n      placeholder\n      description\n      tooltip\n      isRequired\n      canBeSharedWithTemplate\n      type\n      fields\n      defaultItems: defaultValue\n      hasAllowAllOption\n    }\n    ... on TriggerFieldDynamicLoader {\n      __typename\n      key\n      label\n      placeholder\n      description\n      tooltip\n      isRequired\n      canBeSharedWithTemplate\n      type\n      fields\n      loader {\n        defaultValue {\n          name\n          value\n        }\n        dependencies\n        description\n        displayName\n        field\n        icon\n        key\n        placeholder\n      }\n    }\n  }\n  hasPublishableConfig\n  isHighThroughput\n  isPremium\n  testingPolicy {\n    supportsSyntheticPayload\n  }\n}\n\nfragment ToolMembersList_Tool on Tool {\n  actions {\n    edges {\n      node {\n        id\n        ...ToolMemberItemAction_ActionDetails\n        nodeId\n      }\n    }\n  }\n  triggers {\n    edges {\n      node {\n        id\n        ...ToolMemberItemTrigger_TriggerDefinition\n        nodeId\n      }\n    }\n  }\n}\n\nfragment ToolsList_Tool on QueryToolsConnection {\n  pageInfo {\n    hasNextPage\n  }\n  totalCount\n  edges {\n    node {\n      description\n      displayName\n      isPopular\n      tool\n      actions {\n        edges {\n          node {\n            __typename\n            ...ToolMemberItemAction_ActionDetails\n            nodeId\n          }\n        }\n      }\n      triggers {\n        edges {\n          node {\n            __typename\n            ...ToolMemberItemTrigger_TriggerDefinition\n            nodeId\n          }\n        }\n      }\n      nodeId\n    }\n  }\n}\n\nfragment ToolsView_Tools_3o95Jw on Query {\n  tools(first: $count, after: $cursor, filter: $filter, search: $search) {\n    ...ToolsList_Tool\n    edges {\n      node {\n        tool\n        ...ToolMembersList_Tool\n        ...AgentStateToolMembersList_Tool\n        nodeId\n        __typename\n      }\n      cursor\n    }\n    pageInfo {\n      endCursor\n      hasNextPage\n    }\n  }\n}\n"}}}();sY.hash="7dc0b8250a0bb5f6783ac82fa14e551d";let sJ={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"Tools_Identity",selections:[{args:null,kind:"FragmentSpread",name:"ToolsView_Identity"}],type:"Identity",abstractKey:null};function sX(e){let n=(0,es.useCallback)(()=>e.setSelectedTool(null),[e]);return(0,a.jsxs)("div",{className:"flex w-full items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,a.jsx)(nG.K,{className:"mr-0 border-transparent hover:border-slate-6",tabIndex:-1,tooltip:"Back",onClick:n,children:(0,a.jsx)(nV.A,{className:"size-5 text-slate-11"})}),(0,a.jsx)("h2",{className:"text-2xl font-medium text-slate-12",children:e.displayName})]}),(0,a.jsx)(nG.K,{className:"mr-0 border-transparent hover:border-slate-6",tabIndex:-1,tooltip:"Close",onClick:e.onClose,children:(0,a.jsx)(nE.A,{className:"size-5 text-slate-11"})})]})}function s0(e){let[n,l]=(0,es.useMemo)(()=>"Actions"===e.memberKind?["Add Action","Select an action to add to your Lindy."]:["Add Trigger","Select a trigger that will initiate a response from Lindy."],[e.memberKind]);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex w-full items-start justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-medium text-slate-12",children:n}),(0,a.jsx)(nG.K,{className:"mr-0 border-transparent hover:border-slate-6",tabIndex:-1,tooltip:"Close",onClick:e.onClose,children:(0,a.jsx)(nE.A,{className:"size-5 text-slate-11"})})]}),(0,a.jsx)("p",{className:"text-sm font-normal text-slate-9",children:l})]})}sJ.hash="53ed2c5a239b57f69c669f8f1203fdb2";let s1={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ToolsView_Identity",selections:[{args:null,kind:"FragmentSpread",name:"ToolsList_Identity"}],type:"Identity",abstractKey:null};s1.hash="11cb74453ada7bc9efb35e143098fe2e";let s2=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"},{defaultValue:null,kind:"LocalArgument",name:"filter"},{defaultValue:null,kind:"LocalArgument",name:"search"}],n={kind:"Variable",name:"filter",variableName:"filter"},l={kind:"Variable",name:"search",variableName:"search"},a=[{kind:"Variable",name:"after",variableName:"cursor"},n,{kind:"Variable",name:"first",variableName:"count"},l],t={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"tool",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"dependencies",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"method",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"provider",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"scopes",storageKey:null},m={kind:"InlineFragment",selections:[u,c,g],type:"OAuth2AuthConfig",abstractKey:null},y={alias:null,args:null,kind:"ScalarField",name:"fields",storageKey:null},p={kind:"InlineFragment",selections:[u,c,y],type:"CustomAuthConfig",abstractKey:null},f={kind:"InlineFragment",selections:[y,u,c,g],type:"CustomOAuth2AuthConfig",abstractKey:null},h=[u,c],k={kind:"InlineFragment",selections:h,type:"TokenAuthConfig",abstractKey:null},F={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"placeholder",storageKey:null},b=[{alias:null,args:null,concreteType:"DynamicLoaderDefaultValue",kind:"LinkedField",name:"defaultValue",plural:!1,selections:[F,x],storageKey:null},d,t,i,{alias:null,args:null,kind:"ScalarField",name:"field",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"icon",storageKey:null},o,v],S={alias:null,args:null,kind:"ScalarField",name:"statefulToolKey",storageKey:null},T={alias:null,args:null,kind:"ScalarField",name:"isPremium",storageKey:null},K={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},I={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},C={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"tooltip",storageKey:null},N={alias:null,args:null,kind:"ScalarField",name:"isRequired",storageKey:null},L={alias:null,args:null,kind:"ScalarField",name:"canBeSharedWithTemplate",storageKey:null},_=[o,A,v,t,j,N,L,K,y];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ToolsViewPaginationQuery",selections:[{args:[{kind:"Variable",name:"count",variableName:"count"},{kind:"Variable",name:"cursor",variableName:"cursor"},n,l],kind:"FragmentSpread",name:"ToolsView_Tools"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ToolsViewPaginationQuery",selections:[{alias:null,args:a,concreteType:"QueryToolsConnection",kind:"LinkedField",name:"tools",plural:!1,selections:[{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:"QueryToolsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"node",plural:!1,selections:[t,i,{alias:null,args:null,kind:"ScalarField",name:"isPopular",storageKey:null},s,{alias:null,args:null,concreteType:"ToolActionsConnection",kind:"LinkedField",name:"actions",plural:!1,selections:[{alias:null,args:null,concreteType:"ToolActionsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ActionDetails",kind:"LinkedField",name:"node",plural:!1,selections:[r,o,s,{alias:null,args:null,kind:"ScalarField",name:"toolDisplayName",storageKey:null},d,t,i,{alias:null,args:null,kind:"ScalarField",name:"inputSchema",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"outputSchema",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"authConfig",plural:!1,selections:[r,m,p,f,k],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"deprecated",storageKey:null},{alias:null,args:null,concreteType:"DynamicLoaders",kind:"LinkedField",name:"dynamicLoaders",plural:!1,selections:[{alias:null,args:null,concreteType:"DynamicLoaderDetails",kind:"LinkedField",name:"loaders",plural:!0,selections:b,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"refetchInputAfterLoad",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ObservableChannelMetadata",kind:"LinkedField",name:"observableChannel",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"agentMessageReceivedSchema",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"immediateEdgeLabel",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"observableEdgeLabel",storageKey:null},S],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasSideEffects",storageKey:null},T,{alias:null,args:null,kind:"ScalarField",name:"premiumActionCost",storageKey:null},{alias:null,args:null,concreteType:"ActionProperty",kind:"LinkedField",name:"outputProperties",plural:!0,selections:[i,K,x],storageKey:null},I,C],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ToolTriggersConnection",kind:"LinkedField",name:"triggers",plural:!1,selections:[{alias:null,args:null,concreteType:"ToolTriggersConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"TriggerDefinition",kind:"LinkedField",name:"node",plural:!1,selections:[r,{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[s,i,I],storageKey:null},F,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"authConfig",plural:!1,selections:[r,m,p,f,k,{kind:"InlineFragment",selections:h,type:"PipedreamAuthConfig",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ToolTriggerChannel",kind:"LinkedField",name:"channel",plural:!1,selections:[S],storageKey:null},t,i,{alias:null,args:null,kind:"ScalarField",name:"eventSchema",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"fields",plural:!0,selections:[r,{kind:"InlineFragment",selections:[o,A,v,t,j,N,L,K,y,{alias:"defaultText",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldText",abstractKey:null},{kind:"InlineFragment",selections:[o,A,v,t,j,N,L,K,y,{alias:"defaultNumber",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"step",storageKey:null}],type:"TriggerFieldNumber",abstractKey:null},{kind:"InlineFragment",selections:_,type:"TriggerFieldLindyEmbedConfig",abstractKey:null},{kind:"InlineFragment",selections:[o,A,v,t,j,N,L,K,y,{alias:"defaultDate",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldDateTime",abstractKey:null},{kind:"InlineFragment",selections:[o,A,v,t,j,N,L,K,y,{alias:"defaultLindyMail",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldLindyMail",abstractKey:null},{kind:"InlineFragment",selections:[o,A,v,t,j,N,L,K,y,{alias:"defaultWebhook",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldLindyWebhook",abstractKey:null},{kind:"InlineFragment",selections:_,type:"TriggerFieldLindyPhoneNumber",abstractKey:null},{kind:"InlineFragment",selections:[o,A,v,t,j,N,L,K,y,{alias:null,args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldElevenLabsVoice",abstractKey:null},{kind:"InlineFragment",selections:[o,A,v,t,j,N,L,K,y,{alias:"defaultRecurringSchedule",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldRecurringSchedule",abstractKey:null},{kind:"InlineFragment",selections:[o,A,v,t,j,N,L,K,y,{alias:"defaultChecked",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldCheckbox",abstractKey:null},{kind:"InlineFragment",selections:_,type:"TriggerFieldLabel",abstractKey:null},{kind:"InlineFragment",selections:[o,A,v,t,j,N,L,K,y,{alias:null,args:null,kind:"ScalarField",name:"aliases",storageKey:null}],type:"TriggerFieldComparableText",abstractKey:null},{kind:"InlineFragment",selections:[o,A,v,t,j,N,L,K,y,{alias:"defaultItem",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"selectFirstByDefault",storageKey:null}],type:"TriggerFieldSelect",abstractKey:null},{kind:"InlineFragment",selections:[o,A,v,t,j,N,L,K,y,{alias:"defaultItems",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasAllowAllOption",storageKey:null}],type:"TriggerFieldMultiSelect",abstractKey:null},{kind:"InlineFragment",selections:[o,A,v,t,j,N,L,K,y,{alias:null,args:null,concreteType:"DynamicLoaderDetails",kind:"LinkedField",name:"loader",plural:!1,selections:b,storageKey:null}],type:"TriggerFieldDynamicLoader",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasPublishableConfig",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isHighThroughput",storageKey:null},T,{alias:null,args:null,concreteType:"TriggerTestingPolicy",kind:"LinkedField",name:"testingPolicy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"supportsSyntheticPayload",storageKey:null}],storageKey:null},I,C],storageKey:null}],storageKey:null}],storageKey:null},I,r],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:a,filters:["filter","search"],handle:"connection",key:"ToolsViewPaginationQuery_tools",kind:"LinkedHandle",name:"tools"}]},params:{cacheID:"563d07f9d72fabd0fd03c6b17a3bcf0d",id:null,metadata:{},name:"ToolsViewPaginationQuery",operationKind:"query",text:"query ToolsViewPaginationQuery(\n  $count: Int!\n  $cursor: String\n  $filter: ToolFilterInput\n  $search: String\n) {\n  ...ToolsView_Tools_3o95Jw\n}\n\nfragment AgentStateToolMembersList_Tool on Tool {\n  tool\n  actions {\n    edges {\n      node {\n        id\n        key\n        tool\n        observableChannel {\n          statefulToolKey\n        }\n        authConfig {\n          __typename\n          ... on OAuth2AuthConfig {\n            __typename\n            method\n            provider\n            scopes\n          }\n          ... on CustomAuthConfig {\n            __typename\n            method\n            provider\n            fields\n          }\n          ... on CustomOAuth2AuthConfig {\n            __typename\n            fields\n            method\n            provider\n            scopes\n          }\n          ... on TokenAuthConfig {\n            __typename\n            method\n            provider\n          }\n        }\n        ...ToolMemberItemAction_ActionDetails\n        nodeId\n      }\n    }\n  }\n}\n\nfragment ToolMemberItemAction_ActionDetails on ActionDetails {\n  key\n  tool\n  toolDisplayName\n  dependencies\n  description\n  displayName\n  inputSchema\n  outputSchema\n  authConfig {\n    __typename\n    ... on OAuth2AuthConfig {\n      __typename\n      method\n      provider\n      scopes\n    }\n    ... on CustomAuthConfig {\n      __typename\n      method\n      provider\n      fields\n    }\n    ... on CustomOAuth2AuthConfig {\n      __typename\n      fields\n      method\n      provider\n      scopes\n    }\n    ... on TokenAuthConfig {\n      __typename\n      method\n      provider\n    }\n  }\n  deprecated\n  dynamicLoaders {\n    loaders {\n      defaultValue {\n        name\n        value\n      }\n      dependencies\n      description\n      displayName\n      field\n      icon\n      key\n      placeholder\n    }\n    refetchInputAfterLoad\n  }\n  observableChannel {\n    agentMessageReceivedSchema\n    immediateEdgeLabel\n    observableEdgeLabel\n    statefulToolKey\n  }\n  hasSideEffects\n  isPremium\n  premiumActionCost\n  outputProperties {\n    displayName\n    type\n    value\n  }\n}\n\nfragment ToolMemberItemTrigger_TriggerDefinition on TriggerDefinition {\n  tool {\n    tool\n    displayName\n    nodeId\n  }\n  name\n  authConfig {\n    __typename\n    ... on OAuth2AuthConfig {\n      __typename\n      method\n      provider\n      scopes\n    }\n    ... on CustomAuthConfig {\n      __typename\n      method\n      provider\n      fields\n    }\n    ... on CustomOAuth2AuthConfig {\n      __typename\n      fields\n      method\n      provider\n      scopes\n    }\n    ... on TokenAuthConfig {\n      __typename\n      method\n      provider\n    }\n    ... on PipedreamAuthConfig {\n      __typename\n      method\n      provider\n    }\n  }\n  channel {\n    statefulToolKey\n  }\n  description\n  displayName\n  eventSchema\n  fields {\n    __typename\n    ... on TriggerFieldText {\n      __typename\n      key\n      label\n      placeholder\n      description\n      tooltip\n      isRequired\n      canBeSharedWithTemplate\n      type\n      fields\n      defaultText: defaultValue\n    }\n    ... on TriggerFieldNumber {\n      __typename\n      key\n      label\n      placeholder\n      description\n      tooltip\n      isRequired\n      canBeSharedWithTemplate\n      type\n      fields\n      defaultNumber: defaultValue\n      min\n      max\n      step\n    }\n    ... on TriggerFieldLindyEmbedConfig {\n      __typename\n      key\n      label\n      placeholder\n      description\n      tooltip\n      isRequired\n      canBeSharedWithTemplate\n      type\n      fields\n    }\n    ... on TriggerFieldDateTime {\n      __typename\n      key\n      label\n      placeholder\n      description\n      tooltip\n      isRequired\n      canBeSharedWithTemplate\n      type\n      fields\n      defaultDate: defaultValue\n    }\n    ... on TriggerFieldLindyMail {\n      __typename\n      key\n      label\n      placeholder\n      description\n      tooltip\n      isRequired\n      canBeSharedWithTemplate\n      type\n      fields\n      defaultLindyMail: defaultValue\n    }\n    ... on TriggerFieldLindyWebhook {\n      __typename\n      key\n      label\n      placeholder\n      description\n      tooltip\n      isRequired\n      canBeSharedWithTemplate\n      type\n      fields\n      defaultWebhook: defaultValue\n    }\n    ... on TriggerFieldLindyPhoneNumber {\n      __typename\n      key\n      label\n      placeholder\n      description\n      tooltip\n      isRequired\n      canBeSharedWithTemplate\n      type\n      fields\n    }\n    ... on TriggerFieldElevenLabsVoice {\n      __typename\n      key\n      label\n      placeholder\n      description\n      tooltip\n      isRequired\n      canBeSharedWithTemplate\n      type\n      fields\n      defaultValue\n    }\n    ... on TriggerFieldRecurringSchedule {\n      __typename\n      key\n      label\n      placeholder\n      description\n      tooltip\n      isRequired\n      canBeSharedWithTemplate\n      type\n      fields\n      defaultRecurringSchedule: defaultValue\n    }\n    ... on TriggerFieldCheckbox {\n      __typename\n      key\n      label\n      placeholder\n      description\n      tooltip\n      isRequired\n      canBeSharedWithTemplate\n      type\n      fields\n      defaultChecked: defaultValue\n    }\n    ... on TriggerFieldLabel {\n      __typename\n      key\n      label\n      placeholder\n      description\n      tooltip\n      isRequired\n      canBeSharedWithTemplate\n      type\n      fields\n    }\n    ... on TriggerFieldComparableText {\n      __typename\n      key\n      label\n      placeholder\n      description\n      tooltip\n      isRequired\n      canBeSharedWithTemplate\n      type\n      fields\n      aliases\n    }\n    ... on TriggerFieldSelect {\n      __typename\n      key\n      label\n      placeholder\n      description\n      tooltip\n      isRequired\n      canBeSharedWithTemplate\n      type\n      fields\n      defaultItem: defaultValue\n      selectFirstByDefault\n    }\n    ... on TriggerFieldMultiSelect {\n      __typename\n      key\n      label\n      placeholder\n      description\n      tooltip\n      isRequired\n      canBeSharedWithTemplate\n      type\n      fields\n      defaultItems: defaultValue\n      hasAllowAllOption\n    }\n    ... on TriggerFieldDynamicLoader {\n      __typename\n      key\n      label\n      placeholder\n      description\n      tooltip\n      isRequired\n      canBeSharedWithTemplate\n      type\n      fields\n      loader {\n        defaultValue {\n          name\n          value\n        }\n        dependencies\n        description\n        displayName\n        field\n        icon\n        key\n        placeholder\n      }\n    }\n  }\n  hasPublishableConfig\n  isHighThroughput\n  isPremium\n  testingPolicy {\n    supportsSyntheticPayload\n  }\n}\n\nfragment ToolMembersList_Tool on Tool {\n  actions {\n    edges {\n      node {\n        id\n        ...ToolMemberItemAction_ActionDetails\n        nodeId\n      }\n    }\n  }\n  triggers {\n    edges {\n      node {\n        id\n        ...ToolMemberItemTrigger_TriggerDefinition\n        nodeId\n      }\n    }\n  }\n}\n\nfragment ToolsList_Tool on QueryToolsConnection {\n  pageInfo {\n    hasNextPage\n  }\n  totalCount\n  edges {\n    node {\n      description\n      displayName\n      isPopular\n      tool\n      actions {\n        edges {\n          node {\n            __typename\n            ...ToolMemberItemAction_ActionDetails\n            nodeId\n          }\n        }\n      }\n      triggers {\n        edges {\n          node {\n            __typename\n            ...ToolMemberItemTrigger_TriggerDefinition\n            nodeId\n          }\n        }\n      }\n      nodeId\n    }\n  }\n}\n\nfragment ToolsView_Tools_3o95Jw on Query {\n  tools(first: $count, after: $cursor, filter: $filter, search: $search) {\n    ...ToolsList_Tool\n    edges {\n      node {\n        tool\n        ...ToolMembersList_Tool\n        ...AgentStateToolMembersList_Tool\n        nodeId\n        __typename\n      }\n      cursor\n    }\n    pageInfo {\n      endCursor\n      hasNextPage\n    }\n  }\n}\n"}}}();s2.hash="d01b24af302180089fca67ea11f9f00a";let s3=function(){var e=["tools"];return{argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"},{defaultValue:null,kind:"LocalArgument",name:"filter"},{defaultValue:null,kind:"LocalArgument",name:"search"}],kind:"Fragment",metadata:{connection:[{count:"count",cursor:"cursor",direction:"forward",path:e}],refetch:{connection:{forward:{count:"count",cursor:"cursor"},backward:null,path:e},fragmentPathInResult:[],operation:s2}},name:"ToolsView_Tools",selections:[{alias:"tools",args:[{kind:"Variable",name:"filter",variableName:"filter"},{kind:"Variable",name:"search",variableName:"search"}],concreteType:"QueryToolsConnection",kind:"LinkedField",name:"__ToolsViewPaginationQuery_tools_connection",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"ToolsList_Tool"},{alias:null,args:null,concreteType:"QueryToolsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"tool",storageKey:null},{args:null,kind:"FragmentSpread",name:"ToolMembersList_Tool"},{args:null,kind:"FragmentSpread",name:"AgentStateToolMembersList_Tool"},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null}}();s3.hash="d01b24af302180089fca67ea11f9f00a";let s6=function(){var e={alias:null,args:null,kind:"ScalarField",name:"tool",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"method",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"provider",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"scopes",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"fields",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AgentStateToolMembersList_Tool",selections:[e,{alias:null,args:null,concreteType:"ToolActionsConnection",kind:"LinkedField",name:"actions",plural:!1,selections:[{alias:null,args:null,concreteType:"ToolActionsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ActionDetails",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},e,{alias:null,args:null,concreteType:"ObservableChannelMetadata",kind:"LinkedField",name:"observableChannel",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"statefulToolKey",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"authConfig",plural:!1,selections:[{kind:"InlineFragment",selections:[n,l,a,t],type:"OAuth2AuthConfig",abstractKey:null},{kind:"InlineFragment",selections:[n,l,a,i],type:"CustomAuthConfig",abstractKey:null},{kind:"InlineFragment",selections:[n,i,l,a,t],type:"CustomOAuth2AuthConfig",abstractKey:null},{kind:"InlineFragment",selections:[n,l,a],type:"TokenAuthConfig",abstractKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"ToolMemberItemAction_ActionDetails"}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Tool",abstractKey:null}}();s6.hash="238fa83a8da1cef4bd02450161906f1c";let s5=function(){var e={alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"dependencies",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"method",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"provider",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"scopes",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"fields",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ToolMemberItemAction_ActionDetails",selections:[e,{alias:null,args:null,kind:"ScalarField",name:"tool",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"toolDisplayName",storageKey:null},n,l,a,{alias:null,args:null,kind:"ScalarField",name:"inputSchema",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"outputSchema",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"authConfig",plural:!1,selections:[{kind:"InlineFragment",selections:[t,i,s,r],type:"OAuth2AuthConfig",abstractKey:null},{kind:"InlineFragment",selections:[t,i,s,o],type:"CustomAuthConfig",abstractKey:null},{kind:"InlineFragment",selections:[t,o,i,s,r],type:"CustomOAuth2AuthConfig",abstractKey:null},{kind:"InlineFragment",selections:[t,i,s],type:"TokenAuthConfig",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"deprecated",storageKey:null},{alias:null,args:null,concreteType:"DynamicLoaders",kind:"LinkedField",name:"dynamicLoaders",plural:!1,selections:[{alias:null,args:null,concreteType:"DynamicLoaderDetails",kind:"LinkedField",name:"loaders",plural:!0,selections:[{alias:null,args:null,concreteType:"DynamicLoaderDefaultValue",kind:"LinkedField",name:"defaultValue",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},d],storageKey:null},n,l,a,{alias:null,args:null,kind:"ScalarField",name:"field",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"icon",storageKey:null},e,{alias:null,args:null,kind:"ScalarField",name:"placeholder",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"refetchInputAfterLoad",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ObservableChannelMetadata",kind:"LinkedField",name:"observableChannel",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"agentMessageReceivedSchema",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"immediateEdgeLabel",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"observableEdgeLabel",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"statefulToolKey",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasSideEffects",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPremium",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"premiumActionCost",storageKey:null},{alias:null,args:null,concreteType:"ActionProperty",kind:"LinkedField",name:"outputProperties",plural:!0,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},d],storageKey:null}],type:"ActionDetails",abstractKey:null}}();s5.hash="ca1aaff01dfa47aa69958811dbf4289b";var s4=l(98448),s7=l(23846);function s9(e){return(0,a.jsx)("div",{className:"flex-1 overflow-hidden truncate whitespace-nowrap text-sm font-medium leading-snug text-slate-12",children:e.children})}function s8(e){return(0,a.jsxs)("div",{className:"flex h-5",children:[(0,a.jsx)("div",{className:"mr-2 flex items-center rounded-full bg-slate-3 px-2 text-xs font-medium leading-none text-slate-11",children:"Premium"}),!!e.premiumActionCost&&(0,a.jsxs)(eJ.m_,{children:[(0,a.jsxs)(eJ.ZI,{children:["This action costs ",e.premiumActionCost," credit",e.premiumActionCost>1?"s":""]}),(0,a.jsx)(eJ.k$,{asChild:!0,children:(0,a.jsxs)("div",{className:"flex cursor-pointer items-center rounded-full bg-slate-3 px-2 py-0.5 align-middle text-xs font-medium leading-5 text-slate-11",children:[(0,a.jsx)(nJ,{className:"text-slate-11"}),(0,a.jsx)("p",{className:"pl-1",children:e.premiumActionCost})]})})]})]})}function re(e){return(0,a.jsxs)("button",{className:"group flex w-full flex-row gap-x-2 overflow-hidden rounded-lg p-2 text-left hover:bg-slate-2 active:bg-slate-3",onClick:e.onClick,children:["boolean"==typeof e.isChecked&&(0,a.jsx)("div",{className:"pointer-events-none flex h-4 w-6 shrink-0 items-start pt-0.5",children:(0,a.jsx)("input",{readOnly:!0,tabIndex:-1,type:"checkbox",checked:e.isChecked,className:(0,K.QP)("focus:outline-none","h-4 w-4 bg-transparent rounded border-neutral-400 dark:border-neutral-600 text-blue-9",e.isChecked&&"border-primary-9")})}),(0,a.jsx)(ef.si,{className:"size-5 shrink-0 shadow-sm",tool:e.tool}),(0,a.jsxs)("div",{className:"flex min-w-0 flex-col items-start gap-x-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,a.jsx)(s9,{children:e.displayName}),e.isPremium&&(0,a.jsx)(s8,{premiumActionCost:e.premiumActionCost})]}),(0,a.jsx)("p",{className:(0,K.QP)("w-full text-xs font-normal text-slate-9 mt-2",e.truncate&&"truncate"),children:e.description})]})]})}function rn(e){let n=(0,M.useFragment)(s5,e.actionFragmentRef),l=(0,es.useCallback)(()=>{var l;(0,eh.P8)(e.node)&&(e.node.toggleAction({action:n.key,tool:(0,s4.LF)(n.tool,eF.h6),observableChannel:n.observableChannel?{statefulToolKey:n.observableChannel.statefulToolKey}:null,authConfig:(l=n.authConfig)&&(null==l?void 0:l.__typename)!=="%other"?(0,s7.Ay)(l):null}),"boolean"!=typeof e.isChecked&&e.node.closeToolsModal()),(0,eh.HY)(e.node)&&(e.node.addAction({action:n.key,tool:(0,s4.LF)(n.tool,eF.h6),observableChannel:n.observableChannel}),e.node.closeToolsModal())},[e.node,e.isChecked,n.key,n.tool,n.observableChannel,n.authConfig]);return(0,a.jsx)(re,{isChecked:e.isChecked,description:n.description,displayName:n.displayName,isPremium:n.isPremium,premiumActionCost:n.premiumActionCost,tool:n.tool,truncate:e.truncate,onClick:l})}function rl(e){return(0,a.jsx)("div",{className:"h-10 w-full px-8 pt-4",children:(0,a.jsx)("div",{className:"text-sm font-normal text-slate-10",children:e.children})})}var ra=l(51975),rt=l(63193);let ri=(0,v.PA)(function(e){let n=(0,M.useFragment)(s6,e.toolFragmentRef),l=(0,nS.q2)(()=>n.actions.edges.filter(rt.Vq).every(n=>{let{node:l}=n;return e.node.hasAction({tool:(0,s4.LF)(l.tool,eF.h6),action:l.key})}),[e.node,n.actions.edges]),t=(0,es.useCallback)(()=>{let a=n.actions.edges.filter(rt.Vq).map(e=>{var n;let{node:l}=e;return{action:l.key,tool:(0,s4.LF)(l.tool,eF.h6),observableChannel:l.observableChannel?{statefulToolKey:l.observableChannel.statefulToolKey}:null,authConfig:(n=l.authConfig)&&(null==n?void 0:n.__typename)!=="%other"?(0,s7.Ay)(n):null}});l?a.forEach(n=>e.node.removeAction(n)):a.forEach(n=>e.node.addAction(n))},[l,e.node,n.actions.edges]),i=(0,es.useCallback)(e=>{"Enter"===e.key&&t()},[t]);return(0,a.jsxs)("div",{className:"grid h-full",children:[(0,a.jsx)("div",{className:"flex items-center gap-x-4 px-8 pt-6",children:(0,a.jsx)(nD.S,{id:"agent-state-tools-select-all",label:"Select all",checked:l,onChange:t,onKeyDown:i})}),(0,a.jsx)(ra.O,{children:(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)(rl,{children:"Actions"}),n.actions.edges.filter(rt.Vq).map(n=>{let{node:l}=n;return(0,a.jsx)("div",{className:"mx-6",children:(0,a.jsx)(rn,{actionFragmentRef:l,node:e.node,isChecked:e.node.actionSet.has(l.id)})},l.id)})]})}),(0,a.jsx)("div",{className:"absolute right-0 top-0 -mt-px p-6",children:(0,a.jsx)("div",{children:(0,a.jsx)(eb.$,{level:"primary",size:"sm",onClick:e.node.closeToolsModal,children:"Done"})})})]})}),rs={tool:"Channels",displayName:lE.J.displayName,description:lE.J.description,isPopular:!0,statefulToolKey:null,actions:{edges:[]},triggers:{edges:[]}},rr={tool:{tool:"Channels",displayName:"Channels"},name:lE.F.name,description:lE.F.description,displayName:lE.F.displayName,isHighThroughput:!1,eventSchema:{},authConfig:null,isPremium:!1,channel:null,fields:[],hasPublishableConfig:!1,testingPolicy:{supportsSyntheticPayload:!1}};function ro(e){let n=(0,es.useCallback)(()=>{(0,eh.jq)(e.node)&&(e.node.addTrigger({name:rr.name,tool:(0,s4.LF)(rr.tool.tool,eF.h6)}),e.node.closeToolsModal())},[e.node]);return(0,a.jsx)(ra.O,{children:(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)(rl,{children:"Triggers"}),(0,a.jsx)("div",{className:"mx-6",children:(0,a.jsx)(re,{description:rr.description,displayName:rr.displayName,isPremium:!1,premiumActionCost:null,tool:rr.tool.tool,onClick:n})})]})})}function rd(e){let n=(0,es.useCallback)(()=>e.onClick(e.action),[e]);return(0,a.jsx)(re,{description:e.action.description,displayName:e.action.displayName,isPremium:!!e.action.isPremium,premiumActionCost:e.action.premiumActionCost,tool:e.action.tool,onClick:n})}let ru=(0,v.PA)(function(e){let n=(0,es.useCallback)(n=>{if((0,eh.HY)(e.node)||(0,eh.P8)(e.node)){if((0,eh.P8)(e.node)){e.node.toggleAction({tool:(0,s4.LF)(n.tool,eF.h6),action:n.key,observableChannel:n.observableChannel,statefulToolKey:e.toolMember.statefulToolKey,createdByNodeId:e.toolMember.createdByNodeId,authConfig:(0,aG.h)(n.auth)});return}e.node.addAction({tool:(0,s4.LF)(n.tool,eF.h6),action:n.key,observableChannel:n.observableChannel,statefulToolKey:e.toolMember.statefulToolKey,createdByNodeId:e.toolMember.createdByNodeId}),e.node.closeToolsModal()}},[e.node,e.toolMember.createdByNodeId,e.toolMember.statefulToolKey]);return(0,a.jsx)("div",{className:"overflow-hidden",children:(0,a.jsxs)(ra.O,{children:[(0,a.jsx)(rl,{children:"Actions"}),(0,a.jsx)("div",{className:"mx-6 mb-6",children:Object.values(e.toolMember.actions).map(e=>(0,a.jsx)(rd,{action:e,onClick:n},e.key))})]})})}),rc=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ToolMembersList_Tool",selections:[{alias:null,args:null,concreteType:"ToolActionsConnection",kind:"LinkedField",name:"actions",plural:!1,selections:[{alias:null,args:null,concreteType:"ToolActionsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ActionDetails",kind:"LinkedField",name:"node",plural:!1,selections:[e,{args:null,kind:"FragmentSpread",name:"ToolMemberItemAction_ActionDetails"}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ToolTriggersConnection",kind:"LinkedField",name:"triggers",plural:!1,selections:[{alias:null,args:null,concreteType:"ToolTriggersConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"TriggerDefinition",kind:"LinkedField",name:"node",plural:!1,selections:[e,{args:null,kind:"FragmentSpread",name:"ToolMemberItemTrigger_TriggerDefinition"}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Tool",abstractKey:null}}();rc.hash="e36e7165268f1a86fc3924376c06bdab";let rg=function(){var e={alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"method",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"provider",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"scopes",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"fields",storageKey:null},r=[l,a,t],o={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"placeholder",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"tooltip",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"isRequired",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"canBeSharedWithTemplate",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},f=[l,d,u,c,o,g,m,y,p,s];return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ToolMemberItemTrigger_TriggerDefinition",selections:[{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"tool",storageKey:null},e],storageKey:null},n,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"authConfig",plural:!1,selections:[{kind:"InlineFragment",selections:[l,a,t,i],type:"OAuth2AuthConfig",abstractKey:null},{kind:"InlineFragment",selections:[l,a,t,s],type:"CustomAuthConfig",abstractKey:null},{kind:"InlineFragment",selections:[l,s,a,t,i],type:"CustomOAuth2AuthConfig",abstractKey:null},{kind:"InlineFragment",selections:r,type:"TokenAuthConfig",abstractKey:null},{kind:"InlineFragment",selections:r,type:"PipedreamAuthConfig",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ToolTriggerChannel",kind:"LinkedField",name:"channel",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"statefulToolKey",storageKey:null}],storageKey:null},o,e,{alias:null,args:null,kind:"ScalarField",name:"eventSchema",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"fields",plural:!0,selections:[{kind:"InlineFragment",selections:[l,d,u,c,o,g,m,y,p,s,{alias:"defaultText",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldText",abstractKey:null},{kind:"InlineFragment",selections:[l,d,u,c,o,g,m,y,p,s,{alias:"defaultNumber",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"step",storageKey:null}],type:"TriggerFieldNumber",abstractKey:null},{kind:"InlineFragment",selections:f,type:"TriggerFieldLindyEmbedConfig",abstractKey:null},{kind:"InlineFragment",selections:[l,d,u,c,o,g,m,y,p,s,{alias:"defaultDate",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldDateTime",abstractKey:null},{kind:"InlineFragment",selections:[l,d,u,c,o,g,m,y,p,s,{alias:"defaultLindyMail",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldLindyMail",abstractKey:null},{kind:"InlineFragment",selections:[l,d,u,c,o,g,m,y,p,s,{alias:"defaultWebhook",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldLindyWebhook",abstractKey:null},{kind:"InlineFragment",selections:f,type:"TriggerFieldLindyPhoneNumber",abstractKey:null},{kind:"InlineFragment",selections:[l,d,u,c,o,g,m,y,p,s,{alias:null,args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldElevenLabsVoice",abstractKey:null},{kind:"InlineFragment",selections:[l,d,u,c,o,g,m,y,p,s,{alias:"defaultRecurringSchedule",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldRecurringSchedule",abstractKey:null},{kind:"InlineFragment",selections:[l,d,u,c,o,g,m,y,p,s,{alias:"defaultChecked",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldCheckbox",abstractKey:null},{kind:"InlineFragment",selections:f,type:"TriggerFieldLabel",abstractKey:null},{kind:"InlineFragment",selections:[l,d,u,c,o,g,m,y,p,s,{alias:null,args:null,kind:"ScalarField",name:"aliases",storageKey:null}],type:"TriggerFieldComparableText",abstractKey:null},{kind:"InlineFragment",selections:[l,d,u,c,o,g,m,y,p,s,{alias:"defaultItem",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"selectFirstByDefault",storageKey:null}],type:"TriggerFieldSelect",abstractKey:null},{kind:"InlineFragment",selections:[l,d,u,c,o,g,m,y,p,s,{alias:"defaultItems",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasAllowAllOption",storageKey:null}],type:"TriggerFieldMultiSelect",abstractKey:null},{kind:"InlineFragment",selections:[l,d,u,c,o,g,m,y,p,s,{alias:null,args:null,concreteType:"DynamicLoaderDetails",kind:"LinkedField",name:"loader",plural:!1,selections:[{alias:null,args:null,concreteType:"DynamicLoaderDefaultValue",kind:"LinkedField",name:"defaultValue",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dependencies",storageKey:null},o,e,{alias:null,args:null,kind:"ScalarField",name:"field",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"icon",storageKey:null},d,c],storageKey:null}],type:"TriggerFieldDynamicLoader",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasPublishableConfig",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isHighThroughput",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPremium",storageKey:null},{alias:null,args:null,concreteType:"TriggerTestingPolicy",kind:"LinkedField",name:"testingPolicy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"supportsSyntheticPayload",storageKey:null}],storageKey:null}],type:"TriggerDefinition",abstractKey:null}}();rg.hash="c61280da89210bb6cc0d02a9a8ffb2c1";var rm=l(90719);function ry(e){let n=(0,M.useFragment)(rg,e.triggerFragmentRef),l=(0,es.useCallback)(()=>{(0,eh.ji)(e.node)&&(e.node.addTrigger({name:n.name,tool:(0,s4.LF)(n.tool.tool,eF.h6)}),e.node.closeToolsModal(),"LindyEmbed"===n.tool.tool&&n.name===rm.hb&&e.node.openLindyEmbedModal())},[e.node,n]);return(0,a.jsx)(re,{description:n.description,displayName:n.displayName,isPremium:n.isPremium,premiumActionCost:null,tool:n.tool.tool,truncate:e.truncate,onClick:l})}let rp=(0,v.PA)(function(e){let n=(0,M.useFragment)(rc,e.toolFragmentRef);return(0,a.jsx)(ra.O,{children:(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)(rl,{children:"Triggers"===e.memberKind?"Triggers":"Actions"}),"Actions"===e.memberKind&&n.actions.edges.filter(rt.Vq).map(n=>{let{node:l}=n;return(0,a.jsx)("div",{className:"mx-6",children:(0,a.jsx)(rn,{actionFragmentRef:l,node:e.node})},l.id)}),"Triggers"===e.memberKind&&n.triggers.edges.filter(rt.Vq).map(n=>{let{node:l}=n;return(0,a.jsx)("div",{className:"mx-6",children:(0,a.jsx)(ry,{triggerFragmentRef:l,node:e.node})},l.id)})]})})}),rf={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ToolsList_Identity",selections:[{args:null,kind:"FragmentSpread",name:"ToolsListItemsRow_Identity"}],type:"Identity",abstractKey:null};rf.hash="da501f95bd9a280949806afa5d2773b1";let rh=function(){var e={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ToolsList_Tool",selections:[{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:"QueryToolsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPopular",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"tool",storageKey:null},{alias:null,args:null,concreteType:"ToolActionsConnection",kind:"LinkedField",name:"actions",plural:!1,selections:[{alias:null,args:null,concreteType:"ToolActionsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ActionDetails",kind:"LinkedField",name:"node",plural:!1,selections:[e,{args:null,kind:"FragmentSpread",name:"ToolMemberItemAction_ActionDetails"}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ToolTriggersConnection",kind:"LinkedField",name:"triggers",plural:!1,selections:[{alias:null,args:null,concreteType:"ToolTriggersConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"TriggerDefinition",kind:"LinkedField",name:"node",plural:!1,selections:[e,{args:null,kind:"FragmentSpread",name:"ToolMemberItemTrigger_TriggerDefinition"}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"QueryToolsConnection",abstractKey:null}}();rh.hash="10c510d9a8df85e98852bed3bb424b13";var rk=l(85926),rF=l(78176),rx=l(12938);let rv={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ToolsListItemsRow_Identity",selections:[{args:null,kind:"FragmentSpread",name:"ToolsListItemRequest_Identity"}],type:"Identity",abstractKey:null};rv.hash="b868bb75fc80be6ff5fe296dc64b75e2";var rb=l(26457),rS=l(35121);let rT=(0,K.QP)("group flex w-full items-center justify-between gap-x-2 overflow-hidden rounded-lg p-2 hover:bg-slate-2 active:bg-slate-3"),rK=(0,K.QP)("h-5 w-5 text-slate-9 opacity-0 group-hover:opacity-100 shrink-0");function rI(e){let n=(0,es.useCallback)(()=>e.onSelectTool(e.item),[e]);return(0,a.jsxs)("button",{className:rT,onClick:n,children:[(0,a.jsxs)("div",{className:"relative flex min-w-0 items-center gap-x-2",children:[(0,a.jsx)(ef.si,{className:"size-5 shrink-0 shadow-sm",tool:e.item.tool}),(0,a.jsx)(s9,{children:e.item.displayName}),!!e.item.description&&(0,a.jsxs)(eJ.m_,{placement:"top",children:[(0,a.jsx)(eJ.ZI,{className:"z-modal-overlay-tooltips max-w-[300px]",children:e.item.description}),(0,a.jsx)(eJ.k$,{asChild:!0,children:(0,a.jsx)(rb.A,{className:"size-4 text-slate-9 opacity-0 group-hover:opacity-100"})})]})]}),(0,a.jsx)(rS.z,{className:rK,direction:"right"})]})}function rC(e){return(0,a.jsxs)("a",{className:rT,href:e.href,target:"_blank",rel:"noreferrer",children:[(0,a.jsx)("div",{className:"flex items-center gap-x-2",children:e.children}),(0,a.jsx)(rS.z,{className:rK,direction:"right"})]})}let rA={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ToolsListItemRequest_Identity",selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],type:"Identity",abstractKey:null};function rj(e){let n=(0,M.useFragment)(rA,e.identityFragmentRef),l=(0,es.useMemo)(()=>{var l;let a=new URL("mailto:support@lindy.ai");return a.search=new URLSearchParams({subject:"Triggers"===e.memberKind?"Trigger Request":"Action Request",body:"Hey, ".concat(null!==(l=n.name)&&void 0!==l?l:"Lindy's user"," here. I want to be able to create ").concat("Triggers"===e.memberKind?"a trigger":"an action"," using __________")}).toString(),a.toString()},[n.name,e.memberKind]);return(0,a.jsxs)(rC,{href:l,children:[(0,a.jsx)(lk,{className:"size-5"}),(0,a.jsx)(s9,{children:"Triggers"===e.memberKind?"Request a Trigger":"Request an Action"})]})}function rN(e){let n=(0,M.useFragment)(rv,e.identityFragmentRef);return(0,a.jsx)("div",{className:"flex h-10 w-full gap-3 px-6",children:e.items.map(l=>l&&"type"in l&&"request"===l.type?(0,a.jsx)("div",{className:"w-1/2 shrink-0",children:(0,a.jsx)(rj,{identityFragmentRef:n,memberKind:e.memberKind})},e.memberKind):(0,a.jsx)("div",{className:"w-1/2 shrink-0",children:(0,a.jsx)(rI,{item:l,onSelectTool:e.onSelectTool})},l.tool))})}function rL(e){return!!e&&"__typename"in e&&"ActionDetails"===e.__typename}function r_(e){return!!e&&"__typename"in e&&"TriggerDefinition"===e.__typename}rA.hash="aaf220ba41a55f750582ad4c5604a5e9";let rw={type:"header",text:"Recommended Tools"},rR={type:"header",text:"Popular Tools"},rD={type:"header",text:"Other Tools"},rP={type:"request"},rM=(0,v.PA)(function(e){let n=(0,M.useFragment)(rf,e.identityFragmentRef),l=(0,M.useFragment)(rh,e.toolsFragmentRef),{rows:t,totalRowCount:i}=(0,es.useMemo)(()=>{var n;if(!(null==l?void 0:l.edges))return{rows:[],totalRowCount:0};let a=l.edges.filter(rt.Vq).map(e=>{let{node:n}=e;return{description:n.description,displayName:n.displayName,isPopular:n.isPopular,statefulToolKey:null,tool:n.tool,actions:n.actions,triggers:n.triggers}});if(e.search){let n=[];a.forEach(l=>{let a={type:"header",text:l.displayName},t="Actions"===e.memberKind?l.actions.edges.filter(rt.Vq).map(e=>{let{node:n}=e;return n}):l.triggers.edges.filter(rt.Vq).map(e=>{let{node:n}=e;return n});n.push(a,...t)}),l.pageInfo.hasNextPage||n.push({type:"header",text:0===a.length?"No results":"Need something else?"},[rP]);let t=l.totalCount-a.length;return{rows:n,totalRowCount:n.length+t}}let t="Triggers"===e.memberKind&&!(null===(n=x.a.lindies.currentLindy)||void 0===n?void 0:n.stateGraph.hasConversationEntryPointNode),i=[];if(e.statefulTools.length>0){let n=e.statefulTools.map(e=>{var n;return{description:null!==(n=e.description)&&void 0!==n?n:"",displayName:e.label,isPopular:!1,statefulToolKey:e.statefulToolKey,createdByNodeId:e.createdByNodeId,tool:(0,s4.eD)(e.tool,eF.h6),actions:{edges:[]},triggers:{edges:[]}}}),l=(0,rx.A)(n,2);i.push(rw,...l)}let s=t?[rs,...a.filter(e=>e.isPopular)]:a.filter(e=>e.isPopular);if(s.length>0){let e=(0,rx.A)(s,2);i.push(rR,...e)}let r=a.filter(e=>!e.isPopular),o=(0,rx.A)(l.pageInfo.hasNextPage?r:[...r,rP],2);i.push(rD,...o);let d=Math.ceil((l.totalCount-a.length)/2);return{rows:i,totalRowCount:i.length+d}},[null==l?void 0:l.edges,null==l?void 0:l.pageInfo.hasNextPage,null==l?void 0:l.totalCount,e.memberKind,e.search,e.statefulTools]),s=(0,es.useCallback)(e=>!!t.at(e),[t]),r=(0,es.useCallback)(e=>{let n=t.at(e);return e===t.length-1&&(null==l?void 0:l.pageInfo.hasNextPage)===!1?64:rL(n)||r_(n)?55:40},[t,null==l?void 0:l.pageInfo.hasNextPage]);return(0,a.jsx)(li.Ay,{children:l=>(0,a.jsx)(lr.A,{threshold:rE,isItemLoaded:s,loadMoreItems:e.loadMoreItems,itemCount:i,children:i=>{let{onItemsRendered:s,ref:o}=i;return(0,a.jsxs)(rF.bL,{style:l,children:[(0,a.jsx)(ls._m,{ref:o,height:l.height,width:l.width,onItemsRendered:s,itemCount:t.length,itemSize:r,itemData:t,outerElementType:z.IH,children:l=>{let{data:t,index:i,style:s}=l,r=t.at(i);return r?r&&!Array.isArray(r)&&"type"in r&&"header"===r.type?(0,a.jsx)("div",{style:s,children:(0,a.jsx)(rl,{children:r.text})}):rL(r)?(0,a.jsx)("div",{style:s,className:"px-6",children:(0,a.jsx)(rn,{actionFragmentRef:r,node:e.node,truncate:!0})}):r_(r)?(0,a.jsx)("div",{style:s,className:"px-6",children:(0,a.jsx)(ry,{triggerFragmentRef:r,node:e.node,truncate:!0})}):(0,a.jsx)("div",{style:s,children:(0,a.jsx)(rN,{items:r,identityFragmentRef:n,memberKind:e.memberKind,onSelectTool:e.onSelectTool})}):null}},e.search),(0,a.jsx)(rk.Ze,{})]})}})})}),rE=42,rV=(0,v.PA)(function(e){var n,l,t;let i=(0,M.useFragment)(s1,e.identityFragmentRef),{data:s,loadNext:r,hasNext:o,isLoadingNext:d}=(0,M.usePaginationFragment)(s3,e.toolsFragmentRef),u=(0,es.useCallback)(()=>{o&&!d&&r(rE)},[o,d,r]);if((null===(n=e.selectedTool)||void 0===n?void 0:n.statefulToolKey)&&("userChannel"===e.selectedTool.statefulToolKey||e.selectedTool.createdByNodeId)){let n=e.selectedTool.createdByNodeId,l=e.selectedTool.statefulToolKey,t=e.statefulTools.find(e=>e.createdByNodeId===n&&e.statefulToolKey===l);return t?(0,a.jsx)(ru,{toolMember:t,node:e.node}):null}if((null===(l=e.selectedTool)||void 0===l?void 0:l.tool)===rs.tool&&"Triggers"===e.memberKind)return(0,a.jsx)(ro,{node:e.node});if(e.selectedTool){let n=e.selectedTool.tool,l=null===(t=s.tools.edges.find(e=>(null==e?void 0:e.node.tool)===n))||void 0===t?void 0:t.node;return l?(0,eh.P8)(e.node)?(0,a.jsx)(ri,{toolFragmentRef:l,node:e.node}):(0,a.jsx)(rp,{toolFragmentRef:l,memberKind:e.memberKind,node:e.node}):null}return(0,a.jsx)(rM,{identityFragmentRef:i,toolsFragmentRef:s.tools,memberKind:e.memberKind,node:e.node,search:e.search,statefulTools:e.statefulTools,loadMoreItems:u,onSelectTool:e.setSelectedTool})}),rG=(0,v.PA)(function(e){let[n,l]=(0,es.useState)(""),[t]=(0,to.d7)(n,300),i=(0,eh.ji)(e.node)?"Triggers":"Actions",s=(0,M.useLazyLoadQuery)(sY,{count:rE,cursor:null,filter:{memberKind:i},search:t},{fetchKey:"ToolsQuery:".concat(i,":").concat(t)}),r=(0,M.useFragment)(sJ,e.identityFragmentRef),[o,d]=(0,es.useState)(null);return e.node?(0,a.jsxs)("div",{"data-testid":"lindy.components.".concat("Triggers"===i?"trigger":"action","-selection"),className:(0,K.QP)("grid grid-rows-[auto,1fr] h-full w-full overflow-hidden",!o&&"h-[85vh]"),children:[o?(0,a.jsx)("div",{className:"mx-6 mt-6",children:(0,a.jsx)(sX,{displayName:o.displayName,setSelectedTool:d,onClose:e.onClose})}):(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"m-6",children:(0,a.jsx)(s0,{memberKind:i,onClose:e.onClose})}),(0,a.jsx)("div",{className:"mx-6 mb-2",children:(0,a.jsx)(lx.pd,{placeholder:"Search by App or ".concat("Triggers"===i?"Trigger":"Action"),className:"m-px border-slate-6 bg-panel text-sm font-medium",value:n,onChange:l,preIcon:(0,a.jsx)(lF.W,{className:"text-slate-9"}),"data-testid":"lindy.agent-wizard.search-input",autoFocus:!0})})]}),(0,a.jsx)("div",{className:"overflow-hidden","data-testid":"lindy.components.".concat("Triggers"===i?"triggers-list":"actions-list","-selection"),children:(0,a.jsx)(Y.mF,{loader:(0,a.jsx)("div",{className:"flex size-full items-center justify-center",children:(0,a.jsx)(n9.y,{})}),children:(0,a.jsx)(rV,{identityFragmentRef:r,toolsFragmentRef:s,memberKind:i,node:e.node,statefulTools:e.statefulTools,search:t,selectedTool:o,setSelectedTool:d})})})]}):null}),rB=(0,v.PA)(function(e){var n,l;let t=(0,M.useFragment)(sT,e.identityFragmentRef),i=null===(n=x.a.lindies.currentLindy)||void 0===n?void 0:n.stateGraph,s=(0,es.useCallback)(e=>{var n;(0,eh.jq)(null==i?void 0:i.ui.selectedModalNode)&&(null==i||null===(n=i.ui.selectedModalNode)||void 0===n||n.setTriggerSetup(e),null==i||i.ui.closeLindyEmbedModal())},[null==i?void 0:i.ui]),r=sZ(null!==(l=null==i?void 0:i.ui.selectedModalNode)&&void 0!==l?l:null);return i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(nL.aF,{className:"p-0",open:i.ui.isToolsModalOpen,setClosed:i.ui.closeToolsModal,children:(0,a.jsx)(Y.mF,{children:(0,a.jsx)(rG,{identityFragmentRef:t,node:i.ui.selectedModalNode,statefulTools:r,onClose:i.ui.closeToolsModal})})}),(0,a.jsx)(nL.aF,{className:"w-auto max-w-none p-0 sm:w-auto sm:max-w-none",open:i.ui.isLindyEmbedModalOpen,setClosed:i.ui.closeLindyEmbedModal,children:(0,a.jsxs)(l4.$,{className:"p-0 sm:w-[1223px] sm:max-w-full",children:[(0,a.jsx)("div",{className:"p-6 pb-0",children:(0,a.jsx)(l6.o,{onClick:i.ui.closeLindyEmbedModal})}),(0,a.jsx)(lV.yE,{className:"flex flex-1 flex-col",children:(0,eh.jq)(i.ui.selectedModalNode)&&i.ui.selectedModalNode.serializedTriggerSetup&&(0,a.jsx)(s$,{actionArgs:i.ui.selectedModalNode.serializedTriggerSetup,onSave:s})})]})})]}):null}),rO={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"EditorSidebarPanelQueryFragment",selections:[{args:null,kind:"FragmentSpread",name:"RailsTestingQueryFragment"},{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"me",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"GraphEntityEditorPanel_Identity"}],storageKey:null}],type:"Query",abstractKey:null};rO.hash="086352b80d45d5ceb057b8d768342e71";let rz={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"EditorSidebarPanelAgentDefinitionFragment",selections:[{args:null,kind:"FragmentSpread",name:"RailsTestingAgentDefinitionFragment"}],type:"AgentDefinition",abstractKey:null};rz.hash="1ffc9a3527f0b11aab511cb4da520b9d";let rQ={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"EditorSidebarPanelStateGraphTestRunFragment",selections:[{args:null,kind:"FragmentSpread",name:"RailsTestingStateGraphTestRunFragment"},{args:null,kind:"FragmentSpread",name:"RailsTestingStateGraphTestRunRefetchableFragment"}],type:"StateGraphTestRun",abstractKey:null};rQ.hash="676abed401e37c3aea57cc03d68aefd2";var rq=l(42392);let rU={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"GraphEntityEditorPanel_Identity",selections:[{args:null,kind:"FragmentSpread",name:"ActionNodeEditor_Identity"},{args:null,kind:"FragmentSpread",name:"AgentStateNodeEditor_Identity"},{args:null,kind:"FragmentSpread",name:"EntryPointNodeEditor_Identity"},{args:null,kind:"FragmentSpread",name:"LogicNodeEditor_Identity"}],type:"Identity",abstractKey:null};rU.hash="6069d82d70cc2f1a0615037e6dececc2";let rW={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ActionNodeEditor_Identity",selections:[{args:null,kind:"FragmentSpread",name:"CustomActionNodeEditor_Identity"}],type:"Identity",abstractKey:null};function rH(e){let{className:n,callToAction:l}=e;return(0,a.jsxs)("div",{className:(0,K.QP)("flex cursor-pointer items-start gap-1 rounded-md border border-amber-6 bg-amber-2 p-2 text-xs hover:bg-amber-3",n),onClick:x.a.ui.openPlansModal,children:[(0,a.jsx)(nv.A,{className:"size-4 shrink-0 text-amber-6"}),(0,a.jsx)("span",{className:"text-amber-11",children:l})]})}rW.hash="023ed2f3350da0e35662ce5a4cfdb40f";var r$=l(64145),rZ=l(77791),rY=l(13965),rJ=l(17700),rX=l(53445),r0=l(70562),r1=l(32159),r2=l(88036),r3=l(90769);let r6={mainAxis:45,crossAxis:-12},r5=(0,v.PA)(function(e){var n;let{node:l}=e,t=(0,P.useRouter)(),i=(0,es.useMemo)(()=>t.query["agent-id"],[t.query]),{data:s}=(0,sV.f)(),r=l.requireConfirmation===r3.cr.Always,o=null!==(n=s&&s.askForConfirmation)&&void 0!==n&&n,d=(0,es.useCallback)(e=>{l.setRequireConfirmation(e)},[l]),u=(0,es.useCallback)(e=>()=>{l.setRequireConfirmation(e?r3.cr.Always:r3.cr.Never)},[l]),{enabled:c}=(0,ea.u)(eE.T.LindyOnRailsAgentSettings,{defaultEnabled:!1}),g=(0,nh.K)(l);return(null==g?void 0:g.hasSideEffects)?c?(0,a.jsxs)("div",{className:"flex w-full flex-col items-start",children:[(0,a.jsx)(nB.V,{label:"Ask for Confirmation",subtitle:"Require Lindy to ask for confirmation before performing this action",labelClassName:"text-slate-11",optional:!0}),(0,a.jsxs)($.f,{children:[(0,a.jsx)(lM.d,{checked:r,onChange:u(!r)}),o&&!r?(0,a.jsxs)(eJ.m_,{placement:"left",mode:eJ.Vx.Info,contentOffset:r6,children:[(0,a.jsx)(eJ.ZI,{children:(0,a.jsxs)(nY.V,{left:!0,children:[(0,a.jsx)("span",{className:"font-medium text-slate-12",children:"Lindy is in Safe Mode"}),(0,a.jsxs)("span",{className:"text-slate-11",children:["All actions will require confirmation. You can change this in this ",(0,a.jsx)(r2.N,{className:"underline",href:"/agent-settings/".concat(i),children:"Lindyâ€™s settings"})]})]})}),(0,a.jsx)(eJ.k$,{children:(0,a.jsx)(r0.A,{className:"size-5 text-amber-9"})})]}):(0,a.jsx)("div",{className:"h-5"})]})]}):(0,a.jsxs)("div",{className:"flex w-full flex-col",children:[(0,a.jsx)(nB.V,{label:"Ask for Confirmation",subtitle:"Require Lindy to ask for confirmation before performing this action",labelClassName:"text-slate-11",optional:!0}),(0,a.jsx)(r1.m,{options:Object.values(r3.cr).map(e=>({label:r4(e),value:e})),value:l.requireConfirmation,onChange:d})]}):null});function r4(e){switch(e){case r3.cr.Always:return"Always";case r3.cr.Never:return"Never";case r3.cr.Sometimes:return"Let AI Decide";default:throw new ak.j(e)}}var r7=l(71804),r9=l(96795);let r8=(0,v.PA)(function(e){let{node:n}=e;return(0,eh.N)(n)&&n.actionDetails&&n.authConfig?(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(lv.J,{className:"text-slate-11",children:"Connection"}),(0,a.jsx)(aD.a,{identityId:x.a.auth.owner,authConfig:n.authConfig,auth:n.auth,authList:n.authList,isMissingScopes:n.isMissingAuthScopes,displayName:n.actionDetails.displayName,tool:n.actionDetails.tool,onChange:n.setAuth},n.id)]}):null});function oe(e,n){let l=(0,eD.Z)();(0,es.useEffect)(()=>(0,ii.fm)(()=>{!x.a.enabledFeatureFlags.includes(eE.T.NewToolsModal)&&l.selectedEntity&&l.selectedEntityChangeCount>0&&e&&n()}),[n,e,l])}let on=(0,v.PA)(function(e){let{node:n,trigger:l}=e,{tools:t}=nN({actions:!0,agent:!0}),i=(0,nb.j)();oe(!n.action,i.onOpen);let s=(0,es.useCallback)(e=>{n.addAction(e)},[n]),r=(0,nS.q2)(()=>n.action?{[n.action.tool]:[n.action]}:{},[n.action]);return(0,a.jsxs)(nY.V,{between:!0,className:"gap-y-4",children:[(0,a.jsx)("div",{onClick:i.onToggle,children:l}),(0,a.jsx)(lS,{node:n,tools:t,open:i.isOpen,onClose:i.onClose,selectedToolsAndActions:r,maxActions:1,addAction:s},String(i.isOpen)+n.id)]})}),ol=(0,v.PA)(function(e){var n,l,t,i,s;let{node:r}=e,o=x.a.enabledFeatureFlags.includes(eE.T.NewToolsModal),d=function e(n){var l,a;let t=[];return"properties"in n&&Object.entries(n.properties).forEach(n=>{let[l,a]=n;t.push(l),"properties"in a&&t.push(...e(a))}),"allOf"in n&&(null===(l=n.allOf)||void 0===l||l.forEach(n=>{t.push(...e(n))})),"anyOf"in n&&(null===(a=n.anyOf)||void 0===a||a.forEach(n=>{t.push(...e(n))})),t}((null===(l=r.actionConfig)||void 0===l?void 0:null===(n=l.rootMember)||void 0===n?void 0:n.nonNullableSchema)||{}),u=null===(t=r.actionConfig)||void 0===t?void 0:t.data.filter(e=>!(0,nF.U5)((0,r9.JR)(e))),c=(null===(i=r.actionConfig)||void 0===i?void 0:i.data.every(e=>"manual"===e.type))&&d.length===(null==u?void 0:u.length)&&(null===(s=r.actionConfigV2)||void 0===s?void 0:s.controlType)==="manual",g=(0,es.useMemo)(()=>c?(0,a.jsxs)("span",{children:["Model (unused)",(0,a.jsx)(nU.I,{children:"All parameters are set manually, so this node uses no AI model."})]}):(0,a.jsx)("span",{children:"Model"}),[c]);return(0,a.jsx)(a.Fragment,{children:r.action?(0,a.jsxs)(nY.V,{between:!0,className:"mb-7 flex w-full flex-col gap-7",children:[(0,a.jsx)(r8,{node:r}),(0,a.jsx)(r7.R,{value:r.model,onChange:r.setModel,className:(0,K.QP)(r.action&&"text-slate-11"),customLabel:g,disabled:c}),(0,a.jsx)(r5,{node:r})]}):(0,a.jsx)(nY.V,{left:!0,middle:!0,className:"size-full",children:(0,a.jsxs)(nY.V,{center:!0,className:"w-full gap-y-4",children:[(0,a.jsx)("div",{className:"size-12 rounded-lg bg-pink-3 p-3",children:(0,a.jsx)(rZ.M,{className:"size-6 fill-pink-9"})}),(0,a.jsx)("span",{className:"text-sm font-semibold text-slate-12",children:"Select an action"}),o?(0,a.jsx)(eb.$,{level:"outline",size:"sm",onClick:r.openToolsModal,children:"Select action"}):(0,a.jsx)(on,{node:r,trigger:(0,a.jsx)(eb.$,{level:"outline",size:"sm",children:"Select action"})})]})})})}),oa={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CustomActionNodeEditor_Identity",selections:[{args:null,kind:"FragmentSpread",name:"KnowledgeBaseNodeEditor_Identity"}],type:"Identity",abstractKey:null};oa.hash="d4d4223a795bc43f6bdda8ae7abe5968";let ot={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KnowledgeBaseNodeEditor_Identity",selections:[{args:null,kind:"FragmentSpread",name:"KnowledgeBaseEditor_Identity"},{args:null,kind:"FragmentSpread",name:"NodeContextMenu_Identity"}],type:"Identity",abstractKey:null};ot.hash="61cb57b4d6ecec8dc6dabc4e6f27c949";let oi={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KnowledgeBaseEditor_Identity",selections:[{args:null,kind:"FragmentSpread",name:"KbModal_Identity"}],type:"Identity",abstractKey:null};oi.hash="0a1381fc8f10c6ce511c005e5bf3b717";let os=(0,es.memo)(function(e){let{type:n="button",onClick:l,buttonRef:t,...i}=e;return(0,a.jsx)("button",{onClick:l,ref:t,type:n,...i,className:(0,K.QP)("flex h-6 w-6 shrink-0 items-center justify-center rounded-full bg-blue-9 hover:bg-blue-10 active:bg-blue-11 disabled:opacity-50 disabled:cursor-not-allowed",i.className),children:(0,a.jsx)(eG.A,{className:"size-4 stroke-white","aria-hidden":"true"})})});var or=l(42168);let oo=(0,v.PA)(function(e){var n;let{knowledgeSourceStore:l,onConfigure:t,disabled:i}=e,{source:s,enabled:r,options:o,remove:d,toggle:u}=l,{isMobileOnly:c}=(0,lf.Y0)(),g=function(e,n,l){let{entryCount:t,totalNumCharacters:i,syncStatus:s,totalNumErrors:r}=e,o=td(s);if(!od.has(s))return(0,a.jsxs)(eJ.m_,{placement:"top-start",children:[!!o.tooltip&&(0,a.jsx)(eJ.ZI,{children:o.tooltip}),(0,a.jsx)(eJ.k$,{children:o.message})]});let d="number"!=typeof i||n?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:(0,K.QP)("px-2",void 0),children:"â€¢"}),(0,tr.ZV)(i,1)," characters"]}),u="number"==typeof r&&r>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"px-2",children:"â€¢"}),(0,tr.$4)(r)," ",1===r?"error":"errors"]}):null,c=null!=t?t:0;return(0,a.jsxs)(a.Fragment,{children:["".concat((0,tr.$4)(c)," ").concat(1===c?"file":"files"),d,u]})}(l,c),m=(0,es.useCallback)(()=>t(s),[s,t]);return(0,a.jsx)(tu,{Icon:(0,a.jsx)(as,{source:s,className:"size-5"}),title:null!==(n=o.title)&&void 0!==n?n:s,subtitle:g,enabled:r,disabled:i,onToggle:u,onDelete:d,className:"odd:bg-slate-1 even:bg-slate-1",phEventPrefix:"kb-source",children:(0,a.jsx)(nG.K,{tooltip:"Configure",className:"mr-0 size-6 border border-transparent bg-none hover:border-slate-8",onClick:m,"data-testid":"lindy.agent-wizard.configure-kb","data-ph-capture-attribute-button-action":"kb-source-configure",children:(0,a.jsx)(or.A,{className:"size-4 text-slate-9 group-hover:text-slate-12"})})})}),od=new Set([au.DW.Ready,au.DW.SyncError,au.DW.SyncErrorCharacterLimitExceeded]),ou=(0,v.PA)(function(e){var n,l;let{disabled:t=!1,node:i,identityFragmentRef:s}=e,r=(0,M.useFragment)(oi,s),{carbonClient:o}=tI(),d=i.knowledgeBase,u=null!==(n=null==d?void 0:d.sources)&&void 0!==n?n:[],c=null!==(l=null==d?void 0:d.sourcesWithEntries)&&void 0!==l?l:[],g=0===u.length,[m,y]=(0,es.useState)(null),[p,f]=(0,es.useState)(!1),h=(0,nb.j)(),k=(0,es.useCallback)(()=>{y(null),h.onOpen()},[h]),F=(0,es.useCallback)(e=>{y(e),h.onOpen()},[h]),x=(0,es.useCallback)(()=>y(null),[]);return((0,es.useEffect)(()=>{g&&!p&&h.onOpen(),f(!0)},[h,g,p]),(0,af.S)(ah.B.knowledgeBaseSource,"sourceStatsUpdated",i.id,e=>{var n;null==d||null===(n=d.sourceMap.get(e.knowledgeSource.source))||void 0===n||n.updateStats(e.knowledgeSource)}),o)?(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-3 mt-7 flex flex-row items-center justify-between",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-slate-11",children:"Knowledge Base"}),(0,a.jsx)(os,{onClick:k})]}),c.length>0&&(0,a.jsx)("div",{className:"flex min-h-[48px] items-center justify-center rounded border border-slate-4 bg-slate-2",children:(0,a.jsx)("div",{className:"w-full",children:c.map(e=>(0,a.jsx)(oo,{knowledgeSourceStore:e,onConfigure:F,disabled:t},e.source))})}),(0,a.jsx)(tZ,{node:i,sourceToEdit:m,open:h.isOpen,closeModal:h.onClose,onAfterClosed:x,identityFragmentRef:r})]}):null});var oc=l(45483);function og(e){return(0,a.jsx)("div",{className:"flex h-full flex-col",children:e.children})}function om(e){return(0,a.jsx)(lV.yE,{className:"flex-1 px-5 pb-5",children:e.children})}var oy=l(57577);function op(e){let{confirmRename:n,isRenaming:l,title:t}=e,i=(0,es.useRef)(null),[s,r]=(0,es.useState)(t);(0,es.useLayoutEffect)(()=>{l&&(r(t),i.current&&(i.current.select(),i.current.setSelectionRange(0,t.length)))},[l,t]);let o=(0,es.useCallback)(()=>null==n?void 0:n(s),[n,s]),d=(0,es.useCallback)(()=>null==n?void 0:n(t),[n,t]),u=(0,es.useCallback)(e=>{"Enter"===e.key&&(e.preventDefault(),o()),"Escape"===e.key&&(e.preventDefault(),d())},[o,d]);return(0,a.jsxs)("div",{className:"p-5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex size-8 shrink-0 items-center justify-center rounded-[5px]",children:e.icon}),(0,a.jsxs)("div",{className:"grow",children:[e.isRenaming?(0,a.jsx)("div",{className:"flex h-[21px] w-full items-center",children:(0,a.jsx)(lx.pd,{ref:i,className:"w-full translate-x-[-5px] truncate px-1 py-0.5 text-[16px] font-medium text-slate-12",value:s,onChange:r,onClick:lT.d,onKeyDown:u,onBlur:o})}):(0,a.jsx)("div",{className:"text-[16px] font-medium leading-none text-slate-12",children:e.title}),e.subtitle&&(0,a.jsx)("div",{className:"mt-[4px] text-xs leading-none text-slate-11",children:e.subtitle})]}),e.contextMenu]}),e.description&&(0,a.jsx)(of,{premiumActionCost:e.premiumActionCost,children:e.description})]})}function of(e){return(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)(oy.a,{className:"text-sm text-slate-9",children:(0,a.jsx)(nq.o,{className:"[&_a:hover]:no-underline [&_a]:underline",allowHTML:!1,disableCopyUI:!0,isInput:!1,children:e.children})}),!!e.premiumActionCost&&(0,a.jsx)(oh,{premiumActionCost:e.premiumActionCost})]})}function oh(e){return(0,a.jsxs)(eJ.m_,{children:[(0,a.jsxs)(eJ.ZI,{children:["This action costs ",e.premiumActionCost," credit",e.premiumActionCost>1?"s":""]}),(0,a.jsx)(eJ.k$,{asChild:!0,children:(0,a.jsxs)("div",{className:"my-2 flex w-min cursor-pointer items-center rounded-md bg-gray-100 px-2 py-0.5 align-middle text-xs font-medium leading-5 text-gray-600",children:[(0,a.jsx)(nJ,{className:"text-gray-600"}),(0,a.jsx)("p",{className:"pl-1",children:e.premiumActionCost})]})})]})}function ok(e){return(0,a.jsx)("div",{className:(0,K.QP)("flex h-8 w-8 shrink-0 items-center justify-center rounded-[5px] overflow-hidden",e.className),children:e.children})}let oF=(0,v.PA)(function(e){let{node:n,identityFragmentRef:l}=e,t=(0,M.useFragment)(ot,l),{isRenaming:i,confirmRename:s,onRename:r}=iT(n),o=n.displayNamePrimary||"Knowledge Base",d=n.displayNameSecondary;return(0,a.jsx)(tK,{children:(0,a.jsxs)(og,{children:[(0,a.jsx)(op,{title:o,subtitle:d,icon:(0,a.jsx)(ok,{className:"bg-sky-3",children:(0,a.jsx)(oc.v,{})}),description:"Retrieve and utilize information from diverse sources.",isRenaming:i,confirmRename:s,contextMenu:!i&&(0,a.jsx)(er.y9,{children:(0,a.jsx)(tX,{node:n,onRename:r,identityFragmentRef:t})})}),(0,a.jsxs)(om,{children:[(0,a.jsx)(ol,{node:n}),(0,a.jsx)(rX.R,{node:n}),(0,a.jsx)(ou,{node:n,identityFragmentRef:t},n.id)]})]})})}),ox=(0,v.PA)(function(e){let{node:n,identityFragmentRef:l}=e,t=(0,M.useFragment)(oa,l);return n.isKnowledgeBaseNode?(0,a.jsx)(oF,{node:n,identityFragmentRef:t}):n.isTalkToUserNode?(0,a.jsx)("div",{children:"Talk to user WIP"}):null});function ov(){return(0,a.jsx)("hr",{className:"border-slate-4"})}let ob=(0,v.PA)(function(e){var n,l,t,i,s,r;let{node:o,onRename:d}=e,u=x.a.enabledFeatureFlags.includes(eE.T.NewToolsModal),{tools:c}=nN({actions:!0,agent:!0}),g=(0,nb.j)(),m=g.onClose,y=null===(n=o.action)||void 0===n?void 0:n.tool,p=null===(l=o.action)||void 0===l?void 0:l.action,f=(0,es.useMemo)(()=>y&&p?{[y]:[{tool:y,action:p}]}:{},[y,p]),h=(0,es.useCallback)(e=>()=>{var n,l,a;null===(l=o.actionConfig)||void 0===l||null===(n=l.rootMember)||void 0===n||n.toggleControlTypeForAllFields(),null===(a=o.actionConfigV2)||void 0===a||a.toggleAllControlTypes(),e()},[o]),k=null!==(r=null===(t=o.actionConfigV2)||void 0===t?void 0:t.toggleAllControlType)&&void 0!==r?r:null===(s=o.actionConfig)||void 0===s?void 0:null===(i=s.rootMember)||void 0===i?void 0:i.valueToToggleAllFieldsTo;return o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ei.Dr,{children:(0,a.jsx)(l_,{onClick:d})}),(0,a.jsx)(lR,{onClick:u?o.openToolsModal:g.onOpen}),k&&(0,a.jsx)(ei.Dr,{children:e=>{let{close:n}=e;return(0,a.jsxs)(eS.VJ,{onClick:h(n),children:[(0,a.jsx)(eS.Hf,{children:"manual"===k?(0,a.jsx)(rY.h,{className:(0,K.QP)(eS.b3,"fill-slate-10 stroke-none")}):(0,a.jsx)(r$.h,{className:(0,K.QP)(eS.b3,"fill-slate-10 stroke-none")})}),(0,a.jsxs)(eS.AB,{children:["Set all fields to ",(0,rJ.A)(k)]})]})}}),(0,a.jsx)(lN,{node:o}),(0,a.jsx)(lS,{node:o,tools:c,open:g.isOpen,onClose:m,selectedToolsAndActions:f,maxActions:1,addAction:o.addAction},String(g.isOpen)+o.id)]}):null}),oS=(0,v.PA)(function(e){var n,l,t,i,s;let{node:r,identityFragmentRef:o}=e,d=(0,M.useFragment)(rW,o),u=(0,nh.K)(r),{isRenaming:c,confirmRename:g,onRename:m}=iT(r),y=null!==(t=null==u?void 0:u.premiumActionCost)&&void 0!==t?t:null,p=null!==(i=r.displayNamePrimary)&&void 0!==i?i:"Select Action",f=r.displayNameSecondary;return r.action&&r.isCustomActionNode?(0,a.jsx)(ox,{node:r,identityFragmentRef:d}):(0,a.jsxs)(og,{children:[(0,a.jsx)(op,{icon:r.action?(0,a.jsx)(ef.si,{tool:r.action.tool,className:"size-8"}):(0,a.jsx)(ok,{className:"bg-pink-3",children:(0,a.jsx)(rZ.M,{className:"size-5 fill-pink-9"})}),title:p,subtitle:f,description:null==u?void 0:u.description,premiumActionCost:y,isRenaming:c,confirmRename:g,contextMenu:!c&&(0,a.jsx)(eS.y9,{children:(0,a.jsx)(ob,{onRename:m,node:r})})}),(0,a.jsxs)(om,{children:[(0,a.jsx)(ol,{node:r}),(null!==(s=null===(l=r.actionConfigV2)||void 0===l?void 0:null===(n=l.members)||void 0===n?void 0:n.length)&&void 0!==s?s:0)>0&&(0,a.jsx)("div",{className:"pb-7",children:(0,a.jsx)(ov,{})}),r.action&&(0,a.jsx)(rX.R,{node:r}),r.gatedFeaturesCallToAction&&(0,a.jsx)(rH,{callToAction:r.gatedFeaturesCallToAction})]}),(0,a.jsx)(ov,{})]})}),oT={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AgentStateNodeEditor_Identity",selections:[{args:null,kind:"FragmentSpread",name:"NodeContextMenu_Identity"}],type:"Identity",abstractKey:null};oT.hash="de4ad6516efb033166e4c6ce69f4ad62";var oK=l(97422),oI=l(6028);let oC=(0,v.PA)(function(e){var n,l,t,i;let{toolName:s,actionName:r,statefulToolKey:o,createdByNodeId:d,actionInputSchema:u,actionForOccurrence:c,onClick:g,isOdd:m}=e,y=(0,nk.JL)(null!==(n=null==c?void 0:c.createdByNodeId)&&void 0!==n?n:null),p=null!==(l=(0,eh.HY)(y)&&y.occurrence)&&void 0!==l?l:null,{isMobileOnly:f}=(0,lf.Y0)(),{data:h}=(0,oI.T5)({tool:s,key:r}),k=(0,es.useCallback)(()=>{g({checked:!1,tool:s,action:r,statefulToolKey:o,createdByNodeId:d,authConfig:null})},[g,s,r,o,d]),F=u&&Object.keys(u.properties).length>0&&!f?(0,a.jsx)(n$,{inputSchema:u}):null;return(0,a.jsxs)("div",{className:(0,K.QP)("flex items-center justify-between gap-2",m?"bg-slate-2":"bg-transparent","px-4 py-3"),"data-testid":"lindy.agent-wizard.suggestion-tile","data-tool-name":s,"data-action-name":r,children:[(0,a.jsxs)("div",{className:"flex w-full grow items-center gap-2",children:[(0,a.jsx)(ef.si,{tool:s,className:"size-5 min-w-5 rounded-md bg-white"}),(0,a.jsx)("span",{className:"text-sm font-medium text-slate-12",children:null!==(t=null==h?void 0:h.toolDisplayName)&&void 0!==t?t:n6.fromPascalCase(s)}),(0,a.jsx)("div",{className:"grow truncate whitespace-pre-wrap text-sm text-slate-9",children:[null!==(i=null==h?void 0:h.displayName)&&void 0!==i?i:r,p?"#".concat(p):null].filter(Boolean).join(" ")})]}),(0,a.jsxs)("div",{className:"-mr-2 flex w-6 min-w-max items-center gap-2",children:[F,(0,a.jsx)(nG.K,{tooltip:"Remove",className:"size-6 border border-transparent bg-none hover:border-slate-8",onClick:k,children:(0,a.jsx)(nE.A,{className:"size-4 text-slate-9 group-hover:text-slate-12"})})]})]})}),oA=(0,v.PA)(function(e){let{node:n,tools:l,selectedToolsAndActions:t,handleToolsChange:i,title:s,subtitle:r,titleClassName:o}=e,{isOpen:d,onOpen:u,onClose:c}=(0,nb.j)(),{isMobileOnly:g}=(0,lf.Y0)(),m=(0,es.useRef)(null),y=(0,es.useCallback)(()=>{if(g){var e;null===(e=m.current)||void 0===e||e.focus(),setTimeout(()=>u(),100);return}u()},[u,g]),p=(0,es.useCallback)(e=>{var n,a;let{tool:t,action:s,statefulToolKey:r,createdByNodeId:o}=e;i({checked:!0,tool:t,action:s,statefulToolKey:r,createdByNodeId:o,authConfig:(0,aG.h)(null===(a=l[t])||void 0===a?void 0:null===(n=a.actions[s])||void 0===n?void 0:n.auth)})},[i,l]),f=0;return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{className:"mb-0 flex items-center justify-between gap-x-1",children:[(0,a.jsx)(nB.V,{label:s,optional:!0,subtitle:r,labelClassName:o}),(0,a.jsx)(os,{"data-testid":"lindy.agent-wizard.add-action",onClick:y,buttonRef:m})]}),Object.keys(t).length>0&&(0,a.jsx)("div",{className:"overflow-hidden rounded-md border border-slate-4 shadow-none",children:(0,a.jsx)("div",{className:"flex flex-col",children:t&&Object.keys(t).length>0&&Object.values(t).map(e=>(e||[]).map(e=>{var n,t;let{tool:s,action:r,statefulToolKey:o,createdByNodeId:d}=e;return f+=1,(0,a.jsx)(oC,{toolName:s,actionName:r,statefulToolKey:o,createdByNodeId:d,actionForOccurrence:e,actionInputSchema:null===(t=l[s])||void 0===t?void 0:null===(n=t.actions[r])||void 0===n?void 0:n.inputSchema,onClick:i,isOdd:f%2==1},"".concat(s,".").concat(r))}))})}),(0,a.jsx)(lS,{node:n,open:d,onClose:c,addAction:p,selectedToolsAndActions:t,tools:l},String(d))]})}),oj=(0,v.PA)(function(e){var n,l,t;let{data:i}=(0,oI.T5)({tool:e.toolName,key:e.actionName}),s=(0,es.useCallback)(()=>{e.onRemove({tool:e.toolName,action:e.actionName,statefulToolKey:e.statefulToolKey,createdByNodeId:e.createdByNodeId})},[e]);return(0,a.jsxs)("div",{className:(0,K.QP)("flex items-center justify-between gap-2",e.isOdd?"bg-slate-2":"bg-transparent","px-4 py-3"),"data-testid":"lindy.agent-wizard.suggestion-tile","data-tool-name":e.toolName,"data-action-name":e.actionName,children:[(0,a.jsxs)("div",{className:"flex w-full grow items-center gap-2",children:[(0,a.jsx)(ef.si,{tool:e.toolName,className:"size-5 min-w-5 rounded-md bg-white"}),(0,a.jsx)("span",{className:"text-sm font-medium text-slate-12",children:null!==(n=null==i?void 0:i.toolDisplayName)&&void 0!==n?n:n6.fromPascalCase(e.toolName)}),(0,a.jsx)("div",{className:"grow truncate whitespace-pre-wrap text-sm text-slate-9",children:null!==(t=null!==(l=e.displayName)&&void 0!==l?l:null==i?void 0:i.displayName)&&void 0!==t?t:e.actionName})]}),(0,a.jsxs)("div",{className:"-mr-2 flex w-6 min-w-max items-center gap-2",children:[!!e.actionInputSchema&&Object.keys(e.actionInputSchema.properties).length>0&&(0,a.jsx)(n$,{inputSchema:e.actionInputSchema}),(0,a.jsx)(nG.K,{tooltip:"Remove",className:"size-6 border border-transparent bg-none hover:border-slate-8",onClick:s,children:(0,a.jsx)(nE.A,{className:"size-4 text-slate-9 group-hover:text-slate-12"})})]})]})}),oN=(0,v.PA)(function(e){let{node:n}=e;return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{className:"mb-0 flex items-center justify-between gap-x-1",children:[(0,a.jsx)(nB.V,{label:"Skills",optional:!0,subtitle:"Add actions for this agent to access when needed.",labelClassName:"mb-0 block select-none text-sm font-medium text-slate-11"}),(0,a.jsx)(os,{"data-testid":"lindy.agent-wizard.add-action",onClick:n.openToolsModal})]}),n.agentStateNodeActions.length>0&&(0,a.jsx)("div",{className:"overflow-hidden rounded-md border border-slate-4 shadow-none",children:(0,a.jsx)("div",{className:"flex flex-col",children:n.agentStateNodeActions.map((e,l)=>(0,a.jsx)(oj,{toolName:e.tool,actionName:e.action,statefulToolKey:e.statefulToolKey,createdByNodeId:e.createdByNodeId,onRemove:n.removeAction,isOdd:l%2==1},"".concat(e.tool,".").concat(e.action)))})})]})});var oL=l(58455);let o_=(0,v.PA)(function(e){let{node:n,tool:l,action:t}=e,i=(0,es.useCallback)(()=>{n.addAction({tool:(0,s4.LF)(t.tool,eF.h6),action:t.key,observableChannel:t.observableChannel,statefulToolKey:l.statefulToolKey,createdByNodeId:l.createdByNodeId})},[n,l,t]),s=(0,nk.JL)(l.createdByNodeId);return s?(0,a.jsx)(oL.F,{node:s,children:(0,a.jsxs)("button",{className:"group inline-flex items-center gap-2 rounded-2xl border-[1.5px] border-dashed border-purple-11 bg-purple-2 p-1 text-left hover:bg-purple-3 active:bg-purple-3",onClick:i,children:[(0,a.jsx)(ef.si,{className:"size-4 shrink-0",tool:t.tool}),(0,a.jsx)("span",{className:"text-xs font-medium text-slate-12",children:t.displayName}),(0,a.jsx)(oK.A,{className:"size-4 stroke-[3px] text-purple-11"})]})},s.id):null});var ow=l(14662),oR=l(18379),oD=l(58762);let oP=e=>{let{setInstructions:n,instructions:l,disabled:t,readOnly:i,inActionCard:s=!1,optional:r=!1,subtitle:o,placeholder:d,labelClassName:u,autoFocus:c=!1}=e;return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(nB.V,{label:"Prompt",optional:r,subtitle:o,labelClassName:u}),(0,a.jsx)(sr.g,{id:"instructions",className:oD.VU,disabled:t,readOnly:i,minHeight:100,maxHeight:s?100:550,onChange:n,value:l,placeholder:d,autoFocus:c},"instructions")]})},oM=(0,v.PA)(function(e){var n,l;let{node:t,identityFragmentRef:i}=e,s=x.a.enabledFeatureFlags.includes(eE.T.NewToolsModal),r=(0,M.useFragment)(oT,i),{isRenaming:o,confirmRename:d,onRename:u}=iT(t),c=(0,eD.Z)(),{isFullyOpen:g}=(0,Z.TT)(),{tools:m}=nN({actions:!0,agent:!0}),y=(0,es.useCallback)(e=>{t.setRequireConfirmation(e)},[t]),p=(0,es.useCallback)(e=>{let{checked:n,tool:l,action:a,statefulToolKey:i,createdByNodeId:s,authConfig:r}=e;if(!a)return;let o=t.agentStateNodeActions.filter(e=>!(e.tool===l&&e.action===a&&s===e.createdByNodeId));n&&o.push({tool:l,action:a,statefulToolKey:i,createdByNodeId:s,authConfig:r}),t.setAgentStateActions(o)},[t]),f=(0,nS.q2)(()=>t.agentStateNodeActions.reduce((e,n)=>{var l;let a=null!==(l=e[n.tool])&&void 0!==l?l:[];return a.push(n),e[n.tool]=a,e},{}),[t.agentStateNodeActions]),h=(0,es.useCallback)(()=>{c.addEphemeralConditionalEdge(t,{condition:"the task is complete"})},[c,t]);return(0,a.jsxs)(og,{children:[(0,a.jsx)(op,{icon:(0,a.jsx)(ok,{children:(0,a.jsx)(oR.K,{})}),title:null!==(n=t.displayNamePrimary)&&void 0!==n?n:"AI Agent",subtitle:t.displayNameSecondary,isRenaming:o,confirmRename:d,contextMenu:!o&&(0,a.jsx)(eS.y9,{children:(0,a.jsx)(tX,{node:t,onRename:u,identityFragmentRef:r})}),description:"Let AI decide what to do, until an exit condition is met."}),(0,a.jsx)(om,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-7",children:[(0,a.jsx)(oP,{instructions:null!==(l=t.guidelines)&&void 0!==l?l:"",subtitle:"",setInstructions:t.setGuidelines,readOnly:!1,disabled:!1,optional:!0,placeholder:"You are a polite customer support agent. Your job is to help the customer.",labelClassName:"mb-0 block select-none text-sm font-medium text-slate-11",autoFocus:g}),(0,a.jsx)(r7.R,{value:t.model,onChange:t.setModel,className:"mb-1.5 block select-none text-sm font-medium text-slate-11"}),(0,a.jsxs)("div",{className:"flex w-full flex-col",children:[(0,a.jsx)(nB.V,{label:"Ask for Confirmation",subtitle:"Require this Lindy state to ask for confirmation before using any skills with side effects.",tooltip:"Skills with side effects are the ones editing data, as opposed to just reading or searching it.",labelClassName:"mb-0 block select-none text-sm font-medium text-slate-11",optional:!0}),(0,a.jsx)(r1.m,{options:Object.values(r3.cr).map(e=>({label:r4(e),value:e})),value:t.requireConfirmation,onChange:y})]}),s?(0,a.jsx)(oN,{node:t}):(0,a.jsx)(oA,{node:t,tools:m,selectedToolsAndActions:f,handleToolsChange:p,title:"Skills",titleClassName:"mb-0 block select-none text-sm font-medium text-slate-11",subtitle:"Add actions for this agent to access when needed."}),(0,a.jsx)(oE,{node:t}),(0,a.jsx)("div",{children:(0,a.jsxs)(eb.$,{size:"sm",level:"outline",onClick:h,children:[(0,a.jsx)(oK.A,{className:"mr-2 size-4 text-slate-12"})," Add exit condition"]})})]})})]})}),oE=(0,v.PA)(function(e){let{node:n}=e,l=sZ(n),t=(0,nS.q2)(()=>l.flatMap(e=>Object.values(e.actions).map(n=>({tool:e,action:n}))).filter(e=>{let{action:n}=e;return n.suggest}).filter(e=>{let{tool:n}=e;return"userChannel"!==n.statefulToolKey}).filter(e=>!n.agentStateNodeActions.some(n=>n.tool===e.tool.tool&&n.action===e.action.key&&n.createdByNodeId===e.tool.createdByNodeId)),[l,n.agentStateNodeActions]);return 0===t.length?null:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-purple-11",children:[(0,a.jsx)(ow.m,{className:"size-4"}),(0,a.jsx)("span",{children:"Suggested skills"})]}),(0,a.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:t.map((e,l)=>{let{tool:t,action:i}=e;return(0,a.jsx)(o_,{node:n,action:i,tool:t},l)})})]})});var oV=l(72561),oG=l(79305);let oB=(0,es.forwardRef)(function(e,n){return(0,a.jsxs)(eS.VJ,{ref:n,className:"hover:bg-red-3",onClick:e.onClick,children:[(0,a.jsx)(eS.Hf,{children:(0,a.jsx)(lj.u,{className:(0,K.QP)(eS.b3,"stroke-red-8")})}),(0,a.jsx)(eS.AB,{className:"text-danger-9",children:"Delete"})]})}),oO=(0,es.forwardRef)(function(e,n){let[l,t]=(0,es.useState)(!1),{conditionPrefix:i}=e,s=i.concat(" "),r=(0,es.useCallback)(e=>{let n=e.target;n.selectionStart<s.length&&(e.preventDefault(),n.setSelectionRange(s.length,n.selectionEnd)),n.value&&n.setSelectionRange(n.value.length,n.value.length),t(!0)},[s]),o=(0,es.useCallback)(()=>{t(!1)},[]),d=(0,es.useCallback)(e=>{let n=e.target;n.selectionStart<s.length&&(e.preventDefault(),n.setSelectionRange(s.length,n.selectionEnd))},[s]),u=(0,es.useCallback)(n=>{e.onChange(n.slice(s.length))},[s,e]),c=(0,es.useCallback)(async n=>{if((n.metaKey||n.ctrlKey)&&("c"===n.key||"x"===n.key)){n.preventDefault(),n.stopPropagation();let l=n.target,a=Math.max(l.selectionStart-s.length,0),t=Math.max(l.selectionEnd-s.length,0),i=e.value.slice(a,t);if(await navigator.clipboard.writeText(i),"x"===n.key){let n=e.value.slice(0,a)+e.value.slice(t);e.onChange(n)}}},[s.length,e]),g=!e.value&&!l,m=g?s+'E.g. "the customer asks to speak to a human"':s+e.value;return(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsx)("div",{className:(0,K.QP)("absolute pl-2.5 pt-3 left-[3px] rounded-tl pr-[2px] pb-[3px] top-[1px] bg-slate-1 text-slate-12 transition-colors",lx.Cw,"text-slate-10 font-medium"),children:e.conditionPrefix}),(0,a.jsx)(sr.g,{ref:n,onFocus:r,onBlur:o,onSelect:d,onKeyDown:c,className:(0,K.QP)(lx.Cw,g?"text-slate-9":"text-slate-12"),value:m,onChange:u,minHeight:80,maxHeight:550,autoFocus:e.autoFocus})]})}),oz=(0,v.PA)(function(e){var n,l;let{edge:t,conditionPrefix:i,index:s,autoFocus:r,allowDelete:o=!1}=e,{setCondition:d,setLabel:u,delete:c}=t,g=(0,es.useRef)(null),m=(0,es.useRef)(null),y=null!==(n=t.condition)&&void 0!==n?n:"",p=null!==(l=t.label)&&void 0!==l?l:null!=s?"Condition ".concat(s+1):"Condition",f=!y,h=(0,es.useCallback)(()=>{p||u(null)},[p,u]),k=(0,es.useCallback)(()=>{requestAnimationFrame(()=>{var e,n;null===(e=m.current)||void 0===e||e.focus(),null===(n=m.current)||void 0===n||n.select()})},[]),F=(0,es.useCallback)(e=>{if("Enter"===e.key){var n;e.preventDefault(),e.stopPropagation(),null===(n=g.current)||void 0===n||n.focus()}},[g]);return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)(lv.J,{className:"flex w-full items-center justify-between",children:[(0,a.jsxs)("span",{className:"flex max-w-[90%] items-center gap-x-2",children:[(0,a.jsx)("span",{children:(0,a.jsx)(oG.V,{ref:m,className:(0,K.QP)("h-5 border-transparent px-0 text-sm text-slate-11 ring-0 flex-1 bg-transparent font-medium","-mx-1 py-0.5 px-1 rounded-sm transition","active:ring-0 focus:ring-0","focus:border-slate-5 active:border-slate-5 focus:bg-slate-1 active:bg-slate-1","hover:border-slate-4 hover:bg-slate-1"),onBlur:h,minWidth:8,maxWidth:f?330:352,onKeyDown:F,value:p,onChange:u})}),f&&(0,a.jsxs)(eJ.m_,{children:[(0,a.jsx)(eJ.ZI,{children:"Condition required"}),(0,a.jsx)(eJ.k$,{className:"ml-auto",children:(0,a.jsx)(iq.A,{className:"h-4 w-4 text-amber-9"})})]})]}),(0,a.jsx)("span",{className:"flex shrink-0 items-center",children:(0,a.jsxs)(ei.W1,{children:[(0,a.jsx)(ei.IU,{as:"div",children:(0,a.jsx)(eb.$,{level:"text",className:"group ml-3 flex h-5 w-5 !cursor-pointer items-center justify-center p-0.5 hover:border-slate-8 hover:bg-slate-5 active:border-slate-8 active:bg-slate-7",children:(0,a.jsx)(t0.A,{"aria-label":"Expand context menu",className:"group h-5 w-5 text-slate-11 transition-colors group-hover:text-slate-12"})})}),(0,a.jsxs)(ei.c,{style:eS.i3,anchor:"bottom end",className:eS.IJ,children:[(0,a.jsx)(ei.Dr,{children:(0,a.jsx)(eS.mT,{onClick:k})}),o&&(0,a.jsx)(ei.Dr,{children:(0,a.jsx)(oB,{onClick:c})})]})]})})]}),(0,a.jsx)(oO,{ref:g,value:y,onChange:d,autoFocus:r,conditionPrefix:i})]})}),oQ=(0,v.PA)(function(e){let{edge:n}=e,{isFullyOpen:l}=(0,Z.TT)();return(0,a.jsxs)(og,{children:[(0,a.jsx)(op,{title:"Condition",icon:(0,a.jsx)(ok,{className:"bg-violet-3",children:(0,a.jsx)(oV.O,{})})}),(0,a.jsx)(om,{children:(0,a.jsx)(oz,{edge:n,autoFocus:l,conditionPrefix:"Go down this path if"},n.id)}),(0,a.jsx)(ov,{})]})}),oq={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"EntryPointNodeEditor_Identity",selections:[{args:null,kind:"FragmentSpread",name:"NodeContextMenu_Identity"}],type:"Identity",abstractKey:null};oq.hash="86ea432d5f9f4244ae4d389fd5886168";var oU=l(66153);let oW=(0,v.PA)(function(e){var n;let{node:l}=e;return(0,a.jsx)(nY.V,{between:!0,left:!0,className:"size-full gap-y-7",children:(0,a.jsxs)("div",{className:"flex w-full flex-col gap-7",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(nB.V,{optional:!0,labelClassName:"block text-sm font-medium mb-0 select-none text-slate-11",label:"Greeting Message",subtitle:"This is the introductory message users see when they create a new task."}),(0,a.jsx)(sL.f,{id:"greeting",className:"bg-slate-1",onChange:l.setGreetingMessage,value:null!==(n=l.greetingMessage)&&void 0!==n?n:""},"greeting")]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(nB.V,{optional:!0,labelClassName:"block text-sm font-medium mb-0 select-none text-slate-11",label:"Conversation Starters",subtitle:"These are pre-set prompts that users can click to start a conversation."}),(0,a.jsx)(sG.H,{value:l.conversationStarters,onChange:l.setConversationStarters,placeholder:"Add a conversation starter"})]})]})})}),oH=(0,v.PA)(function(e){let{openSelectTriggerModal:n}=e;return(0,a.jsx)(nY.V,{className:"mb-3 flex h-full w-full flex-col items-start gap-7",children:(0,a.jsx)(nY.V,{left:!0,middle:!0,className:"h-full w-full",children:(0,a.jsxs)(nY.V,{center:!0,className:"w-full gap-y-4",children:[(0,a.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-amber-3",children:(0,a.jsx)(oU.f,{className:"h-[22px] w-[22px]"})}),(0,a.jsx)("span",{className:"text-sm font-semibold text-slate-12",children:"Select a trigger"}),(0,a.jsx)("span",{className:"text-sm text-slate-10",children:"Triggers are events that start your Lindy workflows"}),(0,a.jsx)(eb.$,{size:"sm",onClick:n,children:"Select trigger"})]})})})});var o$=l(23310),oZ=l(16354),oY=l(51588);function oJ(e){return(0,a.jsxs)("svg",{width:"234",height:"222",viewBox:"0 0 234 222",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,a.jsxs)("g",{filter:"url(#filter0_dd_1161_28576)",children:[(0,a.jsxs)("g",{clipPath:"url(#clip0_1161_28576)",children:[(0,a.jsx)("rect",{x:"12",width:"210",height:"198",rx:"20",fill:"white"}),(0,a.jsx)("rect",{width:"210",height:"28",transform:"translate(12)",fill:"#F8F9FA"}),(0,a.jsx)("circle",{cx:"27",cy:"14",r:"3",fill:"#E6E8EB"}),(0,a.jsx)("circle",{cx:"37",cy:"14",r:"3",fill:"#E6E8EB"}),(0,a.jsx)("circle",{cx:"47",cy:"14",r:"3",fill:"#E6E8EB"}),(0,a.jsx)("rect",{x:"74",y:"10",width:"86",height:"8",rx:"4",fill:"#ECEEF0"}),(0,a.jsx)("circle",{cx:"197",cy:"14",r:"3",fill:"#E6E8EB"}),(0,a.jsx)("rect",{x:"62.5",y:"38",width:"109",height:"12",rx:"6",fill:"#F1F3F5"}),(0,a.jsx)("rect",{x:"106.5",y:"54.2515",width:"21",height:"8",rx:"4",fill:"#F1F3F5"}),(0,a.jsx)("rect",{x:"94",y:"66.5024",width:"21",height:"8",rx:"4",fill:"#F1F3F5"}),(0,a.jsx)("rect",{x:"119",y:"66.5024",width:"21",height:"8",rx:"4",fill:"#F1F3F5"}),(0,a.jsx)("rect",{x:"24.5",y:"87.0327",width:"185",height:"141",rx:"4",fill:"url(#paint0_linear_1161_28576)"}),(0,a.jsx)("rect",{x:"150.5",y:"84.5",width:"65",height:"107",rx:"14.5",fill:"#E8F3FF",stroke:"#3B82F6"})]}),(0,a.jsx)("rect",{x:"12.5",y:"0.5",width:"209",height:"197",rx:"19.5",stroke:"#ECEEF0"})]}),(0,a.jsxs)("defs",{children:[(0,a.jsxs)("filter",{id:"filter0_dd_1161_28576",x:"0",y:"0",width:"234",height:"222",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,a.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,a.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,a.jsx)("feMorphology",{radius:"4",operator:"erode",in:"SourceAlpha",result:"effect1_dropShadow_1161_28576"}),(0,a.jsx)("feOffset",{dy:"12"}),(0,a.jsx)("feGaussianBlur",{stdDeviation:"8"}),(0,a.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.054902 0 0 0 0 0.0901961 0 0 0 0 0.152941 0 0 0 0.1 0"}),(0,a.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_1161_28576"}),(0,a.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,a.jsx)("feMorphology",{radius:"2",operator:"erode",in:"SourceAlpha",result:"effect2_dropShadow_1161_28576"}),(0,a.jsx)("feOffset",{dy:"4"}),(0,a.jsx)("feGaussianBlur",{stdDeviation:"3"}),(0,a.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.054902 0 0 0 0 0.0901961 0 0 0 0 0.152941 0 0 0 0.06 0"}),(0,a.jsx)("feBlend",{mode:"normal",in2:"effect1_dropShadow_1161_28576",result:"effect2_dropShadow_1161_28576"}),(0,a.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect2_dropShadow_1161_28576",result:"shape"})]}),(0,a.jsxs)("linearGradient",{id:"paint0_linear_1161_28576",x1:"117",y1:"87.0327",x2:"117",y2:"164",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"#F1F3F5"}),(0,a.jsx)("stop",{offset:"1",stopColor:"white"})]}),(0,a.jsx)("clipPath",{id:"clip0_1161_28576",children:(0,a.jsx)("rect",{x:"12",width:"210",height:"198",rx:"20",fill:"white"})})]})]})}let oX=(0,v.PA)(function(e){let{node:n}=e;return(0,eh.B2)(n)&&n.triggerDefinition&&n.authConfig?(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(aD.a,{identityId:x.a.auth.owner,authConfig:n.authConfig,auth:n.auth,authList:n.authList,isMissingScopes:n.isMissingAuthScopes,displayName:n.triggerDefinition.displayName,tool:n.triggerDefinition.tool,onChange:n.setAuth},n.id)}):null}),o0=(0,v.PA)(function(e){var n,l;let{node:t,openLindyEmbedConfigModal:i}=e,s=(0,i4.Mt)({params:{tool:t.trigger.tool,trigger:t.trigger.name},query:t.authId&&!t.isMissingAuthScopes?{authId:t.authId}:{}}),r=(0,es.useCallback)((e,n,l)=>{t.addTriggerSetupEntry(n,l)},[t]),o=null===(l=x.a.lindies.currentLindy)||void 0===l?void 0:null===(n=l.agentSettings)||void 0===n?void 0:n.model,d=t.trigger.name===rm.hb,u=(0,nS.q2)(()=>{var e,n;if(null===(e=s.data)||void 0===e?void 0:e.authorized)return null!==(n=i7(s.data,t))&&void 0!==n?n:void 0},[s.data,t]);return(0,a.jsx)(nY.V,{between:!d,className:"mb-3 flex size-full flex-col items-start gap-7",children:d?(0,a.jsxs)(nY.V,{className:"mt-4 size-full max-h-[286px] rounded-3xl bg-embed-lindy-gradient",children:[(0,a.jsx)(oJ,{}),(0,a.jsx)(eb.$,{level:"outline",className:"bg-white dark:bg-slate-1",onClick:i,children:"Configure Embed Settings"})]}):(0,a.jsx)(nP.o,{query:s,children:(0,a.jsxs)(nY.V,{left:!0,className:"w-full gap-y-7",children:[(0,a.jsx)(oX,{node:t}),u&&(0,a.jsx)(o1,{trigger:u,setTriggerConfig:r,currentAgentModel:o,hydrationObject:t.dynamicLoaderHydrationObject})]})})})}),o1=(0,v.PA)(function(e){let{trigger:n,setTriggerConfig:l,currentAgentModel:t,hydrationObject:i}=e,s=(0,es.useMemo)(()=>null==n?void 0:n.triggerFields.reduce((e,n)=>("dynamic-loader"===n.type&&e.push(n.loader),e),[]),[null==n?void 0:n.triggerFields]),r=(0,es.useCallback)(e=>{l(e.key,e.field,e.value)},[l]),o=(0,nS.q2)(()=>new oY.F({rawDynamicLoaders:s,hydrationObject:i,loaderChangeCallback:r,authId:n.authId}),[s,i,r,n.authId]);return n?(0,a.jsx)("div",{className:"w-full",children:(0,a.jsxs)(oZ.u,{loadersStore:o,className:"mb-7",children:[o.allLoadersSet&&(0,a.jsx)(o$.V,{setTriggerConfig:l,trigger:n,authId:n.authId,showNavigation:!1,currentAgentModel:t,showControlButtons:!1,isFromModal:!1}),n.gatedFeaturesCallToAction&&(0,a.jsx)(rH,{className:"mt-4",callToAction:n.gatedFeaturesCallToAction})]})}):null}),o2=(0,v.PA)(function(e){let{node:n,openSelectTriggerModal:l,openLindyEmbedConfigModal:t}=e;return(0,eh.B2)(n)?(0,a.jsx)(o0,{node:n,openLindyEmbedConfigModal:t}):(0,a.jsx)(oH,{openSelectTriggerModal:l})}),o3=(0,v.PA)(function(e){var n,l;let{node:t,identityFragmentRef:i}=e,s=x.a.enabledFeatureFlags.includes(eE.T.NewToolsModal),r=(0,M.useFragment)(oq,i),o=(0,nb.j)();oe((0,eh.jq)(t)&&!t.trigger,o.onOpen);let d=(0,nb.j)(!1),{isRenaming:u,confirmRename:c,onRename:g}=iT(t),m=(0,es.useCallback)(e=>{o.onClose(),t.addTrigger(e),e.tool===eF.h6.LindyEmbed&&e.name===rm.hb&&d.onOpen()},[t,d,o]),y=(0,es.useCallback)(e=>{d.onClose(),t.setTriggerSetup(e)},[t,d]),p=(0,nS.q2)(()=>t.isTriggerEntryPointNode?(0,ii.HO)(t.triggerSetup):null,[t.isTriggerEntryPointNode,t.triggerSetup]),f=null!==(l=t.displayNamePrimary)&&void 0!==l?l:"Select Trigger",h=t.displayNameSecondary,k=(0,eh.jq)(t)?null===(n=t.triggerDefinition)||void 0===n?void 0:n.description:null;return(0,a.jsxs)(og,{children:[(0,a.jsx)(op,{icon:t.tool?(0,a.jsx)(ef.if,{tool:t.tool,className:"size-8",triggerIconClassName:"h-4 w-4"}):(0,a.jsx)(ok,{className:"bg-amber-3",children:(0,a.jsx)(oU.f,{className:"size-5"})}),title:f,subtitle:h,description:k,isRenaming:u,confirmRename:c,contextMenu:!u&&(0,a.jsx)(er.y9,{children:(0,a.jsx)(tX,{node:t,onRename:g,identityFragmentRef:r})})}),(0,a.jsxs)(om,{children:[(0,eh.Eq)(t)&&(0,a.jsx)(oW,{node:t}),(0,eh.jq)(t)&&(0,a.jsx)(o2,{node:t,openSelectTriggerModal:s?t.openToolsModal:o.onOpen,openLindyEmbedConfigModal:s?t.openLindyEmbedModal:d.onOpen}),(0,a.jsx)(nL.aF,{className:"w-auto max-w-none py-0 sm:w-auto sm:max-w-none",open:o.isOpen,setClosed:o.onClose,children:(0,a.jsx)(l7,{selectTrigger:m})}),!!p&&(0,a.jsx)(nL.aF,{className:"w-auto max-w-none p-0 sm:w-auto sm:max-w-none",open:d.isOpen,setClosed:d.onClose,children:(0,a.jsxs)(l4.$,{className:"max-w-full p-0 xl:w-[1223px]",children:[(0,a.jsx)("div",{className:"p-6 pb-0",children:(0,a.jsx)(l6.o,{onClick:d.onClose})}),(0,a.jsx)(lV.yE,{className:"flex flex-1 flex-col",children:(0,a.jsx)(s$,{actionArgs:p,onSave:y})})]})})]})]})}),o6=(0,v.PA)(function(e){let{edge:n}=e,{isFullyOpen:l}=(0,Z.TT)();return(0,a.jsxs)(og,{children:[(0,a.jsx)(op,{title:"Exit condition",icon:(0,a.jsx)(ok,{className:"bg-violet-3",children:(0,a.jsx)(oV.O,{})})}),(0,a.jsxs)(om,{children:[(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-slate-12",children:["When should Lindy exit this AI agent?",(0,a.jsx)("span",{className:"text-xs text-slate-11",children:" (required)"})]}),(0,a.jsx)("p",{className:"mb-2 text-xs text-slate-10",children:"The AI Agent step will continue to execute on its task until it determines it is complete."}),(0,a.jsx)("p",{className:"text-xs text-slate-10",children:"Optionally, you can type a specific condition for when to exit below."})]}),(0,a.jsx)(oz,{edge:n,autoFocus:l,conditionPrefix:"Exit once"},n.id)]})]})}),o5={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LogicNodeEditor_Identity",selections:[{args:null,kind:"FragmentSpread",name:"NodeContextMenu_Identity"}],type:"Identity",abstractKey:null};o5.hash="692f4e90cee381ab57fec29018631111";let o4=(0,v.PA)(function(e){let{node:n,identityFragmentRef:l}=e,t=(0,M.useFragment)(o5,l),i=(0,eD.Z)(),{isFullyOpen:s}=(0,Z.TT)(),{outgoingEdges:r,setModel:o,displayNamePrimary:d,model:u,displayNameSecondary:c}=n,{isRenaming:g,confirmRename:m,onRename:y}=iT(n),p=(0,es.useCallback)(()=>{i.addEphemeralConditionalEdge(n)},[n,i]);return(0,a.jsxs)(og,{children:[(0,a.jsx)(op,{title:null!=d?d:"Condition",subtitle:c,icon:(0,a.jsx)(ok,{children:(0,a.jsx)(oV.O,{})}),isRenaming:g,confirmRename:m,contextMenu:!g&&(0,a.jsx)(eS.y9,{children:(0,a.jsx)(tX,{node:n,onRename:y,identityFragmentRef:t})})}),(0,a.jsx)(om,{children:(0,a.jsxs)("div",{className:"flex w-full flex-col gap-y-7",children:[(0,a.jsx)("div",{children:(0,a.jsx)(r7.R,{value:u,onChange:o})}),r.map((e,n)=>e.isStandardEdge?(0,a.jsx)(oz,{edge:e,index:n,autoFocus:0===n&&s,allowDelete:r.length>1,conditionPrefix:"Go down this path if"},e.id):null),(0,a.jsx)("p",{className:"text-sm font-normal text-slate-11",children:"Please define each condition. Lindy will follow the first path which condition is met. Add examples to improve performance."}),(0,a.jsx)("div",{children:(0,a.jsxs)(eb.$,{size:"sm",level:"outline",onClick:p,children:[(0,a.jsx)(oK.A,{className:"size-4 text-slate-12"})," Add Condition"]})})]})})]})}),o7=(0,v.PA)(function(e){let{selectedEntity:n,identityFragmentRef:l}=e,t=(0,M.useFragment)(rU,l);if(n instanceof eK.nN&&n.isStandardEdge){let e=n.from;if(n.shouldRequireCondition&&(0,eh.Ri)(e))return(0,a.jsx)(oQ,{edge:n});if(n.shouldRequireCondition&&(0,eh.P8)(e))return(0,a.jsx)(o6,{edge:n})}return(0,eh.HY)(n)?(0,a.jsx)(oS,{node:n,identityFragmentRef:t}):(0,eh.P8)(n)?(0,a.jsx)(oM,{node:n,identityFragmentRef:t}):(0,eh.ji)(n)?(0,a.jsx)(o3,{node:n,identityFragmentRef:t}):(0,eh.Ri)(n)?(0,a.jsx)(o4,{node:n,identityFragmentRef:t}):null}),o9=(0,v.PA)(function(e){var n;let l=(0,M.useFragment)(rO,e.queryFragmentRef),t=(0,M.useFragment)(rz,e.agentDefinitionFragmentRef),i=(0,M.useFragment)(rQ,e.stateGraphTestRunFragmentRef);return(0,a.jsx)("div",{className:"relative size-full border-l-1 border-l-slate-4 bg-white dark:bg-slate-1",children:x.a.ui.isTestingPanelOpen?(0,a.jsx)(rq.u,{queryFragmentRef:l,agentDefinitionFragmentRef:t,stateGraphTestRunFragmentRef:i,className:"size-full"}):(0,a.jsx)(o7,{selectedEntity:e.selectedEntity,identityFragmentRef:l.me},null===(n=e.selectedEntity)||void 0===n?void 0:n.id)})}),o8="editor-graph-section",de=(0,v.PA)(function(e){var n,l,t;let i=(0,M.useFragment)(U,e.queryFragmentRef),s=(0,M.useFragment)(W,e.agentDefinitionFragmentRef),r=(0,M.useFragment)(H,e.stateGraphTestRunFragmentRef),o=null===(l=x.a.lindies)||void 0===l?void 0:null===(n=l.currentLindy)||void 0===n?void 0:n.stateGraph,d=null!==(t=null==o?void 0:o.selectedEntity)&&void 0!==t?t:null,u=!!(null==o?void 0:o.showSidebarPanelForSelectedEntity);return(0,J.f)(),(0,ee.x)(),(0,X.f)(),(0,a.jsxs)(en.tn,{identityFragmentRef:i.me,agentDefinitionFragmentRef:s,children:[(0,a.jsx)($.f,{top:!0,className:(0,K.QP)("relative size-full",o8),children:(0,a.jsx)(Z.L5,{open:u||x.a.ui.isTestingPanelOpen,mainContent:(0,a.jsx)(Y.mF,{children:(0,a.jsx)(sS,{identityFragmentRef:i.me})}),panelContent:(0,a.jsx)(o9,{queryFragmentRef:i,agentDefinitionFragmentRef:s,stateGraphTestRunFragmentRef:r,selectedEntity:d}),persistKey:Z.Y4.EditorSidebar,defaultWidth:400,minWidth:400,maxWidth:800})}),(0,a.jsx)(rB,{identityFragmentRef:i.me})]})}),dn=t,dl=function(e){var n,l,t,k,F;let{[o.wG]:x}=(0,P.useRouter)().query,v=(0,M.useLazyLoadQuery)(dn,{nodeId:(0,_.F)("AgentDefinition",e.lindyId),hasTestRunId:!!x,testRunId:"string"==typeof x?(0,_.F)("StateGraphTestRun",x):""}),b=(null===(n=v.node)||void 0===n?void 0:n.__typename)==="AgentDefinition"?v.node:null,S=v.stateGraphTestRun;return(t=v.me.id,k=e.lindyId,F=null==b?void 0:b.name,(0,E.f)(O.settingsLayoutQuery,{nodeId:(0,_.F)("AgentDefinition",k)}),(0,E.f)(Q.threadsLayoutQuery,{nodeId:(0,_.F)("AgentDefinition",k),count:z.cV,cursor:null}),(0,q.dH)(),(0,B.h)(k,F),(0,G.F)("editor"),(0,V.L)({identityId:t,agentDefinitionId:k}),null==b?void 0:null===(l=b.stateGraph)||void 0===l?void 0:l.id)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(D(),{children:(0,a.jsxs)("title",{children:[b.name," - Lindy"]})}),(0,a.jsx)(w.Ln,{children:(0,a.jsx)(d.i,{userId:v.me.id,identityFragmentRef:v.me,children:(0,a.jsx)(r.u,{identityFragmentRef:v.me,children:(0,a.jsx)(u.V,{sidebar:(0,a.jsx)(f.Qm,{view:"editor",identityFragmentRef:v.me}),header:(0,a.jsxs)(y.X,{children:[(0,a.jsx)("div",{className:"flex flex-1 items-center",children:(0,a.jsx)(g.X,{agentDefinitionFragmentRef:b,agentEnabledSwitch:(0,a.jsx)(L.q,{agentDefinitionFragmentRef:b})})}),(0,a.jsx)("div",{className:"flex flex-1 items-center justify-center",children:(0,a.jsx)(c.U,{lindyId:b.id,lindyName:b.name,view:"editor",agentDefinitionFragmentRef:b})}),(0,a.jsxs)("div",{className:"flex min-w-fit flex-1 flex-row items-center justify-end gap-x-2",children:[v.me.isAdmin&&(0,a.jsx)(N,{}),(0,a.jsx)(s.w,{menuPosition:"bottom-left",buttonWrapperClassName:"flex h-8"}),(0,a.jsx)(h.g,{}),(0,a.jsx)(m.K,{identityFragmentRef:v.me,agentDefinitionFragmentRef:b})]})]}),content:(0,a.jsxs)(A,{children:[(0,a.jsx)(de,{queryFragmentRef:v,agentDefinitionFragmentRef:b,stateGraphTestRunFragmentRef:S},b.id),(0,a.jsx)(p.v,{lindyId:b.id,lindyName:b.name,agentDefinitionFragmentRef:b})]})})})})})]}):(0,a.jsx)(i.r,{to:"/home"})}},53758:(e,n,l)=>{"use strict";l.d(n,{tn:()=>x,AL:()=>F});var a=l(50612);let t=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LindyStoreLoader_Identity",selections:[e,{alias:null,args:null,kind:"ScalarField",name:"enabledFeatureFlags",storageKey:null},{alias:null,args:null,concreteType:"Auth",kind:"LinkedField",name:"auth",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"fields",storageKey:null},e,{alias:null,args:null,kind:"ScalarField",name:"isConnected",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"method",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"provider",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scopes",storageKey:null}],storageKey:null}],type:"Identity",abstractKey:null}}();t.hash="ab565f8fc3cb14593123a932de2185b3";let i=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"model",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"from",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"to",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"inflectionY",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},g=[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],m={alias:null,args:null,concreteType:"NodePosition",kind:"LinkedField",name:"position",plural:!1,selections:g,storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"manuallyPositioned",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"guidelines",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"requireConfirmation",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"isPremium",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"tool",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"method",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"provider",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"scopes",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"fields",storageKey:null},T=[s,x,v],K={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"authConfig",plural:!1,selections:[{kind:"InlineFragment",selections:[s,x,v,b],type:"OAuth2AuthConfig",abstractKey:null},{kind:"InlineFragment",selections:[s,x,v,S],type:"CustomAuthConfig",abstractKey:null},{kind:"InlineFragment",selections:[s,S,x,v,b],type:"CustomOAuth2AuthConfig",abstractKey:null},{kind:"InlineFragment",selections:T,type:"TokenAuthConfig",abstractKey:null},{kind:"InlineFragment",selections:T,type:"PipedreamAuthConfig",abstractKey:null}],storageKey:null},I={alias:null,args:null,kind:"ScalarField",name:"createdByNodeId",storageKey:null},C={alias:null,args:null,kind:"ScalarField",name:"statefulToolKey",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"dependencies",storageKey:null},N={alias:null,args:null,kind:"ScalarField",name:"placeholder",storageKey:null},L={alias:null,args:null,concreteType:"DynamicLoaderDefaultValue",kind:"LinkedField",name:"defaultValue",plural:!1,selections:[n,a],storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"icon",storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"field",storageKey:null},R=[L,j,A,c,w,_,F,N],D=[{alias:null,args:null,kind:"ScalarField",name:"agentMessageReceivedSchema",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"immediateEdgeLabel",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"observableEdgeLabel",storageKey:null},C],P=[e],M={alias:null,args:null,concreteType:"Auth",kind:"LinkedField",name:"auth",plural:!1,selections:P,storageKey:null},E={alias:null,args:null,kind:"ScalarField",name:"tooltip",storageKey:null},V={alias:null,args:null,kind:"ScalarField",name:"isRequired",storageKey:null},G={alias:null,args:null,kind:"ScalarField",name:"canBeSharedWithTemplate",storageKey:null},B=[s,F,t,N,A,E,V,G,r,S],O=[s,F,t,N,A,E,V,G,r,S,{alias:null,args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],z={alias:null,args:null,kind:"ScalarField",name:"isContextDependent",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LindyStoreLoader_AgentDefinition",selections:[e,n,{alias:null,args:null,kind:"ScalarField",name:"instructions",storageKey:null},l,{alias:null,args:null,kind:"ScalarField",name:"shouldAskForConfirmation",storageKey:null},{alias:null,args:null,concreteType:"AgentIcon",kind:"LinkedField",name:"icon",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Memory",kind:"LinkedField",name:"memories",plural:!0,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"isActive",storageKey:null},a],storageKey:null},{alias:null,args:null,concreteType:"AgentDefinitionTag",kind:"LinkedField",name:"tags",plural:!0,selections:[e,t],storageKey:null},{alias:null,args:null,concreteType:"StateGraph",kind:"LinkedField",name:"stateGraph",plural:!1,selections:[e,i,{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:[e,i],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"version",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"autoLayoutEnabled",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"edges",plural:!0,selections:[{kind:"InlineFragment",selections:[s,e,r,o,d,u],type:"ObserveEdge",abstractKey:null},{kind:"InlineFragment",selections:[s,e,r,o,d,u,{alias:null,args:null,kind:"ScalarField",name:"condition",storageKey:null},t],type:"StandardEdge",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[{kind:"InlineFragment",selections:[s,e,r,i,c,m,y,p,l,f,{alias:null,args:null,concreteType:"StateGraphAction",kind:"LinkedField",name:"actions",plural:!0,selections:[{alias:null,args:null,concreteType:"ActionDetails",kind:"LinkedField",name:"action",plural:!1,selections:[h,k,F,K],storageKey:null},I,C],storageKey:null}],type:"AgentStateNode",abstractKey:null},{kind:"InlineFragment",selections:[s,e,r,i,c,m,y,{alias:null,args:null,concreteType:"StateGraphAction",kind:"LinkedField",name:"actionDefinition",plural:!1,selections:[I,C,{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[i,A,c,{alias:null,args:null,kind:"ScalarField",name:"isPopular",storageKey:null},k],storageKey:null},{alias:null,args:null,concreteType:"ActionDetails",kind:"LinkedField",name:"action",plural:!1,selections:[i,F,k,{alias:null,args:null,kind:"ScalarField",name:"toolDisplayName",storageKey:null},j,A,c,{alias:null,args:null,concreteType:"InputTree",kind:"LinkedField",name:"inputTree",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"fields",plural:!0,selections:[{kind:"InlineFragment",selections:[r,F,{alias:null,args:null,kind:"ScalarField",name:"output",storageKey:null},c,A,N,L,_],type:"InputTreeDynamicField",abstractKey:null},{kind:"InlineFragment",selections:[r,{alias:null,args:null,kind:"ScalarField",name:"schema",storageKey:null},w],type:"InputTreeStaticField",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"parentFields",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"inputSchema",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"outputSchema",storageKey:null},K,{alias:null,args:null,kind:"ScalarField",name:"deprecated",storageKey:null},{alias:null,args:null,concreteType:"DynamicLoaders",kind:"LinkedField",name:"dynamicLoaders",plural:!1,selections:[{alias:null,args:null,concreteType:"DynamicLoaderDetails",kind:"LinkedField",name:"loaders",plural:!0,selections:R,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"refetchInputAfterLoad",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ObservableChannelMetadata",kind:"LinkedField",name:"observableChannel",plural:!1,selections:D,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasSideEffects",storageKey:null},h,{alias:null,args:null,kind:"ScalarField",name:"premiumActionCost",storageKey:null},{alias:null,args:null,concreteType:"ActionProperty",kind:"LinkedField",name:"outputProperties",plural:!0,selections:[c,r,a],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ActionConfigurationMember",kind:"LinkedField",name:"actionConfiguration",plural:!0,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"allowAdditionalArrayEntries",storageKey:null},{alias:null,args:null,concreteType:"ActionConfigurationMemberManualResult",kind:"LinkedField",name:"manualResult",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isUndefined",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isNull",storageKey:null},a],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"path",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"prompt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"unionType",storageKey:null}],storageKey:null},M,p,{alias:null,args:null,concreteType:"KnowledgeSource",kind:"LinkedField",name:"knowledgeSources",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"entryCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entryCountDisabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEnabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"source",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"syncStatus",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"syncToBeCompletedBy",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalFileSize",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalNumCharacters",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalNumEmbeddings",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalNumErrors",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalNumTokens",storageKey:null}],storageKey:null},l,{alias:null,args:null,kind:"ScalarField",name:"occurrence",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"statefulToolOccurrence",storageKey:null},f],type:"ActionNode",abstractKey:null},{kind:"InlineFragment",selections:[s,e,r,i,c,m,y,{alias:null,args:null,kind:"ScalarField",name:"greetingMessage",storageKey:null},{alias:null,args:null,concreteType:"ConversationStarter",kind:"LinkedField",name:"conversationStarters",plural:!0,selections:[a],storageKey:null}],type:"EntryPointConversationNode",abstractKey:null},{kind:"InlineFragment",selections:[s,e,r,i,c,m,y,M,{alias:null,args:null,kind:"ScalarField",name:"triggerSetup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"triggerEnabled",storageKey:null},{alias:null,args:null,concreteType:"Trigger",kind:"LinkedField",name:"trigger",plural:!1,selections:[e,{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:P,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isConfigured",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPendingVerification",storageKey:null},{alias:null,args:null,concreteType:"TriggerSetup",kind:"LinkedField",name:"setup",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"actionArgs",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"actionName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"toolName",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"TriggerDefinition",kind:"LinkedField",name:"triggerDefinition",plural:!1,selections:[{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[k,c],storageKey:null},n,K,{alias:null,args:null,concreteType:"ToolTriggerChannel",kind:"LinkedField",name:"channel",plural:!1,selections:[C],storageKey:null},A,c,{alias:null,args:null,kind:"ScalarField",name:"eventSchema",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"fields",plural:!0,selections:[{kind:"InlineFragment",selections:[s,F,t,N,A,E,V,G,r,S,{alias:"defaultText",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldText",abstractKey:null},{kind:"InlineFragment",selections:[s,F,t,N,A,E,V,G,r,S,{alias:"defaultNumber",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"step",storageKey:null}],type:"TriggerFieldNumber",abstractKey:null},{kind:"InlineFragment",selections:B,type:"TriggerFieldLindyEmbedConfig",abstractKey:null},{kind:"InlineFragment",selections:[s,F,t,N,A,E,V,G,r,S,{alias:"defaultDate",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldDateTime",abstractKey:null},{kind:"InlineFragment",selections:O,type:"TriggerFieldAutoObserve",abstractKey:null},{kind:"InlineFragment",selections:[s,F,t,N,A,E,V,G,r,S,{alias:"defaultLindyMail",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldLindyMail",abstractKey:null},{kind:"InlineFragment",selections:[s,F,t,N,A,E,V,G,r,S,{alias:"defaultWebhook",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldLindyWebhook",abstractKey:null},{kind:"InlineFragment",selections:B,type:"TriggerFieldLindyPhoneNumber",abstractKey:null},{kind:"InlineFragment",selections:O,type:"TriggerFieldElevenLabsVoice",abstractKey:null},{kind:"InlineFragment",selections:[s,F,t,N,A,E,V,G,r,S,{alias:"defaultRecurringSchedule",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldRecurringSchedule",abstractKey:null},{kind:"InlineFragment",selections:[s,F,t,N,A,E,V,G,r,S,{alias:"defaultChecked",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldCheckbox",abstractKey:null},{kind:"InlineFragment",selections:B,type:"TriggerFieldLabel",abstractKey:null},{kind:"InlineFragment",selections:[s,F,t,N,A,E,V,G,r,S,{alias:null,args:null,kind:"ScalarField",name:"aliases",storageKey:null}],type:"TriggerFieldComparableText",abstractKey:null},{kind:"InlineFragment",selections:[s,F,t,N,A,E,V,G,r,S,{alias:"defaultItem",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"selectFirstByDefault",storageKey:null},z],type:"TriggerFieldSelect",abstractKey:null},{kind:"InlineFragment",selections:[s,F,t,N,A,E,V,G,r,S,{alias:"defaultItems",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasAllowAllOption",storageKey:null},z],type:"TriggerFieldMultiSelect",abstractKey:null},{kind:"InlineFragment",selections:[s,F,t,N,A,E,V,G,r,S,{alias:null,args:null,concreteType:"DynamicLoaderDetails",kind:"LinkedField",name:"loader",plural:!1,selections:R,storageKey:null}],type:"TriggerFieldDynamicLoader",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasPublishableConfig",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isHighThroughput",storageKey:null},h,{alias:null,args:null,concreteType:"ObservableChannelMetadata",kind:"LinkedField",name:"otherObservableChannel",plural:!1,selections:D,storageKey:null},{alias:null,args:null,concreteType:"TriggerTestingPolicy",kind:"LinkedField",name:"testingPolicy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"supportsSyntheticPayload",storageKey:null}],storageKey:null}],storageKey:null}],type:"EntryPointTriggerNode",abstractKey:null},{kind:"InlineFragment",selections:[s,e,r,i,c,m,y,l],type:"LogicNode",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StateGraphStickyNote",kind:"LinkedField",name:"stickyNotes",plural:!0,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"note",storageKey:null},{alias:null,args:null,concreteType:"StickyNotePosition",kind:"LinkedField",name:"position",plural:!1,selections:g,storageKey:null}],storageKey:null}],storageKey:null}],type:"AgentDefinition",abstractKey:null}}();i.hash="312c91060b76adf898b919474b5b3d45";let s=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"nodeId"}],n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"enabledFeatureFlags",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"fields",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"isConnected",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"method",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"provider",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"scopes",storageKey:null},d=[{kind:"Variable",name:"id",variableName:"nodeId"}],u={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"instructions",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"model",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"shouldAskForConfirmation",storageKey:null},p={alias:null,args:null,concreteType:"AgentIcon",kind:"LinkedField",name:"icon",plural:!1,selections:[c,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null}],storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null},h={alias:null,args:null,concreteType:"Memory",kind:"LinkedField",name:"memories",plural:!0,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"isActive",storageKey:null},f],storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},F=[n,k],x={alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:F,storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"version",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"autoLayoutEnabled",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},T={alias:null,args:null,kind:"ScalarField",name:"from",storageKey:null},K={alias:null,args:null,kind:"ScalarField",name:"to",storageKey:null},I={alias:null,args:null,kind:"ScalarField",name:"inflectionY",storageKey:null},C={alias:null,args:null,kind:"ScalarField",name:"condition",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},j=[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],N={alias:null,args:null,concreteType:"NodePosition",kind:"LinkedField",name:"position",plural:!1,selections:j,storageKey:null},L={alias:null,args:null,kind:"ScalarField",name:"manuallyPositioned",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"guidelines",storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"requireConfirmation",storageKey:null},R={alias:null,args:null,kind:"ScalarField",name:"isPremium",storageKey:null},D={alias:null,args:null,kind:"ScalarField",name:"tool",storageKey:null},P={alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},M=[u,s,r],E={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"authConfig",plural:!1,selections:[{kind:"InlineFragment",selections:[u,s,r,o],type:"OAuth2AuthConfig",abstractKey:null},{kind:"InlineFragment",selections:[u,s,r,a],type:"CustomAuthConfig",abstractKey:null},{kind:"InlineFragment",selections:[u,a,s,r,o],type:"CustomOAuth2AuthConfig",abstractKey:null},{kind:"InlineFragment",selections:M,type:"TokenAuthConfig",abstractKey:null},{kind:"InlineFragment",selections:M,type:"PipedreamAuthConfig",abstractKey:null}],storageKey:null},V={alias:null,args:null,kind:"ScalarField",name:"createdByNodeId",storageKey:null},G={alias:null,args:null,kind:"ScalarField",name:"statefulToolKey",storageKey:null},B={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},O={alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[k,B,A,{alias:null,args:null,kind:"ScalarField",name:"isPopular",storageKey:null},D],storageKey:null},z={alias:null,args:null,kind:"ScalarField",name:"toolDisplayName",storageKey:null},Q={alias:null,args:null,kind:"ScalarField",name:"dependencies",storageKey:null},q={alias:null,args:null,kind:"ScalarField",name:"placeholder",storageKey:null},U={alias:null,args:null,concreteType:"DynamicLoaderDefaultValue",kind:"LinkedField",name:"defaultValue",plural:!1,selections:[c,f],storageKey:null},W={alias:null,args:null,kind:"ScalarField",name:"icon",storageKey:null},H={kind:"InlineFragment",selections:[S,P,{alias:null,args:null,kind:"ScalarField",name:"output",storageKey:null},A,B,q,U,W],type:"InputTreeDynamicField",abstractKey:null},$={alias:null,args:null,kind:"ScalarField",name:"field",storageKey:null},Z={kind:"InlineFragment",selections:[S,{alias:null,args:null,kind:"ScalarField",name:"schema",storageKey:null},$],type:"InputTreeStaticField",abstractKey:null},Y={alias:null,args:null,kind:"ScalarField",name:"parentFields",storageKey:null},J={alias:null,args:null,kind:"ScalarField",name:"inputSchema",storageKey:null},X={alias:null,args:null,kind:"ScalarField",name:"outputSchema",storageKey:null},ee={alias:null,args:null,kind:"ScalarField",name:"deprecated",storageKey:null},en=[U,Q,B,A,$,W,P,q],el={alias:null,args:null,concreteType:"DynamicLoaders",kind:"LinkedField",name:"dynamicLoaders",plural:!1,selections:[{alias:null,args:null,concreteType:"DynamicLoaderDetails",kind:"LinkedField",name:"loaders",plural:!0,selections:en,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"refetchInputAfterLoad",storageKey:null}],storageKey:null},ea=[{alias:null,args:null,kind:"ScalarField",name:"agentMessageReceivedSchema",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"immediateEdgeLabel",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"observableEdgeLabel",storageKey:null},G],et={alias:null,args:null,concreteType:"ObservableChannelMetadata",kind:"LinkedField",name:"observableChannel",plural:!1,selections:ea,storageKey:null},ei={alias:null,args:null,kind:"ScalarField",name:"hasSideEffects",storageKey:null},es={alias:null,args:null,kind:"ScalarField",name:"premiumActionCost",storageKey:null},er={alias:null,args:null,concreteType:"ActionProperty",kind:"LinkedField",name:"outputProperties",plural:!0,selections:[A,S,f],storageKey:null},eo={alias:null,args:null,concreteType:"ActionConfigurationMember",kind:"LinkedField",name:"actionConfiguration",plural:!0,selections:[S,{alias:null,args:null,kind:"ScalarField",name:"allowAdditionalArrayEntries",storageKey:null},{alias:null,args:null,concreteType:"ActionConfigurationMemberManualResult",kind:"LinkedField",name:"manualResult",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isUndefined",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isNull",storageKey:null},f],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"path",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"prompt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"unionType",storageKey:null}],storageKey:null},ed=[n],eu={alias:null,args:null,concreteType:"Auth",kind:"LinkedField",name:"auth",plural:!1,selections:ed,storageKey:null},ec={alias:null,args:null,concreteType:"KnowledgeSource",kind:"LinkedField",name:"knowledgeSources",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"entryCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entryCountDisabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEnabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"source",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"syncStatus",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"syncToBeCompletedBy",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalFileSize",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalNumCharacters",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalNumEmbeddings",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalNumErrors",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalNumTokens",storageKey:null}],storageKey:null},eg={alias:null,args:null,kind:"ScalarField",name:"occurrence",storageKey:null},em={alias:null,args:null,kind:"ScalarField",name:"statefulToolOccurrence",storageKey:null},ey={alias:null,args:null,kind:"ScalarField",name:"greetingMessage",storageKey:null},ep={alias:null,args:null,concreteType:"ConversationStarter",kind:"LinkedField",name:"conversationStarters",plural:!0,selections:[f],storageKey:null},ef={alias:null,args:null,kind:"ScalarField",name:"triggerSetup",storageKey:null},eh={alias:null,args:null,kind:"ScalarField",name:"triggerEnabled",storageKey:null},ek={alias:null,args:null,kind:"ScalarField",name:"enabled",storageKey:null},eF={alias:null,args:null,kind:"ScalarField",name:"isConfigured",storageKey:null},ex={alias:null,args:null,kind:"ScalarField",name:"isPendingVerification",storageKey:null},ev={alias:null,args:null,concreteType:"TriggerSetup",kind:"LinkedField",name:"setup",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"actionArgs",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"actionName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"toolName",storageKey:null}],storageKey:null},eb={alias:null,args:null,concreteType:"ToolTriggerChannel",kind:"LinkedField",name:"channel",plural:!1,selections:[G],storageKey:null},eS={alias:null,args:null,kind:"ScalarField",name:"eventSchema",storageKey:null},eT={alias:null,args:null,kind:"ScalarField",name:"tooltip",storageKey:null},eK={alias:null,args:null,kind:"ScalarField",name:"isRequired",storageKey:null},eI={alias:null,args:null,kind:"ScalarField",name:"canBeSharedWithTemplate",storageKey:null},eC={alias:"defaultText",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},eA={alias:"defaultNumber",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},ej={alias:null,args:null,kind:"ScalarField",name:"min",storageKey:null},eN={alias:null,args:null,kind:"ScalarField",name:"max",storageKey:null},eL={alias:null,args:null,kind:"ScalarField",name:"step",storageKey:null},e_=[u,P,i,q,B,eT,eK,eI,S,a],ew={alias:"defaultDate",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},eR={alias:null,args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},eD=[u,P,i,q,B,eT,eK,eI,S,a,eR],eP={alias:"defaultLindyMail",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},eM={alias:"defaultWebhook",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},eE={alias:"defaultRecurringSchedule",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},eV={alias:"defaultChecked",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},eG={alias:null,args:null,kind:"ScalarField",name:"aliases",storageKey:null},eB={alias:"defaultItem",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},eO={alias:null,args:null,kind:"ScalarField",name:"selectFirstByDefault",storageKey:null},ez={alias:null,args:null,kind:"ScalarField",name:"isContextDependent",storageKey:null},eQ={alias:"defaultItems",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},eq={alias:null,args:null,kind:"ScalarField",name:"hasAllowAllOption",storageKey:null},eU={alias:null,args:null,concreteType:"DynamicLoaderDetails",kind:"LinkedField",name:"loader",plural:!1,selections:en,storageKey:null},eW={alias:null,args:null,kind:"ScalarField",name:"hasPublishableConfig",storageKey:null},eH={alias:null,args:null,kind:"ScalarField",name:"isHighThroughput",storageKey:null},e$={alias:null,args:null,concreteType:"ObservableChannelMetadata",kind:"LinkedField",name:"otherObservableChannel",plural:!1,selections:ea,storageKey:null},eZ={alias:null,args:null,concreteType:"TriggerTestingPolicy",kind:"LinkedField",name:"testingPolicy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"supportsSyntheticPayload",storageKey:null}],storageKey:null},eY={alias:null,args:null,kind:"ScalarField",name:"note",storageKey:null},eJ={alias:null,args:null,concreteType:"StickyNotePosition",kind:"LinkedField",name:"position",plural:!1,selections:j,storageKey:null},eX={kind:"InlineFragment",selections:[k],type:"Node",abstractKey:"__isNode"},e0=[s,r],e1={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"authConfig",plural:!1,selections:[u,{kind:"InlineFragment",selections:[s,r,o],type:"OAuth2AuthConfig",abstractKey:null},{kind:"InlineFragment",selections:[s,r,a],type:"CustomAuthConfig",abstractKey:null},{kind:"InlineFragment",selections:[a,s,r,o],type:"CustomOAuth2AuthConfig",abstractKey:null},{kind:"InlineFragment",selections:e0,type:"TokenAuthConfig",abstractKey:null},{kind:"InlineFragment",selections:e0,type:"PipedreamAuthConfig",abstractKey:null}],storageKey:null},e2={alias:null,args:null,concreteType:"Auth",kind:"LinkedField",name:"auth",plural:!1,selections:F,storageKey:null},e3=[P,i,q,B,eT,eK,eI,S,a],e6=[P,i,q,B,eT,eK,eI,S,a,eR];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"LindyStoreLoaderRefreshAgentDefinitionQuery",selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"me",plural:!1,selections:[n,l,{alias:null,args:null,concreteType:"Auth",kind:"LinkedField",name:"auth",plural:!0,selections:[a,n,t,i,s,r,o],storageKey:null}],storageKey:null},{alias:null,args:d,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[u,{kind:"InlineFragment",selections:[n,c,g,m,y,p,h,{alias:null,args:null,concreteType:"AgentDefinitionTag",kind:"LinkedField",name:"tags",plural:!0,selections:[n,i],storageKey:null},{alias:null,args:null,concreteType:"StateGraph",kind:"LinkedField",name:"stateGraph",plural:!1,selections:[n,k,x,v,b,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"edges",plural:!0,selections:[{kind:"InlineFragment",selections:[u,n,S,T,K,I],type:"ObserveEdge",abstractKey:null},{kind:"InlineFragment",selections:[u,n,S,T,K,I,C,i],type:"StandardEdge",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[{kind:"InlineFragment",selections:[u,n,S,k,A,N,L,_,m,w,{alias:null,args:null,concreteType:"StateGraphAction",kind:"LinkedField",name:"actions",plural:!0,selections:[{alias:null,args:null,concreteType:"ActionDetails",kind:"LinkedField",name:"action",plural:!1,selections:[R,D,P,E],storageKey:null},V,G],storageKey:null}],type:"AgentStateNode",abstractKey:null},{kind:"InlineFragment",selections:[u,n,S,k,A,N,L,{alias:null,args:null,concreteType:"StateGraphAction",kind:"LinkedField",name:"actionDefinition",plural:!1,selections:[V,G,O,{alias:null,args:null,concreteType:"ActionDetails",kind:"LinkedField",name:"action",plural:!1,selections:[k,P,D,z,Q,B,A,{alias:null,args:null,concreteType:"InputTree",kind:"LinkedField",name:"inputTree",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"fields",plural:!0,selections:[H,Z],storageKey:null},Y],storageKey:null},J,X,E,ee,el,et,ei,R,es,er],storageKey:null}],storageKey:null},eo,eu,_,ec,m,eg,em,w],type:"ActionNode",abstractKey:null},{kind:"InlineFragment",selections:[u,n,S,k,A,N,L,ey,ep],type:"EntryPointConversationNode",abstractKey:null},{kind:"InlineFragment",selections:[u,n,S,k,A,N,L,eu,ef,eh,{alias:null,args:null,concreteType:"Trigger",kind:"LinkedField",name:"trigger",plural:!1,selections:[n,{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:ed,storageKey:null},ek,eF,ex,ev],storageKey:null},{alias:null,args:null,concreteType:"TriggerDefinition",kind:"LinkedField",name:"triggerDefinition",plural:!1,selections:[{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[D,A],storageKey:null},c,E,eb,B,A,eS,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"fields",plural:!0,selections:[{kind:"InlineFragment",selections:[u,P,i,q,B,eT,eK,eI,S,a,eC],type:"TriggerFieldText",abstractKey:null},{kind:"InlineFragment",selections:[u,P,i,q,B,eT,eK,eI,S,a,eA,ej,eN,eL],type:"TriggerFieldNumber",abstractKey:null},{kind:"InlineFragment",selections:e_,type:"TriggerFieldLindyEmbedConfig",abstractKey:null},{kind:"InlineFragment",selections:[u,P,i,q,B,eT,eK,eI,S,a,ew],type:"TriggerFieldDateTime",abstractKey:null},{kind:"InlineFragment",selections:eD,type:"TriggerFieldAutoObserve",abstractKey:null},{kind:"InlineFragment",selections:[u,P,i,q,B,eT,eK,eI,S,a,eP],type:"TriggerFieldLindyMail",abstractKey:null},{kind:"InlineFragment",selections:[u,P,i,q,B,eT,eK,eI,S,a,eM],type:"TriggerFieldLindyWebhook",abstractKey:null},{kind:"InlineFragment",selections:e_,type:"TriggerFieldLindyPhoneNumber",abstractKey:null},{kind:"InlineFragment",selections:eD,type:"TriggerFieldElevenLabsVoice",abstractKey:null},{kind:"InlineFragment",selections:[u,P,i,q,B,eT,eK,eI,S,a,eE],type:"TriggerFieldRecurringSchedule",abstractKey:null},{kind:"InlineFragment",selections:[u,P,i,q,B,eT,eK,eI,S,a,eV],type:"TriggerFieldCheckbox",abstractKey:null},{kind:"InlineFragment",selections:e_,type:"TriggerFieldLabel",abstractKey:null},{kind:"InlineFragment",selections:[u,P,i,q,B,eT,eK,eI,S,a,eG],type:"TriggerFieldComparableText",abstractKey:null},{kind:"InlineFragment",selections:[u,P,i,q,B,eT,eK,eI,S,a,eB,eO,ez],type:"TriggerFieldSelect",abstractKey:null},{kind:"InlineFragment",selections:[u,P,i,q,B,eT,eK,eI,S,a,eQ,eq,ez],type:"TriggerFieldMultiSelect",abstractKey:null},{kind:"InlineFragment",selections:[u,P,i,q,B,eT,eK,eI,S,a,eU],type:"TriggerFieldDynamicLoader",abstractKey:null}],storageKey:null},eW,eH,R,e$,eZ],storageKey:null}],type:"EntryPointTriggerNode",abstractKey:null},{kind:"InlineFragment",selections:[u,n,S,k,A,N,L,m],type:"LogicNode",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StateGraphStickyNote",kind:"LinkedField",name:"stickyNotes",plural:!0,selections:[n,eY,eJ],storageKey:null}],storageKey:null}],type:"AgentDefinition",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"LindyStoreLoaderRefreshAgentDefinitionQuery",selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"me",plural:!1,selections:[n,l,{alias:null,args:null,concreteType:"Auth",kind:"LinkedField",name:"auth",plural:!0,selections:[a,n,t,i,s,r,o,k],storageKey:null},k],storageKey:null},{alias:null,args:d,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[u,k,{kind:"InlineFragment",selections:[n,c,g,m,y,p,h,{alias:null,args:null,concreteType:"AgentDefinitionTag",kind:"LinkedField",name:"tags",plural:!0,selections:[n,i,k],storageKey:null},{alias:null,args:null,concreteType:"StateGraph",kind:"LinkedField",name:"stateGraph",plural:!1,selections:[n,k,x,v,b,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"edges",plural:!0,selections:[u,{kind:"InlineFragment",selections:[n,S,T,K,I],type:"ObserveEdge",abstractKey:null},{kind:"InlineFragment",selections:[n,S,T,K,I,C,i],type:"StandardEdge",abstractKey:null},eX],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[u,{kind:"InlineFragment",selections:[n,S,k,A,N,L,_,m,w,{alias:null,args:null,concreteType:"StateGraphAction",kind:"LinkedField",name:"actions",plural:!0,selections:[{alias:null,args:null,concreteType:"ActionDetails",kind:"LinkedField",name:"action",plural:!1,selections:[R,D,P,e1,k],storageKey:null},V,G],storageKey:null}],type:"AgentStateNode",abstractKey:null},{kind:"InlineFragment",selections:[n,S,k,A,N,L,{alias:null,args:null,concreteType:"StateGraphAction",kind:"LinkedField",name:"actionDefinition",plural:!1,selections:[V,G,O,{alias:null,args:null,concreteType:"ActionDetails",kind:"LinkedField",name:"action",plural:!1,selections:[k,P,D,z,Q,B,A,{alias:null,args:null,concreteType:"InputTree",kind:"LinkedField",name:"inputTree",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"fields",plural:!0,selections:[u,H,Z],storageKey:null},Y],storageKey:null},J,X,e1,ee,el,et,ei,R,es,er],storageKey:null}],storageKey:null},eo,e2,_,ec,m,eg,em,w],type:"ActionNode",abstractKey:null},{kind:"InlineFragment",selections:[n,S,k,A,N,L,ey,ep],type:"EntryPointConversationNode",abstractKey:null},{kind:"InlineFragment",selections:[n,S,k,A,N,L,e2,ef,eh,{alias:null,args:null,concreteType:"Trigger",kind:"LinkedField",name:"trigger",plural:!1,selections:[n,x,ek,eF,ex,ev,k],storageKey:null},{alias:null,args:null,concreteType:"TriggerDefinition",kind:"LinkedField",name:"triggerDefinition",plural:!1,selections:[{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[D,A,k],storageKey:null},c,e1,eb,B,A,eS,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"fields",plural:!0,selections:[u,{kind:"InlineFragment",selections:[P,i,q,B,eT,eK,eI,S,a,eC],type:"TriggerFieldText",abstractKey:null},{kind:"InlineFragment",selections:[P,i,q,B,eT,eK,eI,S,a,eA,ej,eN,eL],type:"TriggerFieldNumber",abstractKey:null},{kind:"InlineFragment",selections:e3,type:"TriggerFieldLindyEmbedConfig",abstractKey:null},{kind:"InlineFragment",selections:[P,i,q,B,eT,eK,eI,S,a,ew],type:"TriggerFieldDateTime",abstractKey:null},{kind:"InlineFragment",selections:e6,type:"TriggerFieldAutoObserve",abstractKey:null},{kind:"InlineFragment",selections:[P,i,q,B,eT,eK,eI,S,a,eP],type:"TriggerFieldLindyMail",abstractKey:null},{kind:"InlineFragment",selections:[P,i,q,B,eT,eK,eI,S,a,eM],type:"TriggerFieldLindyWebhook",abstractKey:null},{kind:"InlineFragment",selections:e3,type:"TriggerFieldLindyPhoneNumber",abstractKey:null},{kind:"InlineFragment",selections:e6,type:"TriggerFieldElevenLabsVoice",abstractKey:null},{kind:"InlineFragment",selections:[P,i,q,B,eT,eK,eI,S,a,eE],type:"TriggerFieldRecurringSchedule",abstractKey:null},{kind:"InlineFragment",selections:[P,i,q,B,eT,eK,eI,S,a,eV],type:"TriggerFieldCheckbox",abstractKey:null},{kind:"InlineFragment",selections:e3,type:"TriggerFieldLabel",abstractKey:null},{kind:"InlineFragment",selections:[P,i,q,B,eT,eK,eI,S,a,eG],type:"TriggerFieldComparableText",abstractKey:null},{kind:"InlineFragment",selections:[P,i,q,B,eT,eK,eI,S,a,eB,eO,ez],type:"TriggerFieldSelect",abstractKey:null},{kind:"InlineFragment",selections:[P,i,q,B,eT,eK,eI,S,a,eQ,eq,ez],type:"TriggerFieldMultiSelect",abstractKey:null},{kind:"InlineFragment",selections:[P,i,q,B,eT,eK,eI,S,a,eU],type:"TriggerFieldDynamicLoader",abstractKey:null}],storageKey:null},eW,eH,R,e$,eZ,k],storageKey:null}],type:"EntryPointTriggerNode",abstractKey:null},{kind:"InlineFragment",selections:[n,S,k,A,N,L,m],type:"LogicNode",abstractKey:null},eX],storageKey:null},{alias:null,args:null,concreteType:"StateGraphStickyNote",kind:"LinkedField",name:"stickyNotes",plural:!0,selections:[n,eY,eJ,k],storageKey:null}],storageKey:null}],type:"AgentDefinition",abstractKey:null}],storageKey:null}]},params:{cacheID:"916581d47c790010f901feb19a326916",id:null,metadata:{},name:"LindyStoreLoaderRefreshAgentDefinitionQuery",operationKind:"query",text:"query LindyStoreLoaderRefreshAgentDefinitionQuery(\n  $nodeId: ID!\n) {\n  me {\n    id\n    enabledFeatureFlags\n    auth {\n      fields\n      id\n      isConnected\n      label\n      method\n      provider\n      scopes\n      nodeId\n    }\n    nodeId\n  }\n  node(id: $nodeId) {\n    __typename\n    ... on AgentDefinition {\n      id\n      name\n      instructions\n      model\n      shouldAskForConfirmation\n      icon {\n        name\n        color\n      }\n      memories {\n        id\n        isActive\n        value\n      }\n      tags {\n        id\n        label\n        nodeId\n      }\n      stateGraph {\n        id\n        nodeId\n        owner {\n          id\n          nodeId\n        }\n        version\n        autoLayoutEnabled\n        edges {\n          __typename\n          ... on ObserveEdge {\n            __typename\n            id\n            type\n            from\n            to\n            inflectionY\n          }\n          ... on StandardEdge {\n            __typename\n            id\n            type\n            from\n            to\n            inflectionY\n            condition\n            label\n          }\n          ... on Node {\n            __isNode: __typename\n            nodeId\n          }\n        }\n        nodes {\n          __typename\n          ... on AgentStateNode {\n            __typename\n            id\n            type\n            nodeId\n            displayName\n            position {\n              x\n              y\n            }\n            manuallyPositioned\n            guidelines\n            model\n            requireConfirmation\n            actions {\n              action {\n                isPremium\n                tool\n                key\n                authConfig {\n                  __typename\n                  ... on OAuth2AuthConfig {\n                    __typename\n                    method\n                    provider\n                    scopes\n                  }\n                  ... on CustomAuthConfig {\n                    __typename\n                    method\n                    provider\n                    fields\n                  }\n                  ... on CustomOAuth2AuthConfig {\n                    __typename\n                    fields\n                    method\n                    provider\n                    scopes\n                  }\n                  ... on TokenAuthConfig {\n                    __typename\n                    method\n                    provider\n                  }\n                  ... on PipedreamAuthConfig {\n                    __typename\n                    method\n                    provider\n                  }\n                }\n                nodeId\n              }\n              createdByNodeId\n              statefulToolKey\n            }\n          }\n          ... on ActionNode {\n            __typename\n            id\n            type\n            nodeId\n            displayName\n            position {\n              x\n              y\n            }\n            manuallyPositioned\n            actionDefinition {\n              createdByNodeId\n              statefulToolKey\n              tool {\n                nodeId\n                description\n                displayName\n                isPopular\n                tool\n              }\n              action {\n                nodeId\n                key\n                tool\n                toolDisplayName\n                dependencies\n                description\n                displayName\n                inputTree {\n                  fields {\n                    __typename\n                    ... on InputTreeDynamicField {\n                      type\n                      key\n                      output\n                      displayName\n                      description\n                      placeholder\n                      defaultValue {\n                        name\n                        value\n                      }\n                      icon\n                    }\n                    ... on InputTreeStaticField {\n                      type\n                      schema\n                      field\n                    }\n                  }\n                  parentFields\n                }\n                inputSchema\n                outputSchema\n                authConfig {\n                  __typename\n                  ... on OAuth2AuthConfig {\n                    __typename\n                    method\n                    provider\n                    scopes\n                  }\n                  ... on CustomAuthConfig {\n                    __typename\n                    method\n                    provider\n                    fields\n                  }\n                  ... on CustomOAuth2AuthConfig {\n                    __typename\n                    fields\n                    method\n                    provider\n                    scopes\n                  }\n                  ... on TokenAuthConfig {\n                    __typename\n                    method\n                    provider\n                  }\n                  ... on PipedreamAuthConfig {\n                    __typename\n                    method\n                    provider\n                  }\n                }\n                deprecated\n                dynamicLoaders {\n                  loaders {\n                    defaultValue {\n                      name\n                      value\n                    }\n                    dependencies\n                    description\n                    displayName\n                    field\n                    icon\n                    key\n                    placeholder\n                  }\n                  refetchInputAfterLoad\n                }\n                observableChannel {\n                  agentMessageReceivedSchema\n                  immediateEdgeLabel\n                  observableEdgeLabel\n                  statefulToolKey\n                }\n                hasSideEffects\n                isPremium\n                premiumActionCost\n                outputProperties {\n                  displayName\n                  type\n                  value\n                }\n              }\n            }\n            actionConfiguration {\n              type\n              allowAdditionalArrayEntries\n              manualResult {\n                isUndefined\n                isNull\n                value\n              }\n              path\n              prompt\n              unionType\n            }\n            auth {\n              id\n              nodeId\n            }\n            guidelines\n            knowledgeSources {\n              entryCount\n              entryCountDisabled\n              isEnabled\n              source\n              syncStatus\n              syncToBeCompletedBy\n              totalFileSize\n              totalNumCharacters\n              totalNumEmbeddings\n              totalNumErrors\n              totalNumTokens\n            }\n            model\n            occurrence\n            statefulToolOccurrence\n            requireConfirmation\n          }\n          ... on EntryPointConversationNode {\n            __typename\n            id\n            type\n            nodeId\n            displayName\n            position {\n              x\n              y\n            }\n            manuallyPositioned\n            greetingMessage\n            conversationStarters {\n              value\n            }\n          }\n          ... on EntryPointTriggerNode {\n            __typename\n            id\n            type\n            nodeId\n            displayName\n            position {\n              x\n              y\n            }\n            manuallyPositioned\n            auth {\n              id\n              nodeId\n            }\n            triggerSetup\n            triggerEnabled\n            trigger {\n              id\n              owner {\n                id\n                nodeId\n              }\n              enabled\n              isConfigured\n              isPendingVerification\n              setup {\n                actionArgs\n                actionName\n                toolName\n              }\n              nodeId\n            }\n            triggerDefinition {\n              tool {\n                tool\n                displayName\n                nodeId\n              }\n              name\n              authConfig {\n                __typename\n                ... on OAuth2AuthConfig {\n                  __typename\n                  method\n                  provider\n                  scopes\n                }\n                ... on CustomAuthConfig {\n                  __typename\n                  method\n                  provider\n                  fields\n                }\n                ... on CustomOAuth2AuthConfig {\n                  __typename\n                  fields\n                  method\n                  provider\n                  scopes\n                }\n                ... on TokenAuthConfig {\n                  __typename\n                  method\n                  provider\n                }\n                ... on PipedreamAuthConfig {\n                  __typename\n                  method\n                  provider\n                }\n              }\n              channel {\n                statefulToolKey\n              }\n              description\n              displayName\n              eventSchema\n              fields {\n                __typename\n                ... on TriggerFieldText {\n                  __typename\n                  key\n                  label\n                  placeholder\n                  description\n                  tooltip\n                  isRequired\n                  canBeSharedWithTemplate\n                  type\n                  fields\n                  defaultText: defaultValue\n                }\n                ... on TriggerFieldNumber {\n                  __typename\n                  key\n                  label\n                  placeholder\n                  description\n                  tooltip\n                  isRequired\n                  canBeSharedWithTemplate\n                  type\n                  fields\n                  defaultNumber: defaultValue\n                  min\n                  max\n                  step\n                }\n                ... on TriggerFieldLindyEmbedConfig {\n                  __typename\n                  key\n                  label\n                  placeholder\n                  description\n                  tooltip\n                  isRequired\n                  canBeSharedWithTemplate\n                  type\n                  fields\n                }\n                ... on TriggerFieldDateTime {\n                  __typename\n                  key\n                  label\n                  placeholder\n                  description\n                  tooltip\n                  isRequired\n                  canBeSharedWithTemplate\n                  type\n                  fields\n                  defaultDate: defaultValue\n                }\n                ... on TriggerFieldAutoObserve {\n                  __typename\n                  key\n                  label\n                  placeholder\n                  description\n                  tooltip\n                  isRequired\n                  canBeSharedWithTemplate\n                  type\n                  fields\n                  defaultValue\n                }\n                ... on TriggerFieldLindyMail {\n                  __typename\n                  key\n                  label\n                  placeholder\n                  description\n                  tooltip\n                  isRequired\n                  canBeSharedWithTemplate\n                  type\n                  fields\n                  defaultLindyMail: defaultValue\n                }\n                ... on TriggerFieldLindyWebhook {\n                  __typename\n                  key\n                  label\n                  placeholder\n                  description\n                  tooltip\n                  isRequired\n                  canBeSharedWithTemplate\n                  type\n                  fields\n                  defaultWebhook: defaultValue\n                }\n                ... on TriggerFieldLindyPhoneNumber {\n                  __typename\n                  key\n                  label\n                  placeholder\n                  description\n                  tooltip\n                  isRequired\n                  canBeSharedWithTemplate\n                  type\n                  fields\n                }\n                ... on TriggerFieldElevenLabsVoice {\n                  __typename\n                  key\n                  label\n                  placeholder\n                  description\n                  tooltip\n                  isRequired\n                  canBeSharedWithTemplate\n                  type\n                  fields\n                  defaultValue\n                }\n                ... on TriggerFieldRecurringSchedule {\n                  __typename\n                  key\n                  label\n                  placeholder\n                  description\n                  tooltip\n                  isRequired\n                  canBeSharedWithTemplate\n                  type\n                  fields\n                  defaultRecurringSchedule: defaultValue\n                }\n                ... on TriggerFieldCheckbox {\n                  __typename\n                  key\n                  label\n                  placeholder\n                  description\n                  tooltip\n                  isRequired\n                  canBeSharedWithTemplate\n                  type\n                  fields\n                  defaultChecked: defaultValue\n                }\n                ... on TriggerFieldLabel {\n                  __typename\n                  key\n                  label\n                  placeholder\n                  description\n                  tooltip\n                  isRequired\n                  canBeSharedWithTemplate\n                  type\n                  fields\n                }\n                ... on TriggerFieldComparableText {\n                  __typename\n                  key\n                  label\n                  placeholder\n                  description\n                  tooltip\n                  isRequired\n                  canBeSharedWithTemplate\n                  type\n                  fields\n                  aliases\n                }\n                ... on TriggerFieldSelect {\n                  __typename\n                  key\n                  label\n                  placeholder\n                  description\n                  tooltip\n                  isRequired\n                  canBeSharedWithTemplate\n                  type\n                  fields\n                  defaultItem: defaultValue\n                  selectFirstByDefault\n                  isContextDependent\n                }\n                ... on TriggerFieldMultiSelect {\n                  __typename\n                  key\n                  label\n                  placeholder\n                  description\n                  tooltip\n                  isRequired\n                  canBeSharedWithTemplate\n                  type\n                  fields\n                  defaultItems: defaultValue\n                  hasAllowAllOption\n                  isContextDependent\n                }\n                ... on TriggerFieldDynamicLoader {\n                  __typename\n                  key\n                  label\n                  placeholder\n                  description\n                  tooltip\n                  isRequired\n                  canBeSharedWithTemplate\n                  type\n                  fields\n                  loader {\n                    defaultValue {\n                      name\n                      value\n                    }\n                    dependencies\n                    description\n                    displayName\n                    field\n                    icon\n                    key\n                    placeholder\n                  }\n                }\n              }\n              hasPublishableConfig\n              isHighThroughput\n              isPremium\n              otherObservableChannel {\n                agentMessageReceivedSchema\n                immediateEdgeLabel\n                observableEdgeLabel\n                statefulToolKey\n              }\n              testingPolicy {\n                supportsSyntheticPayload\n              }\n              nodeId\n            }\n          }\n          ... on LogicNode {\n            __typename\n            id\n            type\n            nodeId\n            displayName\n            position {\n              x\n              y\n            }\n            manuallyPositioned\n            model\n          }\n          ... on Node {\n            __isNode: __typename\n            nodeId\n          }\n        }\n        stickyNotes {\n          id\n          note\n          position {\n            x\n            y\n          }\n          nodeId\n        }\n      }\n    }\n    nodeId\n  }\n}\n"}}}();s.hash="4e245e4335e0ae91ef96618784515d98";var r=l(958),o=l(72735),d=l(20923),u=l(98448),c=l(31284),g=l(23846),m=l(8678),y=l(81778),p=l.n(y),f=l(94344),h=l(79124),k=l(3063);async function F(e,n){let l=await (0,h.fetchQuery)(e,s,{nodeId:(0,d.F)("AgentDefinition",n)}).toPromise();if(l){var a;if(c.a.auth.setAuthData(l.me.id,(0,g.Ay)(l.me.auth)),(null===(a=l.node)||void 0===a?void 0:a.__typename)==="AgentDefinition"&&l.node.stateGraph){let e=(0,k.j)(l.node.id,l.node.stateGraph),n=c.a.lindies.lindyById.get(e.agentDefinitionId);null==n||n.stateGraph.replaceStateGraph({stateGraph:e})}}}let x=(0,m.PA)(function(e){var n;let l=(0,h.useFragment)(t,e.identityFragmentRef),s=(0,h.useFragment)(i,e.agentDefinitionFragmentRef),d=(0,f.useMemo)(()=>{var e,n;return{name:s.name,iconName:(0,u.HI)(null===(e=s.icon)||void 0===e?void 0:e.name),iconColor:(0,u.Rz)(null===(n=s.icon)||void 0===n?void 0:n.color),instructions:s.instructions,model:s.model,shouldAskForConfirmation:s.shouldAskForConfirmation,memories:s.memories.map(e=>({id:e.id,isActive:e.isActive,value:e.value})),tags:s.tags.map(e=>({id:e.id,label:e.label}))}},[s]),m=(0,k.M)(s.id,s.stateGraph),y=c.a.lindies.currentLindy;(0,f.useEffect)(()=>{var e;if(!s||!m||!l.auth)return;l.id!==c.a.auth.owner&&(c.a.setEnabledFeatureFlags((0,g.Ay)(l.enabledFeatureFlags)),c.a.auth.setAuthData(l.id,(0,g.Ay)(l.auth))),s.id!==(null==y?void 0:y.id)&&c.a.lindies.setCurrentLindy({agentSettings:d,stateGraph:m});let n=new URLSearchParams(window.location.search).get(o.J8);null===(e=c.a.lindies.currentLindy)||void 0===e||e.stateGraph.setSelectedEntityById(n)},[s,d,y,l.auth,l.enabledFeatureFlags,l.id,m]);let F=null==y?void 0:null===(n=y.stateGraph.selectedEntity)||void 0===n?void 0:n.id;(0,f.useEffect)(()=>(function(e){let n=new URL(window.location.href);e?n.searchParams.set(o.J8,e):n.searchParams.delete(o.J8),p().replace(n,void 0,{shallow:!0})})(F),[F]);let{isDark:x}=(0,r.G)();return((0,f.useEffect)(()=>{var e;return null==y?void 0:null===(e=y.stateGraph)||void 0===e?void 0:e.setIsDark(x)},[y,x]),y)?(0,a.jsx)(a.Fragment,{children:e.children}):null})},3063:(e,n,l)=>{"use strict";l.d(n,{M:()=>s,j:()=>i});var a=l(23846),t=l(94344);function i(e,n){return{...(0,a.Ay)(n),agentDefinitionId:e}}function s(e,n){return(0,t.useMemo)(()=>e&&n?i(e,n):null,[n,e])}},71804:(e,n,l)=>{"use strict";l.d(n,{R:()=>c});var a=l(50612),t=l(32159),i=l(19632),s=l(10293),r=l(13802),o=l(41285),d=l(82907),u=l(94344);function c(e){let{value:n,onChange:l,className:c,customLabel:m,dropdown:y,showLabel:p=!0,includeDefault:f=!0,disabled:h=!1}=e,k=(0,r.$)(),F=(0,u.useCallback)(e=>l(e===d.U5?null:e),[l]),x=(0,s.f)(),v=(0,u.useMemo)(()=>{var e,n,l;let a=null!==(n=null===(e=x.data)||void 0===e?void 0:e.model)&&void 0!==n?n:d.UB;if(f){let e=k.find(e=>e.value===a);if(e){let n={...e,label:"Default",sublabel:null!==(l=e.sublabel)&&void 0!==l?l:e.label,value:d.U5};k.unshift(n)}}return k},[k,x.data,f]),b=(0,u.useMemo)(()=>m||(0,a.jsx)("span",{children:"Model"}),[m]);return(0,a.jsx)(i.o,{query:x,children:(0,a.jsxs)("div",{className:"w-full",children:[p&&(0,a.jsx)(o.J,{className:c,children:b}),(0,a.jsx)(t.m,{options:v,value:null!=n?n:d.U5,onChange:F,className:null==y?void 0:y.className,disabled:h,renderOption:g})]})})}function g(e){return(0,a.jsx)(r.a,{model:e})}},90386:(e,n,l)=>{"use strict";l.r(n),l.d(n,{SettingsLayout:()=>e_,settingsLayoutQuery:()=>eL});var a=l(50612);let t=function(){var e={defaultValue:!1,kind:"LocalArgument",name:"hasTestRunId"},n={defaultValue:null,kind:"LocalArgument",name:"nodeId"},l={defaultValue:"",kind:"LocalArgument",name:"testRunId"},a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"isAdmin",storageKey:null},s=[{kind:"Variable",name:"id",variableName:"nodeId"}],r={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},d=[{kind:"Variable",name:"id",variableName:"testRunId"}],u={alias:null,args:null,kind:"ScalarField",name:"isFavorite",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"notificationsCount",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"isMuted",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},p={alias:null,args:null,concreteType:"AgentIcon",kind:"LinkedField",name:"icon",plural:!1,selections:[o,y],storageKey:null},f=[a,t],h={alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinitions",plural:!0,selections:[a,t,o,p,c],storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"creditAllocation",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"arePremiumFeaturesEnabled",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"fields",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"method",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"provider",storageKey:null},T={alias:null,args:null,kind:"ScalarField",name:"scopes",storageKey:null},K={alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:f,storageKey:null},I={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},C={alias:null,args:null,kind:"ScalarField",name:"from",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"to",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"inflectionY",storageKey:null},N={kind:"InlineFragment",selections:[t],type:"Node",abstractKey:"__isNode"},L={alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},_=[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],w={alias:null,args:null,concreteType:"NodePosition",kind:"LinkedField",name:"position",plural:!1,selections:_,storageKey:null},R={alias:null,args:null,kind:"ScalarField",name:"manuallyPositioned",storageKey:null},D={alias:null,args:null,kind:"ScalarField",name:"guidelines",storageKey:null},P={alias:null,args:null,kind:"ScalarField",name:"model",storageKey:null},M={alias:null,args:null,kind:"ScalarField",name:"requireConfirmation",storageKey:null},E={alias:null,args:null,kind:"ScalarField",name:"isPremium",storageKey:null},V={alias:null,args:null,kind:"ScalarField",name:"tool",storageKey:null},G={alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},B=[b,S],O={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"authConfig",plural:!1,selections:[r,{kind:"InlineFragment",selections:[b,S,T],type:"OAuth2AuthConfig",abstractKey:null},{kind:"InlineFragment",selections:[b,S,x],type:"CustomAuthConfig",abstractKey:null},{kind:"InlineFragment",selections:[x,b,S,T],type:"CustomOAuth2AuthConfig",abstractKey:null},{kind:"InlineFragment",selections:B,type:"TokenAuthConfig",abstractKey:null},{kind:"InlineFragment",selections:B,type:"PipedreamAuthConfig",abstractKey:null}],storageKey:null},z={alias:null,args:null,kind:"ScalarField",name:"createdByNodeId",storageKey:null},Q={alias:null,args:null,kind:"ScalarField",name:"statefulToolKey",storageKey:null},q={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},U={alias:null,args:null,kind:"ScalarField",name:"dependencies",storageKey:null},W={alias:null,args:null,kind:"ScalarField",name:"placeholder",storageKey:null},H={alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null},$={alias:null,args:null,concreteType:"DynamicLoaderDefaultValue",kind:"LinkedField",name:"defaultValue",plural:!1,selections:[o,H],storageKey:null},Z={alias:null,args:null,kind:"ScalarField",name:"icon",storageKey:null},Y={alias:null,args:null,kind:"ScalarField",name:"field",storageKey:null},J=[$,U,q,L,Y,Z,G,W],X=[{alias:null,args:null,kind:"ScalarField",name:"agentMessageReceivedSchema",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"immediateEdgeLabel",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"observableEdgeLabel",storageKey:null},Q],ee={alias:null,args:null,concreteType:"Auth",kind:"LinkedField",name:"auth",plural:!1,selections:f,storageKey:null},en={alias:null,args:null,kind:"ScalarField",name:"enabled",storageKey:null},el={alias:null,args:null,kind:"ScalarField",name:"eventSchema",storageKey:null},ea={alias:null,args:null,kind:"ScalarField",name:"tooltip",storageKey:null},et={alias:null,args:null,kind:"ScalarField",name:"isRequired",storageKey:null},ei={alias:null,args:null,kind:"ScalarField",name:"canBeSharedWithTemplate",storageKey:null},es=[v,W,q,ea,et,ei,I,x],er=[v,W,q,ea,et,ei,I,x,{alias:null,args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],eo={alias:null,args:null,kind:"ScalarField",name:"isContextDependent",storageKey:null},ed={alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinitions",plural:!0,selections:[a,c,{alias:null,args:null,kind:"ScalarField",name:"updatedAt",storageKey:null},t,o,p],storageKey:null},eu=[{kind:"Literal",name:"first",value:10}],ec=[{kind:"Literal",name:"shouldRemoveFieldsHiddenFromUI",value:!0}],eg={alias:null,args:ec,kind:"ScalarField",name:"payload",storageKey:"payload(shouldRemoveFieldsHiddenFromUI:true)"},em={alias:null,args:null,concreteType:"TriggerShouldRunCheck",kind:"LinkedField",name:"shouldRunCheck",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"shouldRun",storageKey:null},{alias:null,args:null,concreteType:"TriggerShouldRunCheckReason",kind:"LinkedField",name:"reasons",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"softFilter",storageKey:null}],storageKey:null},ey={alias:null,args:null,kind:"ScalarField",name:"llmSummary",storageKey:null};return{fragment:{argumentDefinitions:[e,n,l],kind:"Fragment",metadata:null,name:"SettingsLayoutQuery",selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"me",plural:!1,selections:[a,t,i,{args:null,kind:"FragmentSpread",name:"CommonLayoutSidebarIdentityFragment"},{args:null,kind:"FragmentSpread",name:"useSaveAgentWithPremiumModal_Identity"},{args:null,kind:"FragmentSpread",name:"LindyStoreLoader_Identity"},{args:null,kind:"FragmentSpread",name:"SubscriptionContext_Identity"},{args:null,kind:"FragmentSpread",name:"CommonLayout_Identity"}],storageKey:null},{alias:null,args:s,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[r,{kind:"InlineFragment",selections:[a,t,o,{alias:null,args:null,concreteType:"StateGraph",kind:"LinkedField",name:"stateGraph",plural:!1,selections:[a],storageKey:null},{args:null,kind:"FragmentSpread",name:"HeaderTitleSection_AgentDefinition"},{args:null,kind:"FragmentSpread",name:"LindyStoreLoader_AgentDefinition"},{args:null,kind:"FragmentSpread",name:"useSaveAgentWithPremiumModal_AgentDefinition"},{args:null,kind:"FragmentSpread",name:"SaveChangesOnLeavingModalAgentDefinitionFragment"},{args:null,kind:"FragmentSpread",name:"NameAndIconSectionAgentDefinitionFragment"},{args:null,kind:"FragmentSpread",name:"RailsTestingAgentDefinitionFragment"},{args:null,kind:"FragmentSpread",name:"AgentEnabledSwitch_AgentDefinition"},{args:null,kind:"FragmentSpread",name:"HeaderNavButtons_AgentDefinition"}],type:"AgentDefinition",abstractKey:null}],storageKey:null},{condition:"hasTestRunId",kind:"Condition",passingValue:!0,selections:[{alias:"stateGraphTestRun",args:d,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"RailsTestingStateGraphTestRunFragment"},{args:null,kind:"FragmentSpread",name:"RailsTestingStateGraphTestRunRefetchableFragment"}],type:"StateGraphTestRun",abstractKey:null}],storageKey:null}]},{args:null,kind:"FragmentSpread",name:"RailsTestingQueryFragment"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e,l],kind:"Operation",name:"SettingsLayoutQuery",selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"me",plural:!1,selections:[a,t,i,o,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"avatar",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinitions",plural:!0,selections:[a,o,u,{alias:null,args:null,kind:"ScalarField",name:"lastRunAt",storageKey:null},c,g,m,p,{alias:null,args:null,concreteType:"StateGraph",kind:"LinkedField",name:"stateGraph",plural:!1,selections:f,storageKey:null},t],storageKey:null},{alias:null,args:null,concreteType:"AgentFolders",kind:"LinkedField",name:"agentFolders",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentRootFolder",kind:"LinkedField",name:"root",plural:!1,selections:[h],storageKey:null},{alias:null,args:null,concreteType:"AgentFolder",kind:"LinkedField",name:"folders",plural:!0,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"clientId",storageKey:null},h],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"IdentityFlags",kind:"LinkedField",name:"flags",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"dismissedQualifiedSignupUpsell",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isQualifiedSignup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isMedicalScribe",storageKey:null},{alias:null,args:null,concreteType:"SubscriptionInfo",kind:"LinkedField",name:"billingInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"billingPeriodEndsAt",storageKey:null},{alias:null,args:null,concreteType:"SubscriptionPlan",kind:"LinkedField",name:"subscriptionPlan",plural:!1,selections:[o,k],storageKey:null},{alias:null,args:null,concreteType:"CreditsInfo",kind:"LinkedField",name:"creditsInfo",plural:!1,selections:[k,{alias:null,args:null,kind:"ScalarField",name:"consumed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"percentConsumed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"creditBalance",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"TrialInfo",kind:"LinkedField",name:"trialInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"expiresAt",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"SubscriptionFeatures",kind:"LinkedField",name:"features",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isEligibleForFreePlan",storageKey:null},F,{alias:null,args:null,kind:"ScalarField",name:"hasKnowledgeBaseIncreasedLimits",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"UpcomingPlan",kind:"LinkedField",name:"upcomingPlan",plural:!1,selections:[{alias:null,args:null,concreteType:"SubscriptionPlan",kind:"LinkedField",name:"subscriptionPlan",plural:!1,selections:[k,{alias:null,args:null,kind:"ScalarField",name:"planType",storageKey:null},o],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"startDate",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"billingVersion",storageKey:null},{alias:null,args:null,concreteType:"PaymentFailure",kind:"LinkedField",name:"lastPaymentFailure",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"date",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"enabledFeatureFlags",storageKey:null},{alias:null,args:null,concreteType:"Auth",kind:"LinkedField",name:"auth",plural:!0,selections:[x,a,{alias:null,args:null,kind:"ScalarField",name:"isConnected",storageKey:null},v,b,S,T,t],storageKey:null}],storageKey:null},{alias:null,args:s,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[r,t,{kind:"InlineFragment",selections:[a,o,{alias:null,args:null,concreteType:"StateGraph",kind:"LinkedField",name:"stateGraph",plural:!1,selections:[a,t,K,{alias:null,args:null,kind:"ScalarField",name:"version",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"autoLayoutEnabled",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"edges",plural:!0,selections:[r,{kind:"InlineFragment",selections:[a,I,C,A,j],type:"ObserveEdge",abstractKey:null},{kind:"InlineFragment",selections:[a,I,C,A,j,{alias:null,args:null,kind:"ScalarField",name:"condition",storageKey:null},v],type:"StandardEdge",abstractKey:null},N],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[r,{kind:"InlineFragment",selections:[a,I,t,L,w,R,D,P,M,{alias:null,args:null,concreteType:"StateGraphAction",kind:"LinkedField",name:"actions",plural:!0,selections:[{alias:null,args:null,concreteType:"ActionDetails",kind:"LinkedField",name:"action",plural:!1,selections:[E,V,G,O,t],storageKey:null},z,Q],storageKey:null}],type:"AgentStateNode",abstractKey:null},{kind:"InlineFragment",selections:[a,I,t,L,w,R,{alias:null,args:null,concreteType:"StateGraphAction",kind:"LinkedField",name:"actionDefinition",plural:!1,selections:[z,Q,{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[t,q,L,{alias:null,args:null,kind:"ScalarField",name:"isPopular",storageKey:null},V],storageKey:null},{alias:null,args:null,concreteType:"ActionDetails",kind:"LinkedField",name:"action",plural:!1,selections:[t,G,V,{alias:null,args:null,kind:"ScalarField",name:"toolDisplayName",storageKey:null},U,q,L,{alias:null,args:null,concreteType:"InputTree",kind:"LinkedField",name:"inputTree",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"fields",plural:!0,selections:[r,{kind:"InlineFragment",selections:[I,G,{alias:null,args:null,kind:"ScalarField",name:"output",storageKey:null},L,q,W,$,Z],type:"InputTreeDynamicField",abstractKey:null},{kind:"InlineFragment",selections:[I,{alias:null,args:null,kind:"ScalarField",name:"schema",storageKey:null},Y],type:"InputTreeStaticField",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"parentFields",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"inputSchema",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"outputSchema",storageKey:null},O,{alias:null,args:null,kind:"ScalarField",name:"deprecated",storageKey:null},{alias:null,args:null,concreteType:"DynamicLoaders",kind:"LinkedField",name:"dynamicLoaders",plural:!1,selections:[{alias:null,args:null,concreteType:"DynamicLoaderDetails",kind:"LinkedField",name:"loaders",plural:!0,selections:J,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"refetchInputAfterLoad",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ObservableChannelMetadata",kind:"LinkedField",name:"observableChannel",plural:!1,selections:X,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasSideEffects",storageKey:null},E,{alias:null,args:null,kind:"ScalarField",name:"premiumActionCost",storageKey:null},{alias:null,args:null,concreteType:"ActionProperty",kind:"LinkedField",name:"outputProperties",plural:!0,selections:[L,I,H],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ActionConfigurationMember",kind:"LinkedField",name:"actionConfiguration",plural:!0,selections:[I,{alias:null,args:null,kind:"ScalarField",name:"allowAdditionalArrayEntries",storageKey:null},{alias:null,args:null,concreteType:"ActionConfigurationMemberManualResult",kind:"LinkedField",name:"manualResult",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isUndefined",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isNull",storageKey:null},H],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"path",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"prompt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"unionType",storageKey:null}],storageKey:null},ee,D,{alias:null,args:null,concreteType:"KnowledgeSource",kind:"LinkedField",name:"knowledgeSources",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"entryCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entryCountDisabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEnabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"source",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"syncStatus",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"syncToBeCompletedBy",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalFileSize",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalNumCharacters",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalNumEmbeddings",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalNumErrors",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalNumTokens",storageKey:null}],storageKey:null},P,{alias:null,args:null,kind:"ScalarField",name:"occurrence",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"statefulToolOccurrence",storageKey:null},M],type:"ActionNode",abstractKey:null},{kind:"InlineFragment",selections:[a,I,t,L,w,R,{alias:null,args:null,kind:"ScalarField",name:"greetingMessage",storageKey:null},{alias:null,args:null,concreteType:"ConversationStarter",kind:"LinkedField",name:"conversationStarters",plural:!0,selections:[H],storageKey:null}],type:"EntryPointConversationNode",abstractKey:null},{kind:"InlineFragment",selections:[a,I,t,L,w,R,ee,{alias:null,args:null,kind:"ScalarField",name:"triggerSetup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"triggerEnabled",storageKey:null},{alias:null,args:null,concreteType:"Trigger",kind:"LinkedField",name:"trigger",plural:!1,selections:[a,K,en,{alias:null,args:null,kind:"ScalarField",name:"isConfigured",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPendingVerification",storageKey:null},{alias:null,args:null,concreteType:"TriggerSetup",kind:"LinkedField",name:"setup",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"actionArgs",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"actionName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"toolName",storageKey:null}],storageKey:null},t],storageKey:null},{alias:null,args:null,concreteType:"TriggerDefinition",kind:"LinkedField",name:"triggerDefinition",plural:!1,selections:[{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[V,L,t],storageKey:null},o,O,{alias:null,args:null,concreteType:"ToolTriggerChannel",kind:"LinkedField",name:"channel",plural:!1,selections:[Q],storageKey:null},q,L,el,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"fields",plural:!0,selections:[r,G,{kind:"InlineFragment",selections:[v,W,q,ea,et,ei,I,x,{alias:"defaultText",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldText",abstractKey:null},{kind:"InlineFragment",selections:[v,W,q,ea,et,ei,I,x,{alias:"defaultNumber",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"step",storageKey:null}],type:"TriggerFieldNumber",abstractKey:null},{kind:"InlineFragment",selections:es,type:"TriggerFieldLindyEmbedConfig",abstractKey:null},{kind:"InlineFragment",selections:[v,W,q,ea,et,ei,I,x,{alias:"defaultDate",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldDateTime",abstractKey:null},{kind:"InlineFragment",selections:er,type:"TriggerFieldAutoObserve",abstractKey:null},{kind:"InlineFragment",selections:[v,W,q,ea,et,ei,I,x,{alias:"defaultLindyMail",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldLindyMail",abstractKey:null},{kind:"InlineFragment",selections:[v,W,q,ea,et,ei,I,x,{alias:"defaultWebhook",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldLindyWebhook",abstractKey:null},{kind:"InlineFragment",selections:es,type:"TriggerFieldLindyPhoneNumber",abstractKey:null},{kind:"InlineFragment",selections:er,type:"TriggerFieldElevenLabsVoice",abstractKey:null},{kind:"InlineFragment",selections:[v,W,q,ea,et,ei,I,x,{alias:"defaultRecurringSchedule",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldRecurringSchedule",abstractKey:null},{kind:"InlineFragment",selections:[v,W,q,ea,et,ei,I,x,{alias:"defaultChecked",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldCheckbox",abstractKey:null},{kind:"InlineFragment",selections:es,type:"TriggerFieldLabel",abstractKey:null},{kind:"InlineFragment",selections:[v,W,q,ea,et,ei,I,x,{alias:null,args:null,kind:"ScalarField",name:"aliases",storageKey:null}],type:"TriggerFieldComparableText",abstractKey:null},{kind:"InlineFragment",selections:[v,W,q,ea,et,ei,I,x,{alias:"defaultItem",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"selectFirstByDefault",storageKey:null},eo],type:"TriggerFieldSelect",abstractKey:null},{kind:"InlineFragment",selections:[v,W,q,ea,et,ei,I,x,{alias:"defaultItems",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasAllowAllOption",storageKey:null},eo],type:"TriggerFieldMultiSelect",abstractKey:null},{kind:"InlineFragment",selections:[v,W,q,ea,et,ei,I,x,{alias:null,args:null,concreteType:"DynamicLoaderDetails",kind:"LinkedField",name:"loader",plural:!1,selections:J,storageKey:null}],type:"TriggerFieldDynamicLoader",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasPublishableConfig",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isHighThroughput",storageKey:null},E,{alias:null,args:null,concreteType:"ObservableChannelMetadata",kind:"LinkedField",name:"otherObservableChannel",plural:!1,selections:X,storageKey:null},{alias:null,args:null,concreteType:"TriggerTestingPolicy",kind:"LinkedField",name:"testingPolicy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"supportsSyntheticPayload",storageKey:null}],storageKey:null},t,a],storageKey:null}],type:"EntryPointTriggerNode",abstractKey:null},{kind:"InlineFragment",selections:[a,I,t,L,w,R,P],type:"LogicNode",abstractKey:null},N],storageKey:null},{alias:null,args:null,concreteType:"StateGraphStickyNote",kind:"LinkedField",name:"stickyNotes",plural:!0,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"note",storageKey:null},{alias:null,args:null,concreteType:"StickyNotePosition",kind:"LinkedField",name:"position",plural:!1,selections:_,storageKey:null},t],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AgentIcon",kind:"LinkedField",name:"icon",plural:!1,selections:[y,o],storageKey:null},{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:[a,{alias:null,args:null,concreteType:"AgentFolders",kind:"LinkedField",name:"agentFolders",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentRootFolder",kind:"LinkedField",name:"root",plural:!1,selections:[ed],storageKey:null},{alias:null,args:null,concreteType:"AgentFolder",kind:"LinkedField",name:"folders",plural:!0,selections:[ed,a],storageKey:null}],storageKey:null},t,h,{alias:null,args:null,concreteType:"SubscriptionInfo",kind:"LinkedField",name:"billingInfo",plural:!1,selections:[{alias:null,args:null,concreteType:"SubscriptionFeatures",kind:"LinkedField",name:"features",plural:!1,selections:[F],storageKey:null}],storageKey:null}],storageKey:null},en,u,m,{alias:null,args:null,kind:"ScalarField",name:"instructions",storageKey:null},P,{alias:null,args:null,kind:"ScalarField",name:"shouldAskForConfirmation",storageKey:null},{alias:null,args:null,concreteType:"Memory",kind:"LinkedField",name:"memories",plural:!0,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"isActive",storageKey:null},H],storageKey:null},{alias:null,args:null,concreteType:"AgentDefinitionTag",kind:"LinkedField",name:"tags",plural:!0,selections:[a,v,t],storageKey:null},g],type:"AgentDefinition",abstractKey:null}],storageKey:null},{condition:"hasTestRunId",kind:"Condition",passingValue:!0,selections:[{alias:"stateGraphTestRun",args:d,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[r,t,{kind:"InlineFragment",selections:[a,{alias:null,args:null,kind:"ScalarField",name:"initiallySelectedNodeId",storageKey:null},{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[a,t,{alias:null,args:null,kind:"ScalarField",name:"entryPointNodeId",storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:5e3}],concreteType:"ConversationBlocksConnection",kind:"LinkedField",name:"blocks",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationBlocksConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ConversationBlock",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"content",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"asJSON",storageKey:null}],storageKey:null},t],storageKey:null}],storageKey:null}],storageKey:"blocks(first:5000)"},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,concreteType:"ConversationChannel",kind:"LinkedField",name:"openChannels",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"startingNodeId",storageKey:null},Q,{alias:null,args:null,kind:"ScalarField",name:"instanceKey",storageKey:null},z,{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[V,t,L],storageKey:null},I,t,a],storageKey:null},{alias:null,args:null,concreteType:"TriggerRunAttempt",kind:"LinkedField",name:"startingTriggerRunAttempt",plural:!1,selections:[a,t,{alias:null,args:null,kind:"ScalarField",name:"createdByExternalPayloadId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"payloadId",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Trigger",kind:"LinkedField",name:"liveCaptureTrigger",plural:!1,selections:[a,t,en,{alias:null,args:null,concreteType:"TriggerDefinition",kind:"LinkedField",name:"definition",plural:!1,selections:[o,{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[V,t],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"payloadSchema",storageKey:null},el,{alias:null,args:null,concreteType:"TriggerTestingPolicy",kind:"LinkedField",name:"testingPolicy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"fullyProcessLiveCapturePayloads",storageKey:null}],storageKey:null},t],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"activeLiveCapturingInstructions",storageKey:null},{alias:null,args:eu,concreteType:"TriggerTestingPayloadsConnection",kind:"LinkedField",name:"testingPayloads",plural:!1,selections:[{alias:null,args:null,concreteType:"TriggerTestingPayloadsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"TriggerTestingPayload",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"externalId",storageKey:null},eg,em,ey,t,r],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:"testingPayloads(first:10)"},{alias:null,args:eu,filters:null,handle:"connection",key:"RailsTestingTriggerEntryPointView_testingPayloads",kind:"LinkedHandle",name:"testingPayloads"},{alias:null,args:[{kind:"Literal",name:"first",value:50}],concreteType:"TriggerRunAttemptsConnection",kind:"LinkedField",name:"runAttempts",plural:!1,selections:[{alias:null,args:null,concreteType:"TriggerRunAttemptsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"TriggerRunAttempt",kind:"LinkedField",name:"node",plural:!1,selections:[a,eg,{alias:null,args:ec,kind:"ScalarField",name:"processedPayload",storageKey:"processedPayload(shouldRemoveFieldsHiddenFromUI:true)"},c,em,ey,t],storageKey:null}],storageKey:null}],storageKey:"runAttempts(first:50)"}],storageKey:null}],type:"StateGraphTestRun",abstractKey:null}],storageKey:null}]}]},params:{cacheID:"845666402a447d23dc86976a0e5e6547",id:null,metadata:{},name:"SettingsLayoutQuery",operationKind:"query",text:'query SettingsLayoutQuery(\n  $nodeId: ID!\n  $hasTestRunId: Boolean = false\n  $testRunId: ID = ""\n) {\n  me {\n    id\n    nodeId\n    isAdmin\n    ...CommonLayoutSidebarIdentityFragment\n    ...useSaveAgentWithPremiumModal_Identity\n    ...LindyStoreLoader_Identity\n    ...SubscriptionContext_Identity\n    ...CommonLayout_Identity\n  }\n  node(id: $nodeId) {\n    __typename\n    ... on AgentDefinition {\n      id\n      nodeId\n      name\n      stateGraph {\n        id\n        nodeId\n      }\n      ...HeaderTitleSection_AgentDefinition\n      ...LindyStoreLoader_AgentDefinition\n      ...useSaveAgentWithPremiumModal_AgentDefinition\n      ...SaveChangesOnLeavingModalAgentDefinitionFragment\n      ...NameAndIconSectionAgentDefinitionFragment\n      ...RailsTestingAgentDefinitionFragment\n      ...AgentEnabledSwitch_AgentDefinition\n      ...HeaderNavButtons_AgentDefinition\n    }\n    nodeId\n  }\n  stateGraphTestRun: node(id: $testRunId) @include(if: $hasTestRunId) {\n    __typename\n    ... on StateGraphTestRun {\n      ...RailsTestingStateGraphTestRunFragment\n      ...RailsTestingStateGraphTestRunRefetchableFragment\n    }\n    nodeId\n  }\n  ...RailsTestingQueryFragment\n}\n\nfragment ActionTraceCard_AgentDefinition on AgentDefinition {\n  ...AgentUi_AgentDefinition\n}\n\nfragment ActionTraceCard_Identity on Identity {\n  ...AgentUi_Identity\n}\n\nfragment AgentContextMenuAgentDefinitionFragment on AgentDefinition {\n  id\n  name\n  isMuted\n  isFavorite\n  notificationsCount\n}\n\nfragment AgentContextMenuIdentityFragment on Identity {\n  id\n  ...DeleteAgentDefinitionMutationFragment\n  ...CopyAgentDefinitionMutationIdentityFragment\n}\n\nfragment AgentEnabledSwitch_AgentDefinition on AgentDefinition {\n  id\n  enabled\n  owner {\n    id\n    ...useSaveAgentWithPremiumModal_Identity\n    nodeId\n  }\n  ...useSaveAgentWithPremiumModal_AgentDefinition\n}\n\nfragment AgentSidebarItemAgentDefinitionFragment on AgentDefinition {\n  id\n  name\n  notificationsCount\n  isMuted\n  icon {\n    name\n    color\n  }\n  stateGraph {\n    id\n    nodeId\n  }\n  ...AgentContextMenuAgentDefinitionFragment\n}\n\nfragment AgentSidebarItemIdentityFragment on Identity {\n  id\n  ...AgentContextMenuIdentityFragment\n}\n\nfragment AgentUi_AgentDefinition on AgentDefinition {\n  ...FormBuilder_AgentDefinition\n}\n\nfragment AgentUi_Identity on Identity {\n  ...FormBuilder_Identity\n}\n\nfragment BlockResponses_AgentDefinition on AgentDefinition {\n  ...ActionTraceCard_AgentDefinition\n}\n\nfragment BlockResponses_Identity on Identity {\n  ...ActionTraceCard_Identity\n}\n\nfragment CommonLayoutSidebarIdentityFragment on Identity {\n  id\n  name\n  avatar {\n    url\n  }\n  agentDefinitions {\n    id\n    name\n    isFavorite\n    lastRunAt\n    createdAt\n    ...AgentSidebarItemAgentDefinitionFragment\n    nodeId\n  }\n  ...CreateLindySection_Identity\n  ...QualifiedSignupCtaFooter_Identity\n  ...CreditsFooterMe\n  ...AgentSidebarItemIdentityFragment\n}\n\nfragment CommonLayout_Identity on Identity {\n  ...PlansModal_Identity\n}\n\nfragment ConversationViewQueryFragment on Query {\n  me {\n    ...PromptInputQueryFragment\n    ...SubscriptionContext_Identity\n    ...Transcript_Identity\n    nodeId\n  }\n}\n\nfragment ConversationView_AgentDefinition on AgentDefinition {\n  ...Transcript_AgentDefinition\n}\n\nfragment CopyAgentDefinitionMutationIdentityFragment on Identity {\n  id\n  nodeId\n  agentDefinitions {\n    id\n    nodeId\n    name\n    icon {\n      name\n      color\n    }\n    createdAt\n  }\n  agentFolders {\n    root {\n      agentDefinitions {\n        id\n        nodeId\n        name\n        icon {\n          name\n          color\n        }\n        createdAt\n      }\n    }\n    folders {\n      id\n      agentDefinitions {\n        id\n        nodeId\n        name\n        icon {\n          name\n          color\n        }\n        createdAt\n      }\n    }\n  }\n}\n\nfragment CreateAgentMutationIdentityFragment on Identity {\n  id\n  nodeId\n  agentDefinitions {\n    id\n    nodeId\n    name\n    icon {\n      name\n      color\n    }\n  }\n  agentFolders {\n    root {\n      agentDefinitions {\n        id\n        nodeId\n        name\n        icon {\n          name\n          color\n        }\n      }\n    }\n    folders {\n      id\n      clientId\n      agentDefinitions {\n        id\n        nodeId\n        name\n        icon {\n          name\n          color\n        }\n      }\n    }\n  }\n}\n\nfragment CreateLindySection_Identity on Identity {\n  id\n  ...CreateAgentMutationIdentityFragment\n}\n\nfragment CreditsFooterMe on Identity {\n  nodeId\n  isMedicalScribe\n  billingInfo {\n    billingPeriodEndsAt\n    subscriptionPlan {\n      name\n    }\n    creditsInfo {\n      creditAllocation\n      consumed\n      percentConsumed\n    }\n    trialInfo {\n      expiresAt\n    }\n  }\n  ...PlansModal_Identity\n}\n\nfragment DeleteAgentDefinitionMutationFragment on Identity {\n  id\n  nodeId\n  agentDefinitions {\n    id\n    nodeId\n  }\n  agentFolders {\n    root {\n      agentDefinitions {\n        id\n        nodeId\n      }\n    }\n    folders {\n      id\n      agentDefinitions {\n        id\n        nodeId\n      }\n    }\n  }\n}\n\nfragment Execution_AgentDefinition on AgentDefinition {\n  ...BlockResponses_AgentDefinition\n}\n\nfragment Execution_Identity on Identity {\n  ...BlockResponses_Identity\n}\n\nfragment FormBuilderActionField_ActionNode on ActionNode {\n  __typename\n  actionDefinition {\n    action {\n      inputSchema\n      nodeId\n    }\n  }\n}\n\nfragment FormBuilderAuthInput_Identity on Identity {\n  id\n}\n\nfragment FormBuilderElement_AgentDefinition on AgentDefinition {\n  ...FormBuilderStateGraphNodeField_AgentDefinition\n}\n\nfragment FormBuilderElement_Identity on Identity {\n  ...FormBuilderAuthInput_Identity\n}\n\nfragment FormBuilderStateGraphNodeField_AgentDefinition on AgentDefinition {\n  stateGraph {\n    id\n    nodes {\n      __typename\n      ... on ActionNode {\n        __typename\n        id\n        actionDefinition {\n          action {\n            dynamicLoaders {\n              loaders {\n                defaultValue {\n                  name\n                  value\n                }\n                dependencies\n                description\n                displayName\n                field\n                icon\n                key\n                placeholder\n              }\n            }\n            nodeId\n          }\n        }\n        auth {\n          id\n          nodeId\n        }\n        ...FormBuilderActionField_ActionNode\n      }\n      ... on EntryPointTriggerNode {\n        __typename\n        id\n        auth {\n          id\n          nodeId\n        }\n        triggerDefinition {\n          id\n          fields {\n            __typename\n            key\n          }\n          nodeId\n        }\n      }\n      ... on Node {\n        __isNode: __typename\n        nodeId\n      }\n    }\n    nodeId\n  }\n}\n\nfragment FormBuilder_AgentDefinition on AgentDefinition {\n  ...FormBuilderElement_AgentDefinition\n}\n\nfragment FormBuilder_Identity on Identity {\n  ...FormBuilderElement_Identity\n}\n\nfragment HeaderNavButtons_AgentDefinition on AgentDefinition {\n  ...ThreadsNavButton_AgentDefinition\n}\n\nfragment HeaderTitleSection_AgentDefinition on AgentDefinition {\n  id\n  name\n  icon {\n    color\n    name\n  }\n  owner {\n    id\n    agentFolders {\n      root {\n        agentDefinitions {\n          id\n          createdAt\n          updatedAt\n          nodeId\n        }\n      }\n      folders {\n        agentDefinitions {\n          id\n          createdAt\n          updatedAt\n          nodeId\n        }\n      }\n    }\n    ...CopyAgentDefinitionMutationIdentityFragment\n    ...DeleteAgentDefinitionMutationFragment\n    nodeId\n  }\n  enabled\n  isFavorite\n  isMuted\n}\n\nfragment LindyStoreLoader_AgentDefinition on AgentDefinition {\n  id\n  name\n  instructions\n  model\n  shouldAskForConfirmation\n  icon {\n    name\n    color\n  }\n  memories {\n    id\n    isActive\n    value\n  }\n  tags {\n    id\n    label\n    nodeId\n  }\n  stateGraph {\n    id\n    nodeId\n    owner {\n      id\n      nodeId\n    }\n    version\n    autoLayoutEnabled\n    edges {\n      __typename\n      ... on ObserveEdge {\n        __typename\n        id\n        type\n        from\n        to\n        inflectionY\n      }\n      ... on StandardEdge {\n        __typename\n        id\n        type\n        from\n        to\n        inflectionY\n        condition\n        label\n      }\n      ... on Node {\n        __isNode: __typename\n        nodeId\n      }\n    }\n    nodes {\n      __typename\n      ... on AgentStateNode {\n        __typename\n        id\n        type\n        nodeId\n        displayName\n        position {\n          x\n          y\n        }\n        manuallyPositioned\n        guidelines\n        model\n        requireConfirmation\n        actions {\n          action {\n            isPremium\n            tool\n            key\n            authConfig {\n              __typename\n              ... on OAuth2AuthConfig {\n                __typename\n                method\n                provider\n                scopes\n              }\n              ... on CustomAuthConfig {\n                __typename\n                method\n                provider\n                fields\n              }\n              ... on CustomOAuth2AuthConfig {\n                __typename\n                fields\n                method\n                provider\n                scopes\n              }\n              ... on TokenAuthConfig {\n                __typename\n                method\n                provider\n              }\n              ... on PipedreamAuthConfig {\n                __typename\n                method\n                provider\n              }\n            }\n            nodeId\n          }\n          createdByNodeId\n          statefulToolKey\n        }\n      }\n      ... on ActionNode {\n        __typename\n        id\n        type\n        nodeId\n        displayName\n        position {\n          x\n          y\n        }\n        manuallyPositioned\n        actionDefinition {\n          createdByNodeId\n          statefulToolKey\n          tool {\n            nodeId\n            description\n            displayName\n            isPopular\n            tool\n          }\n          action {\n            nodeId\n            key\n            tool\n            toolDisplayName\n            dependencies\n            description\n            displayName\n            inputTree {\n              fields {\n                __typename\n                ... on InputTreeDynamicField {\n                  type\n                  key\n                  output\n                  displayName\n                  description\n                  placeholder\n                  defaultValue {\n                    name\n                    value\n                  }\n                  icon\n                }\n                ... on InputTreeStaticField {\n                  type\n                  schema\n                  field\n                }\n              }\n              parentFields\n            }\n            inputSchema\n            outputSchema\n            authConfig {\n              __typename\n              ... on OAuth2AuthConfig {\n                __typename\n                method\n                provider\n                scopes\n              }\n              ... on CustomAuthConfig {\n                __typename\n                method\n                provider\n                fields\n              }\n              ... on CustomOAuth2AuthConfig {\n                __typename\n                fields\n                method\n                provider\n                scopes\n              }\n              ... on TokenAuthConfig {\n                __typename\n                method\n                provider\n              }\n              ... on PipedreamAuthConfig {\n                __typename\n                method\n                provider\n              }\n            }\n            deprecated\n            dynamicLoaders {\n              loaders {\n                defaultValue {\n                  name\n                  value\n                }\n                dependencies\n                description\n                displayName\n                field\n                icon\n                key\n                placeholder\n              }\n              refetchInputAfterLoad\n            }\n            observableChannel {\n              agentMessageReceivedSchema\n              immediateEdgeLabel\n              observableEdgeLabel\n              statefulToolKey\n            }\n            hasSideEffects\n            isPremium\n            premiumActionCost\n            outputProperties {\n              displayName\n              type\n              value\n            }\n          }\n        }\n        actionConfiguration {\n          type\n          allowAdditionalArrayEntries\n          manualResult {\n            isUndefined\n            isNull\n            value\n          }\n          path\n          prompt\n          unionType\n        }\n        auth {\n          id\n          nodeId\n        }\n        guidelines\n        knowledgeSources {\n          entryCount\n          entryCountDisabled\n          isEnabled\n          source\n          syncStatus\n          syncToBeCompletedBy\n          totalFileSize\n          totalNumCharacters\n          totalNumEmbeddings\n          totalNumErrors\n          totalNumTokens\n        }\n        model\n        occurrence\n        statefulToolOccurrence\n        requireConfirmation\n      }\n      ... on EntryPointConversationNode {\n        __typename\n        id\n        type\n        nodeId\n        displayName\n        position {\n          x\n          y\n        }\n        manuallyPositioned\n        greetingMessage\n        conversationStarters {\n          value\n        }\n      }\n      ... on EntryPointTriggerNode {\n        __typename\n        id\n        type\n        nodeId\n        displayName\n        position {\n          x\n          y\n        }\n        manuallyPositioned\n        auth {\n          id\n          nodeId\n        }\n        triggerSetup\n        triggerEnabled\n        trigger {\n          id\n          owner {\n            id\n            nodeId\n          }\n          enabled\n          isConfigured\n          isPendingVerification\n          setup {\n            actionArgs\n            actionName\n            toolName\n          }\n          nodeId\n        }\n        triggerDefinition {\n          tool {\n            tool\n            displayName\n            nodeId\n          }\n          name\n          authConfig {\n            __typename\n            ... on OAuth2AuthConfig {\n              __typename\n              method\n              provider\n              scopes\n            }\n            ... on CustomAuthConfig {\n              __typename\n              method\n              provider\n              fields\n            }\n            ... on CustomOAuth2AuthConfig {\n              __typename\n              fields\n              method\n              provider\n              scopes\n            }\n            ... on TokenAuthConfig {\n              __typename\n              method\n              provider\n            }\n            ... on PipedreamAuthConfig {\n              __typename\n              method\n              provider\n            }\n          }\n          channel {\n            statefulToolKey\n          }\n          description\n          displayName\n          eventSchema\n          fields {\n            __typename\n            ... on TriggerFieldText {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              defaultText: defaultValue\n            }\n            ... on TriggerFieldNumber {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              defaultNumber: defaultValue\n              min\n              max\n              step\n            }\n            ... on TriggerFieldLindyEmbedConfig {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n            }\n            ... on TriggerFieldDateTime {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              defaultDate: defaultValue\n            }\n            ... on TriggerFieldAutoObserve {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              defaultValue\n            }\n            ... on TriggerFieldLindyMail {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              defaultLindyMail: defaultValue\n            }\n            ... on TriggerFieldLindyWebhook {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              defaultWebhook: defaultValue\n            }\n            ... on TriggerFieldLindyPhoneNumber {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n            }\n            ... on TriggerFieldElevenLabsVoice {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              defaultValue\n            }\n            ... on TriggerFieldRecurringSchedule {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              defaultRecurringSchedule: defaultValue\n            }\n            ... on TriggerFieldCheckbox {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              defaultChecked: defaultValue\n            }\n            ... on TriggerFieldLabel {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n            }\n            ... on TriggerFieldComparableText {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              aliases\n            }\n            ... on TriggerFieldSelect {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              defaultItem: defaultValue\n              selectFirstByDefault\n              isContextDependent\n            }\n            ... on TriggerFieldMultiSelect {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              defaultItems: defaultValue\n              hasAllowAllOption\n              isContextDependent\n            }\n            ... on TriggerFieldDynamicLoader {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              loader {\n                defaultValue {\n                  name\n                  value\n                }\n                dependencies\n                description\n                displayName\n                field\n                icon\n                key\n                placeholder\n              }\n            }\n          }\n          hasPublishableConfig\n          isHighThroughput\n          isPremium\n          otherObservableChannel {\n            agentMessageReceivedSchema\n            immediateEdgeLabel\n            observableEdgeLabel\n            statefulToolKey\n          }\n          testingPolicy {\n            supportsSyntheticPayload\n          }\n          nodeId\n        }\n      }\n      ... on LogicNode {\n        __typename\n        id\n        type\n        nodeId\n        displayName\n        position {\n          x\n          y\n        }\n        manuallyPositioned\n        model\n      }\n      ... on Node {\n        __isNode: __typename\n        nodeId\n      }\n    }\n    stickyNotes {\n      id\n      note\n      position {\n        x\n        y\n      }\n      nodeId\n    }\n  }\n}\n\nfragment LindyStoreLoader_Identity on Identity {\n  id\n  enabledFeatureFlags\n  auth {\n    fields\n    id\n    isConnected\n    label\n    method\n    provider\n    scopes\n    nodeId\n  }\n}\n\nfragment NameAndIconSectionAgentDefinitionFragment on AgentDefinition {\n  name\n  icon {\n    name\n    color\n  }\n}\n\nfragment PlansModal_Identity on Identity {\n  nodeId\n  isMedicalScribe\n  billingInfo {\n    trialInfo {\n      expiresAt\n    }\n    features {\n      isEligibleForFreePlan\n    }\n  }\n  ...ProPlanMe\n  ...ProPlanMedicalMe\n  ...UpcomingPlanMe\n}\n\nfragment ProPlanMe on Identity {\n  billingInfo {\n    subscriptionPlan {\n      creditAllocation\n    }\n    upcomingPlan {\n      subscriptionPlan {\n        creditAllocation\n        planType\n      }\n    }\n  }\n}\n\nfragment ProPlanMedicalMe on Identity {\n  billingInfo {\n    creditsInfo {\n      creditAllocation\n    }\n    upcomingPlan {\n      subscriptionPlan {\n        planType\n      }\n    }\n  }\n}\n\nfragment PromptInputQueryFragment on Identity {\n  nodeId\n  billingInfo {\n    creditsInfo {\n      creditBalance\n    }\n    lastPaymentFailure {\n      date\n    }\n  }\n  ...PlansModal_Identity\n}\n\nfragment QualifiedSignupCtaFooter_Identity on Identity {\n  id\n  nodeId\n  flags {\n    dismissedQualifiedSignupUpsell\n  }\n  isQualifiedSignup\n}\n\nfragment RailsTestingAgentDefinitionFragment on AgentDefinition {\n  id\n  nodeId\n  ...RailsTestingTaskView_AgentDefinition\n  ...RailsTestingTriggerEntryPointViewAgentDefinitionFragment\n  ...useRetryStateGraphTestRunExecutionMutation_AgentDefinition\n}\n\nfragment RailsTestingQueryFragment on Query {\n  ...RailsTestingTaskView_Query\n}\n\nfragment RailsTestingStateGraphTestRunFragment on StateGraphTestRun {\n  id\n  nodeId\n  initiallySelectedNodeId\n  conversation {\n    id\n    nodeId\n    entryPointNodeId\n    blocks(first: 5000) {\n      edges {\n        node {\n          content {\n            __typename\n            asJSON\n          }\n          nodeId\n        }\n      }\n    }\n  }\n  liveCaptureTrigger {\n    id\n    nodeId\n    enabled\n  }\n  ...RailsTestingTaskView_StateGraphTestRun\n  ...RailsTestingTriggerEntryPointViewStateGraphTestRunFragment\n  ...useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun\n}\n\nfragment RailsTestingStateGraphTestRunRefetchableFragment on StateGraphTestRun {\n  id\n  nodeId\n  initiallySelectedNodeId\n  conversation {\n    id\n    nodeId\n    entryPointNodeId\n    blocks(first: 5000) {\n      edges {\n        node {\n          content {\n            __typename\n            asJSON\n          }\n          nodeId\n        }\n      }\n    }\n  }\n  liveCaptureTrigger {\n    id\n    nodeId\n    enabled\n  }\n  ...RailsTestingTaskView_StateGraphTestRun\n  ...RailsTestingTriggerEntryPointViewStateGraphTestRunFragment\n  ...useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun\n}\n\nfragment RailsTestingTaskView_AgentDefinition on AgentDefinition {\n  id\n  nodeId\n  owner {\n    id\n    nodeId\n  }\n  ...useRetryStateGraphTestRunExecutionMutation_AgentDefinition\n  ...ConversationView_AgentDefinition\n}\n\nfragment RailsTestingTaskView_Query on Query {\n  ...ConversationViewQueryFragment\n}\n\nfragment RailsTestingTaskView_StateGraphTestRun on StateGraphTestRun {\n  id\n  conversation {\n    id\n    nodeId\n    entryPointNodeId\n    status\n    openChannels {\n      startingNodeId\n      statefulToolKey\n      instanceKey\n      createdByNodeId\n      tool {\n        tool\n        nodeId\n      }\n      type\n      nodeId\n    }\n    ...useAutoUpdatePucksConversationFragment\n    blocks(first: 5000) {\n      edges {\n        node {\n          content {\n            __typename\n            asJSON\n          }\n          nodeId\n        }\n      }\n    }\n  }\n  ...useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun\n}\n\nfragment RailsTestingTriggerEntryPointViewAgentDefinitionFragment on AgentDefinition {\n  id\n  nodeId\n}\n\nfragment RailsTestingTriggerEntryPointViewLiveCaptureTriggerRefetchableFragment on Trigger {\n  runAttempts(first: 50) {\n    edges {\n      node {\n        id\n        payload(shouldRemoveFieldsHiddenFromUI: true)\n        processedPayload(shouldRemoveFieldsHiddenFromUI: true)\n        createdAt\n        shouldRunCheck {\n          shouldRun\n          reasons {\n            message\n          }\n          softFilter\n        }\n        llmSummary\n        nodeId\n      }\n    }\n  }\n  nodeId\n}\n\nfragment RailsTestingTriggerEntryPointViewStateGraphTestRunFragment on StateGraphTestRun {\n  id\n  liveCaptureTrigger {\n    definition {\n      name\n      tool {\n        tool\n        nodeId\n      }\n      payloadSchema\n      eventSchema\n      testingPolicy {\n        fullyProcessLiveCapturePayloads\n      }\n      nodeId\n    }\n    id\n    nodeId\n    activeLiveCapturingInstructions\n    testingPayloads(first: 10) {\n      edges {\n        node {\n          externalId\n          payload(shouldRemoveFieldsHiddenFromUI: true)\n          shouldRunCheck {\n            shouldRun\n            reasons {\n              message\n            }\n            softFilter\n          }\n          llmSummary\n          nodeId\n          __typename\n        }\n        cursor\n      }\n      pageInfo {\n        endCursor\n        hasNextPage\n      }\n    }\n    ...RailsTestingTriggerEntryPointViewLiveCaptureTriggerRefetchableFragment\n  }\n  conversation {\n    startingTriggerRunAttempt {\n      id\n      nodeId\n      createdByExternalPayloadId\n      payloadId\n    }\n    nodeId\n  }\n  nodeId\n}\n\nfragment SaveChangesOnLeavingModalAgentDefinitionFragment on AgentDefinition {\n  ...useSaveAgentAgentDefinitionFragment\n}\n\nfragment SubscriptionContext_Identity on Identity {\n  billingInfo {\n    billingVersion\n    features {\n      arePremiumFeaturesEnabled\n      hasKnowledgeBaseIncreasedLimits\n    }\n  }\n  ...PlansModal_Identity\n}\n\nfragment ThreadsNavButton_AgentDefinition on AgentDefinition {\n  notificationsCount\n  isMuted\n}\n\nfragment Transcript_AgentDefinition on AgentDefinition {\n  ...Execution_AgentDefinition\n}\n\nfragment Transcript_Identity on Identity {\n  name\n  avatar {\n    url\n  }\n  ...Execution_Identity\n}\n\nfragment UpcomingPlanMe on Identity {\n  isMedicalScribe\n  billingInfo {\n    trialInfo {\n      expiresAt\n    }\n    subscriptionPlan {\n      creditAllocation\n    }\n    upcomingPlan {\n      subscriptionPlan {\n        creditAllocation\n        name\n        planType\n      }\n      startDate\n    }\n  }\n}\n\nfragment useAutoUpdatePucksConversationFragment on Conversation {\n  id\n  openChannels {\n    id\n    startingNodeId\n    createdByNodeId\n    tool {\n      tool\n      displayName\n      nodeId\n    }\n    nodeId\n  }\n}\n\nfragment useRetryStateGraphTestRunExecutionMutation_AgentDefinition on AgentDefinition {\n  id\n  owner {\n    id\n    nodeId\n  }\n}\n\nfragment useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun on StateGraphTestRun {\n  id\n  conversation {\n    blocks(first: 5000) {\n      edges {\n        node {\n          content {\n            __typename\n            asJSON\n          }\n          nodeId\n        }\n      }\n    }\n    nodeId\n  }\n}\n\nfragment useSaveAgentAgentDefinitionFragment on AgentDefinition {\n  id\n  name\n  icon {\n    name\n    color\n  }\n  owner {\n    id\n    nodeId\n  }\n}\n\nfragment useSaveAgentWithPremiumModal_AgentDefinition on AgentDefinition {\n  ...useSaveAgentAgentDefinitionFragment\n}\n\nfragment useSaveAgentWithPremiumModal_Identity on Identity {\n  id\n  billingInfo {\n    features {\n      arePremiumFeaturesEnabled\n    }\n  }\n}\n'}}}();t.hash="9dd6c483760c86b8c2cc03b993553def";var i=l(32588),s=l(3641),r=l(46772),o=l(72735),d=l(9234),u=l(57511),c=l(6779),g=l(10639),m=l(55563),y=l(61082),p=l(59051),f=l(7061),h=l(42392),k=l(57414),F=l(34372),x=l(92428),v=l(39528),b=l(53758),S=l(50470),T=l(85926),K=l(20923),I=l(31284),C=l(45785),A=l(8678),j=l(49321),N=l.n(j),L=l(81778),_=l(79124);l(97244);var w=l(98755);function R(e){return(0,a.jsx)("div",{className:"mb-3 flex w-full items-center justify-start gap-x-2 text-slate-12",children:e.children})}function D(e){return(0,a.jsx)("div",{className:"text-sm font-medium leading-none",children:e.children})}function P(e){return(0,a.jsx)("section",{className:"w-full",children:e.children})}function M(e){return(0,a.jsx)("div",{className:"flex h-[18px] w-[18px] items-center justify-center text-slate-12",children:e.children})}var E=l(94531),V=l(94344),G=l(91871),B=l(85201);function O(e){return(0,a.jsx)(B.bL,{openDelay:200,closeDelay:300,...e})}var z=l(25919);function Q(e){let{children:n,className:l,...t}=e;return(0,a.jsx)(B.ZL,{children:(0,a.jsxs)(B.UC,{className:(0,z.QP)("max-w-72 origin-top rounded-[10px] bg-white p-4 dark:bg-slate-1 relative","ring-1 ring-slate-12 ring-opacity-5 focus:outline-none shadow-md text-slate-11 text-xs font-normal border-slate-4",l),...t,children:[n,(0,a.jsx)(B.i3,{asChild:!0,children:(0,a.jsx)("div",{className:"h-3 w-3 -translate-y-1/2 rotate-45 rounded-sm border-b border-r border-slate-4 bg-white dark:bg-slate-1"})})]})})}function q(e){return(0,a.jsx)(B.l9,{...e})}function U(e){return(0,a.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,a.jsx)("path",{d:"M8.25 8.25H9V12m6.75-3a6.75 6.75 0 1 1-13.5 0 6.75 6.75 0 0 1 13.5 0Z",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("rect",{x:"8.438",y:"5.438",width:"1.125",height:"1.125",rx:".563",fill:"currentColor",stroke:"currentColor",strokeWidth:".375"})]})}function W(e){return(0,a.jsxs)(O,{children:[(0,a.jsx)(q,{asChild:!0,children:(0,a.jsx)("button",{className:(0,z.QP)("rounded-full flex items-center justify-center w-4 h-4 bg-slate-1",G.Y),children:(0,a.jsx)(U,{className:"h-4 w-4 text-slate-9"})})}),(0,a.jsx)(Q,{children:e.children})]})}let H=(0,A.PA)(function(){var e,n;let l=null!==(n=null===(e=I.a.lindies.currentLindy)||void 0===e?void 0:e.agentSettings.instructions)&&void 0!==n?n:"",t=(0,V.useCallback)(e=>{I.a.lindies.currentLindy&&I.a.lindies.currentLindy.agentSettings.setInstructions(e)},[]);return(0,a.jsxs)(P,{children:[(0,a.jsxs)(R,{children:[(0,a.jsx)(M,{children:(0,a.jsx)(E.v,{})}),(0,a.jsx)(D,{children:"Context"}),(0,a.jsx)(W,{children:"Provide background information for this Lindy to keep in mind at all times."})]}),(0,a.jsx)(w.g,{minHeight:240,maxHeight:359,placeholder:"E.g. Youâ€™re a customer support agent for Acme, a bakery. Your goal is to reply to tickets and escalate to a human when unsure.",value:l,onChange:t,className:"bg-panel"})]})});var $=l(71804);function Z(e){return(0,a.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,a.jsx)("g",{clipPath:"url(#a)",clipRule:"evenodd",stroke:"currentColor",strokeWidth:"1.2",strokeLinejoin:"round",children:(0,a.jsx)("path",{d:"M16.5 11.25c-3.646 0-5.25 1.604-5.25 5.25 0-3.646-1.604-5.25-5.25-5.25 3.646 0 5.25-1.604 5.25-5.25 0 3.646 1.604 5.25 5.25 5.25ZM8.25 4.875c-2.344 0-3.375 1.031-3.375 3.375 0-2.344-1.031-3.375-3.375-3.375 2.344 0 3.375-1.031 3.375-3.375 0 2.344 1.031 3.375 3.375 3.375Z"})}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"a",children:(0,a.jsx)("path",{fill:"#fff",d:"M0 0h18v18H0z"})})})]})}let Y={className:"bg-panel"},J=(0,A.PA)(function(){var e,n;let l=null!==(n=null===(e=I.a.lindies.currentLindy)||void 0===e?void 0:e.agentSettings.model)&&void 0!==n?n:"",t=(0,V.useCallback)(e=>{e&&I.a.lindies.currentLindy&&I.a.lindies.currentLindy.agentSettings.setModel(e)},[]);return(0,a.jsxs)(P,{children:[(0,a.jsxs)(R,{children:[(0,a.jsx)(M,{children:(0,a.jsx)(Z,{})}),(0,a.jsx)(D,{children:"Default Model"}),(0,a.jsx)(W,{children:"The default language model you want this Lindy to use. Can be overridden in each node in the Flow Editor."})]}),(0,a.jsx)($.R,{value:l,onChange:t,dropdown:Y})]})});var X=l(88036),ee=l(80936);let en=(0,V.memo)(function(e){let{className:n,...l}=e;return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",className:n,...l,children:(0,a.jsx)("path",{d:"M6.75 5.25V6.75M9.75 5.25V6.75M4.5 2.25H12C12.4142 2.25 12.75 2.58579 12.75 3V5.54584C12.75 5.84197 12.8377 6.13149 13.0019 6.37789L13.9981 7.87211C14.1623 8.11851 14.25 8.40803 14.25 8.70416V15C14.25 15.4142 13.9142 15.75 13.5 15.75H4.5C4.08579 15.75 3.75 15.4142 3.75 15V3C3.75 2.58579 4.08579 2.25 4.5 2.25Z",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round",stroke:"currentColor"})})}),el=(0,A.PA)(function(){var e,n;let l=null!==(n=null===(e=I.a.lindies.currentLindy)||void 0===e?void 0:e.agentSettings.memories)&&void 0!==n?n:[],t=(0,V.useCallback)(e=>{I.a.lindies.currentLindy&&I.a.lindies.currentLindy.agentSettings.setMemories(e)},[]);return(0,a.jsxs)(P,{children:[(0,a.jsxs)(R,{children:[(0,a.jsx)(M,{children:(0,a.jsx)(en,{})}),(0,a.jsx)(D,{children:"Memories"}),(0,a.jsxs)(W,{children:["Memories are evolving details Lindy learns and retains across threads. In contrast, Context is fixed. Manage them below or in the"," ",(0,a.jsxs)(X.N,{href:"https://help.lindy.ai/en/articles/9751027-memories",className:"inline",children:[" ","Flow Editor"]}),"."]})]}),(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(ee.H,{checkIcon:!1,value:l,onChange:t,placeholder:"Add a new Memory (E.g. My working hours are 9am-6pm)",disabled:!1,className:"bg-panel"})})]})}),ea=function(){var e={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"NameAndIconSectionAgentDefinitionFragment",selections:[e,{alias:null,args:null,concreteType:"AgentIcon",kind:"LinkedField",name:"icon",plural:!1,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null}],storageKey:null}],type:"AgentDefinition",abstractKey:null}}();ea.hash="8b015e3631657a9343672015f4d3f7e0";var et=l(79305),ei=l(77283),es=l(1332),er=l(98448);let eo=(0,A.PA)(function(e){var n,l;let t=(0,V.useRef)(null),i=(0,_.useFragment)(ea,e.agentDefinitionFragmentRef),s=I.a.lindies.currentLindy,r=(0,V.useCallback)(e=>{var n,l;null===(n=I.a.lindies.currentLindy)||void 0===n||n.agentSettings.setIconName(e.name),null===(l=I.a.lindies.currentLindy)||void 0===l||l.agentSettings.setIconColor(e.color)},[]),o=(0,V.useCallback)(e=>{if("Enter"===e.key){var n;null===(n=t.current)||void 0===n||n.blur()}},[]);if(!s)return null;let d=s.agentSettings,u=d.isNameDirty?d.name:i.name,c=d.isIconNameDirty?d.iconName:(0,er.HI)(null===(n=i.icon)||void 0===n?void 0:n.name),g=d.isIconColorDirty?d.iconColor:(0,er.Rz)(null===(l=i.icon)||void 0===l?void 0:l.color);return(0,a.jsxs)("div",{className:"flex flex-col gap-y-3",children:[(0,a.jsx)("div",{children:(0,a.jsx)(es.Y,{icon:c,color:g,onIconChange:r,className:(0,z.QP)("flex h-10 w-10 items-center justify-center rounded-xl border border-slate-3 bg-white shadow-xs dark:bg-slate-1",G.Y),children:(0,a.jsx)(ei.l,{className:"rounded-md shadow-none",icon:c,color:g})})}),(0,a.jsx)(et.V,{ref:t,value:u,onChange:s.agentSettings.setName,minWidth:24,onKeyDown:o,className:(0,z.QP)("hover:bg-slate-4","focus-visible:ring-2 ring-inset focus:ring-primary-8 outline-none border-none focus:outline-none transition","font-semibold text-slate-12 ring-inset bg-transparent rounded text-2xl ring-offset-0 px-0.5 py-0.5 leading-none -ml-0.5")})]})});var ed=l(78604),eu=l(70732);let ec=(0,A.PA)(function(){var e,n;let l=null===(n=null===(e=I.a.lindies.currentLindy)||void 0===e?void 0:e.agentSettings.shouldAskForConfirmation)||void 0===n||n,t=(0,V.useCallback)(e=>{I.a.lindies.currentLindy&&I.a.lindies.currentLindy.agentSettings.setShouldAskForConfirmation(e)},[]);return(0,a.jsxs)(P,{children:[(0,a.jsxs)(R,{children:[(0,a.jsx)(M,{children:(0,a.jsx)(ed.A,{})}),(0,a.jsx)(D,{children:"Safe Mode"}),(0,a.jsx)(W,{children:"Require this Lindy to ask for confirmation before performing any action with side effects."})]}),(0,a.jsx)(eu.d,{checked:l,onChange:t})]})}),eg=function(){var e=[{kind:"Literal",name:"first",value:100}],n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"TagsSectionQuery",selections:[{alias:null,args:e,concreteType:"QueryAgentDefinitionTagsConnection",kind:"LinkedField",name:"agentDefinitionTags",plural:!1,selections:[{alias:null,args:null,concreteType:"QueryAgentDefinitionTagsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"AgentDefinitionTag",kind:"LinkedField",name:"node",plural:!1,selections:[n,l],storageKey:null}],storageKey:null}],storageKey:"agentDefinitionTags(first:100)"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"TagsSectionQuery",selections:[{alias:null,args:e,concreteType:"QueryAgentDefinitionTagsConnection",kind:"LinkedField",name:"agentDefinitionTags",plural:!1,selections:[{alias:null,args:null,concreteType:"QueryAgentDefinitionTagsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"AgentDefinitionTag",kind:"LinkedField",name:"node",plural:!1,selections:[n,l,{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"agentDefinitionTags(first:100)"}]},params:{cacheID:"2ff716cf49c284d8bb4e76266d633fd3",id:null,metadata:{},name:"TagsSectionQuery",operationKind:"query",text:"query TagsSectionQuery {\n  agentDefinitionTags(first: 100) {\n    edges {\n      node {\n        id\n        label\n        nodeId\n      }\n    }\n  }\n}\n"}}}();eg.hash="74efbf12bc0f1e34276b00ffbda70e68";var em=l(86278),ey=l(57147),ep=l(84370),ef=l(91318),eh=l(67373),ek=l(20335),eF=l(41285),ex=l(63193),ev=l(36441);let eb=(0,A.PA)(function(){let[e,n]=(0,V.useState)(0),l=(0,_.useLazyLoadQuery)(eg,{},{fetchKey:e,fetchPolicy:"network-only"});(0,ev.mJ)(()=>{var e;return null===(e=I.a.lindies.currentLindy)||void 0===e?void 0:e.agentSettings.lastSavedState},()=>n(e=>e+1));let t=(0,ef.q2)(()=>{var e,n;return null!==(n=null===(e=I.a.lindies.currentLindy)||void 0===e?void 0:e.agentSettings.tags)&&void 0!==n?n:[]},[]),i=(0,ef.q2)(()=>{let e=new Set(t.map(e=>e.label));return l.agentDefinitionTags.edges.filter(ex.Vq).filter(n=>!e.has(n.node.label)).map(e=>({id:e.node.id,label:e.node.label}))},[l.agentDefinitionTags.edges,t]),s=e=>()=>{var n;null===(n=I.a.lindies.currentLindy)||void 0===n||n.agentSettings.addTag(e)},r=e=>()=>{var n;null===(n=I.a.lindies.currentLindy)||void 0===n||n.agentSettings.removeTag(e)},[o,d]=(0,V.useState)(""),u=(0,V.useCallback)(()=>{I.a.lindies.currentLindy&&(I.a.lindies.currentLindy.agentSettings.addTag({label:o}),d(""))},[o]),c=(0,V.useCallback)(e=>{e.preventDefault(),u()},[u]);return(0,a.jsxs)(P,{children:[(0,a.jsxs)(R,{children:[(0,a.jsx)(M,{children:(0,a.jsx)(ey.A,{className:"size-4"})}),(0,a.jsx)(D,{children:"Tags"})]}),(0,a.jsxs)("div",{className:"mt-3 flex flex-wrap gap-2 rounded-md border border-slate-3 p-2",children:[t.map(e=>(0,a.jsx)(eh.$,{size:"sm",level:"outline",onClick:r(e),children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[e.label,(0,a.jsx)(em.A,{className:"size-4 cursor-pointer text-slate-11"})]})},e.label)),0===t.length&&(0,a.jsx)("div",{className:"my-px w-full py-1.5 text-center text-sm text-slate-11",children:"No tags added"})]}),(0,a.jsx)("div",{className:"my-3 flex flex-col gap-2",children:(0,a.jsx)(eF.J,{children:"Add tags"})}),(0,a.jsx)(ep.mF,{children:i.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2 rounded-md border border-slate-3 p-2",children:i.map(e=>(0,a.jsx)(eh.$,{size:"sm",level:"outline",onClick:s(e),children:(0,a.jsx)("div",{className:"flex items-center gap-1",children:e.label})},e.label))})}),(0,a.jsx)("form",{onSubmit:c,children:(0,a.jsx)("div",{className:"mt-3 flex flex-col gap-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(ek.pd,{className:"bg-panel",placeholder:"Add a new tag",value:o,onChange:d}),(0,a.jsx)("div",{className:"shrink-0",children:(0,a.jsx)(eh.$,{size:"lg",onClick:u,disabled:!o.trim(),children:"Add"})})]})})})]})});var eS=l(66213),eT=l(33848),eK=l(14135),eI=l(41910),eC=l(52954),eA=l(2096),ej=l(19762),eN=l(1102);let eL=t,e_=(0,A.PA)(function(e){var n,l,t,A,j;let{[o.wG]:w}=(0,L.useRouter)().query,R=(0,_.useLazyLoadQuery)(eL,{nodeId:(0,K.F)("AgentDefinition",e.lindyId),hasTestRunId:!!w,testRunId:"string"==typeof w?(0,K.F)("StateGraphTestRun",w):""}),D=(null===(n=R.node)||void 0===n?void 0:n.__typename)==="AgentDefinition"?R.node:null,P=R.stateGraphTestRun;return(t=R.me.id,A=e.lindyId,j=null==D?void 0:D.name,(0,eS.f)(eK.editorLayoutQuery,{nodeId:(0,K.F)("AgentDefinition",A)}),(0,eS.f)(ej.threadsLayoutQuery,{nodeId:(0,K.F)("AgentDefinition",A),count:eA.cV,cursor:null}),(0,eN.dH)(),(0,eC.h)(A,j),(0,eI.F)("settings"),(0,eT.L)({identityId:t,agentDefinitionId:A}),(0,F.f)(),(0,v.x)(),(0,x.f)(),null==D?void 0:null===(l=D.stateGraph)||void 0===l?void 0:l.id)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(N(),{children:(0,a.jsxs)("title",{children:[D.name," - Lindy"]})}),(0,a.jsx)(b.tn,{identityFragmentRef:R.me,agentDefinitionFragmentRef:D,children:(0,a.jsx)(C.Ln,{children:(0,a.jsx)(d.i,{userId:R.me.id,identityFragmentRef:R.me,children:(0,a.jsx)(r.u,{identityFragmentRef:R.me,children:(0,a.jsx)(u.V,{sidebar:(0,a.jsx)(f.Qm,{view:"settings",identityFragmentRef:R.me}),header:(0,a.jsxs)(y.X,{children:[(0,a.jsx)("div",{className:"flex flex-1 items-center",children:(0,a.jsx)(g.X,{agentDefinitionFragmentRef:D,agentEnabledSwitch:(0,a.jsx)(S.q,{agentDefinitionFragmentRef:D})})}),(0,a.jsx)("div",{className:"flex flex-1 items-center justify-center",children:(0,a.jsx)(c.U,{lindyId:D.id,lindyName:D.name,view:"settings",agentDefinitionFragmentRef:D})}),(0,a.jsxs)("div",{className:"flex min-w-fit flex-1 flex-row items-center justify-end gap-x-2",children:[(0,a.jsx)(k.g,{}),(0,a.jsx)(m.K,{identityFragmentRef:R.me,agentDefinitionFragmentRef:D})]})]}),content:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.L5,{open:I.a.ui.isTestingPanelOpen,mainContent:(0,a.jsx)("main",{className:"overflow-y-hidden",children:(0,a.jsx)(T.OY,{children:(0,a.jsx)("div",{className:"flex w-full justify-center",children:(0,a.jsxs)("div",{className:"m-12 flex w-full max-w-2xl flex-col gap-y-8",children:[(0,a.jsx)(eo,{agentDefinitionFragmentRef:D}),(0,a.jsx)(H,{}),(0,a.jsx)(el,{}),(0,a.jsx)(J,{}),(0,a.jsx)(ec,{}),R.me.isAdmin&&(0,a.jsx)(eb,{})]})})})}),panelContent:(0,a.jsx)(h.u,{queryFragmentRef:R,agentDefinitionFragmentRef:D,stateGraphTestRunFragmentRef:P,className:"size-full bg-panel"}),persistKey:s.Y4.EditorSidebar,defaultWidth:400,minWidth:400,maxWidth:800}),(0,a.jsx)(p.v,{lindyId:D.id,lindyName:D.name,agentDefinitionFragmentRef:D})]})})})})})})]}):(0,a.jsx)(i.r,{to:"/home"})})},19762:(e,n,l)=>{"use strict";l.r(n),l.d(n,{ThreadsLayout:()=>e9,threadsLayoutQuery:()=>e4});var a=l(50612);let t=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"},{defaultValue:null,kind:"LocalArgument",name:"nodeId"}],n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},l={kind:"Variable",name:"nodeId",variableName:"nodeId"},a=[{kind:"Variable",name:"id",variableName:"nodeId"}],t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"isFavorite",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"notificationsCount",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"isMuted",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},c={alias:null,args:null,concreteType:"AgentIcon",kind:"LinkedField",name:"icon",plural:!1,selections:[i,u],storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},m=[n,g],y={alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinitions",plural:!0,selections:[n,g,i,c,r],storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"creditAllocation",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"fields",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"method",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"provider",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"scopes",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"updatedAt",storageKey:null},b={alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinitions",plural:!0,selections:[n,r,v,g,i,c],storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"enabled",storageKey:null},T={alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},K={alias:null,args:null,kind:"ScalarField",name:"occurrence",storageKey:null},I={alias:null,args:null,kind:"ScalarField",name:"tool",storageKey:null},C={alias:null,args:null,concreteType:"StateGraphAction",kind:"LinkedField",name:"actionDefinition",plural:!1,selections:[{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[I,g],storageKey:null},{alias:null,args:null,concreteType:"ActionDetails",kind:"LinkedField",name:"action",plural:!1,selections:[T,g],storageKey:null}],storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"guidelines",storageKey:null},j={kind:"InlineFragment",selections:[g],type:"Node",abstractKey:"__isNode"},N={alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:m,storageKey:null},L={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"from",storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"to",storageKey:null},R={alias:null,args:null,kind:"ScalarField",name:"inflectionY",storageKey:null},D=[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],P={alias:null,args:null,concreteType:"NodePosition",kind:"LinkedField",name:"position",plural:!1,selections:D,storageKey:null},M={alias:null,args:null,kind:"ScalarField",name:"manuallyPositioned",storageKey:null},E={alias:null,args:null,kind:"ScalarField",name:"model",storageKey:null},V={alias:null,args:null,kind:"ScalarField",name:"requireConfirmation",storageKey:null},G={alias:null,args:null,kind:"ScalarField",name:"isPremium",storageKey:null},B={alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},O=[k,F],z={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"authConfig",plural:!1,selections:[t,{kind:"InlineFragment",selections:[k,F,x],type:"OAuth2AuthConfig",abstractKey:null},{kind:"InlineFragment",selections:[k,F,f],type:"CustomAuthConfig",abstractKey:null},{kind:"InlineFragment",selections:[f,k,F,x],type:"CustomOAuth2AuthConfig",abstractKey:null},{kind:"InlineFragment",selections:O,type:"TokenAuthConfig",abstractKey:null},{kind:"InlineFragment",selections:O,type:"PipedreamAuthConfig",abstractKey:null}],storageKey:null},Q={alias:null,args:null,kind:"ScalarField",name:"createdByNodeId",storageKey:null},q={alias:null,args:null,kind:"ScalarField",name:"statefulToolKey",storageKey:null},U={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},W={alias:null,args:null,kind:"ScalarField",name:"dependencies",storageKey:null},H={alias:null,args:null,kind:"ScalarField",name:"placeholder",storageKey:null},$={alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null},Z={alias:null,args:null,concreteType:"DynamicLoaderDefaultValue",kind:"LinkedField",name:"defaultValue",plural:!1,selections:[i,$],storageKey:null},Y={alias:null,args:null,kind:"ScalarField",name:"icon",storageKey:null},J={alias:null,args:null,kind:"ScalarField",name:"field",storageKey:null},X=[Z,W,U,T,J,Y,B,H],ee=[{alias:null,args:null,kind:"ScalarField",name:"agentMessageReceivedSchema",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"immediateEdgeLabel",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"observableEdgeLabel",storageKey:null},q],en={alias:null,args:null,concreteType:"Auth",kind:"LinkedField",name:"auth",plural:!1,selections:m,storageKey:null},el={alias:null,args:null,kind:"ScalarField",name:"tooltip",storageKey:null},ea={alias:null,args:null,kind:"ScalarField",name:"isRequired",storageKey:null},et={alias:null,args:null,kind:"ScalarField",name:"canBeSharedWithTemplate",storageKey:null},ei=[h,H,U,el,ea,et,L,f],es=[h,H,U,el,ea,et,L,f,{alias:null,args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],er={alias:null,args:null,kind:"ScalarField",name:"isContextDependent",storageKey:null},eo=[{kind:"Variable",name:"after",variableName:"cursor"},{kind:"Variable",name:"first",variableName:"count"}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ThreadsLayoutQuery",selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"me",plural:!1,selections:[n,{args:null,kind:"FragmentSpread",name:"CommonLayoutSidebarIdentityFragment"},{args:null,kind:"FragmentSpread",name:"WithDebuggerPanel_Identity"},{args:null,kind:"FragmentSpread",name:"CommonLayout_Identity"}],storageKey:null},{args:[l],kind:"FragmentSpread",name:"ThreadsHeaderSection_Query"},{args:[{kind:"Variable",name:"count",variableName:"count"},{kind:"Variable",name:"cursor",variableName:"cursor"},l],kind:"FragmentSpread",name:"ThreadsContentSection_Query"},{alias:null,args:a,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[t,{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"WithDebuggerPanel_AgentDefinition"}],type:"AgentDefinition",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ThreadsLayoutQuery",selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"me",plural:!1,selections:[n,i,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"avatar",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinitions",plural:!0,selections:[n,i,s,{alias:null,args:null,kind:"ScalarField",name:"lastRunAt",storageKey:null},r,o,d,c,{alias:null,args:null,concreteType:"StateGraph",kind:"LinkedField",name:"stateGraph",plural:!1,selections:m,storageKey:null},g],storageKey:null},g,{alias:null,args:null,concreteType:"AgentFolders",kind:"LinkedField",name:"agentFolders",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentRootFolder",kind:"LinkedField",name:"root",plural:!1,selections:[y],storageKey:null},{alias:null,args:null,concreteType:"AgentFolder",kind:"LinkedField",name:"folders",plural:!0,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"clientId",storageKey:null},y],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"IdentityFlags",kind:"LinkedField",name:"flags",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"dismissedQualifiedSignupUpsell",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isQualifiedSignup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isMedicalScribe",storageKey:null},{alias:null,args:null,concreteType:"SubscriptionInfo",kind:"LinkedField",name:"billingInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"billingPeriodEndsAt",storageKey:null},{alias:null,args:null,concreteType:"SubscriptionPlan",kind:"LinkedField",name:"subscriptionPlan",plural:!1,selections:[i,p],storageKey:null},{alias:null,args:null,concreteType:"CreditsInfo",kind:"LinkedField",name:"creditsInfo",plural:!1,selections:[p,{alias:null,args:null,kind:"ScalarField",name:"consumed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"percentConsumed",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"TrialInfo",kind:"LinkedField",name:"trialInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"expiresAt",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"SubscriptionFeatures",kind:"LinkedField",name:"features",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isEligibleForFreePlan",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"UpcomingPlan",kind:"LinkedField",name:"upcomingPlan",plural:!1,selections:[{alias:null,args:null,concreteType:"SubscriptionPlan",kind:"LinkedField",name:"subscriptionPlan",plural:!1,selections:[p,{alias:null,args:null,kind:"ScalarField",name:"planType",storageKey:null},i],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"startDate",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isAdmin",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"enabledFeatureFlags",storageKey:null},{alias:null,args:null,concreteType:"Auth",kind:"LinkedField",name:"auth",plural:!0,selections:[f,n,{alias:null,args:null,kind:"ScalarField",name:"isConnected",storageKey:null},h,k,F,x,g],storageKey:null}],storageKey:null},{alias:null,args:a,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[t,g,{kind:"InlineFragment",selections:[n,i,{alias:null,args:null,concreteType:"AgentIcon",kind:"LinkedField",name:"icon",plural:!1,selections:[u,i],storageKey:null},{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:[n,{alias:null,args:null,concreteType:"AgentFolders",kind:"LinkedField",name:"agentFolders",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentRootFolder",kind:"LinkedField",name:"root",plural:!1,selections:[b],storageKey:null},{alias:null,args:null,concreteType:"AgentFolder",kind:"LinkedField",name:"folders",plural:!0,selections:[b,n],storageKey:null}],storageKey:null},g,y,{alias:null,args:null,concreteType:"SubscriptionInfo",kind:"LinkedField",name:"billingInfo",plural:!1,selections:[{alias:null,args:null,concreteType:"SubscriptionFeatures",kind:"LinkedField",name:"features",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"arePremiumFeaturesEnabled",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},S,s,d,o,{alias:null,args:null,concreteType:"StateGraph",kind:"LinkedField",name:"stateGraph",plural:!1,selections:[{alias:null,args:null,concreteType:"EntryPointConversationNode",kind:"LinkedField",name:"entryPointConversationNode",plural:!1,selections:[g,t,{kind:"InlineFragment",selections:[{kind:"InlineFragment",selections:[n,T,K,C],type:"ActionNode",abstractKey:null},{kind:"InlineFragment",selections:[n,T,A],type:"AgentStateNode",abstractKey:null}],type:"StateGraphNode",abstractKey:"__isStateGraphNode"}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"workflowStartNodes",plural:!0,selections:[t,n,{kind:"TypeDiscriminator",abstractKey:"__isStateGraphNode"},{kind:"InlineFragment",selections:[T,K,C],type:"ActionNode",abstractKey:null},{kind:"InlineFragment",selections:[T,A],type:"AgentStateNode",abstractKey:null},j],storageKey:null},g,n,N,{alias:null,args:null,kind:"ScalarField",name:"version",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"autoLayoutEnabled",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"edges",plural:!0,selections:[t,{kind:"InlineFragment",selections:[n,L,_,w,R],type:"ObserveEdge",abstractKey:null},{kind:"InlineFragment",selections:[n,L,_,w,R,{alias:null,args:null,kind:"ScalarField",name:"condition",storageKey:null},h],type:"StandardEdge",abstractKey:null},j],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[t,{kind:"InlineFragment",selections:[n,L,g,T,P,M,A,E,V,{alias:null,args:null,concreteType:"StateGraphAction",kind:"LinkedField",name:"actions",plural:!0,selections:[{alias:null,args:null,concreteType:"ActionDetails",kind:"LinkedField",name:"action",plural:!1,selections:[G,I,B,z,g],storageKey:null},Q,q],storageKey:null}],type:"AgentStateNode",abstractKey:null},{kind:"InlineFragment",selections:[n,L,g,T,P,M,{alias:null,args:null,concreteType:"StateGraphAction",kind:"LinkedField",name:"actionDefinition",plural:!1,selections:[Q,q,{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[g,U,T,{alias:null,args:null,kind:"ScalarField",name:"isPopular",storageKey:null},I],storageKey:null},{alias:null,args:null,concreteType:"ActionDetails",kind:"LinkedField",name:"action",plural:!1,selections:[g,B,I,{alias:null,args:null,kind:"ScalarField",name:"toolDisplayName",storageKey:null},W,U,T,{alias:null,args:null,concreteType:"InputTree",kind:"LinkedField",name:"inputTree",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"fields",plural:!0,selections:[t,{kind:"InlineFragment",selections:[L,B,{alias:null,args:null,kind:"ScalarField",name:"output",storageKey:null},T,U,H,Z,Y],type:"InputTreeDynamicField",abstractKey:null},{kind:"InlineFragment",selections:[L,{alias:null,args:null,kind:"ScalarField",name:"schema",storageKey:null},J],type:"InputTreeStaticField",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"parentFields",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"inputSchema",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"outputSchema",storageKey:null},z,{alias:null,args:null,kind:"ScalarField",name:"deprecated",storageKey:null},{alias:null,args:null,concreteType:"DynamicLoaders",kind:"LinkedField",name:"dynamicLoaders",plural:!1,selections:[{alias:null,args:null,concreteType:"DynamicLoaderDetails",kind:"LinkedField",name:"loaders",plural:!0,selections:X,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"refetchInputAfterLoad",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ObservableChannelMetadata",kind:"LinkedField",name:"observableChannel",plural:!1,selections:ee,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasSideEffects",storageKey:null},G,{alias:null,args:null,kind:"ScalarField",name:"premiumActionCost",storageKey:null},{alias:null,args:null,concreteType:"ActionProperty",kind:"LinkedField",name:"outputProperties",plural:!0,selections:[T,L,$],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ActionConfigurationMember",kind:"LinkedField",name:"actionConfiguration",plural:!0,selections:[L,{alias:null,args:null,kind:"ScalarField",name:"allowAdditionalArrayEntries",storageKey:null},{alias:null,args:null,concreteType:"ActionConfigurationMemberManualResult",kind:"LinkedField",name:"manualResult",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isUndefined",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isNull",storageKey:null},$],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"path",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"prompt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"unionType",storageKey:null}],storageKey:null},en,A,{alias:null,args:null,concreteType:"KnowledgeSource",kind:"LinkedField",name:"knowledgeSources",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"entryCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entryCountDisabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEnabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"source",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"syncStatus",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"syncToBeCompletedBy",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalFileSize",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalNumCharacters",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalNumEmbeddings",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalNumErrors",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalNumTokens",storageKey:null}],storageKey:null},E,K,{alias:null,args:null,kind:"ScalarField",name:"statefulToolOccurrence",storageKey:null},V],type:"ActionNode",abstractKey:null},{kind:"InlineFragment",selections:[n,L,g,T,P,M,{alias:null,args:null,kind:"ScalarField",name:"greetingMessage",storageKey:null},{alias:null,args:null,concreteType:"ConversationStarter",kind:"LinkedField",name:"conversationStarters",plural:!0,selections:[$],storageKey:null}],type:"EntryPointConversationNode",abstractKey:null},{kind:"InlineFragment",selections:[n,L,g,T,P,M,en,{alias:null,args:null,kind:"ScalarField",name:"triggerSetup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"triggerEnabled",storageKey:null},{alias:null,args:null,concreteType:"Trigger",kind:"LinkedField",name:"trigger",plural:!1,selections:[n,N,S,{alias:null,args:null,kind:"ScalarField",name:"isConfigured",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPendingVerification",storageKey:null},{alias:null,args:null,concreteType:"TriggerSetup",kind:"LinkedField",name:"setup",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"actionArgs",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"actionName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"toolName",storageKey:null}],storageKey:null},g],storageKey:null},{alias:null,args:null,concreteType:"TriggerDefinition",kind:"LinkedField",name:"triggerDefinition",plural:!1,selections:[{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[I,T,g],storageKey:null},i,z,{alias:null,args:null,concreteType:"ToolTriggerChannel",kind:"LinkedField",name:"channel",plural:!1,selections:[q],storageKey:null},U,T,{alias:null,args:null,kind:"ScalarField",name:"eventSchema",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"fields",plural:!0,selections:[t,B,{kind:"InlineFragment",selections:[h,H,U,el,ea,et,L,f,{alias:"defaultText",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldText",abstractKey:null},{kind:"InlineFragment",selections:[h,H,U,el,ea,et,L,f,{alias:"defaultNumber",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"step",storageKey:null}],type:"TriggerFieldNumber",abstractKey:null},{kind:"InlineFragment",selections:ei,type:"TriggerFieldLindyEmbedConfig",abstractKey:null},{kind:"InlineFragment",selections:[h,H,U,el,ea,et,L,f,{alias:"defaultDate",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldDateTime",abstractKey:null},{kind:"InlineFragment",selections:es,type:"TriggerFieldAutoObserve",abstractKey:null},{kind:"InlineFragment",selections:[h,H,U,el,ea,et,L,f,{alias:"defaultLindyMail",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldLindyMail",abstractKey:null},{kind:"InlineFragment",selections:[h,H,U,el,ea,et,L,f,{alias:"defaultWebhook",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldLindyWebhook",abstractKey:null},{kind:"InlineFragment",selections:ei,type:"TriggerFieldLindyPhoneNumber",abstractKey:null},{kind:"InlineFragment",selections:es,type:"TriggerFieldElevenLabsVoice",abstractKey:null},{kind:"InlineFragment",selections:[h,H,U,el,ea,et,L,f,{alias:"defaultRecurringSchedule",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldRecurringSchedule",abstractKey:null},{kind:"InlineFragment",selections:[h,H,U,el,ea,et,L,f,{alias:"defaultChecked",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null}],type:"TriggerFieldCheckbox",abstractKey:null},{kind:"InlineFragment",selections:ei,type:"TriggerFieldLabel",abstractKey:null},{kind:"InlineFragment",selections:[h,H,U,el,ea,et,L,f,{alias:null,args:null,kind:"ScalarField",name:"aliases",storageKey:null}],type:"TriggerFieldComparableText",abstractKey:null},{kind:"InlineFragment",selections:[h,H,U,el,ea,et,L,f,{alias:"defaultItem",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"selectFirstByDefault",storageKey:null},er],type:"TriggerFieldSelect",abstractKey:null},{kind:"InlineFragment",selections:[h,H,U,el,ea,et,L,f,{alias:"defaultItems",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasAllowAllOption",storageKey:null},er],type:"TriggerFieldMultiSelect",abstractKey:null},{kind:"InlineFragment",selections:[h,H,U,el,ea,et,L,f,{alias:null,args:null,concreteType:"DynamicLoaderDetails",kind:"LinkedField",name:"loader",plural:!1,selections:X,storageKey:null}],type:"TriggerFieldDynamicLoader",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasPublishableConfig",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isHighThroughput",storageKey:null},G,{alias:null,args:null,concreteType:"ObservableChannelMetadata",kind:"LinkedField",name:"otherObservableChannel",plural:!1,selections:ee,storageKey:null},{alias:null,args:null,concreteType:"TriggerTestingPolicy",kind:"LinkedField",name:"testingPolicy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"supportsSyntheticPayload",storageKey:null}],storageKey:null},g,n],storageKey:null}],type:"EntryPointTriggerNode",abstractKey:null},{kind:"InlineFragment",selections:[n,L,g,T,P,M,E],type:"LogicNode",abstractKey:null},j],storageKey:null},{alias:null,args:null,concreteType:"StateGraphStickyNote",kind:"LinkedField",name:"stickyNotes",plural:!0,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"note",storageKey:null},{alias:null,args:null,concreteType:"StickyNotePosition",kind:"LinkedField",name:"position",plural:!1,selections:D,storageKey:null},g],storageKey:null}],storageKey:null},{alias:null,args:eo,concreteType:"AgentDefinitionConversationsConnection",kind:"LinkedField",name:"conversations",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:"AgentDefinitionConversationsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"node",plural:!1,selections:[n,g,{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},v,{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNotification",storageKey:null},t],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:eo,filters:null,handle:"connection",key:"ThreadsListAgentDefinitionFragment_conversations",kind:"LinkedHandle",name:"conversations"},{alias:null,args:null,kind:"ScalarField",name:"instructions",storageKey:null},E,{alias:null,args:null,kind:"ScalarField",name:"shouldAskForConfirmation",storageKey:null},{alias:null,args:null,concreteType:"Memory",kind:"LinkedField",name:"memories",plural:!0,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"isActive",storageKey:null},$],storageKey:null},{alias:null,args:null,concreteType:"AgentDefinitionTag",kind:"LinkedField",name:"tags",plural:!0,selections:[n,h,g],storageKey:null}],type:"AgentDefinition",abstractKey:null}],storageKey:null}]},params:{cacheID:"b031b05276b0aa49176f4fdd8a797eae",id:null,metadata:{},name:"ThreadsLayoutQuery",operationKind:"query",text:"query ThreadsLayoutQuery(\n  $count: Int!\n  $cursor: String\n  $nodeId: ID!\n) {\n  me {\n    id\n    ...CommonLayoutSidebarIdentityFragment\n    ...WithDebuggerPanel_Identity\n    ...CommonLayout_Identity\n    nodeId\n  }\n  ...ThreadsHeaderSection_Query_4pcvIi\n  ...ThreadsContentSection_Query_O4e6s\n  node(id: $nodeId) {\n    __typename\n    ... on AgentDefinition {\n      ...WithDebuggerPanel_AgentDefinition\n    }\n    nodeId\n  }\n}\n\nfragment ActionTraceCard_AgentDefinition on AgentDefinition {\n  ...AgentUi_AgentDefinition\n}\n\nfragment ActionTraceCard_Identity on Identity {\n  ...AgentUi_Identity\n}\n\nfragment AgentContextMenuAgentDefinitionFragment on AgentDefinition {\n  id\n  name\n  isMuted\n  isFavorite\n  notificationsCount\n}\n\nfragment AgentContextMenuIdentityFragment on Identity {\n  id\n  ...DeleteAgentDefinitionMutationFragment\n  ...CopyAgentDefinitionMutationIdentityFragment\n}\n\nfragment AgentEnabledSwitch_AgentDefinition on AgentDefinition {\n  id\n  enabled\n  owner {\n    id\n    ...useSaveAgentWithPremiumModal_Identity\n    nodeId\n  }\n  ...useSaveAgentWithPremiumModal_AgentDefinition\n}\n\nfragment AgentSidebarItemAgentDefinitionFragment on AgentDefinition {\n  id\n  name\n  notificationsCount\n  isMuted\n  icon {\n    name\n    color\n  }\n  stateGraph {\n    id\n    nodeId\n  }\n  ...AgentContextMenuAgentDefinitionFragment\n}\n\nfragment AgentSidebarItemIdentityFragment on Identity {\n  id\n  ...AgentContextMenuIdentityFragment\n}\n\nfragment AgentUi_AgentDefinition on AgentDefinition {\n  ...FormBuilder_AgentDefinition\n}\n\nfragment AgentUi_Identity on Identity {\n  ...FormBuilder_Identity\n}\n\nfragment BlockResponses_AgentDefinition on AgentDefinition {\n  ...ActionTraceCard_AgentDefinition\n}\n\nfragment BlockResponses_Identity on Identity {\n  ...ActionTraceCard_Identity\n}\n\nfragment CommonLayoutSidebarIdentityFragment on Identity {\n  id\n  name\n  avatar {\n    url\n  }\n  agentDefinitions {\n    id\n    name\n    isFavorite\n    lastRunAt\n    createdAt\n    ...AgentSidebarItemAgentDefinitionFragment\n    nodeId\n  }\n  ...CreateLindySection_Identity\n  ...QualifiedSignupCtaFooter_Identity\n  ...CreditsFooterMe\n  ...AgentSidebarItemIdentityFragment\n}\n\nfragment CommonLayout_Identity on Identity {\n  ...PlansModal_Identity\n}\n\nfragment ConversationDebuggerTraces_AgentDefinition on AgentDefinition {\n  ...BlockResponses_AgentDefinition\n}\n\nfragment ConversationDebuggerTraces_Identity on Identity {\n  name\n  avatar {\n    url\n  }\n  ...BlockResponses_Identity\n}\n\nfragment ConversationDebugger_AgentDefinition on AgentDefinition {\n  ...Transcript_AgentDefinition\n  ...ConversationDebuggerTraces_AgentDefinition\n}\n\nfragment ConversationDebugger_Identity on Identity {\n  ...Transcript_Identity\n  ...ConversationDebuggerTraces_Identity\n}\n\nfragment CopyAgentDefinitionMutationIdentityFragment on Identity {\n  id\n  nodeId\n  agentDefinitions {\n    id\n    nodeId\n    name\n    icon {\n      name\n      color\n    }\n    createdAt\n  }\n  agentFolders {\n    root {\n      agentDefinitions {\n        id\n        nodeId\n        name\n        icon {\n          name\n          color\n        }\n        createdAt\n      }\n    }\n    folders {\n      id\n      agentDefinitions {\n        id\n        nodeId\n        name\n        icon {\n          name\n          color\n        }\n        createdAt\n      }\n    }\n  }\n}\n\nfragment CreateAgentMutationIdentityFragment on Identity {\n  id\n  nodeId\n  agentDefinitions {\n    id\n    nodeId\n    name\n    icon {\n      name\n      color\n    }\n  }\n  agentFolders {\n    root {\n      agentDefinitions {\n        id\n        nodeId\n        name\n        icon {\n          name\n          color\n        }\n      }\n    }\n    folders {\n      id\n      clientId\n      agentDefinitions {\n        id\n        nodeId\n        name\n        icon {\n          name\n          color\n        }\n      }\n    }\n  }\n}\n\nfragment CreateLindySection_Identity on Identity {\n  id\n  ...CreateAgentMutationIdentityFragment\n}\n\nfragment CreditsFooterMe on Identity {\n  nodeId\n  isMedicalScribe\n  billingInfo {\n    billingPeriodEndsAt\n    subscriptionPlan {\n      name\n    }\n    creditsInfo {\n      creditAllocation\n      consumed\n      percentConsumed\n    }\n    trialInfo {\n      expiresAt\n    }\n  }\n  ...PlansModal_Identity\n}\n\nfragment DeleteAgentDefinitionMutationFragment on Identity {\n  id\n  nodeId\n  agentDefinitions {\n    id\n    nodeId\n  }\n  agentFolders {\n    root {\n      agentDefinitions {\n        id\n        nodeId\n      }\n    }\n    folders {\n      id\n      agentDefinitions {\n        id\n        nodeId\n      }\n    }\n  }\n}\n\nfragment Execution_AgentDefinition on AgentDefinition {\n  ...BlockResponses_AgentDefinition\n}\n\nfragment Execution_Identity on Identity {\n  ...BlockResponses_Identity\n}\n\nfragment FormBuilderActionField_ActionNode on ActionNode {\n  __typename\n  actionDefinition {\n    action {\n      inputSchema\n      nodeId\n    }\n  }\n}\n\nfragment FormBuilderAuthInput_Identity on Identity {\n  id\n}\n\nfragment FormBuilderElement_AgentDefinition on AgentDefinition {\n  ...FormBuilderStateGraphNodeField_AgentDefinition\n}\n\nfragment FormBuilderElement_Identity on Identity {\n  ...FormBuilderAuthInput_Identity\n}\n\nfragment FormBuilderStateGraphNodeField_AgentDefinition on AgentDefinition {\n  stateGraph {\n    id\n    nodes {\n      __typename\n      ... on ActionNode {\n        __typename\n        id\n        actionDefinition {\n          action {\n            dynamicLoaders {\n              loaders {\n                defaultValue {\n                  name\n                  value\n                }\n                dependencies\n                description\n                displayName\n                field\n                icon\n                key\n                placeholder\n              }\n            }\n            nodeId\n          }\n        }\n        auth {\n          id\n          nodeId\n        }\n        ...FormBuilderActionField_ActionNode\n      }\n      ... on EntryPointTriggerNode {\n        __typename\n        id\n        auth {\n          id\n          nodeId\n        }\n        triggerDefinition {\n          id\n          fields {\n            __typename\n            key\n          }\n          nodeId\n        }\n      }\n      ... on Node {\n        __isNode: __typename\n        nodeId\n      }\n    }\n    nodeId\n  }\n}\n\nfragment FormBuilder_AgentDefinition on AgentDefinition {\n  ...FormBuilderElement_AgentDefinition\n}\n\nfragment FormBuilder_Identity on Identity {\n  ...FormBuilderElement_Identity\n}\n\nfragment HeaderNavButtons_AgentDefinition on AgentDefinition {\n  ...ThreadsNavButton_AgentDefinition\n}\n\nfragment HeaderTitleSection_AgentDefinition on AgentDefinition {\n  id\n  name\n  icon {\n    color\n    name\n  }\n  owner {\n    id\n    agentFolders {\n      root {\n        agentDefinitions {\n          id\n          createdAt\n          updatedAt\n          nodeId\n        }\n      }\n      folders {\n        agentDefinitions {\n          id\n          createdAt\n          updatedAt\n          nodeId\n        }\n      }\n    }\n    ...CopyAgentDefinitionMutationIdentityFragment\n    ...DeleteAgentDefinitionMutationFragment\n    nodeId\n  }\n  enabled\n  isFavorite\n  isMuted\n}\n\nfragment InConversationDebugger_AgentDefinition on AgentDefinition {\n  ...ConversationDebugger_AgentDefinition\n}\n\nfragment InConversationDebugger_Identity on Identity {\n  ...ConversationDebugger_Identity\n}\n\nfragment LindyStoreLoader_AgentDefinition on AgentDefinition {\n  id\n  name\n  instructions\n  model\n  shouldAskForConfirmation\n  icon {\n    name\n    color\n  }\n  memories {\n    id\n    isActive\n    value\n  }\n  tags {\n    id\n    label\n    nodeId\n  }\n  stateGraph {\n    id\n    nodeId\n    owner {\n      id\n      nodeId\n    }\n    version\n    autoLayoutEnabled\n    edges {\n      __typename\n      ... on ObserveEdge {\n        __typename\n        id\n        type\n        from\n        to\n        inflectionY\n      }\n      ... on StandardEdge {\n        __typename\n        id\n        type\n        from\n        to\n        inflectionY\n        condition\n        label\n      }\n      ... on Node {\n        __isNode: __typename\n        nodeId\n      }\n    }\n    nodes {\n      __typename\n      ... on AgentStateNode {\n        __typename\n        id\n        type\n        nodeId\n        displayName\n        position {\n          x\n          y\n        }\n        manuallyPositioned\n        guidelines\n        model\n        requireConfirmation\n        actions {\n          action {\n            isPremium\n            tool\n            key\n            authConfig {\n              __typename\n              ... on OAuth2AuthConfig {\n                __typename\n                method\n                provider\n                scopes\n              }\n              ... on CustomAuthConfig {\n                __typename\n                method\n                provider\n                fields\n              }\n              ... on CustomOAuth2AuthConfig {\n                __typename\n                fields\n                method\n                provider\n                scopes\n              }\n              ... on TokenAuthConfig {\n                __typename\n                method\n                provider\n              }\n              ... on PipedreamAuthConfig {\n                __typename\n                method\n                provider\n              }\n            }\n            nodeId\n          }\n          createdByNodeId\n          statefulToolKey\n        }\n      }\n      ... on ActionNode {\n        __typename\n        id\n        type\n        nodeId\n        displayName\n        position {\n          x\n          y\n        }\n        manuallyPositioned\n        actionDefinition {\n          createdByNodeId\n          statefulToolKey\n          tool {\n            nodeId\n            description\n            displayName\n            isPopular\n            tool\n          }\n          action {\n            nodeId\n            key\n            tool\n            toolDisplayName\n            dependencies\n            description\n            displayName\n            inputTree {\n              fields {\n                __typename\n                ... on InputTreeDynamicField {\n                  type\n                  key\n                  output\n                  displayName\n                  description\n                  placeholder\n                  defaultValue {\n                    name\n                    value\n                  }\n                  icon\n                }\n                ... on InputTreeStaticField {\n                  type\n                  schema\n                  field\n                }\n              }\n              parentFields\n            }\n            inputSchema\n            outputSchema\n            authConfig {\n              __typename\n              ... on OAuth2AuthConfig {\n                __typename\n                method\n                provider\n                scopes\n              }\n              ... on CustomAuthConfig {\n                __typename\n                method\n                provider\n                fields\n              }\n              ... on CustomOAuth2AuthConfig {\n                __typename\n                fields\n                method\n                provider\n                scopes\n              }\n              ... on TokenAuthConfig {\n                __typename\n                method\n                provider\n              }\n              ... on PipedreamAuthConfig {\n                __typename\n                method\n                provider\n              }\n            }\n            deprecated\n            dynamicLoaders {\n              loaders {\n                defaultValue {\n                  name\n                  value\n                }\n                dependencies\n                description\n                displayName\n                field\n                icon\n                key\n                placeholder\n              }\n              refetchInputAfterLoad\n            }\n            observableChannel {\n              agentMessageReceivedSchema\n              immediateEdgeLabel\n              observableEdgeLabel\n              statefulToolKey\n            }\n            hasSideEffects\n            isPremium\n            premiumActionCost\n            outputProperties {\n              displayName\n              type\n              value\n            }\n          }\n        }\n        actionConfiguration {\n          type\n          allowAdditionalArrayEntries\n          manualResult {\n            isUndefined\n            isNull\n            value\n          }\n          path\n          prompt\n          unionType\n        }\n        auth {\n          id\n          nodeId\n        }\n        guidelines\n        knowledgeSources {\n          entryCount\n          entryCountDisabled\n          isEnabled\n          source\n          syncStatus\n          syncToBeCompletedBy\n          totalFileSize\n          totalNumCharacters\n          totalNumEmbeddings\n          totalNumErrors\n          totalNumTokens\n        }\n        model\n        occurrence\n        statefulToolOccurrence\n        requireConfirmation\n      }\n      ... on EntryPointConversationNode {\n        __typename\n        id\n        type\n        nodeId\n        displayName\n        position {\n          x\n          y\n        }\n        manuallyPositioned\n        greetingMessage\n        conversationStarters {\n          value\n        }\n      }\n      ... on EntryPointTriggerNode {\n        __typename\n        id\n        type\n        nodeId\n        displayName\n        position {\n          x\n          y\n        }\n        manuallyPositioned\n        auth {\n          id\n          nodeId\n        }\n        triggerSetup\n        triggerEnabled\n        trigger {\n          id\n          owner {\n            id\n            nodeId\n          }\n          enabled\n          isConfigured\n          isPendingVerification\n          setup {\n            actionArgs\n            actionName\n            toolName\n          }\n          nodeId\n        }\n        triggerDefinition {\n          tool {\n            tool\n            displayName\n            nodeId\n          }\n          name\n          authConfig {\n            __typename\n            ... on OAuth2AuthConfig {\n              __typename\n              method\n              provider\n              scopes\n            }\n            ... on CustomAuthConfig {\n              __typename\n              method\n              provider\n              fields\n            }\n            ... on CustomOAuth2AuthConfig {\n              __typename\n              fields\n              method\n              provider\n              scopes\n            }\n            ... on TokenAuthConfig {\n              __typename\n              method\n              provider\n            }\n            ... on PipedreamAuthConfig {\n              __typename\n              method\n              provider\n            }\n          }\n          channel {\n            statefulToolKey\n          }\n          description\n          displayName\n          eventSchema\n          fields {\n            __typename\n            ... on TriggerFieldText {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              defaultText: defaultValue\n            }\n            ... on TriggerFieldNumber {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              defaultNumber: defaultValue\n              min\n              max\n              step\n            }\n            ... on TriggerFieldLindyEmbedConfig {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n            }\n            ... on TriggerFieldDateTime {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              defaultDate: defaultValue\n            }\n            ... on TriggerFieldAutoObserve {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              defaultValue\n            }\n            ... on TriggerFieldLindyMail {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              defaultLindyMail: defaultValue\n            }\n            ... on TriggerFieldLindyWebhook {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              defaultWebhook: defaultValue\n            }\n            ... on TriggerFieldLindyPhoneNumber {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n            }\n            ... on TriggerFieldElevenLabsVoice {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              defaultValue\n            }\n            ... on TriggerFieldRecurringSchedule {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              defaultRecurringSchedule: defaultValue\n            }\n            ... on TriggerFieldCheckbox {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              defaultChecked: defaultValue\n            }\n            ... on TriggerFieldLabel {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n            }\n            ... on TriggerFieldComparableText {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              aliases\n            }\n            ... on TriggerFieldSelect {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              defaultItem: defaultValue\n              selectFirstByDefault\n              isContextDependent\n            }\n            ... on TriggerFieldMultiSelect {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              defaultItems: defaultValue\n              hasAllowAllOption\n              isContextDependent\n            }\n            ... on TriggerFieldDynamicLoader {\n              __typename\n              key\n              label\n              placeholder\n              description\n              tooltip\n              isRequired\n              canBeSharedWithTemplate\n              type\n              fields\n              loader {\n                defaultValue {\n                  name\n                  value\n                }\n                dependencies\n                description\n                displayName\n                field\n                icon\n                key\n                placeholder\n              }\n            }\n          }\n          hasPublishableConfig\n          isHighThroughput\n          isPremium\n          otherObservableChannel {\n            agentMessageReceivedSchema\n            immediateEdgeLabel\n            observableEdgeLabel\n            statefulToolKey\n          }\n          testingPolicy {\n            supportsSyntheticPayload\n          }\n          nodeId\n        }\n      }\n      ... on LogicNode {\n        __typename\n        id\n        type\n        nodeId\n        displayName\n        position {\n          x\n          y\n        }\n        manuallyPositioned\n        model\n      }\n      ... on Node {\n        __isNode: __typename\n        nodeId\n      }\n    }\n    stickyNotes {\n      id\n      note\n      position {\n        x\n        y\n      }\n      nodeId\n    }\n  }\n}\n\nfragment LindyStoreLoader_Identity on Identity {\n  id\n  enabledFeatureFlags\n  auth {\n    fields\n    id\n    isConnected\n    label\n    method\n    provider\n    scopes\n    nodeId\n  }\n}\n\nfragment NewTaskMenu_StateGraph_old on StateGraph {\n  entryPointConversationNode {\n    ...StartManualWorkflowButton_StateGraphNode\n    nodeId\n  }\n  workflowStartNodes {\n    __typename\n    id\n    ...StartManualWorkflowButton_StateGraphNode\n    ... on Node {\n      __isNode: __typename\n      nodeId\n    }\n  }\n}\n\nfragment PlansModal_Identity on Identity {\n  nodeId\n  isMedicalScribe\n  billingInfo {\n    trialInfo {\n      expiresAt\n    }\n    features {\n      isEligibleForFreePlan\n    }\n  }\n  ...ProPlanMe\n  ...ProPlanMedicalMe\n  ...UpcomingPlanMe\n}\n\nfragment ProPlanMe on Identity {\n  billingInfo {\n    subscriptionPlan {\n      creditAllocation\n    }\n    upcomingPlan {\n      subscriptionPlan {\n        creditAllocation\n        planType\n      }\n    }\n  }\n}\n\nfragment ProPlanMedicalMe on Identity {\n  billingInfo {\n    creditsInfo {\n      creditAllocation\n    }\n    upcomingPlan {\n      subscriptionPlan {\n        planType\n      }\n    }\n  }\n}\n\nfragment QualifiedSignupCtaFooter_Identity on Identity {\n  id\n  nodeId\n  flags {\n    dismissedQualifiedSignupUpsell\n  }\n  isQualifiedSignup\n}\n\nfragment StartManualWorkflowButton_StateGraphNode on StateGraphNode {\n  __isStateGraphNode: __typename\n  ... on ActionNode {\n    __typename\n    id\n    ...StartManualWorkflowFromActionButton_ActionNode\n  }\n  ... on AgentStateNode {\n    __typename\n    id\n    ...StartManualWorkflowFromAgentStateButton_AgentStateNode\n  }\n}\n\nfragment StartManualWorkflowFromActionButton_ActionNode on ActionNode {\n  displayName\n  occurrence\n  actionDefinition {\n    tool {\n      tool\n      nodeId\n    }\n    action {\n      displayName\n      nodeId\n    }\n  }\n}\n\nfragment StartManualWorkflowFromAgentStateButton_AgentStateNode on AgentStateNode {\n  displayName\n  guidelines\n}\n\nfragment ThreadsContentSection_Query_O4e6s on Query {\n  me {\n    id\n    ...LindyStoreLoader_Identity\n    nodeId\n  }\n  node(id: $nodeId) {\n    __typename\n    ... on AgentDefinition {\n      id\n      name\n      ...ThreadsList_AgentDefinition_1G22uz\n      ...LindyStoreLoader_AgentDefinition\n    }\n    nodeId\n  }\n}\n\nfragment ThreadsHeaderSection_Query_4pcvIi on Query {\n  me {\n    isAdmin\n    nodeId\n  }\n  node(id: $nodeId) {\n    __typename\n    ... on AgentDefinition {\n      id\n      name\n      ...HeaderTitleSection_AgentDefinition\n      ...AgentEnabledSwitch_AgentDefinition\n      ...HeaderNavButtons_AgentDefinition\n    }\n    nodeId\n  }\n}\n\nfragment ThreadsList_AgentDefinition_1G22uz on AgentDefinition {\n  id\n  nodeId\n  stateGraph {\n    ...NewTaskMenu_StateGraph_old\n    entryPointConversationNode {\n      __typename\n      nodeId\n    }\n    nodeId\n  }\n  conversations(first: $count, after: $cursor) {\n    totalCount\n    edges {\n      node {\n        id\n        nodeId\n        title\n        updatedAt\n        status\n        hasNotification\n        __typename\n      }\n      cursor\n    }\n    pageInfo {\n      endCursor\n      hasNextPage\n    }\n  }\n}\n\nfragment ThreadsNavButton_AgentDefinition on AgentDefinition {\n  notificationsCount\n  isMuted\n}\n\nfragment Transcript_AgentDefinition on AgentDefinition {\n  ...Execution_AgentDefinition\n}\n\nfragment Transcript_Identity on Identity {\n  name\n  avatar {\n    url\n  }\n  ...Execution_Identity\n}\n\nfragment UpcomingPlanMe on Identity {\n  isMedicalScribe\n  billingInfo {\n    trialInfo {\n      expiresAt\n    }\n    subscriptionPlan {\n      creditAllocation\n    }\n    upcomingPlan {\n      subscriptionPlan {\n        creditAllocation\n        name\n        planType\n      }\n      startDate\n    }\n  }\n}\n\nfragment WithDebuggerPanel_AgentDefinition on AgentDefinition {\n  ...InConversationDebugger_AgentDefinition\n}\n\nfragment WithDebuggerPanel_Identity on Identity {\n  ...InConversationDebugger_Identity\n}\n\nfragment useSaveAgentAgentDefinitionFragment on AgentDefinition {\n  id\n  name\n  icon {\n    name\n    color\n  }\n  owner {\n    id\n    nodeId\n  }\n}\n\nfragment useSaveAgentWithPremiumModal_AgentDefinition on AgentDefinition {\n  ...useSaveAgentAgentDefinitionFragment\n}\n\nfragment useSaveAgentWithPremiumModal_Identity on Identity {\n  id\n  billingInfo {\n    features {\n      arePremiumFeaturesEnabled\n    }\n  }\n}\n"}}}();t.hash="ec99958b0ff22bf14e455db71b901698";var i=l(61241),s=l(9234),r=l(57511),o=l(7061),d=l(93300);let u=function(){var e={defaultValue:null,kind:"LocalArgument",name:"conversationNodeId"},n={defaultValue:null,kind:"LocalArgument",name:"nodeId"},l={defaultValue:null,kind:"LocalArgument",name:"shouldIncludeConversation"},a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},t=[{kind:"Variable",name:"id",variableName:"nodeId"}],i={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"enabled",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"greetingMessage",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"isMuted",storageKey:null},u=[{kind:"Variable",name:"id",variableName:"conversationNodeId"}],c={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"startingNodeId",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"creditAllocation",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},h=[a,p],k={alias:null,args:null,concreteType:"Auth",kind:"LinkedField",name:"auth",plural:!1,selections:h,storageKey:null};return{fragment:{argumentDefinitions:[e,n,l],kind:"Fragment",metadata:null,name:"ThreadViewQuery",selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"me",plural:!1,selections:[a,{args:null,kind:"FragmentSpread",name:"SubscriptionContext_Identity"},{args:null,kind:"FragmentSpread",name:"ThreadViewInputQueryFragment"},{args:null,kind:"FragmentSpread",name:"ThreadViewTranscript_Identity"}],storageKey:null},{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[i,{kind:"InlineFragment",selections:[s,r,o,d,{alias:null,args:null,concreteType:"StateGraph",kind:"LinkedField",name:"stateGraph",plural:!1,selections:[{alias:null,args:null,concreteType:"EntryPointConversationNode",kind:"LinkedField",name:"entryPointConversationNode",plural:!1,selections:[i],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"ThreadViewInputAgentDefinitionFragment"},{args:null,kind:"FragmentSpread",name:"ThreadViewTranscript_AgentDefinition"}],type:"AgentDefinition",abstractKey:null}],storageKey:null},{condition:"shouldIncludeConversation",kind:"Condition",passingValue:!0,selections:[{alias:"conversationNode",args:u,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[i,{kind:"InlineFragment",selections:[a,c,{alias:null,args:null,concreteType:"ConversationChannel",kind:"LinkedField",name:"openChannels",plural:!0,selections:[g,m],storageKey:null},{args:null,kind:"FragmentSpread",name:"ThreadViewTranscript_Conversation"}],type:"Conversation",abstractKey:null}],storageKey:null}]}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e,l],kind:"Operation",name:"ThreadViewQuery",selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"me",plural:!1,selections:[a,{alias:null,args:null,concreteType:"SubscriptionInfo",kind:"LinkedField",name:"billingInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"billingVersion",storageKey:null},{alias:null,args:null,concreteType:"SubscriptionFeatures",kind:"LinkedField",name:"features",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"arePremiumFeaturesEnabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasKnowledgeBaseIncreasedLimits",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForFreePlan",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"TrialInfo",kind:"LinkedField",name:"trialInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"expiresAt",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"SubscriptionPlan",kind:"LinkedField",name:"subscriptionPlan",plural:!1,selections:[y],storageKey:null},{alias:null,args:null,concreteType:"UpcomingPlan",kind:"LinkedField",name:"upcomingPlan",plural:!1,selections:[{alias:null,args:null,concreteType:"SubscriptionPlan",kind:"LinkedField",name:"subscriptionPlan",plural:!1,selections:[y,{alias:null,args:null,kind:"ScalarField",name:"planType",storageKey:null},s],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"startDate",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CreditsInfo",kind:"LinkedField",name:"creditsInfo",plural:!1,selections:[y,{alias:null,args:null,kind:"ScalarField",name:"creditBalance",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PaymentFailure",kind:"LinkedField",name:"lastPaymentFailure",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"date",storageKey:null}],storageKey:null}],storageKey:null},p,{alias:null,args:null,kind:"ScalarField",name:"isMedicalScribe",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"enabledFeatureFlags",storageKey:null},s,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"avatar",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[i,p,{kind:"InlineFragment",selections:[s,r,o,d,{alias:null,args:null,concreteType:"StateGraph",kind:"LinkedField",name:"stateGraph",plural:!1,selections:[{alias:null,args:null,concreteType:"EntryPointConversationNode",kind:"LinkedField",name:"entryPointConversationNode",plural:!1,selections:[i,p],storageKey:null},p,a,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[i,{kind:"InlineFragment",selections:[a,{alias:null,args:null,concreteType:"StateGraphAction",kind:"LinkedField",name:"actionDefinition",plural:!1,selections:[{alias:null,args:null,concreteType:"ActionDetails",kind:"LinkedField",name:"action",plural:!1,selections:[{alias:null,args:null,concreteType:"DynamicLoaders",kind:"LinkedField",name:"dynamicLoaders",plural:!1,selections:[{alias:null,args:null,concreteType:"DynamicLoaderDetails",kind:"LinkedField",name:"loaders",plural:!0,selections:[{alias:null,args:null,concreteType:"DynamicLoaderDefaultValue",kind:"LinkedField",name:"defaultValue",plural:!1,selections:[s,{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dependencies",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"field",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"icon",storageKey:null},f,{alias:null,args:null,kind:"ScalarField",name:"placeholder",storageKey:null}],storageKey:null}],storageKey:null},p,{alias:null,args:null,kind:"ScalarField",name:"inputSchema",storageKey:null}],storageKey:null}],storageKey:null},k],type:"ActionNode",abstractKey:null},{kind:"InlineFragment",selections:[a,k,{alias:null,args:null,concreteType:"TriggerDefinition",kind:"LinkedField",name:"triggerDefinition",plural:!1,selections:[a,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"fields",plural:!0,selections:[i,f],storageKey:null},p],storageKey:null}],type:"EntryPointTriggerNode",abstractKey:null},{kind:"InlineFragment",selections:[p],type:"Node",abstractKey:"__isNode"}],storageKey:null}],storageKey:null},a,{alias:null,args:null,kind:"ScalarField",name:"hasPremiumActions",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasPremiumTriggers",storageKey:null}],type:"AgentDefinition",abstractKey:null}],storageKey:null},{condition:"shouldIncludeConversation",kind:"Condition",passingValue:!0,selections:[{alias:"conversationNode",args:u,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[i,p,{kind:"InlineFragment",selections:[a,c,{alias:null,args:null,concreteType:"ConversationChannel",kind:"LinkedField",name:"openChannels",plural:!0,selections:[g,m,p],storageKey:null},{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:h,storageKey:null},{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinition",plural:!1,selections:h,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNotification",storageKey:null}],type:"Conversation",abstractKey:null}],storageKey:null}]}]},params:{cacheID:"d2cb74bc7aee827d96989467729dfa16",id:null,metadata:{},name:"ThreadViewQuery",operationKind:"query",text:"query ThreadViewQuery(\n  $nodeId: ID!\n  $conversationNodeId: ID!\n  $shouldIncludeConversation: Boolean!\n) {\n  me {\n    id\n    ...SubscriptionContext_Identity\n    ...ThreadViewInputQueryFragment\n    ...ThreadViewTranscript_Identity\n    nodeId\n  }\n  node(id: $nodeId) {\n    __typename\n    ... on AgentDefinition {\n      name\n      enabled\n      greetingMessage\n      isMuted\n      stateGraph {\n        entryPointConversationNode {\n          __typename\n          nodeId\n        }\n        nodeId\n      }\n      ...ThreadViewInputAgentDefinitionFragment\n      ...ThreadViewTranscript_AgentDefinition\n    }\n    nodeId\n  }\n  conversationNode: node(id: $conversationNodeId) @include(if: $shouldIncludeConversation) {\n    __typename\n    ... on Conversation {\n      id\n      title\n      openChannels {\n        type\n        startingNodeId\n        nodeId\n      }\n      ...ThreadViewTranscript_Conversation\n    }\n    nodeId\n  }\n}\n\nfragment ActionTraceCard_AgentDefinition on AgentDefinition {\n  ...AgentUi_AgentDefinition\n}\n\nfragment ActionTraceCard_Identity on Identity {\n  ...AgentUi_Identity\n}\n\nfragment AgentUi_AgentDefinition on AgentDefinition {\n  ...FormBuilder_AgentDefinition\n}\n\nfragment AgentUi_Identity on Identity {\n  ...FormBuilder_Identity\n}\n\nfragment BlockResponses_AgentDefinition on AgentDefinition {\n  ...ActionTraceCard_AgentDefinition\n}\n\nfragment BlockResponses_Identity on Identity {\n  ...ActionTraceCard_Identity\n}\n\nfragment Execution_AgentDefinition on AgentDefinition {\n  ...BlockResponses_AgentDefinition\n}\n\nfragment Execution_Identity on Identity {\n  ...BlockResponses_Identity\n}\n\nfragment FormBuilderActionField_ActionNode on ActionNode {\n  __typename\n  actionDefinition {\n    action {\n      inputSchema\n      nodeId\n    }\n  }\n}\n\nfragment FormBuilderAuthInput_Identity on Identity {\n  id\n}\n\nfragment FormBuilderElement_AgentDefinition on AgentDefinition {\n  ...FormBuilderStateGraphNodeField_AgentDefinition\n}\n\nfragment FormBuilderElement_Identity on Identity {\n  ...FormBuilderAuthInput_Identity\n}\n\nfragment FormBuilderStateGraphNodeField_AgentDefinition on AgentDefinition {\n  stateGraph {\n    id\n    nodes {\n      __typename\n      ... on ActionNode {\n        __typename\n        id\n        actionDefinition {\n          action {\n            dynamicLoaders {\n              loaders {\n                defaultValue {\n                  name\n                  value\n                }\n                dependencies\n                description\n                displayName\n                field\n                icon\n                key\n                placeholder\n              }\n            }\n            nodeId\n          }\n        }\n        auth {\n          id\n          nodeId\n        }\n        ...FormBuilderActionField_ActionNode\n      }\n      ... on EntryPointTriggerNode {\n        __typename\n        id\n        auth {\n          id\n          nodeId\n        }\n        triggerDefinition {\n          id\n          fields {\n            __typename\n            key\n          }\n          nodeId\n        }\n      }\n      ... on Node {\n        __isNode: __typename\n        nodeId\n      }\n    }\n    nodeId\n  }\n}\n\nfragment FormBuilder_AgentDefinition on AgentDefinition {\n  ...FormBuilderElement_AgentDefinition\n}\n\nfragment FormBuilder_Identity on Identity {\n  ...FormBuilderElement_Identity\n}\n\nfragment PlansModal_Identity on Identity {\n  nodeId\n  isMedicalScribe\n  billingInfo {\n    trialInfo {\n      expiresAt\n    }\n    features {\n      isEligibleForFreePlan\n    }\n  }\n  ...ProPlanMe\n  ...ProPlanMedicalMe\n  ...UpcomingPlanMe\n}\n\nfragment ProPlanMe on Identity {\n  billingInfo {\n    subscriptionPlan {\n      creditAllocation\n    }\n    upcomingPlan {\n      subscriptionPlan {\n        creditAllocation\n        planType\n      }\n    }\n  }\n}\n\nfragment ProPlanMedicalMe on Identity {\n  billingInfo {\n    creditsInfo {\n      creditAllocation\n    }\n    upcomingPlan {\n      subscriptionPlan {\n        planType\n      }\n    }\n  }\n}\n\nfragment SubscriptionContext_Identity on Identity {\n  billingInfo {\n    billingVersion\n    features {\n      arePremiumFeaturesEnabled\n      hasKnowledgeBaseIncreasedLimits\n    }\n  }\n  ...PlansModal_Identity\n}\n\nfragment ThreadViewInputAgentDefinitionFragment on AgentDefinition {\n  id\n  hasPremiumActions\n  hasPremiumTriggers\n}\n\nfragment ThreadViewInputQueryFragment on Identity {\n  id\n  billingInfo {\n    features {\n      arePremiumFeaturesEnabled\n    }\n    creditsInfo {\n      creditBalance\n    }\n    lastPaymentFailure {\n      date\n    }\n  }\n  enabledFeatureFlags\n  ...PlansModal_Identity\n}\n\nfragment ThreadViewTranscript_AgentDefinition on AgentDefinition {\n  ...Transcript_AgentDefinition\n}\n\nfragment ThreadViewTranscript_Conversation on Conversation {\n  id\n  owner {\n    id\n    nodeId\n  }\n  nodeId\n  agentDefinition {\n    id\n    nodeId\n  }\n  status\n  hasNotification\n}\n\nfragment ThreadViewTranscript_Identity on Identity {\n  id\n  ...Transcript_Identity\n}\n\nfragment Transcript_AgentDefinition on AgentDefinition {\n  ...Execution_AgentDefinition\n}\n\nfragment Transcript_Identity on Identity {\n  name\n  avatar {\n    url\n  }\n  ...Execution_Identity\n}\n\nfragment UpcomingPlanMe on Identity {\n  isMedicalScribe\n  billingInfo {\n    trialInfo {\n      expiresAt\n    }\n    subscriptionPlan {\n      creditAllocation\n    }\n    upcomingPlan {\n      subscriptionPlan {\n        creditAllocation\n        name\n        planType\n      }\n      startDate\n    }\n  }\n}\n"}}}();u.hash="5a5e196cf4d66240f3bf701dfac73e03";var c=l(42598),g=l(40223),m=l(46772),y=l(98906),p=l(87021),f=l(14584),h=l(38102),k=l(69507),F=l(45801),x=l(45209),v=l(35774),b=l(49321),S=l.n(b),T=l(94344),K=l(79124),I=l(25919);let C={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ThreadViewInputQueryFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"SubscriptionInfo",kind:"LinkedField",name:"billingInfo",plural:!1,selections:[{alias:null,args:null,concreteType:"SubscriptionFeatures",kind:"LinkedField",name:"features",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"arePremiumFeaturesEnabled",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CreditsInfo",kind:"LinkedField",name:"creditsInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"creditBalance",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PaymentFailure",kind:"LinkedField",name:"lastPaymentFailure",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"date",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"enabledFeatureFlags",storageKey:null},{args:null,kind:"FragmentSpread",name:"PlansModal_Identity"}],type:"Identity",abstractKey:null};C.hash="28a193df90bf2fa9fa1de9c7481b75f7";let A={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ThreadViewInputAgentDefinitionFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasPremiumActions",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasPremiumTriggers",storageKey:null}],type:"AgentDefinition",abstractKey:null};A.hash="ee27bdea3e17d0b1b08575d13e66e239",l(39594);var j=l(31722),N=l(97746),L=l(20259),_=l(12454),w=l(30900),R=l(88036),D=l(6762),P=l(51847),M=l(38549),E=l(47830),V=l(31173),G=l(1656),B=l(6925),O=l(38001),z=l(25363),Q=l(27631),q=l(78233),U=l(47376),W=l(82813),H=l(35686),$=l(47489),Z=l(2932),Y=l(99968),J=l(40252),X=l(66679),ee=l(40453),en=l(25270),el=l(682),ea=l(14306),et=l(67434),ei=l(16008),es=l(8678),er=l(18153);let eo={opacity:0,y:35},ed={opacity:1,y:0},eu={opacity:0,y:35},ec={duration:.25,type:"tween",ease:"anticipate"},eg=(0,es.PA)(function(e){var n,l,t,i,s,r,o,d;let{conversationId:u,recordingOnly:m=!1,identityFragmentRef:y,agentDefinitionFragmentRef:p,onSubmitTask:f,autoFocusInput:h=!0}=e,x=(0,K.useFragment)(C,y),b=(0,K.useFragment)(A,p),{attachments:S,getDeleteAttachment:es,openFileInput:eg,getUploadedAttachments:em,clearAttachments:ey,handlePaste:ep}=(0,c.mT)(),ef=S.length>0,eh=(0,O.LM)(),ek=(0,B.Fz)(),{isElectron:eF}=(0,k.Y0)(),ex=(0,q.v)(),ev=(0,T.useRef)(null),[eb,eS]=(0,T.useState)(!1),[eT,eK]=(0,T.useState)(!1),eI=null===(n=x.enabledFeatureFlags)||void 0===n?void 0:n.includes(ea.T.BlockUserQueries),{isPendingConversationStatusChange:eC,setIsPendingConversationStatusChange:eA}=(0,g.J)(),[ej,eN]=(0,T.useState)(-1),{data:eL,invalidateQueries:e_}=(0,U.W)(),ew=(0,T.useRef)(null),eR=(0,T.useRef)(null),eD=(0,T.useRef)(null),{isMobileOnly:eP}=(0,k.Y0)(),[eM,eE]=(0,T.useState)(""),eV=(0,H.C)(e=>{var n,l;return null!==(l=null===(n=e.agentPromptMap)||void 0===n?void 0:n[b.id])&&void 0!==l?l:""}),eG=(0,H.C)(e=>e.setAgentPrompt),eB=(0,T.useCallback)(e=>{eG(b.id,e)},[b.id,eG]),eO=null===(l=x.billingInfo)||void 0===l?void 0:l.lastPaymentFailure,ez=eO?(0,el.Vs)(new Date(eO.date)):0,eQ=(0,T.useMemo)(()=>!!x.billingInfo&&(void 0===x.billingInfo.creditsInfo.creditBalance||x.billingInfo.creditsInfo.creditBalance<=0),[x]),eq=(null===(i=x.billingInfo)||void 0===i?void 0:null===(t=i.features)||void 0===t?void 0:t.arePremiumFeaturesEnabled)===!1&&(b.hasPremiumActions||b.hasPremiumTriggers),eU=eb||eC||(null===(r=eh.data)||void 0===r?void 0:null===(s=r.labels)||void 0===s?void 0:s.includes($.G.BlockedOnAwaitingExternalWebhook))||!(0,en.h)(null===(o=eh.data)||void 0===o?void 0:o.status),eW=!eQ&&!eq&&(!eO||ez>0)&&!eU&&!eI&&S.every(e=>e.uploaded),[eH,e$]=(0,T.useState)(!1),eZ=(0,T.useCallback)(()=>e$(!1),[]);(0,T.useEffect)(()=>{var e;(null===(e=eh.data)||void 0===e?void 0:e.status)&&(eA(!1),eh.data.status!==Z.Y.Cancelling?eK(!1):eK(!0))},[null===(d=eh.data)||void 0===d?void 0:d.status,eA]);let eY="string"==typeof u&&u.length>0?u:null;(0,T.useEffect)(()=>{eN(-1)},[b.id,eY,eB]),(0,T.useEffect)(()=>{var e;null==ew||null===(e=ew.current)||void 0===e||e.scrollTo(0,Number.MAX_SAFE_INTEGER)},[eV]),(0,T.useEffect)(()=>{var e;h&&(null==ew||null===(e=ew.current)||void 0===e||e.focus())},[b.id,h]);let eJ=(0,T.useCallback)(e=>{eB(n=>"".concat(n," ").concat(e).trim())},[eB]),eX=(0,T.useCallback)(e=>{eN(-1),eB(e)},[eB]);(0,z.Q)(ew,[eb?"":eV,ef]),(0,W.p)(ew);let e0=(0,T.useCallback)(async(e,n)=>{eS(!0);try{let l=await f({task:e,attachments:await em(),realtimeSessionId:n});if(!l)return e$(!0),null;let{conversationId:a,messageId:t}=l;return eA(!0),await e_(),u!==a&&(null==ek||ek.refetch(),null==ex||ex.storeConversationId(a)),{conversationId:a,messageId:t}}catch(e){return et.Cp(e),eE((0,ee.SP)(e)),null}finally{eS(!1)}},[f,em,eA,e_,u,ek,ex,e$]),[e1,e2]=(0,T.useState)(!0),e3=(0,T.useCallback)(()=>{e2(e=>!e)},[]),e6=(0,T.useCallback)(()=>{e2(!0)},[]),e5=(0,T.useMemo)(()=>eQ?"Credit limit reached.":eq?"This Lindy uses premium actions.":null,[eQ,eq]),e4=(0,T.useCallback)(async e=>{if(null==e||e.preventDefault(),0!==eV.length||ef){if(!eW){e$(!0);return}if(eE(null),Q.k.emit("task-input-submitted",eV),await e0(eV)&&(eB(""),ey(),eN(-1),eP)){var n;null===(n=ew.current)||void 0===n||n.blur()}}},[eV,ef,eW,e0,eB,ey,eP]),e7=(0,T.useCallback)(async e=>{var n,l,a,t;if("v"===e.key&&(e.ctrlKey||e.metaKey))return!0;if("Enter"===e.key&&(eP||!e.shiftKey)&&(e.preventDefault(),eV.length>0||ef?(null===(n=eR.current)||void 0===n||n.requestSubmit(),null==ex||ex.submitQuery(eV),G.kN.startingOrStarted&&await G.kN.stop()):eM||null===(l=eD.current)||void 0===l||l.click()),eL&&(null==eL?void 0:eL.length)&&("ArrowUp"===e.key||"ArrowDown"===e.key)&&eV===(null!==(a=eL[ej])&&void 0!==a?a:"")){let n=eL.length-1,l="ArrowUp"===e.key?ej+1:ej-1;l<-1&&(l=-1),l>n&&(l=n),eN(l),eB(null!==(t=eL[l])&&void 0!==t?t:"")}return!0},[eP,eL,eV,ef,eM,ex,eB,ej]);(0,T.useEffect)(()=>{if(eM)return ev.current=window.setTimeout(()=>{eE(null)},4e3),()=>{ev.current&&window.clearTimeout(ev.current)}},[eM]);let e9=(0,T.useCallback)(()=>{eE(null),ev.current&&window.clearTimeout(ev.current)},[]);(0,T.useEffect)(()=>{var e;h&&(null===(e=ew.current)||void 0===e||e.focus())},[u,h]);let e8=!!eM,ne=(0,T.useCallback)(async()=>{!eT&&u&&(eK(!0),await (0,L.q)({params:{id:u}}))},[eT,u]),nn=eW&&b.id,nl=!!eU,na=eQ||eq,[nt,ni]=(0,T.useState)("auto");(0,T.useEffect)(()=>{let e=()=>{ew.current&&ni(ew.current.offsetWidth-55)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let ns=(0,T.useCallback)(()=>{var e;null===(e=ew.current)||void 0===e||e.focus()},[]);return((0,Q.f)("new-task-clicked",ns),m)?(0,a.jsx)(V.y,{onTranscript:eJ,recordingOnly:!0}):(0,a.jsxs)("form",{ref:eR,className:"relative w-full",onSubmit:e4,children:[(!!eO||na)&&(0,a.jsx)("section",{className:(0,I.QP)("min-h-min",er.XF?"bg-white dark:bg-slate-2":"bg-slate-1"),children:(0,a.jsx)(ei.N,{children:(0,a.jsxs)(v.P.div,{initial:eo,animate:ed,exit:eu,layout:!0,transition:ec,children:[na&&(0,a.jsxs)("div",{className:"m-2 flex items-center gap-2 rounded-xl bg-slate-2 p-3 align-middle text-slate-11",children:[(0,a.jsx)("div",{className:"pt-px",children:(0,a.jsx)(J.s,{})}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{className:"text-left text-sm text-slate-12",children:[e5," Please upgrade to resume."]}),(0,a.jsx)("span",{className:"text-sm text-slate-6",children:"â€¢"}),(0,a.jsx)("span",{className:"cursor-pointer text-sm text-[#007AFF]",onClick:e3,children:"Upgrade"})]})]}),eO&&(0,a.jsxs)("div",{className:"m-2 flex items-center gap-2 rounded-xl bg-slate-2 p-3 align-middle text-slate-11",children:[(0,a.jsx)("div",{className:"pt-px",children:(0,a.jsx)(J.s,{})}),ez>0?(0,a.jsxs)("div",{className:"text-left text-sm text-slate-12",children:["Your last payment failed, please make a payment in"," ",ez," ",1===ez?"day":"days"," on the ",(0,a.jsx)(R.N,{href:"/settings/billing",children:"Billing"})," page to avoid losing access."]}):(0,a.jsxs)("div",{className:"text-left text-sm text-slate-12",children:["Your last payment failed, please make a payment on the"," ",(0,a.jsx)(R.N,{href:"/settings/billing",children:"Billing"})," page to restore access."]})]})]})})}),(0,a.jsxs)("div",{children:[eI&&(0,a.jsx)(w.F,{type:"warning",className:"mb-6",children:"New queries temporarily disabled due to high load. Please try again later."}),(0,a.jsx)(E.r,{submitQuery:e0}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(D.f,{id:"input",name:"input",ref:ew,value:eb?"":eV,placeholder:"Enter message",autoComplete:"off",onChange:eX,onKeyDown:e7,onPaste:ep,onAnimationEnd:eZ,className:(0,I.QP)(F.Oc,"pr-[12px] pt-[10px] rounded-lg shadow-md resize-none max-h-64 bg-panel disabled:opacity-70 hover:cursor-text",ef?"pl-[12px] pb-[50px]":"pl-[38px] pb-[10px]",eF&&"dark:bg-slate-3",eH&&"animate__animated animate__headShake",(nn||nl)&&"pr-[80px]","mousetrap",b.id?"cursor-default":"cursor-not-allowed",(na||eO)&&"mt-2")}),nn&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(V.y,{onTranscript:eJ,absolutelyPositioned:!0}),(0,a.jsx)("div",{className:(0,I.QP)("absolute rounded-md top-[3px] right-[5px] h-[36px] w-[36px] flex justify-center items-center","bg-transparent hover:bg-slate-4 active:bg-slate-5 cursor-pointer"),"data-testid":"inputSubmission",onClick:e4,children:(0,a.jsxs)(X.m_,{children:[(0,a.jsx)(X.ZI,{className:"flex flex-col items-center",children:"Send message"}),(0,a.jsx)(X.k$,{children:(0,a.jsx)(Y.G,{className:(0,I.QP)(eV.length||ef?"fill-[#007AFF]":"fill-[#C1C6CD]","transition-all")})})]})})]}),nl&&(0,a.jsx)("div",{className:(0,I.QP)("absolute rounded-md top-[3px] right-[5px] h-[36px] w-[36px] flex justify-center items-center","bg-transparent hover:bg-slate-4 active:bg-slate-5",eT&&"animate-pulse cursor-not-allowed"),onClick:ne,children:(0,a.jsxs)(X.m_,{children:[(0,a.jsx)(X.ZI,{className:"flex flex-col items-center",children:(0,a.jsx)("div",{children:eT?"Stopping...":"Stop"})}),(0,a.jsx)(X.k$,{children:(0,a.jsx)(j.A,{className:"size-5 text-slate-12"})})]})}),(0,a.jsxs)("button",{type:"button",onClick:e9,tabIndex:e8?0:-1,className:(0,I.QP)(e8?"opacity-100":"opacity-0 translate-y-5 pointer-events-none","flex items-center transition border border-transparent cursor-pointer px-2 py-1 rounded-md outline-none hover:bg-glass hover:border-slate-6 focus:bg-glass focus:border-slate-6 focus-visible:ring-2 focus-visible:ring-primary-8 focus-visible:ring-offset-2","absolute bottom-14 left-0 text-slate-12"),children:[(0,a.jsx)("div",{children:(0,a.jsx)(N.A,{className:"mr-2.5 size-6 stroke-danger-9"})}),(0,a.jsx)("p",{className:"text-left text-sm",children:eM})]}),(0,a.jsx)("div",{className:(0,I.QP)("absolute left-2",ef?"bottom-0":"top-[7px]"),onClick:eg,children:(0,a.jsxs)(X.m_,{children:[(0,a.jsx)(X.ZI,{className:"flex flex-col items-center",children:(0,a.jsx)("div",{children:"Upload File"})}),(0,a.jsx)(X.k$,{children:(0,a.jsx)("div",{className:(0,I.QP)("rounded-md h-[27px] w-[27px] mb-[10px] flex justify-center items-center","bg-transparent",ef?"bg-[#F5F2FF]":"hover:bg-slate-4 active:bg-slate-5"),children:(0,a.jsx)(M.P,{className:(0,I.QP)("h-4 w-4",ef?"text-[#6E56CF]":"text-[#C1C8CD]")})})})]})})]})]}),ef&&(0,a.jsx)("div",{className:(0,I.QP)("absolute bottom-[5px] left-[44px] h-[36px] flex justify-center items-center gap-2","bg-transparent"),children:(0,a.jsx)("div",{style:{width:nt},children:(0,a.jsx)(P.g,{attachments:S,getDeleteAttachment:es})})}),(0,a.jsx)(_.E,{identityFragmentRef:x,toggle:e6,hide:e1})]})});var em=l(98523),ey=l(49193),ep=l(48571),ef=l(60003),eh=l(31024);let ek="16px",eF={paddingTop:ek,paddingBottom:ek};function ex(e){let n=(0,ey.i)(),{isElectron:l}=(0,k.Y0)();return(0,a.jsx)(eh.V,{className:"h-full",children:(0,a.jsx)(a.Fragment,{children:n?(0,a.jsx)(eh.V,{middle:!0,className:"mb-12 h-full",children:(0,a.jsx)(em.l,{action:em.E.StartRecording})}):e.greetingMessage?(0,a.jsx)("div",{className:(0,I.QP)("max-w-[640px] w-full mx-auto mt-4",l?"pl-4 pr-8":"px-8"),style:eF,children:(0,a.jsx)(ep.h,{message:e.greetingMessage,showAvatar:!0,"data-testid":"lindy.conversation-view.greeting-message"})}):(0,a.jsx)(eh.V,{middle:!0,className:"mb-12 h-full",children:(0,a.jsx)(ef.t,{})})})})}let ev={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ThreadViewTranscript_Identity",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"Transcript_Identity"}],type:"Identity",abstractKey:null};ev.hash="be62df437eec0ce538d93bc93d01a80e";let eb={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ThreadViewTranscript_AgentDefinition",selections:[{args:null,kind:"FragmentSpread",name:"Transcript_AgentDefinition"}],type:"AgentDefinition",abstractKey:null};eb.hash="29edb1711e63940836d34ce9421d9b45";let eS=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ThreadViewTranscript_Conversation",selections:[e,{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:[e],storageKey:null},n,{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinition",plural:!1,selections:[e,n],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNotification",storageKey:null}],type:"Conversation",abstractKey:null}}();eS.hash="a5e6476513a9f6f3fbb2015f49a3c690";let eT=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"agentId"},{defaultValue:null,kind:"LocalArgument",name:"conversationId"}],n=[{alias:null,args:[{fields:[{kind:"Variable",name:"agentDefinitionId",variableName:"agentId"},{kind:"Variable",name:"conversationId",variableName:"conversationId"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"clearConversationNotification",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ClearConversationNotificationOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNotification",storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationClearConversationNotificationSuccess",abstractKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ThreadViewTranscriptClearNotificationMutation",selections:n,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ThreadViewTranscriptClearNotificationMutation",selections:n},params:{cacheID:"bca2acee1fdc6e62b00038870f6b85e6",id:null,metadata:{},name:"ThreadViewTranscriptClearNotificationMutation",operationKind:"mutation",text:"mutation ThreadViewTranscriptClearNotificationMutation(\n  $agentId: ID!\n  $conversationId: ID!\n) {\n  clearConversationNotification(input: {agentDefinitionId: $agentId, conversationId: $conversationId}) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationClearConversationNotificationSuccess {\n      data {\n        conversation {\n          id\n          nodeId\n          hasNotification\n        }\n      }\n    }\n  }\n}\n"}}}();eT.hash="20a99982c2d595961fb7933707c4f65c";var eK=l(66903),eI=l(31284);let eC=new Set(["Cancelled","Completed","Failed"]);function eA(e){let n=(0,K.useFragment)(ev,e.identityFragmentRef),l=(0,K.useFragment)(eb,e.agentDefinitionFragmentRef),t=(0,K.useFragment)(eS,e.conversationFragmentRef),i=(0,T.useRef)(!1),[s]=(0,K.useMutation)(eT);return(0,T.useEffect)(()=>{t.id&&(i.current=!1)},[t.id]),(0,T.useEffect)(()=>{!i.current&&!e.isAgentMuted&&t.owner.id===n.id&&!eI.a.ui.isLoggedInAsUser&&t.hasNotification&&eC.has(t.status)&&(i.current=!0,s({variables:{agentId:t.agentDefinition.id,conversationId:t.id},optimisticResponse:{clearConversationNotification:{__typename:"MutationClearConversationNotificationSuccess",__isError:"MutationClearConversationNotificationSuccess",message:"",data:{conversation:{id:t.id,nodeId:t.nodeId,hasNotification:!1}}}}}))},[e.isAgentMuted,t.hasNotification,t.status,t.id,t.owner.id,t.agentDefinition.id,t.nodeId,s,n.id]),(0,a.jsx)("div",{className:"h-full",children:(0,a.jsx)(eK.ju,{identityFragmentRef:n,agentDefinitionFragmentRef:l},t.id)})}var ej=l(51580),eN=l(76971),eL=l(81778);function e_(e){var n,l,t,i,s;let[r]=(0,p.Q)(),{onSubmitTask:o}=(0,f.U)(r),d=(0,K.usePreloadedQuery)(u,e.queryRef),{isRailsTesting:b}=(0,h.dn)(),{isMobileOnly:C}=(0,k.Y0)();(0,T.useEffect)(()=>(0,y.r)(!0),[]);let A=(null===(n=d.node)||void 0===n?void 0:n.__typename)==="AgentDefinition"?d.node:null,j=(null===(l=d.conversationNode)||void 0===l?void 0:l.__typename)==="Conversation"?d.conversationNode:null;!function(e,n){let l=(0,q.v)(),a=(0,eL.useRouter)();(0,ej.S)(eN.B.notifications,"send",e,e=>{n||function(e,n){if("Notification"in window&&"visible"!==document.visibilityState)try{new Notification(e.title,{body:e.body,icon:"/notification-icon.png",data:e.data}).addEventListener("click",n)}catch(e){}}(e,()=>{if(l){l.showMainWindow();return}window.focus(),a.push(e.data.url,void 0,{shallow:!0})})})}(d.me.id,null!==(i=null==A?void 0:A.isMuted)&&void 0!==i&&i);let N=(0,T.useMemo)(()=>({type:"tween",duration:.2}),[]);if(!A)return null;let L=(null===(t=A.stateGraph)||void 0===t?void 0:t.entryPointConversationNode)!=null,_=null==j?void 0:j.openChannels.some(e=>"user"===e.type&&null!=e.startingNodeId&&e.startingNodeId!==x._),w=L||!!_,R="Lindy";return(null==A?void 0:A.name)&&!j&&w?R=A.name+" - New Task":(null==j?void 0:j.title)&&(R=j.title+" - Lindy"),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S(),{children:(0,a.jsx)("title",{children:R})}),(0,a.jsx)("div",{className:(0,I.QP)("h-full w-full",e.className),children:(0,a.jsx)(c.gH,{allowMultiple:!0,acceptedTypes:"*",children:(0,a.jsx)(F.UU,{isMobile:C,children:(0,a.jsx)(g.e,{children:(0,a.jsxs)("div",{className:"flex size-full flex-col",children:[(0,a.jsx)("div",{className:"size-full overflow-y-auto",children:(null==j?void 0:j.id)?(0,a.jsx)(eA,{identityFragmentRef:d.me,agentDefinitionFragmentRef:A,conversationFragmentRef:j,isAgentMuted:A.isMuted},j.id):(0,a.jsx)(ex,{greetingMessage:A.greetingMessage})}),(0,a.jsx)("div",{className:(0,I.QP)("flex w-full items-center",b?"pb-5":"pb-4"),children:(0,a.jsx)(v.P.div,{className:(0,I.QP)("mx-auto w-full max-w-2xl",b?"px-5":"mb-4 sm:px-8 px-4"),transition:N,children:w&&(0,a.jsx)(m.u,{identityFragmentRef:d.me,children:!1===A.enabled?(0,a.jsx)("div",{className:"flex h-11 items-center rounded-lg border-orange-4 bg-orange-3 px-4 text-xs font-normal leading-none text-slate-11 shadow-md",children:"This Lindy is currently disabled. Turn it back on to continue making changes."}):(0,a.jsx)(eg,{conversationId:null!==(s=null==j?void 0:j.id)&&void 0!==s?s:null,identityFragmentRef:d.me,agentDefinitionFragmentRef:A,onSubmitTask:o,autoFocusInput:e.autoFocusInput})})})})]})})})})})]})}var ew=l(66681),eR=l(20923),eD=l(36639);l(97244);var eP=l(2096);let eM=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"},{defaultValue:null,kind:"LocalArgument",name:"nodeId"}],kind:"Fragment",metadata:null,name:"ThreadsContentSection_Query",selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"me",plural:!1,selections:[e,{args:null,kind:"FragmentSpread",name:"LindyStoreLoader_Identity"}],storageKey:null},{alias:null,args:[{kind:"Variable",name:"id",variableName:"nodeId"}],concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[e,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{args:[{kind:"Variable",name:"count",variableName:"count"},{kind:"Variable",name:"cursor",variableName:"cursor"}],kind:"FragmentSpread",name:"ThreadsList_AgentDefinition"},{args:null,kind:"FragmentSpread",name:"LindyStoreLoader_AgentDefinition"}],type:"AgentDefinition",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null}}();eM.hash="2e834c7f2717595205ae11fc21a9b57b";var eE=l(32588),eV=l(84370),eG=l(51068),eB=l(55663),eO=l(53758);function ez(e){return(0,a.jsx)("div",{className:"grid h-full grid-cols-[auto,1fr] overflow-hidden",children:e.children})}var eQ=l(66213),eq=l(33848),eU=l(14135),eW=l(41910),eH=l(52954),e$=l(90386),eZ=l(1102);function eY(e){var n,l,t,i;let s=(0,K.useFragment)(eM,e.queryFragmentRef),r=(null===(n=s.node)||void 0===n?void 0:n.__typename)==="AgentDefinition"?s.node:null;l=s.me.id,t=e.lindyId,i=null==r?void 0:r.name,(0,eQ.f)(eU.editorLayoutQuery,{nodeId:(0,eR.F)("AgentDefinition",t)}),(0,eQ.f)(e$.settingsLayoutQuery,{nodeId:(0,eR.F)("AgentDefinition",t)}),(0,eZ.dH)(),(0,eH.h)(t,i),(0,eW.F)("tasks"),(0,eq.L)({identityId:l,agentDefinitionId:t}),(0,eB.B)();let o=(0,q.v)();return((0,T.useEffect)(()=>null==o?void 0:o.onLoggedIn(),[o]),(0,eG.r)(),r)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S(),{children:(0,a.jsxs)("title",{children:["Threads | ",r.name]})}),(0,a.jsxs)(ez,{children:[(0,a.jsx)(eP.sE,{agentDefinitionFragmentRef:r,identityId:s.me.id},r.id),(0,a.jsx)("div",{className:"h-full overflow-y-hidden",children:(0,a.jsx)(eO.tn,{identityFragmentRef:s.me,agentDefinitionFragmentRef:r,children:(0,a.jsx)(eV.mF,{children:e.threadViewQueryRef&&(0,a.jsx)(e_,{queryRef:e.threadViewQueryRef})})})})]})]}):(0,a.jsx)(eE.r,{to:"/home"})}let eJ={argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"nodeId"}],kind:"Fragment",metadata:null,name:"ThreadsHeaderSection_Query",selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"me",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isAdmin",storageKey:null}],storageKey:null},{alias:null,args:[{kind:"Variable",name:"id",variableName:"nodeId"}],concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{args:null,kind:"FragmentSpread",name:"HeaderTitleSection_AgentDefinition"},{args:null,kind:"FragmentSpread",name:"AgentEnabledSwitch_AgentDefinition"},{args:null,kind:"FragmentSpread",name:"HeaderNavButtons_AgentDefinition"}],type:"AgentDefinition",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null};eJ.hash="1ed322376ca514f471c7448017440fb7";var eX=l(68457),e0=l(6779),e1=l(10639),e2=l(61082),e3=l(72790),e6=l(50470);let e5=(0,es.PA)(function(e){var n;let l=(0,K.useFragment)(eJ,e.queryFragmentRef),t=(null===(n=l.node)||void 0===n?void 0:n.__typename)==="AgentDefinition"?l.node:null;return t?(0,a.jsxs)(e2.X,{children:[(0,a.jsx)("div",{className:"flex flex-1 items-center",children:(0,a.jsx)(e1.X,{agentDefinitionFragmentRef:t,agentEnabledSwitch:(0,a.jsx)(e6.$,{agentDefinitionFragmentRef:t})})}),(0,a.jsx)("div",{className:"flex flex-1 items-center justify-center",children:(0,a.jsx)(e0.U,{lindyId:t.id,lindyName:t.name,view:"tasks",agentDefinitionFragmentRef:t})}),(0,a.jsxs)("div",{className:"flex min-w-fit flex-1 flex-row items-center justify-end gap-x-2",children:[(l.me.isAdmin||eI.a.ui.isLoggedInAsUser)&&(0,a.jsx)(e3.H,{}),(0,a.jsx)(eX.w,{menuPosition:"bottom-left"})]})]}):(0,a.jsx)(eE.r,{to:"/home"})}),e4=t,e7=function(){let e=new URL(window.location.href),n=e.searchParams.get("conversationId"),l=(0,eD.Gh)(e.pathname);if(l)return(0,K.loadQuery)((0,ew.J)(),u,{nodeId:(0,eR.F)("AgentDefinition",l),shouldIncludeConversation:!!n,conversationNodeId:n?(0,eR.F)("Conversation",n):""})}();function e9(e){var n;let l=(0,K.useLazyLoadQuery)(e4,{nodeId:(0,eR.F)("AgentDefinition",e.lindyId),count:eP.cV,cursor:null}),t=(0,eL.useRouter)(),[c,g]=(0,K.useQueryLoader)(u,e7),m=(0,d.P)();return((0,T.useEffect)(()=>{let e=e=>{let n=new URL(e,"https://chat.lindy.ai"),l=n.searchParams.get("conversationId"),a=(0,eD.Gh)(n.pathname);a&&g({nodeId:(0,eR.F)("AgentDefinition",a),shouldIncludeConversation:!!l,conversationNodeId:l?(0,eR.F)("Conversation",l):""})};return t.events.on("routeChangeStart",e),()=>{t.events.off("routeChangeStart",e)}},[m,g,t]),(null===(n=l.node)||void 0===n?void 0:n.__typename)!=="AgentDefinition")?null:(0,a.jsx)(i.sL,{identityFragmentRef:l.me,agentDefinitionFragmentRef:l.node,children:(0,a.jsx)(s.i,{userId:l.me.id,identityFragmentRef:l.me,children:(0,a.jsx)(r.V,{sidebar:(0,a.jsx)(o.Qm,{identityFragmentRef:l.me,view:"tasks"}),header:(0,a.jsx)(e5,{queryFragmentRef:l}),content:(0,a.jsx)(eY,{lindyId:e.lindyId,queryFragmentRef:l,threadViewQueryRef:c})})})})}},2096:(e,n,l)=>{"use strict";l.d(n,{cV:()=>e_,sE:()=>ew,IH:()=>eR});var a=l(50612);let t=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"},{defaultValue:null,kind:"LocalArgument",name:"nodeId"}],n=[{kind:"Variable",name:"id",variableName:"nodeId"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"occurrence",storageKey:null},r={alias:null,args:null,concreteType:"StateGraphAction",kind:"LinkedField",name:"actionDefinition",plural:!1,selections:[{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"tool",storageKey:null},a],storageKey:null},{alias:null,args:null,concreteType:"ActionDetails",kind:"LinkedField",name:"action",plural:!1,selections:[i,a],storageKey:null}],storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"guidelines",storageKey:null},d=[{kind:"Variable",name:"after",variableName:"cursor"},{kind:"Variable",name:"first",variableName:"count"}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ThreadsListAgentDefinitionPaginationQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{args:[{kind:"Variable",name:"count",variableName:"count"},{kind:"Variable",name:"cursor",variableName:"cursor"}],kind:"FragmentSpread",name:"ThreadsList_AgentDefinition"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ThreadsListAgentDefinitionPaginationQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[l,a,{kind:"InlineFragment",selections:[t,{alias:null,args:null,concreteType:"StateGraph",kind:"LinkedField",name:"stateGraph",plural:!1,selections:[{alias:null,args:null,concreteType:"EntryPointConversationNode",kind:"LinkedField",name:"entryPointConversationNode",plural:!1,selections:[a,l,{kind:"InlineFragment",selections:[{kind:"InlineFragment",selections:[t,i,s,r],type:"ActionNode",abstractKey:null},{kind:"InlineFragment",selections:[t,i,o],type:"AgentStateNode",abstractKey:null}],type:"StateGraphNode",abstractKey:"__isStateGraphNode"}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"workflowStartNodes",plural:!0,selections:[l,t,{kind:"TypeDiscriminator",abstractKey:"__isStateGraphNode"},{kind:"InlineFragment",selections:[i,s,r],type:"ActionNode",abstractKey:null},{kind:"InlineFragment",selections:[i,o],type:"AgentStateNode",abstractKey:null},{kind:"InlineFragment",selections:[a],type:"Node",abstractKey:"__isNode"}],storageKey:null},a],storageKey:null},{alias:null,args:d,concreteType:"AgentDefinitionConversationsConnection",kind:"LinkedField",name:"conversations",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:"AgentDefinitionConversationsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"node",plural:!1,selections:[t,a,{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"updatedAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNotification",storageKey:null},l],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:d,filters:null,handle:"connection",key:"ThreadsListAgentDefinitionFragment_conversations",kind:"LinkedHandle",name:"conversations"}],type:"AgentDefinition",abstractKey:null}],storageKey:null}]},params:{cacheID:"5d35eb8f3471c47fe7d63959d433b88e",id:null,metadata:{},name:"ThreadsListAgentDefinitionPaginationQuery",operationKind:"query",text:"query ThreadsListAgentDefinitionPaginationQuery(\n  $count: Int!\n  $cursor: String\n  $nodeId: ID!\n) {\n  node(id: $nodeId) {\n    __typename\n    ...ThreadsList_AgentDefinition_1G22uz\n    nodeId\n  }\n}\n\nfragment NewTaskMenu_StateGraph_old on StateGraph {\n  entryPointConversationNode {\n    ...StartManualWorkflowButton_StateGraphNode\n    nodeId\n  }\n  workflowStartNodes {\n    __typename\n    id\n    ...StartManualWorkflowButton_StateGraphNode\n    ... on Node {\n      __isNode: __typename\n      nodeId\n    }\n  }\n}\n\nfragment StartManualWorkflowButton_StateGraphNode on StateGraphNode {\n  __isStateGraphNode: __typename\n  ... on ActionNode {\n    __typename\n    id\n    ...StartManualWorkflowFromActionButton_ActionNode\n  }\n  ... on AgentStateNode {\n    __typename\n    id\n    ...StartManualWorkflowFromAgentStateButton_AgentStateNode\n  }\n}\n\nfragment StartManualWorkflowFromActionButton_ActionNode on ActionNode {\n  displayName\n  occurrence\n  actionDefinition {\n    tool {\n      tool\n      nodeId\n    }\n    action {\n      displayName\n      nodeId\n    }\n  }\n}\n\nfragment StartManualWorkflowFromAgentStateButton_AgentStateNode on AgentStateNode {\n  displayName\n  guidelines\n}\n\nfragment ThreadsList_AgentDefinition_1G22uz on AgentDefinition {\n  id\n  nodeId\n  stateGraph {\n    ...NewTaskMenu_StateGraph_old\n    entryPointConversationNode {\n      __typename\n      nodeId\n    }\n    nodeId\n  }\n  conversations(first: $count, after: $cursor) {\n    totalCount\n    edges {\n      node {\n        id\n        nodeId\n        title\n        updatedAt\n        status\n        hasNotification\n        __typename\n      }\n      cursor\n    }\n    pageInfo {\n      endCursor\n      hasNextPage\n    }\n  }\n}\n"}}}();t.hash="7d2b01571f14c6d33c9944346ce96cc5";let i=function(){var e=["conversations"],n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};return{argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"}],kind:"Fragment",metadata:{connection:[{count:"count",cursor:"cursor",direction:"forward",path:e}],refetch:{connection:{forward:{count:"count",cursor:"cursor"},backward:null,path:e},fragmentPathInResult:["node"],operation:t,identifierInfo:{identifierField:"nodeId",identifierQueryVariableName:"id"}}},name:"ThreadsList_AgentDefinition",selections:[n,l,{alias:null,args:null,concreteType:"StateGraph",kind:"LinkedField",name:"stateGraph",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"NewTaskMenu_StateGraph_old"},{alias:null,args:null,concreteType:"EntryPointConversationNode",kind:"LinkedField",name:"entryPointConversationNode",plural:!1,selections:[a],storageKey:null}],storageKey:null},{alias:"conversations",args:null,concreteType:"AgentDefinitionConversationsConnection",kind:"LinkedField",name:"__ThreadsListAgentDefinitionFragment_conversations_connection",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:"AgentDefinitionConversationsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"node",plural:!1,selections:[n,l,{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"updatedAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNotification",storageKey:null},a],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:null}],type:"AgentDefinition",abstractKey:null}}();i.hash="7d2b01571f14c6d33c9944346ce96cc5";var s=l(97660),r=l(87021),o=l(51580),d=l(20923),u=l(76971),c=l(81778),g=l(79124);let m=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"attachmentId"}],n=[{alias:null,args:[{kind:"Variable",name:"attachmentId",variableName:"attachmentId"}],concreteType:"CSVPreviewOutput",kind:"LinkedField",name:"csvPreview",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"rowCount",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"BulkTaskUploadWrapperCsvPreviewQuery",selections:n,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"BulkTaskUploadWrapperCsvPreviewQuery",selections:n},params:{cacheID:"a83e87b81fbfff8243037269e1862768",id:null,metadata:{},name:"BulkTaskUploadWrapperCsvPreviewQuery",operationKind:"query",text:"query BulkTaskUploadWrapperCsvPreviewQuery(\n  $attachmentId: String!\n) {\n  csvPreview(attachmentId: $attachmentId) {\n    rowCount\n  }\n}\n"}}}();m.hash="3f1b0412e5cbe5f542195f3dec6d7c49";var y=l(60171),p=l(96536),f=l(85680),h=l(52105),k=l(91777),F=l(89275),x=l(65216),v=l(94344),b=l(25919);function S(e){let{children:n,onUpload:l}=e,t=(0,f.aV)(),[i,s]=(0,v.useState)(!1),r=(0,v.useCallback)(async e=>{var n;let a=null===(n=e.name.split(".").pop())||void 0===n?void 0:n.toLowerCase();if(!a||"csv"!=a){t({message:"Only CSV files are allowed.",level:"danger",duration:5e3});return}try{(0,x.q)(await e.text(),{columns:!0})}catch(e){t({message:"Error parsing CSV file",level:"danger",duration:5e3});return}try{let n=new FormData;n.append("attachment",e,e.name);let{attachmentId:a,failureReason:i}=await (0,h.oA)((0,p.N)({query:{filename:e.name},body:n},{headers:{}}));if(i){t({message:i,level:"warning",duration:5e3});return}let s={key:(0,k.gZ)(),file:e,name:e.name,attachmentId:a,uploaded:!0};null==l||l(s)}catch(e){t({message:e.type===F.r.UserFacingError?e.message:"Error uploading file",level:"danger",duration:5e3})}},[l,t]),o=(0,v.useCallback)(e=>{e.preventDefault(),s(!1);let n=e.dataTransfer.files[0];n&&r(n)},[r]),d=(0,v.useCallback)(e=>{e.preventDefault(),e.dataTransfer.types.includes("Files")&&s(!0)},[]),u=(0,v.useCallback)(e=>{e.preventDefault(),s(!1)},[]);return(0,a.jsxs)("div",{className:"relative size-full",onDragOver:d,onDragLeave:u,onDrop:o,children:[n,(0,a.jsxs)("div",{className:(0,b.QP)("absolute inset-0 flex items-center justify-center transition-opacity duration-200",!i&&"opacity-0 pointer-events-none"),children:[(0,a.jsx)("div",{className:"z-20 flex w-full flex-col items-center justify-center gap-2 text-center",children:(0,a.jsx)("div",{className:"text-xl font-semibold text-slate-12",children:"Upload a csv file to start multiple new tasks"})}),(0,a.jsx)("div",{className:"absolute z-10 size-full bg-panel opacity-90"})]})]})}let T=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"StartConversationsFromFileMutation",selections:[{alias:"mutationResult",args:n,concreteType:null,kind:"LinkedField",name:"startConversationsFromFile",plural:!1,selections:[l,a,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"StartConversationsFromFileOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversations",plural:!0,selections:[t],storageKey:null}],storageKey:null}],type:"MutationStartConversationsFromFileSuccess",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"StartConversationsFromFileMutation",selections:[{alias:"mutationResult",args:n,concreteType:null,kind:"LinkedField",name:"startConversationsFromFile",plural:!1,selections:[l,a,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"StartConversationsFromFileOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversations",plural:!0,selections:[t,{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationStartConversationsFromFileSuccess",abstractKey:null}],storageKey:null}]},params:{cacheID:"f806feb09106cf07fd8dcbb9096feb82",id:null,metadata:{},name:"StartConversationsFromFileMutation",operationKind:"mutation",text:"mutation StartConversationsFromFileMutation(\n  $input: StartConversationsFromFileInput!\n) {\n  mutationResult: startConversationsFromFile(input: $input) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationStartConversationsFromFileSuccess {\n      data {\n        conversations {\n          id\n          nodeId\n        }\n      }\n    }\n  }\n}\n"}}}();T.hash="10704a9fab481a7dad15bd3f9c4461e4";var K=l(67434);function I(e){let{open:n,onCancel:l,onConfirm:t,attachmentId:i,fileName:s}=e,r=(0,g.useLazyLoadQuery)(m,{attachmentId:i});if(!(null==r?void 0:r.csvPreview))return null;let o=r.csvPreview.rowCount;return(0,a.jsx)(y.u,{open:n,onCancel:l,onConfirm:t,title:1===o?"Start Task":"Start Multiple Tasks",text:(0,a.jsxs)(a.Fragment,{children:[1===o?"Are you sure you want to create a new task from":"Are you sure you want to create ".concat(o," new tasks from")," ",(0,a.jsx)("span",{className:"font-medium",children:s}),"?"]}),confirmLabel:"Confirm"})}function C(e){var n;let{children:l,identityId:t,agentDefinitionId:i}=e,[s,r]=(0,v.useState)(),[o]=function(){let[e,n]=(0,g.useMutation)(T),l=(0,f.aV)(),a=(0,v.useCallback)(e=>{l({id:"start-conversations-from-csv-mutation-error",level:"danger",label:"Error",message:null!=e?e:"Failed to start conversations from CSV",duration:6e3})},[l]),t=(0,v.useCallback)(n=>{e({variables:n.variables,onError:e=>{K.Cp(e),a(e.message)},onCompleted:e=>{var l;"BaseError"===e.mutationResult.__typename&&a(e.mutationResult.message);let t=e.mutationResult.data;t&&(null===(l=n.onSuccess)||void 0===l||l.call(n,t))}})},[e,a]);return(0,v.useMemo)(()=>[t,n],[t,n])}(),d=(0,v.useCallback)(()=>{let e=null==s?void 0:s.attachmentId;r(void 0),e&&o({variables:{input:{identityId:t,agentDefinitionId:i,attachmentId:e}}})},[o,s,t,i]),u=(0,v.useCallback)(()=>{r(void 0)},[]),c=(0,v.useCallback)(e=>{r(e)},[]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S,{onUpload:c,children:l}),(null==s?void 0:s.attachmentId)&&(0,a.jsx)(v.Suspense,{fallback:null,children:(0,a.jsx)(I,{open:!0,onCancel:u,onConfirm:d,attachmentId:s.attachmentId,fileName:null!==(n=s.name)&&void 0!==n?n:""})})]})}l(97244);var A=l(85926),j=l(63193),N=l(78176),L=l(70073),_=l(93311),w=l(71552);let R=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"conversationId"},{defaultValue:null,kind:"LocalArgument",name:"title"}],n=[{alias:null,args:[{fields:[{kind:"Variable",name:"conversationId",variableName:"conversationId"},{kind:"Variable",name:"title",variableName:"title"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"renameConversation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"RenameConversationOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationRenameConversationSuccess",abstractKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ConversationThreadItemRenameConversationMutation",selections:n,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ConversationThreadItemRenameConversationMutation",selections:n},params:{cacheID:"1277e4a38767e88fe37704ba856a4f5f",id:null,metadata:{},name:"ConversationThreadItemRenameConversationMutation",operationKind:"mutation",text:"mutation ConversationThreadItemRenameConversationMutation(\n  $conversationId: ID!\n  $title: String!\n) {\n  renameConversation(input: {conversationId: $conversationId, title: $title}) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationRenameConversationSuccess {\n      data {\n        conversation {\n          id\n          nodeId\n          title\n        }\n      }\n    }\n  }\n}\n"}}}();R.hash="536f7ceddb253a56e554acbc35ba6246";let D=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"conversationId"}],n=[{fields:[{kind:"Variable",name:"conversationId",variableName:"conversationId"}],kind:"ObjectValue",name:"input"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},t={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ConversationThreadItemDeleteConversationMutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"deleteConversation",plural:!1,selections:[l,a,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DeleteConversationOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[t],storageKey:null}],storageKey:null}],type:"MutationDeleteConversationSuccess",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ConversationThreadItemDeleteConversationMutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"deleteConversation",plural:!1,selections:[l,a,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DeleteConversationOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[t,{alias:null,args:null,filters:null,handle:"deleteRecord",key:"",kind:"ScalarHandle",name:"nodeId"}],storageKey:null}],storageKey:null}],type:"MutationDeleteConversationSuccess",abstractKey:null}],storageKey:null}]},params:{cacheID:"5671dd1fb03b67924b6432a443da8130",id:null,metadata:{},name:"ConversationThreadItemDeleteConversationMutation",operationKind:"mutation",text:"mutation ConversationThreadItemDeleteConversationMutation(\n  $conversationId: ID!\n) {\n  deleteConversation(input: {conversationId: $conversationId}) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationDeleteConversationSuccess {\n      data {\n        conversation {\n          nodeId\n        }\n      }\n    }\n  }\n}\n"}}}();D.hash="b884166f0569f3538b9451acb14cd10f";var P=l(97881);let M=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"StopConversationMutation",selections:[{alias:"mutationResult",args:n,concreteType:null,kind:"LinkedField",name:"stopConversation",plural:!1,selections:[l,a,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"StopConversationOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[t],storageKey:null}],storageKey:null}],type:"MutationStopConversationSuccess",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"StopConversationMutation",selections:[{alias:"mutationResult",args:n,concreteType:null,kind:"LinkedField",name:"stopConversation",plural:!1,selections:[l,a,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"StopConversationOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[t,{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationStopConversationSuccess",abstractKey:null}],storageKey:null}]},params:{cacheID:"7a5e09618fbb50f76d3137b7c8314604",id:null,metadata:{},name:"StopConversationMutation",operationKind:"mutation",text:"mutation StopConversationMutation(\n  $input: StopConversationInput!\n) {\n  mutationResult: stopConversation(input: $input) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationStopConversationSuccess {\n      data {\n        conversation {\n          id\n          nodeId\n        }\n      }\n    }\n  }\n}\n"}}}();M.hash="5af43923c21920237b0cd21e4f0eeee3";var E=l(915),V=l(42069),G=l(60213),B=l(68888),O=l(31722),z=l(459),Q=l(16167),q=l(48134);let U=(0,v.forwardRef)(function(e,n){return(0,a.jsxs)(z.V,{ref:n,onClick:e.onClick,children:[(0,a.jsx)(Q.H,{children:(0,a.jsx)(O.A,{className:Q.b})}),(0,a.jsx)(q.A,{children:"Stop"})]})});var W=l(91018),H=l(95845),$=l(30035),Z=l.n($),Y=l(76804),J=l(82057),X=l(24002),ee=l(59025),en=l(28332);function el(e){let n=new Date,l=J.A(n,7),t=X.A(e.date,{start:l,end:n}),i=(0,v.useMemo)(()=>ee.A(e.date)?"Today":en.A(e.date)?"Yesterday":t?H.A(e.date,"EEEE"):H.A(e.date,"MMMM d"),[e.date,t]),s=(0,v.useMemo)(()=>H.A(e.date,"MMMM d"),[e.date]);return(0,a.jsx)("div",{className:"group flex w-full flex-col items-start justify-end px-7 pb-5 text-xs font-medium text-slate-12",style:e.style,children:(0,a.jsxs)("div",{className:"flex items-center gap-x-1",children:[(0,a.jsx)("span",{className:"flex items-center gap-x-1",children:i}),t&&(0,a.jsxs)("span",{className:"flex items-center gap-x-1 opacity-0 transition-opacity group-hover:opacity-100",children:[(0,a.jsx)("span",{className:"inline-block text-[6px]",children:"â€¢"}),s]})]})})}let ea="__placeholder_task_id__";function et(e){let n=e.data[e.index],l=(0,v.useMemo)(()=>({...e.style,top:Number(e.style.top)+40}),[e.style]);return n?"loading"===n.type?(0,a.jsx)("div",{style:l,className:"flex size-full items-center justify-center",children:(0,a.jsx)(Y.y,{})}):"timestamp"===n.type?(0,a.jsx)(el,{date:n.date,style:l}):"new-conversation"===n.type?(0,a.jsx)(es,{id:ea,nodeId:ea,title:"New task",status:"Completed",hasNotification:!1,style:l}):(0,a.jsx)(es,{id:n.id,nodeId:n.nodeId,date:n.date,title:n.title,status:n.status,hasNotification:n.hasNotification,style:l}):null}function ei(e){let n=(0,v.useRef)(null),[l,t]=(0,v.useState)(e.title),i=(0,v.useCallback)(()=>{e.onSubmit(l)},[e,l]),s=(0,v.useCallback)(n=>{"Escape"===n.key&&e.onCancel()},[e]),r=(0,v.useCallback)(n=>{n.preventDefault(),e.onSubmit(l)},[e,l]),o=(0,v.useCallback)(e=>t(e.target.value),[]);return(0,v.useEffect)(()=>{requestAnimationFrame(()=>{var e;return null===(e=n.current)||void 0===e?void 0:e.focus()})},[]),(0,a.jsx)("form",{onSubmit:r,className:"electron-no-drag inline-block w-full items-center",children:(0,a.jsx)("input",{ref:n,value:l,onChange:o,onKeyDown:s,onBlur:i,className:(0,b.QP)("w-full text-sm text-slate-12 bg-transparent font-medium","border-transparent px-0 flex-1 bg-transparent outline-none","focus:border-slate-5 active:border-slate-5 focus:bg-slate-1 active:bg-slate-1","hover:border-slate-4 hover:bg-slate-1 focus:ring active:ring ring-1","ring-primary-8 rounded-sm py-0.5"),autoComplete:"off"})})}function es(e){let n=(0,v.useRef)(null),l=(0,c.useRouter)(),[t]=(0,r.Q)(),i=(0,v.useMemo)(()=>{if(e.id===ea)return window.location.href;let n=new URL(window.location.href);return n.searchParams.set("conversationId",e.id),n.toString()},[e]),[s,o]=(0,v.useState)(!1),d=(0,v.useCallback)(()=>o(!0),[]),u=(0,v.useCallback)(()=>o(!1),[]),m=(0,f.aV)(),[y]=(0,g.useMutation)(R),[p]=function(){let[e,n]=(0,g.useMutation)(M),l=(0,f.aV)(),a=(0,v.useCallback)(e=>{l({id:"stop-conversation-mutation-error",level:"danger",label:"Error",message:null!=e?e:"Failed to stop conversation",duration:3e3})},[l]),t=(0,v.useCallback)(n=>{e({variables:n.variables,onError:e=>{K.Cp(e),a()},onCompleted:e=>{var l;"Error"===e.mutationResult.__typename&&a(e.mutationResult.message);let t=e.mutationResult.data;t&&(null===(l=n.onSuccess)||void 0===l||l.call(n,t))}})},[e,a]);return(0,v.useMemo)(()=>[t,n],[t,n])}(),[h,k]=(0,v.useState)(!1),F=(0,v.useCallback)(()=>{o(!1),k(!0)},[]),x=(0,v.useCallback)(()=>k(!1),[]),S=(0,v.useCallback)(n=>{k(!1),n&&n!==e.title&&y({variables:{conversationId:e.id,title:n},optimisticResponse:{renameConversation:{__typename:"MutationRenameConversationSuccess",__isError:"MutationRenameConversationSuccess",message:"",data:{conversation:{id:e.id,nodeId:e.nodeId,title:n}}}},onCompleted:e=>{e.renameConversation.message&&m({level:"danger",label:"Error",message:e.renameConversation.message,duration:3e3})}})},[y,e,m]),[T]=(0,g.useMutation)(D),I=e.id===ea&&!t,C=t===e.id||s||I,A=(0,v.useCallback)(()=>{o(!1),T({variables:{conversationId:e.id},optimisticResponse:{deleteConversation:{__typename:"MutationDeleteConversationSuccess",__isError:"MutationDeleteConversationSuccess",message:"",data:{conversation:{nodeId:e.nodeId}}}},onCompleted:e=>{if(e.deleteConversation.message){m({level:"danger",label:"Error",message:e.deleteConversation.message,duration:3e3});return}if(C){let e=new URL(window.location.href);e.searchParams.delete("conversationId"),l.push(e.toString(),void 0,{shallow:!0})}}})},[T,e,m,C,l]),j=(0,v.useCallback)(()=>{o(!1),p({variables:{input:{conversationId:e.id}}})},[p,e.id]),N="Running"===e.status||"Pending"===e.status||"PendingEnqueue"===e.status,L=(0,v.useMemo)(()=>N&&e.hasNotification?2:N||e.hasNotification?1:0,[N,e.hasNotification]);return h?(0,a.jsx)("div",{style:e.style,className:"my-1 flex w-full items-center px-5 pb-5",children:(0,a.jsx)("div",{className:(0,b.QP)("rounded-md p-2 transition w-full","bg-slate-4 text-slate-12"),children:(0,a.jsx)(ei,{title:e.title,onSubmit:S,onCancel:x},e.title)})}):(0,a.jsxs)("div",{style:e.style,className:"my-1 flex w-full items-center px-5 pb-5",children:[(0,a.jsx)(Z(),{ref:n,href:i,shallow:!0,className:(0,b.QP)("group cursor-pointer rounded-md p-2 transition hover:bg-slate-4 active:bg-slate-5 w-full","flex items-center justify-between gap-x-2 text-slate-11",C&&"bg-slate-4 text-slate-12"),children:(0,a.jsxs)("div",{className:(0,b.QP)("grid w-full items-center gap-x-1.5","grid-cols-[1fr] group-hover:grid-cols-[1fr,auto]",1===L&&"grid-cols-[1fr,auto] group-hover:grid-cols-[1fr,auto,auto]",2===L&&"grid-cols-[1fr,auto,auto] group-hover:grid-cols-[1fr,auto,auto,auto]"),children:[(0,a.jsx)("div",{className:(0,b.QP)("truncate text-sm font-normal text-slate-11",C&&"text-slate-12"),children:e.title}),e.date&&(0,a.jsx)("div",{className:"hidden text-xxs font-medium text-slate-10 group-hover:block",children:H.A(e.date,"h:mm aaa")}),N&&(0,a.jsx)("div",{className:"flex w-4 items-center",children:(0,a.jsx)(P.A,{className:"size-4 animate-spin text-blue-9"})}),(0,a.jsx)("div",{className:"flex items-center gap-x-2",children:e.hasNotification&&t!==e.id&&(0,a.jsx)(W.S,{children:"1"})})]})}),(0,a.jsx)(G.j,{targetRef:n,isOpen:s,onOpen:d,onClose:u,children:(0,a.jsxs)(E.l,{children:[(0,a.jsx)(B.m,{onClick:F}),N&&(0,a.jsx)(U,{onClick:j}),(0,a.jsx)(V.z,{onClick:A})]})})]})}let er=function(){var e={args:null,kind:"FragmentSpread",name:"StartManualWorkflowButton_StateGraphNode"};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"NewTaskMenu_StateGraph_old",selections:[{alias:null,args:null,concreteType:"EntryPointConversationNode",kind:"LinkedField",name:"entryPointConversationNode",plural:!1,selections:[e],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"workflowStartNodes",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},e],storageKey:null}],type:"StateGraph",abstractKey:null}}();er.hash="75e6b001259a869e1aa5320797f5e96b";var eo=l(91141),ed=l(27631),eu=l(90819),ec=l(72735);let eg=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"StartConversationFromNodeMutation",selections:[{alias:"mutationResult",args:n,concreteType:null,kind:"LinkedField",name:"startConversationFromNode",plural:!1,selections:[l,a,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"StartConversationFromNodeOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[t],storageKey:null}],storageKey:null}],type:"MutationStartConversationFromNodeSuccess",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"StartConversationFromNodeMutation",selections:[{alias:"mutationResult",args:n,concreteType:null,kind:"LinkedField",name:"startConversationFromNode",plural:!1,selections:[l,a,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"StartConversationFromNodeOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[t,{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationStartConversationFromNodeSuccess",abstractKey:null}],storageKey:null}]},params:{cacheID:"10dda7efdf4af720804007ce5ec2a67d",id:null,metadata:{},name:"StartConversationFromNodeMutation",operationKind:"mutation",text:"mutation StartConversationFromNodeMutation(\n  $input: StartConversationFromNodeInput!\n) {\n  mutationResult: startConversationFromNode(input: $input) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationStartConversationFromNodeSuccess {\n      data {\n        conversation {\n          id\n          nodeId\n        }\n      }\n    }\n  }\n}\n"}}}();eg.hash="96b8692205c997c5e27f776fecb004f0";var em=l(42009),ey=l(13813),ep=l(20024);let ef=(0,v.forwardRef)(function(e,n){let{className:l,tooltipText:t,...i}=e;return(0,a.jsxs)("button",{ref:n,className:(0,b.QP)("inline-flex items-center justify-center gap-x-2 rounded-md border border-slate-5 bg-panel p-2 text-sm font-medium text-slate-12","hover:enabled:bg-slate-2 active:enabled:bg-slate-5 disabled:bg-slate-4 disabled:text-slate-9 disabled:cursor-not-allowed w-full",l),...i,children:[(0,a.jsx)(ep.c,{className:"-ml-1 size-5 text-slate-11"}),"New Task",t&&(0,a.jsx)(ey.I,{iconClassName:"size-5 shrink-0 text-slate-8 hidden sm:block",placement:"right",children:t})]})});var eh=l(63620),ek=l(35853),eF=l(57802);function ex(e){return(0,a.jsxs)(ek.bF,{...e,children:[(0,a.jsx)("div",{className:(0,b.QP)("flex h-5 w-5 shrink-0 items-center justify-center rounded-[5px]",eh.f[eF.cs.EntryPoint].color),children:eh.f[eF.cs.EntryPoint].icon}),(0,a.jsx)("span",{className:"truncate text-nowrap text-left text-sm font-medium text-slate-12",children:"Start conversation"})]})}let ev=function(){var e={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StartManualWorkflowButton_StateGraphNode",selections:[{kind:"InlineFragment",selections:[e,n,{args:null,kind:"FragmentSpread",name:"StartManualWorkflowFromActionButton_ActionNode"}],type:"ActionNode",abstractKey:null},{kind:"InlineFragment",selections:[e,n,{args:null,kind:"FragmentSpread",name:"StartManualWorkflowFromAgentStateButton_AgentStateNode"}],type:"AgentStateNode",abstractKey:null}],type:"StateGraphNode",abstractKey:"__isStateGraphNode"}}();ev.hash="eeb99220b2247a9a64f3df86e9f56c2b";let eb=function(){var e={alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StartManualWorkflowFromActionButton_ActionNode",selections:[e,{alias:null,args:null,kind:"ScalarField",name:"occurrence",storageKey:null},{alias:null,args:null,concreteType:"StateGraphAction",kind:"LinkedField",name:"actionDefinition",plural:!1,selections:[{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"tool",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ActionDetails",kind:"LinkedField",name:"action",plural:!1,selections:[e],storageKey:null}],storageKey:null}],type:"ActionNode",abstractKey:null}}();eb.hash="3238437a1da03b8bc50b5626c446e3b9";var eS=l(26042),eT=l(46251);function eK(e){var n;let l=(0,g.useFragment)(eb,e.actionNodeFragmentRef);if(!(null==l?void 0:l.actionDefinition))return null;let t=l.occurrence>1;return(0,a.jsxs)(ek.bF,{onClick:e.handleStartManualWorkflow,className:(0,b.QP)("grid grid-cols-[auto,1fr]",t&&"grid-cols-[auto,1fr,auto]"),children:[(0,a.jsx)(eT.si,{tool:l.actionDefinition.tool.tool,className:"h-5 w-5 shrink-0"}),(0,a.jsx)("span",{className:"truncate text-nowrap text-left text-sm font-medium text-slate-12",children:null!==(n=l.displayName)&&void 0!==n?n:l.actionDefinition.action.displayName}),t&&(0,a.jsx)(eS.u,{occurrence:l.occurrence})]})}let eI={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StartManualWorkflowFromAgentStateButton_AgentStateNode",selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"guidelines",storageKey:null}],type:"AgentStateNode",abstractKey:null};function eC(e){var n;let l=(0,g.useFragment)(eI,e.agentStateNodeFragmentRef),t=(0,v.useMemo)(()=>l.guidelines?l.guidelines.length>25?"".concat(l.guidelines.slice(0,25)):l.guidelines:"",[l]);return(0,a.jsxs)(ek.bF,{onClick:e.handleStartManualWorkflow,children:[(0,a.jsx)("div",{className:(0,b.QP)("flex h-5 w-5 shrink-0 items-center justify-center rounded-[5px]",eh.f[eF.cs.AgentState].color),children:eh.f[eF.cs.AgentState].icon}),(0,a.jsx)("span",{className:"text-nowrap text-sm font-medium text-slate-12",children:null!==(n=l.displayName)&&void 0!==n?n:"AI Agent"}),(0,a.jsx)("span",{className:"truncate text-sm font-normal text-slate-10",children:t})]})}function eA(e){let{nodeFragmentRef:n,handleStartManualWorkflowFromNode:l}=e,t=(0,g.useFragment)(ev,n),i=(0,v.useCallback)(()=>{"%other"!==t.__typename&&l(t.id)},[l,t]);switch(t.__typename){case"ActionNode":return(0,a.jsx)(eK,{actionNodeFragmentRef:t,handleStartManualWorkflow:i});case"AgentStateNode":return(0,a.jsx)(eC,{agentStateNodeFragmentRef:t,handleStartManualWorkflow:i});default:return null}}eI.hash="1f964d1e111f4d52a0588064bbf755d1";let ej=(0,v.forwardRef)(function(e,n){let l=(0,g.useFragment)(er,e.stateGraphFragmentRef),t=(0,c.useRouter)(),i=(0,eu.T)(),[,s]=(0,r.Q)(),[o]=function(){let[e,n]=(0,g.useMutation)(eg),l=(0,f.aV)(),a=(0,v.useCallback)(e=>{l({id:"start-conversation-from-node-mutation-error",level:"danger",label:"Error",message:null!=e?e:"Failed to start conversation from node",duration:3e3})},[l]),t=(0,v.useCallback)(n=>{e({variables:n.variables,onError:e=>{K.Cp(e),a()},onCompleted:e=>{var l;"Error"===e.mutationResult.__typename&&a(e.mutationResult.message);let t=e.mutationResult.data;t&&(null===(l=n.onSuccess)||void 0===l||l.call(n,t))}})},[e,a]);return(0,v.useMemo)(()=>[t,n],[t,n])}(),d=(0,v.useCallback)(n=>{var l;let a=null!==(l=Intl.DateTimeFormat().resolvedOptions().timeZone)&&void 0!==l?l:"UTC";if(!i)throw Error("No agentId found");o({variables:{input:{identityId:e.identityId,agentDefinitionId:i,nodeId:n,timeZone:a}},onSuccess:e=>{s(e.conversation.id)}})},[i,o,e.identityId,s]),u=(0,v.useCallback)(async()=>{let e=new URL(window.location.href);e.searchParams.delete(ec.$_),await t.push(e.toString(),void 0,{shallow:!0}),ed.k.emit("new-task-clicked")},[t]),m=(0,v.useMemo)(()=>{var e;return null!==(e=null==l?void 0:l.workflowStartNodes)&&void 0!==e?e:[]},[l]),y=null==l?void 0:l.entryPointConversationNode;return null!=y&&0===m.length?(0,a.jsx)("div",{ref:n,className:"flex w-full items-center justify-between px-6 pt-6",children:(0,a.jsx)(ef,{onClick:u,tooltipText:"Drag a CSV to start a batch of tasks."})}):m.length>0?(0,a.jsx)("div",{ref:n,children:(0,a.jsx)(eo.W1,{children:e=>{let{open:n}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex w-full items-center justify-between px-6 pt-6",children:(0,a.jsx)(eo.IU,{className:"w-full",children:(0,a.jsx)(ef,{})})}),(0,a.jsxs)(em.$b,{open:n,className:"w-[var(--button-width)]",children:[null!=y&&(0,a.jsx)(ex,{onClick:u}),m.map(e=>(0,a.jsx)(eA,{nodeFragmentRef:e,handleStartManualWorkflowFromNode:d},e.id))]})]})}})}):null});function eN(){return(0,a.jsxs)("div",{className:"flex h-fit w-full flex-col items-center justify-center",children:[(0,a.jsx)(eL,{}),(0,a.jsx)("div",{className:"mb-3 mt-8 text-sm font-semibold text-slate-12",children:"No Tasks"}),(0,a.jsx)("div",{className:"text-xs font-normal text-slate-10",children:"This Lindyâ€™s tasks will appear here."})]})}let eL=(0,v.memo)(function(){return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"84",height:"85",fill:"none",children:[(0,a.jsx)("path",{fill:"#F1F3F9",stroke:"#D6DCE8",strokeMiterlimit:"10",d:"M42 83.553c22.4 0 40.56-18.345 40.56-41.054C82.56 19.79 64.4 1.445 42 1.445 19.6 1.445 1.44 19.79 1.44 42.5 1.44 65.208 19.6 83.553 42 83.553Z"}),(0,a.jsx)("path",{fill:"#F1F3F9",stroke:"#D6DCE8",strokeMiterlimit:"10",d:"M65.556 7.615c1.206 0 2.227.933 2.227 2.24V75.9c0 1.213-.928 2.239-2.227 2.239h-48.35a2.204 2.204 0 0 1-2.228-2.239V9.854c0-1.213.928-2.239 2.227-2.239h48.351Z"}),(0,a.jsx)("path",{fill:"#BCC4CF",d:"M67.782 14.519v61.289c0 1.213-.928 2.239-2.227 2.239H21.381l-3.898-3.918 43.896-60.73L65.184 12l2.599 2.519Z",opacity:".3"}),(0,a.jsx)("path",{fill:"#F1F3F9",stroke:"#D6DCE8",strokeMiterlimit:"10",d:"M65.37 12.746a.734.734 0 0 0-.743-.746H18.225a.734.734 0 0 0-.742.746v60.636c0 .374.278.747.742.747h46.31c.37 0 .742-.28.742-.747l.093-60.636Z"}),(0,a.jsx)("path",{fill:"#F1F3F9",stroke:"#D6DCE8",strokeMiterlimit:"10",d:"M65.37 12.746a.734.734 0 0 0-.742-.746H18.226a.734.734 0 0 0-.742.746c.556 24.162.742 51.495-1.857 58.584l44.453-.653c2.692-12.314 4.733-34.423 5.29-57.93Z"}),(0,a.jsx)("path",{fill:"#fff",stroke:"#D6DCE8",strokeMiterlimit:"10",d:"M65.276 12.092s-.092 3.638-1.206 26.866v.467c-1.392 22.762-21.438 27.52-23.85 27.8-1.114.092-3.249.279-7.054.279-4.733.187-11.971.28-23.293.373a.51.51 0 0 1-.464-.746c7.795-15.766 7.888-54.946 7.888-54.946l47.98-.093Z"}),(0,a.jsx)("path",{fill:"#AAB2C5",d:"M53.178 53.924H31.569c-.148 0-.297-.228-.297-.608 0-.305.149-.609.297-.609h21.683c.148 0 .297.228.297.609 0 .304-.149.608-.371.608ZM56.857 26.555H34.588c-.153 0-.305-.228-.305-.609 0-.304.152-.608.305-.608h22.269c.152 0 .305.228.305.608s-.153.609-.305.609ZM25.802 28.204c-.158 0-.317-.079-.476-.237l-2.305-2.213c-.238-.237-.238-.712 0-.949.239-.237.715-.237.954 0l1.827 1.818 3.735-3.715c.239-.237.715-.237.954 0 .238.237.238.712 0 .949l-4.212 4.19c-.159.078-.318.157-.477.157ZM55.66 38.936H33.977c-.149 0-.297-.228-.297-.609 0-.304.148-.608.297-.608H55.66c.148 0 .297.228.297.608 0 .305-.149.609-.297.609ZM24.9 41.583c-.147 0-.294-.079-.44-.237l-2.055-2.213c-.22-.237-.22-.712 0-.949s.66-.237.88 0l1.688 1.818 3.447-3.715c.22-.237.66-.237.88 0 .22.237.22.712 0 .949l-3.96 4.11c-.074.158-.22.237-.44.237ZM22.491 55.573c-.146 0-.293-.079-.44-.237l-2.054-2.213c-.22-.237-.22-.711 0-.948.22-.238.66-.238.88 0l1.688 1.818 3.447-3.715c.22-.238.66-.238.88 0 .22.237.22.71 0 .948l-3.96 4.11c-.074.158-.22.237-.44.237Z"}),(0,a.jsx)("path",{fill:"#F1F3F9",stroke:"#D6DCE8",strokeMiterlimit:"10",d:"M63.978 39.332c-1.3 22.762-21.438 27.52-23.851 27.8-1.114.093-3.248.28-7.053.28 10.023-4.665 15.405-13.06 15.313-19.59 4.825.372 13.178 0 15.59-8.49Z"}),(0,a.jsx)("path",{fill:"#D6DCE8",stroke:"#AAB2C5",strokeMiterlimit:"10",d:"M52.378 7.804V10.696c-.279 1.586-1.578 2.892-3.248 2.892H33.63c-1.67 0-2.97-1.306-3.248-2.892V7.804c0-.373.279-.84.743-.84h7.61v-.372c0-1.493 1.299-2.799 2.784-2.799 1.485 0 2.784 1.306 2.784 2.799v.373h7.61c.185.093.464.373.464.84Z"}),(0,a.jsx)("path",{fill:"#AAB2C5",d:"M41.507 8.136c.688 0 1.204-.521 1.204-1.216 0-.696-.516-1.217-1.204-1.217s-1.204.521-1.204 1.217c0 .695.602 1.216 1.204 1.216Z"})]})}),e_=25;function ew(e){var n;let{data:l,loadNext:t,isLoadingNext:m,refetch:y}=(0,g.usePaginationFragment)(i,e.agentDefinitionFragmentRef),p=(0,v.useCallback)(()=>(0,v.startTransition)(()=>{y({},{fetchPolicy:"network-only"})}),[y]);(0,v.useEffect)(()=>{p()},[p]);let[f]=(0,r.Q)();!function(e){let[n]=(0,r.Q)(),l=(0,g.useRelayEnvironment)(),a=(0,c.useRouter)();(0,o.S)(u.B.userConversations,"conversationDeleted",e,t=>{let{conversationId:i}=t;if((0,g.commitLocalUpdate)(l,n=>{var l;let a=n.get((0,d.F)("AgentDefinition",e));if(!a)return;let t=g.ConnectionHandler.getConnection(a,"ThreadsListAgentDefinitionFragment_conversations");if(!t||!(null!==(l=t.getLinkedRecords("edges"))&&void 0!==l?l:[]).find(e=>{let n=e.getLinkedRecord("node");return(null==n?void 0:n.getValue("id"))===i}))return;let s=(0,d.F)("Conversation",i);g.ConnectionHandler.deleteNode(t,s)}),n===i){let e=a.asPath.split("?")[0];e&&a.push(e,void 0,{shallow:!0})}})}(l.id);let h=(0,v.useMemo)(()=>{var e,n;return(null!==(n=null===(e=l.conversations.edges)||void 0===e?void 0:e.map(e=>null==e?void 0:e.node).filter(j.Vq))&&void 0!==n?n:[]).sort((e,n)=>{let l=e.updatedAt?new Date(e.updatedAt):new Date;return(n.updatedAt?new Date(n.updatedAt):new Date).getTime()-l.getTime()})},[l.conversations.edges]),k=(0,v.useMemo)(()=>{var e;let n=[],a=null;for(let t of(f||(null===(e=l.stateGraph)||void 0===e?void 0:e.entryPointConversationNode)==null||(a=new Date,n.push({type:"timestamp",date:a},{type:"new-conversation"})),h)){let e=t.updatedAt?new Date(t.updatedAt):new Date;a&&e.getDate()===a.getDate()||(a=e,n.push({type:"timestamp",date:a})),n.push({type:"conversation",id:t.id,nodeId:t.nodeId,date:t.updatedAt?new Date(t.updatedAt):new Date,title:t.title||"New task",status:t.status,hasNotification:t.hasNotification})}return m&&n.push({type:"loading"}),n},[h,m,f,null===(n=l.stateGraph)||void 0===n?void 0:n.entryPointConversationNode]),F=(0,v.useCallback)(e=>null!=k.at(e),[k]),x=(0,v.useCallback)(e=>{let n=k.at(e);return null!=n&&"timestamp"===n.type?0===e?15:46:41},[k]),b=(0,v.useCallback)(()=>{t(e_)},[t]),S=(0,v.useMemo)(()=>l.conversations.totalCount-h.length+k.length,[l.conversations.totalCount,h.length,k.length]),T=(0,v.useRef)(null),[K,I]=(0,v.useState)(0);return(0,v.useEffect)(()=>{let e=T.current;if(!e)return;let n=new ResizeObserver(e=>{let n=e[0];n&&I(n.target.offsetHeight)});return n.observe(e),()=>n.disconnect()},[]),(0,a.jsx)(s.T,{className:"flex h-full flex-col overflow-hidden",defaultWidth:300,minWidth:250,maxWidth:400,handleSide:"right",persistKey:"lindy-threads-list-width",children:(0,a.jsxs)(C,{identityId:e.identityId,agentDefinitionId:l.id,children:[(0,a.jsx)(ej,{stateGraphFragmentRef:l.stateGraph,identityId:e.identityId,ref:T}),!h.length&&(0,a.jsx)("div",{className:"pt-24",children:(0,a.jsx)(eN,{})}),!!h.length&&(0,a.jsx)("div",{className:"size-full",children:(0,a.jsx)(w.A,{threshold:e_,isItemLoaded:F,loadMoreItems:b,itemCount:S,children:e=>{let{onItemsRendered:n,ref:l}=e;return(0,a.jsx)(L.Ay,{ref:l,children:e=>{let{height:l,width:t}=e;return(0,a.jsxs)(N.bL,{className:"relative w-full",children:[(0,a.jsx)(eR,{}),(0,a.jsx)(_._m,{height:l-K,width:t,onItemsRendered:n,itemCount:k.length,itemData:k,itemSize:x,children:et}),(0,a.jsx)(A.Ze,{})]})}})}})})]})})}let eR=(0,v.forwardRef)(function(e,n){let{style:l,...t}=e,i=(0,v.useMemo)(()=>{if(!l)return l;let{overflow:e,...n}=l;return n},[l]);return(0,a.jsx)(N.LM,{ref:n,...t,style:i})})},959:(e,n,l)=>{"use strict";l.d(n,{U:()=>u});var a=l(50612),t=l(50428),i=l(37361),s=l(13941),r=l(67373),o=l(66679),d=l(25919);function u(e){let n=(0,i.AD)();return(0,a.jsxs)(o.m_,{placement:"bottom-end",children:[(0,a.jsx)(o.ZI,{children:(0,a.jsxs)("div",{className:"flex items-center gap-x-1",children:[e.enabled?"Hide":"Show"," Debugger ",(0,a.jsx)(s.n,{children:n})," ",(0,a.jsx)(s.n,{children:"â‡§"})," ",(0,a.jsx)(s.n,{children:";"})]})}),(0,a.jsx)(o.k$,{asChild:!0,children:(0,a.jsx)(r.$,{onClick:e.onClick,level:"text",className:"group p-0.5 hover:border-slate-8 hover:bg-slate-5 active:border-slate-8 active:bg-slate-7",children:(0,a.jsx)(t.A,{className:(0,d.QP)(e.enabled?"text-slate-12":"text-slate-11","h-5 w-5 text-slate-11 transition-colors group-hover:text-slate-12")})})})]})}},72790:(e,n,l)=>{"use strict";l.d(n,{H:()=>r});var a=l(50612),t=l(31284),i=l(8678),s=l(959);let r=(0,i.PA)(function(){let e=t.a.ui.isDebugPanelOpen;return(0,a.jsx)(s.U,{enabled:e,onClick:t.a.ui.toggleDebugPanel})})},42911:(e,n,l)=>{"use strict";l.d(n,{G:()=>j});let a=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useSaveAgentAgentDefinitionFragment",selections:[e,n,{alias:null,args:null,concreteType:"AgentIcon",kind:"LinkedField",name:"icon",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:[e],storageKey:null}],type:"AgentDefinition",abstractKey:null}}();a.hash="8891d932ae6e6ecc9523a974b751b72f";let t=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"instructions",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"model",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"shouldAskForConfirmation",storageKey:null},u={alias:null,args:null,concreteType:"AgentIcon",kind:"LinkedField",name:"icon",plural:!1,selections:[s,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null}],storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null},g={alias:null,args:null,concreteType:"Memory",kind:"LinkedField",name:"memories",plural:!0,selections:[t,{alias:null,args:null,kind:"ScalarField",name:"isActive",storageKey:null},c],storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},y=[t,i],p={alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:y,storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"version",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"autoLayoutEnabled",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"from",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"to",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"inflectionY",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"condition",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},T=[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],K={alias:null,args:null,concreteType:"NodePosition",kind:"LinkedField",name:"position",plural:!1,selections:T,storageKey:null},I={alias:null,args:null,kind:"ScalarField",name:"manuallyPositioned",storageKey:null},C={alias:null,args:null,kind:"ScalarField",name:"guidelines",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"requireConfirmation",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"isPremium",storageKey:null},N={alias:null,args:null,kind:"ScalarField",name:"tool",storageKey:null},L={alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"method",storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"provider",storageKey:null},R={alias:null,args:null,kind:"ScalarField",name:"scopes",storageKey:null},D={alias:null,args:null,kind:"ScalarField",name:"fields",storageKey:null},P=[l,_,w],M={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"authConfig",plural:!1,selections:[{kind:"InlineFragment",selections:[l,_,w,R],type:"OAuth2AuthConfig",abstractKey:null},{kind:"InlineFragment",selections:[l,_,w,D],type:"CustomAuthConfig",abstractKey:null},{kind:"InlineFragment",selections:[l,D,_,w,R],type:"CustomOAuth2AuthConfig",abstractKey:null},{kind:"InlineFragment",selections:P,type:"TokenAuthConfig",abstractKey:null},{kind:"InlineFragment",selections:P,type:"PipedreamAuthConfig",abstractKey:null}],storageKey:null},E={alias:null,args:null,kind:"ScalarField",name:"createdByNodeId",storageKey:null},V={alias:null,args:null,kind:"ScalarField",name:"statefulToolKey",storageKey:null},G={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},B={alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[i,G,S,{alias:null,args:null,kind:"ScalarField",name:"isPopular",storageKey:null},N],storageKey:null},O={alias:null,args:null,kind:"ScalarField",name:"toolDisplayName",storageKey:null},z={alias:null,args:null,kind:"ScalarField",name:"dependencies",storageKey:null},Q={alias:null,args:null,kind:"ScalarField",name:"placeholder",storageKey:null},q={alias:null,args:null,concreteType:"DynamicLoaderDefaultValue",kind:"LinkedField",name:"defaultValue",plural:!1,selections:[s,c],storageKey:null},U={alias:null,args:null,kind:"ScalarField",name:"icon",storageKey:null},W={kind:"InlineFragment",selections:[k,L,{alias:null,args:null,kind:"ScalarField",name:"output",storageKey:null},S,G,Q,q,U],type:"InputTreeDynamicField",abstractKey:null},H={alias:null,args:null,kind:"ScalarField",name:"field",storageKey:null},$={kind:"InlineFragment",selections:[k,{alias:null,args:null,kind:"ScalarField",name:"schema",storageKey:null},H],type:"InputTreeStaticField",abstractKey:null},Z={alias:null,args:null,kind:"ScalarField",name:"parentFields",storageKey:null},Y={alias:null,args:null,kind:"ScalarField",name:"inputSchema",storageKey:null},J={alias:null,args:null,kind:"ScalarField",name:"outputSchema",storageKey:null},X={alias:null,args:null,kind:"ScalarField",name:"deprecated",storageKey:null},ee=[q,z,G,S,H,U,L,Q],en={alias:null,args:null,concreteType:"DynamicLoaders",kind:"LinkedField",name:"dynamicLoaders",plural:!1,selections:[{alias:null,args:null,concreteType:"DynamicLoaderDetails",kind:"LinkedField",name:"loaders",plural:!0,selections:ee,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"refetchInputAfterLoad",storageKey:null}],storageKey:null},el=[{alias:null,args:null,kind:"ScalarField",name:"agentMessageReceivedSchema",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"immediateEdgeLabel",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"observableEdgeLabel",storageKey:null},V],ea={alias:null,args:null,concreteType:"ObservableChannelMetadata",kind:"LinkedField",name:"observableChannel",plural:!1,selections:el,storageKey:null},et={alias:null,args:null,kind:"ScalarField",name:"hasSideEffects",storageKey:null},ei={alias:null,args:null,kind:"ScalarField",name:"premiumActionCost",storageKey:null},es={alias:null,args:null,concreteType:"ActionProperty",kind:"LinkedField",name:"outputProperties",plural:!0,selections:[S,k,c],storageKey:null},er={alias:null,args:null,concreteType:"ActionConfigurationMember",kind:"LinkedField",name:"actionConfiguration",plural:!0,selections:[k,{alias:null,args:null,kind:"ScalarField",name:"allowAdditionalArrayEntries",storageKey:null},{alias:null,args:null,concreteType:"ActionConfigurationMemberManualResult",kind:"LinkedField",name:"manualResult",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isUndefined",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isNull",storageKey:null},c],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"path",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"prompt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"unionType",storageKey:null}],storageKey:null},eo=[t],ed={alias:null,args:null,concreteType:"Auth",kind:"LinkedField",name:"auth",plural:!1,selections:eo,storageKey:null},eu={alias:null,args:null,concreteType:"KnowledgeSource",kind:"LinkedField",name:"knowledgeSources",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"entryCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entryCountDisabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEnabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"source",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"syncStatus",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"syncToBeCompletedBy",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalFileSize",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalNumCharacters",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalNumEmbeddings",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalNumErrors",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalNumTokens",storageKey:null}],storageKey:null},ec={alias:null,args:null,kind:"ScalarField",name:"occurrence",storageKey:null},eg={alias:null,args:null,kind:"ScalarField",name:"statefulToolOccurrence",storageKey:null},em={alias:null,args:null,kind:"ScalarField",name:"greetingMessage",storageKey:null},ey={alias:null,args:null,concreteType:"ConversationStarter",kind:"LinkedField",name:"conversationStarters",plural:!0,selections:[c],storageKey:null},ep={alias:null,args:null,kind:"ScalarField",name:"triggerSetup",storageKey:null},ef={alias:null,args:null,kind:"ScalarField",name:"triggerEnabled",storageKey:null},eh={alias:null,args:null,kind:"ScalarField",name:"enabled",storageKey:null},ek={alias:null,args:null,kind:"ScalarField",name:"isConfigured",storageKey:null},eF={alias:null,args:null,kind:"ScalarField",name:"isPendingVerification",storageKey:null},ex={alias:null,args:null,concreteType:"TriggerSetup",kind:"LinkedField",name:"setup",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"actionArgs",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"actionName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"toolName",storageKey:null}],storageKey:null},ev={alias:null,args:null,concreteType:"ToolTriggerChannel",kind:"LinkedField",name:"channel",plural:!1,selections:[V],storageKey:null},eb={alias:null,args:null,kind:"ScalarField",name:"eventSchema",storageKey:null},eS={alias:null,args:null,kind:"ScalarField",name:"tooltip",storageKey:null},eT={alias:null,args:null,kind:"ScalarField",name:"isRequired",storageKey:null},eK={alias:null,args:null,kind:"ScalarField",name:"canBeSharedWithTemplate",storageKey:null},eI={alias:"defaultText",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},eC={alias:"defaultNumber",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},eA={alias:null,args:null,kind:"ScalarField",name:"min",storageKey:null},ej={alias:null,args:null,kind:"ScalarField",name:"max",storageKey:null},eN={alias:null,args:null,kind:"ScalarField",name:"step",storageKey:null},eL=[l,L,m,Q,G,eS,eT,eK,k,D],e_={alias:"defaultDate",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},ew={alias:null,args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},eR=[l,L,m,Q,G,eS,eT,eK,k,D,ew],eD={alias:"defaultLindyMail",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},eP={alias:"defaultWebhook",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},eM={alias:"defaultRecurringSchedule",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},eE={alias:"defaultChecked",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},eV={alias:null,args:null,kind:"ScalarField",name:"aliases",storageKey:null},eG={alias:"defaultItem",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},eB={alias:null,args:null,kind:"ScalarField",name:"selectFirstByDefault",storageKey:null},eO={alias:null,args:null,kind:"ScalarField",name:"isContextDependent",storageKey:null},ez={alias:"defaultItems",args:null,kind:"ScalarField",name:"defaultValue",storageKey:null},eQ={alias:null,args:null,kind:"ScalarField",name:"hasAllowAllOption",storageKey:null},eq={alias:null,args:null,concreteType:"DynamicLoaderDetails",kind:"LinkedField",name:"loader",plural:!1,selections:ee,storageKey:null},eU={alias:null,args:null,kind:"ScalarField",name:"hasPublishableConfig",storageKey:null},eW={alias:null,args:null,kind:"ScalarField",name:"isHighThroughput",storageKey:null},eH={alias:null,args:null,concreteType:"ObservableChannelMetadata",kind:"LinkedField",name:"otherObservableChannel",plural:!1,selections:el,storageKey:null},e$={alias:null,args:null,concreteType:"TriggerTestingPolicy",kind:"LinkedField",name:"testingPolicy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"supportsSyntheticPayload",storageKey:null}],storageKey:null},eZ={alias:null,args:null,kind:"ScalarField",name:"note",storageKey:null},eY={alias:null,args:null,concreteType:"StickyNotePosition",kind:"LinkedField",name:"position",plural:!1,selections:T,storageKey:null},eJ={kind:"InlineFragment",selections:[i],type:"Node",abstractKey:"__isNode"},eX=[_,w],e0={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"authConfig",plural:!1,selections:[l,{kind:"InlineFragment",selections:[_,w,R],type:"OAuth2AuthConfig",abstractKey:null},{kind:"InlineFragment",selections:[_,w,D],type:"CustomAuthConfig",abstractKey:null},{kind:"InlineFragment",selections:[D,_,w,R],type:"CustomOAuth2AuthConfig",abstractKey:null},{kind:"InlineFragment",selections:eX,type:"TokenAuthConfig",abstractKey:null},{kind:"InlineFragment",selections:eX,type:"PipedreamAuthConfig",abstractKey:null}],storageKey:null},e1={alias:null,args:null,concreteType:"Auth",kind:"LinkedField",name:"auth",plural:!1,selections:y,storageKey:null},e2=[L,m,Q,G,eS,eT,eK,k,D],e3=[L,m,Q,G,eS,eT,eK,k,D,ew];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"useSaveAgentMutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"updateAgent",plural:!1,selections:[l,a,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UpdateAgentOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agent",plural:!1,selections:[t,i,s,r,o,d,u,g,{alias:null,args:null,concreteType:"AgentDefinitionTag",kind:"LinkedField",name:"tags",plural:!0,selections:[t,m],storageKey:null},{alias:null,args:null,concreteType:"StateGraph",kind:"LinkedField",name:"stateGraph",plural:!1,selections:[t,i,p,f,h,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"edges",plural:!0,selections:[{kind:"InlineFragment",selections:[l,t,k,F,x,v],type:"ObserveEdge",abstractKey:null},{kind:"InlineFragment",selections:[l,t,k,F,x,v,b,m],type:"StandardEdge",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[{kind:"InlineFragment",selections:[l,t,k,i,S,K,I,C,o,A,{alias:null,args:null,concreteType:"StateGraphAction",kind:"LinkedField",name:"actions",plural:!0,selections:[{alias:null,args:null,concreteType:"ActionDetails",kind:"LinkedField",name:"action",plural:!1,selections:[j,N,L,M],storageKey:null},E,V],storageKey:null}],type:"AgentStateNode",abstractKey:null},{kind:"InlineFragment",selections:[l,t,k,i,S,K,I,{alias:null,args:null,concreteType:"StateGraphAction",kind:"LinkedField",name:"actionDefinition",plural:!1,selections:[E,V,B,{alias:null,args:null,concreteType:"ActionDetails",kind:"LinkedField",name:"action",plural:!1,selections:[i,L,N,O,z,G,S,{alias:null,args:null,concreteType:"InputTree",kind:"LinkedField",name:"inputTree",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"fields",plural:!0,selections:[W,$],storageKey:null},Z],storageKey:null},Y,J,M,X,en,ea,et,j,ei,es],storageKey:null}],storageKey:null},er,ed,C,eu,o,ec,eg,A],type:"ActionNode",abstractKey:null},{kind:"InlineFragment",selections:[l,t,k,i,S,K,I,em,ey],type:"EntryPointConversationNode",abstractKey:null},{kind:"InlineFragment",selections:[l,t,k,i,S,K,I,ed,ep,ef,{alias:null,args:null,concreteType:"Trigger",kind:"LinkedField",name:"trigger",plural:!1,selections:[t,{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:eo,storageKey:null},eh,ek,eF,ex],storageKey:null},{alias:null,args:null,concreteType:"TriggerDefinition",kind:"LinkedField",name:"triggerDefinition",plural:!1,selections:[{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[N,S],storageKey:null},s,M,ev,G,S,eb,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"fields",plural:!0,selections:[{kind:"InlineFragment",selections:[l,L,m,Q,G,eS,eT,eK,k,D,eI],type:"TriggerFieldText",abstractKey:null},{kind:"InlineFragment",selections:[l,L,m,Q,G,eS,eT,eK,k,D,eC,eA,ej,eN],type:"TriggerFieldNumber",abstractKey:null},{kind:"InlineFragment",selections:eL,type:"TriggerFieldLindyEmbedConfig",abstractKey:null},{kind:"InlineFragment",selections:[l,L,m,Q,G,eS,eT,eK,k,D,e_],type:"TriggerFieldDateTime",abstractKey:null},{kind:"InlineFragment",selections:eR,type:"TriggerFieldAutoObserve",abstractKey:null},{kind:"InlineFragment",selections:[l,L,m,Q,G,eS,eT,eK,k,D,eD],type:"TriggerFieldLindyMail",abstractKey:null},{kind:"InlineFragment",selections:[l,L,m,Q,G,eS,eT,eK,k,D,eP],type:"TriggerFieldLindyWebhook",abstractKey:null},{kind:"InlineFragment",selections:eL,type:"TriggerFieldLindyPhoneNumber",abstractKey:null},{kind:"InlineFragment",selections:eR,type:"TriggerFieldElevenLabsVoice",abstractKey:null},{kind:"InlineFragment",selections:[l,L,m,Q,G,eS,eT,eK,k,D,eM],type:"TriggerFieldRecurringSchedule",abstractKey:null},{kind:"InlineFragment",selections:[l,L,m,Q,G,eS,eT,eK,k,D,eE],type:"TriggerFieldCheckbox",abstractKey:null},{kind:"InlineFragment",selections:eL,type:"TriggerFieldLabel",abstractKey:null},{kind:"InlineFragment",selections:[l,L,m,Q,G,eS,eT,eK,k,D,eV],type:"TriggerFieldComparableText",abstractKey:null},{kind:"InlineFragment",selections:[l,L,m,Q,G,eS,eT,eK,k,D,eG,eB,eO],type:"TriggerFieldSelect",abstractKey:null},{kind:"InlineFragment",selections:[l,L,m,Q,G,eS,eT,eK,k,D,ez,eQ,eO],type:"TriggerFieldMultiSelect",abstractKey:null},{kind:"InlineFragment",selections:[l,L,m,Q,G,eS,eT,eK,k,D,eq],type:"TriggerFieldDynamicLoader",abstractKey:null}],storageKey:null},eU,eW,j,eH,e$],storageKey:null}],type:"EntryPointTriggerNode",abstractKey:null},{kind:"InlineFragment",selections:[l,t,k,i,S,K,I,o],type:"LogicNode",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StateGraphStickyNote",kind:"LinkedField",name:"stickyNotes",plural:!0,selections:[t,eZ,eY],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationUpdateAgentSuccess",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"useSaveAgentMutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"updateAgent",plural:!1,selections:[l,a,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UpdateAgentOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agent",plural:!1,selections:[t,i,s,r,o,d,u,g,{alias:null,args:null,concreteType:"AgentDefinitionTag",kind:"LinkedField",name:"tags",plural:!0,selections:[t,m,i],storageKey:null},{alias:null,args:null,concreteType:"StateGraph",kind:"LinkedField",name:"stateGraph",plural:!1,selections:[t,i,p,f,h,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"edges",plural:!0,selections:[l,{kind:"InlineFragment",selections:[t,k,F,x,v],type:"ObserveEdge",abstractKey:null},{kind:"InlineFragment",selections:[t,k,F,x,v,b,m],type:"StandardEdge",abstractKey:null},eJ],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[l,{kind:"InlineFragment",selections:[t,k,i,S,K,I,C,o,A,{alias:null,args:null,concreteType:"StateGraphAction",kind:"LinkedField",name:"actions",plural:!0,selections:[{alias:null,args:null,concreteType:"ActionDetails",kind:"LinkedField",name:"action",plural:!1,selections:[j,N,L,e0,i],storageKey:null},E,V],storageKey:null}],type:"AgentStateNode",abstractKey:null},{kind:"InlineFragment",selections:[t,k,i,S,K,I,{alias:null,args:null,concreteType:"StateGraphAction",kind:"LinkedField",name:"actionDefinition",plural:!1,selections:[E,V,B,{alias:null,args:null,concreteType:"ActionDetails",kind:"LinkedField",name:"action",plural:!1,selections:[i,L,N,O,z,G,S,{alias:null,args:null,concreteType:"InputTree",kind:"LinkedField",name:"inputTree",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"fields",plural:!0,selections:[l,W,$],storageKey:null},Z],storageKey:null},Y,J,e0,X,en,ea,et,j,ei,es],storageKey:null}],storageKey:null},er,e1,C,eu,o,ec,eg,A],type:"ActionNode",abstractKey:null},{kind:"InlineFragment",selections:[t,k,i,S,K,I,em,ey],type:"EntryPointConversationNode",abstractKey:null},{kind:"InlineFragment",selections:[t,k,i,S,K,I,e1,ep,ef,{alias:null,args:null,concreteType:"Trigger",kind:"LinkedField",name:"trigger",plural:!1,selections:[t,p,eh,ek,eF,ex,i],storageKey:null},{alias:null,args:null,concreteType:"TriggerDefinition",kind:"LinkedField",name:"triggerDefinition",plural:!1,selections:[{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[N,S,i],storageKey:null},s,e0,ev,G,S,eb,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"fields",plural:!0,selections:[l,{kind:"InlineFragment",selections:[L,m,Q,G,eS,eT,eK,k,D,eI],type:"TriggerFieldText",abstractKey:null},{kind:"InlineFragment",selections:[L,m,Q,G,eS,eT,eK,k,D,eC,eA,ej,eN],type:"TriggerFieldNumber",abstractKey:null},{kind:"InlineFragment",selections:e2,type:"TriggerFieldLindyEmbedConfig",abstractKey:null},{kind:"InlineFragment",selections:[L,m,Q,G,eS,eT,eK,k,D,e_],type:"TriggerFieldDateTime",abstractKey:null},{kind:"InlineFragment",selections:e3,type:"TriggerFieldAutoObserve",abstractKey:null},{kind:"InlineFragment",selections:[L,m,Q,G,eS,eT,eK,k,D,eD],type:"TriggerFieldLindyMail",abstractKey:null},{kind:"InlineFragment",selections:[L,m,Q,G,eS,eT,eK,k,D,eP],type:"TriggerFieldLindyWebhook",abstractKey:null},{kind:"InlineFragment",selections:e2,type:"TriggerFieldLindyPhoneNumber",abstractKey:null},{kind:"InlineFragment",selections:e3,type:"TriggerFieldElevenLabsVoice",abstractKey:null},{kind:"InlineFragment",selections:[L,m,Q,G,eS,eT,eK,k,D,eM],type:"TriggerFieldRecurringSchedule",abstractKey:null},{kind:"InlineFragment",selections:[L,m,Q,G,eS,eT,eK,k,D,eE],type:"TriggerFieldCheckbox",abstractKey:null},{kind:"InlineFragment",selections:e2,type:"TriggerFieldLabel",abstractKey:null},{kind:"InlineFragment",selections:[L,m,Q,G,eS,eT,eK,k,D,eV],type:"TriggerFieldComparableText",abstractKey:null},{kind:"InlineFragment",selections:[L,m,Q,G,eS,eT,eK,k,D,eG,eB,eO],type:"TriggerFieldSelect",abstractKey:null},{kind:"InlineFragment",selections:[L,m,Q,G,eS,eT,eK,k,D,ez,eQ,eO],type:"TriggerFieldMultiSelect",abstractKey:null},{kind:"InlineFragment",selections:[L,m,Q,G,eS,eT,eK,k,D,eq],type:"TriggerFieldDynamicLoader",abstractKey:null}],storageKey:null},eU,eW,j,eH,e$,i],storageKey:null}],type:"EntryPointTriggerNode",abstractKey:null},{kind:"InlineFragment",selections:[t,k,i,S,K,I,o],type:"LogicNode",abstractKey:null},eJ],storageKey:null},{alias:null,args:null,concreteType:"StateGraphStickyNote",kind:"LinkedField",name:"stickyNotes",plural:!0,selections:[t,eZ,eY,i],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationUpdateAgentSuccess",abstractKey:null}],storageKey:null}]},params:{cacheID:"ae9edfef5ccc4f9a9f19ffd3a969b3f6",id:null,metadata:{},name:"useSaveAgentMutation",operationKind:"mutation",text:"mutation useSaveAgentMutation(\n  $input: UpdateAgentInput!\n) {\n  updateAgent(input: $input) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationUpdateAgentSuccess {\n      data {\n        agent {\n          id\n          nodeId\n          name\n          instructions\n          model\n          shouldAskForConfirmation\n          icon {\n            name\n            color\n          }\n          memories {\n            id\n            isActive\n            value\n          }\n          tags {\n            id\n            label\n            nodeId\n          }\n          stateGraph {\n            id\n            nodeId\n            owner {\n              id\n              nodeId\n            }\n            version\n            autoLayoutEnabled\n            edges {\n              __typename\n              ... on ObserveEdge {\n                __typename\n                id\n                type\n                from\n                to\n                inflectionY\n              }\n              ... on StandardEdge {\n                __typename\n                id\n                type\n                from\n                to\n                inflectionY\n                condition\n                label\n              }\n              ... on Node {\n                __isNode: __typename\n                nodeId\n              }\n            }\n            nodes {\n              __typename\n              ... on AgentStateNode {\n                __typename\n                id\n                type\n                nodeId\n                displayName\n                position {\n                  x\n                  y\n                }\n                manuallyPositioned\n                guidelines\n                model\n                requireConfirmation\n                actions {\n                  action {\n                    isPremium\n                    tool\n                    key\n                    authConfig {\n                      __typename\n                      ... on OAuth2AuthConfig {\n                        __typename\n                        method\n                        provider\n                        scopes\n                      }\n                      ... on CustomAuthConfig {\n                        __typename\n                        method\n                        provider\n                        fields\n                      }\n                      ... on CustomOAuth2AuthConfig {\n                        __typename\n                        fields\n                        method\n                        provider\n                        scopes\n                      }\n                      ... on TokenAuthConfig {\n                        __typename\n                        method\n                        provider\n                      }\n                      ... on PipedreamAuthConfig {\n                        __typename\n                        method\n                        provider\n                      }\n                    }\n                    nodeId\n                  }\n                  createdByNodeId\n                  statefulToolKey\n                }\n              }\n              ... on ActionNode {\n                __typename\n                id\n                type\n                nodeId\n                displayName\n                position {\n                  x\n                  y\n                }\n                manuallyPositioned\n                actionDefinition {\n                  createdByNodeId\n                  statefulToolKey\n                  tool {\n                    nodeId\n                    description\n                    displayName\n                    isPopular\n                    tool\n                  }\n                  action {\n                    nodeId\n                    key\n                    tool\n                    toolDisplayName\n                    dependencies\n                    description\n                    displayName\n                    inputTree {\n                      fields {\n                        __typename\n                        ... on InputTreeDynamicField {\n                          type\n                          key\n                          output\n                          displayName\n                          description\n                          placeholder\n                          defaultValue {\n                            name\n                            value\n                          }\n                          icon\n                        }\n                        ... on InputTreeStaticField {\n                          type\n                          schema\n                          field\n                        }\n                      }\n                      parentFields\n                    }\n                    inputSchema\n                    outputSchema\n                    authConfig {\n                      __typename\n                      ... on OAuth2AuthConfig {\n                        __typename\n                        method\n                        provider\n                        scopes\n                      }\n                      ... on CustomAuthConfig {\n                        __typename\n                        method\n                        provider\n                        fields\n                      }\n                      ... on CustomOAuth2AuthConfig {\n                        __typename\n                        fields\n                        method\n                        provider\n                        scopes\n                      }\n                      ... on TokenAuthConfig {\n                        __typename\n                        method\n                        provider\n                      }\n                      ... on PipedreamAuthConfig {\n                        __typename\n                        method\n                        provider\n                      }\n                    }\n                    deprecated\n                    dynamicLoaders {\n                      loaders {\n                        defaultValue {\n                          name\n                          value\n                        }\n                        dependencies\n                        description\n                        displayName\n                        field\n                        icon\n                        key\n                        placeholder\n                      }\n                      refetchInputAfterLoad\n                    }\n                    observableChannel {\n                      agentMessageReceivedSchema\n                      immediateEdgeLabel\n                      observableEdgeLabel\n                      statefulToolKey\n                    }\n                    hasSideEffects\n                    isPremium\n                    premiumActionCost\n                    outputProperties {\n                      displayName\n                      type\n                      value\n                    }\n                  }\n                }\n                actionConfiguration {\n                  type\n                  allowAdditionalArrayEntries\n                  manualResult {\n                    isUndefined\n                    isNull\n                    value\n                  }\n                  path\n                  prompt\n                  unionType\n                }\n                auth {\n                  id\n                  nodeId\n                }\n                guidelines\n                knowledgeSources {\n                  entryCount\n                  entryCountDisabled\n                  isEnabled\n                  source\n                  syncStatus\n                  syncToBeCompletedBy\n                  totalFileSize\n                  totalNumCharacters\n                  totalNumEmbeddings\n                  totalNumErrors\n                  totalNumTokens\n                }\n                model\n                occurrence\n                statefulToolOccurrence\n                requireConfirmation\n              }\n              ... on EntryPointConversationNode {\n                __typename\n                id\n                type\n                nodeId\n                displayName\n                position {\n                  x\n                  y\n                }\n                manuallyPositioned\n                greetingMessage\n                conversationStarters {\n                  value\n                }\n              }\n              ... on EntryPointTriggerNode {\n                __typename\n                id\n                type\n                nodeId\n                displayName\n                position {\n                  x\n                  y\n                }\n                manuallyPositioned\n                auth {\n                  id\n                  nodeId\n                }\n                triggerSetup\n                triggerEnabled\n                trigger {\n                  id\n                  owner {\n                    id\n                    nodeId\n                  }\n                  enabled\n                  isConfigured\n                  isPendingVerification\n                  setup {\n                    actionArgs\n                    actionName\n                    toolName\n                  }\n                  nodeId\n                }\n                triggerDefinition {\n                  tool {\n                    tool\n                    displayName\n                    nodeId\n                  }\n                  name\n                  authConfig {\n                    __typename\n                    ... on OAuth2AuthConfig {\n                      __typename\n                      method\n                      provider\n                      scopes\n                    }\n                    ... on CustomAuthConfig {\n                      __typename\n                      method\n                      provider\n                      fields\n                    }\n                    ... on CustomOAuth2AuthConfig {\n                      __typename\n                      fields\n                      method\n                      provider\n                      scopes\n                    }\n                    ... on TokenAuthConfig {\n                      __typename\n                      method\n                      provider\n                    }\n                    ... on PipedreamAuthConfig {\n                      __typename\n                      method\n                      provider\n                    }\n                  }\n                  channel {\n                    statefulToolKey\n                  }\n                  description\n                  displayName\n                  eventSchema\n                  fields {\n                    __typename\n                    ... on TriggerFieldText {\n                      __typename\n                      key\n                      label\n                      placeholder\n                      description\n                      tooltip\n                      isRequired\n                      canBeSharedWithTemplate\n                      type\n                      fields\n                      defaultText: defaultValue\n                    }\n                    ... on TriggerFieldNumber {\n                      __typename\n                      key\n                      label\n                      placeholder\n                      description\n                      tooltip\n                      isRequired\n                      canBeSharedWithTemplate\n                      type\n                      fields\n                      defaultNumber: defaultValue\n                      min\n                      max\n                      step\n                    }\n                    ... on TriggerFieldLindyEmbedConfig {\n                      __typename\n                      key\n                      label\n                      placeholder\n                      description\n                      tooltip\n                      isRequired\n                      canBeSharedWithTemplate\n                      type\n                      fields\n                    }\n                    ... on TriggerFieldDateTime {\n                      __typename\n                      key\n                      label\n                      placeholder\n                      description\n                      tooltip\n                      isRequired\n                      canBeSharedWithTemplate\n                      type\n                      fields\n                      defaultDate: defaultValue\n                    }\n                    ... on TriggerFieldAutoObserve {\n                      __typename\n                      key\n                      label\n                      placeholder\n                      description\n                      tooltip\n                      isRequired\n                      canBeSharedWithTemplate\n                      type\n                      fields\n                      defaultValue\n                    }\n                    ... on TriggerFieldLindyMail {\n                      __typename\n                      key\n                      label\n                      placeholder\n                      description\n                      tooltip\n                      isRequired\n                      canBeSharedWithTemplate\n                      type\n                      fields\n                      defaultLindyMail: defaultValue\n                    }\n                    ... on TriggerFieldLindyWebhook {\n                      __typename\n                      key\n                      label\n                      placeholder\n                      description\n                      tooltip\n                      isRequired\n                      canBeSharedWithTemplate\n                      type\n                      fields\n                      defaultWebhook: defaultValue\n                    }\n                    ... on TriggerFieldLindyPhoneNumber {\n                      __typename\n                      key\n                      label\n                      placeholder\n                      description\n                      tooltip\n                      isRequired\n                      canBeSharedWithTemplate\n                      type\n                      fields\n                    }\n                    ... on TriggerFieldElevenLabsVoice {\n                      __typename\n                      key\n                      label\n                      placeholder\n                      description\n                      tooltip\n                      isRequired\n                      canBeSharedWithTemplate\n                      type\n                      fields\n                      defaultValue\n                    }\n                    ... on TriggerFieldRecurringSchedule {\n                      __typename\n                      key\n                      label\n                      placeholder\n                      description\n                      tooltip\n                      isRequired\n                      canBeSharedWithTemplate\n                      type\n                      fields\n                      defaultRecurringSchedule: defaultValue\n                    }\n                    ... on TriggerFieldCheckbox {\n                      __typename\n                      key\n                      label\n                      placeholder\n                      description\n                      tooltip\n                      isRequired\n                      canBeSharedWithTemplate\n                      type\n                      fields\n                      defaultChecked: defaultValue\n                    }\n                    ... on TriggerFieldLabel {\n                      __typename\n                      key\n                      label\n                      placeholder\n                      description\n                      tooltip\n                      isRequired\n                      canBeSharedWithTemplate\n                      type\n                      fields\n                    }\n                    ... on TriggerFieldComparableText {\n                      __typename\n                      key\n                      label\n                      placeholder\n                      description\n                      tooltip\n                      isRequired\n                      canBeSharedWithTemplate\n                      type\n                      fields\n                      aliases\n                    }\n                    ... on TriggerFieldSelect {\n                      __typename\n                      key\n                      label\n                      placeholder\n                      description\n                      tooltip\n                      isRequired\n                      canBeSharedWithTemplate\n                      type\n                      fields\n                      defaultItem: defaultValue\n                      selectFirstByDefault\n                      isContextDependent\n                    }\n                    ... on TriggerFieldMultiSelect {\n                      __typename\n                      key\n                      label\n                      placeholder\n                      description\n                      tooltip\n                      isRequired\n                      canBeSharedWithTemplate\n                      type\n                      fields\n                      defaultItems: defaultValue\n                      hasAllowAllOption\n                      isContextDependent\n                    }\n                    ... on TriggerFieldDynamicLoader {\n                      __typename\n                      key\n                      label\n                      placeholder\n                      description\n                      tooltip\n                      isRequired\n                      canBeSharedWithTemplate\n                      type\n                      fields\n                      loader {\n                        defaultValue {\n                          name\n                          value\n                        }\n                        dependencies\n                        description\n                        displayName\n                        field\n                        icon\n                        key\n                        placeholder\n                      }\n                    }\n                  }\n                  hasPublishableConfig\n                  isHighThroughput\n                  isPremium\n                  otherObservableChannel {\n                    agentMessageReceivedSchema\n                    immediateEdgeLabel\n                    observableEdgeLabel\n                    statefulToolKey\n                  }\n                  testingPolicy {\n                    supportsSyntheticPayload\n                  }\n                  nodeId\n                }\n              }\n              ... on LogicNode {\n                __typename\n                id\n                type\n                nodeId\n                displayName\n                position {\n                  x\n                  y\n                }\n                manuallyPositioned\n                model\n              }\n              ... on Node {\n                __isNode: __typename\n                nodeId\n              }\n            }\n            stickyNotes {\n              id\n              note\n              position {\n                x\n                y\n              }\n              nodeId\n            }\n          }\n        }\n      }\n    }\n  }\n}\n"}}}();t.hash="3d2449b862e491270acb65f0c33c466c";var i=l(30589),s=l(41459),r=l(72679),o=l(85680),d=l(52105),u=l(38400);let c=(0,d.In)("PATCH","/api/society/agentDefinition/:id/stateGraph/:stateGraphId",u.w.patch.data);var g=l(90819),m=l(40453),y=l(13249),p=l(77566),f=l(36441),h=l(94344),k=l(21536),F=l(3063),x=l(98448),v=l(31284),b=l(95674),S=l(81486),T=l(67434),K=l(89073),I=l(81778),C=l(79124);l(97244);let A=()=>{let e=(0,I.useRouter)(),n=(0,h.useCallback)(async n=>{let l="/settings"===n?"/editor":"/settings",a=new URL(window.location.href);return a.pathname.includes(l)&&(a.pathname=a.pathname.replace(l,n),await e.push(a.toString(),void 0,{shallow:!0})),a.pathname},[e]);return{handleAgentIssueRedirect:n,handleIssueRedirectAndStoreUpdate:(0,h.useCallback)(async(l,a)=>{var t,i;if(!l||0===l.length)return;let s=new URL(window.location.href);s.pathname=await n("/editor");let r=s.searchParams.get("e"),o=null===(t=l[0])||void 0===t?void 0:t.id;o&&r!==o&&(null===(i=a.lindies.currentLindy)||void 0===i||i.stateGraph.setSelectedEntityById(o),s.searchParams.set("e",o)),await e.replace(s.toString(),void 0,{shallow:!0})},[n,e])}};function j(e,n,l){var u,I,j;let N=(0,C.useFragment)(a,e),{handleAgentIssueRedirect:L,handleIssueRedirectAndStoreUpdate:_}=A(),w=(0,K.jE)(),R=function(e){let n=(0,g.T)(),l=(0,p.n)({mutationKey:["stateGraph",n,null==e?void 0:e.id],mutationFn:async()=>{if(n&&e)return await (0,d.oA)(c({params:{id:n,stateGraphId:e.id},body:e.serializedStateGraph}))},onSuccess:n=>{(null==n?void 0:n.issues)&&(null==e||e.setValidationIssues(n.issues))}});return{saveStateGraph:(0,h.useCallback)(async()=>{if(!e)return{issues:[]};let n=e.serializedStateGraph;if(await (0,f.gP)(e.runValidation(n)),e.issues.length>0)return{issues:e.issues};try{let e=await l.mutateAsync();if(null==e?void 0:e.issues)return{issues:e.issues};if(!(null==e?void 0:e.stateGraph))throw Error("Expected state graph to be returned");return{issues:[]}}catch(n){return{issues:[{id:e.id,entityType:y.H9.Graph,message:(0,m.SP)(n,"Unknown error"),level:y.gU.Error,type:y.i0.Unknown}]}}},[l,e]),isLoading:l.isLoading}}(n),[D,P]=(0,r.d)(t),M=(0,o.aV)(),E=(0,k.V)(null===(u=v.a.lindies.currentLindy)||void 0===u?void 0:u.stateGraph,l);return[(0,h.useCallback)(async()=>{let e=v.a.lindies.currentLindy;if(e&&e.isDirty)try{let u=e.stateGraph.isDirty;if(u){let{issues:e}=await R.saveStateGraph();if(e.length>0){await _(e,v.a),E(e);return}}if(u||e.agentSettings.isDirty){var n,l,a,t,r,o,d;let i=e.agentSettings.serializedAgentSettings;if(!(null===(n=i.name)||void 0===n?void 0:n.trim())){M({id:"save-agent-settings-error",level:"danger",label:"Lindy name cannot be empty",message:"Please provide a name for your Lindy before saving it",duration:5e3});return}let s=e.agentSettings.isNameDirty?i.name:N.name,u=e.agentSettings.isIconNameDirty?(0,x.eD)(i.iconName,{...b.H0,...S.D}):null===(l=N.icon)||void 0===l?void 0:l.name,c=e.agentSettings.isIconColorDirty?(0,x.eD)(i.iconColor,{...b.Pl,...b.fJ}):null===(a=N.icon)||void 0===a?void 0:a.color,g=await D({variables:{input:{id:N.owner.id,name:s,icon:{name:null!=u?u:"BotIcon",color:null!=c?c:"Blue"},agentDefinitionId:e.id,instructions:i.instructions,model:i.model,askForConfirmation:i.shouldAskForConfirmation,memories:i.memories,tags:i.tags}}});if(g.updateAgent.message){await L("/settings");let e=null!==(t=g.updateAgent.message)&&void 0!==t?t:"An unexpected error occurred while trying to save your Lindy";M({id:"save-agent-settings-error",level:"danger",label:"Error saving Lindy",message:e,duration:5e3});return}if("MutationUpdateAgentSuccess"===g.updateAgent.__typename){let n=null===(r=g.updateAgent.data)||void 0===r?void 0:r.agent;if(!n)return;let l=(0,x._0)(null===(o=n.icon)||void 0===o?void 0:o.name,null===(d=n.icon)||void 0===d?void 0:d.color);e.agentSettings.setLastSavedState({name:n.name,iconName:l.name,iconColor:l.color,instructions:n.instructions,model:n.model,shouldAskForConfirmation:n.shouldAskForConfirmation,memories:n.memories.map(e=>({id:e.id,isActive:e.isActive,value:e.value})),tags:n.tags.map(e=>({id:e.id,label:e.label}))}),e.agentSettings.discardChanges(),n.stateGraph&&e.stateGraph.replaceStateGraph({stateGraph:(0,F.j)(n.id,n.stateGraph)},{keepUndoRedoStack:!0})}}let c=(0,i.ZF)({params:{id:e.id}}),g=(0,s.OV)({params:{id:e.id}});w.invalidateQueries(c),w.invalidateQueries(g),M({id:"state-graph-saved",level:"success",label:"Saved",message:"Your changes were saved successfully",duration:5e3})}catch(e){T.Cp(e),M({id:"save-agent-settings-error",level:"danger",label:"Error saving Lindy",message:"An unexpected error occurred while trying to save your Lindy",duration:5e3})}},[w,M,R,_,E,N.name,null===(I=N.icon)||void 0===I?void 0:I.name,null===(j=N.icon)||void 0===j?void 0:j.color,N.owner.id,D,L]),P||R.isLoading]}},75092:(e,n,l)=>{"use strict";l.d(n,{g:()=>g});var a=l(50612);let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useSaveAgentWithPremiumModal_Identity",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"SubscriptionInfo",kind:"LinkedField",name:"billingInfo",plural:!1,selections:[{alias:null,args:null,concreteType:"SubscriptionFeatures",kind:"LinkedField",name:"features",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"arePremiumFeaturesEnabled",storageKey:null}],storageKey:null}],storageKey:null}],type:"Identity",abstractKey:null};t.hash="871ff442fa23f6a392e74557d087b4b8";let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useSaveAgentWithPremiumModal_AgentDefinition",selections:[{args:null,kind:"FragmentSpread",name:"useSaveAgentAgentDefinitionFragment"}],type:"AgentDefinition",abstractKey:null};i.hash="9274c9e98d84cd9da56f37d00af18d5d";var s=l(5021),r=l(15727),o=l(42911),d=l(31284),u=l(94344),c=l(79124);function g(e,n,l,g){var m,y,p,f;let h=(0,c.useFragment)(t,e),k=(0,c.useFragment)(i,n),[F,x]=(0,o.G)(k,l,g),v=(null===(y=h.billingInfo)||void 0===y?void 0:null===(m=y.features)||void 0===m?void 0:m.arePremiumFeaturesEnabled)===!1&&(null===(f=d.a.lindies.currentLindy)||void 0===f?void 0:null===(p=f.stateGraph)||void 0===p?void 0:p.nodes.some(e=>e.isPremium)),b=(0,r.j)(!1);return{handleSave:(0,u.useCallback)(async()=>{if(v){b.onOpen();return}await F()},[v,F,b]),isSaveInFlight:x,premiumModalElement:(0,a.jsx)(s.o,{open:b.isOpen,onClose:b.onClose,title:"Upgrade to Pro to publish this Lindy",description:(0,a.jsxs)(a.Fragment,{children:["To unlock ",(0,a.jsx)("span",{className:"font-semibold",children:"Premium Actions"})," in this Lindy you will need to upgrade to a ",(0,a.jsx)("span",{className:"font-semibold",children:"Pro Plan"}),"."]})})}}l(97244)},41910:(e,n,l)=>{"use strict";l.d(n,{F:()=>i});var a=l(31284),t=l(94344);function i(e){(0,t.useEffect)(()=>{if(a.a.lindies.currentLindy){a.a.lindies.currentLindy.setLastVisitedView(e);return}a.a.ui.setLastVisitedView(e)},[e])}},52954:(e,n,l)=>{"use strict";l.d(n,{h:()=>r});var a=l(72735),t=l(36639),i=l(81778),s=l(33762);function r(e,n){let l=(0,i.useRouter)();(0,s.Es)(()=>{if(!e||!n)return;let i=(0,t.nr)(e,n),s=l.query[a.nw];if(!s||s===i)return;let{[a.nw]:r,...o}=l.query,d={...o,[a.nw]:i};l.replace({pathname:l.pathname,query:d},void 0,{shallow:!0})},[l,e,n])}},24121:(e,n,l)=>{"use strict";function a(e){return e.toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\da-z-]/g,"").replace(/-+/g,"-").replace(/^-+|-+$/g,"").slice(0,100)}l.d(n,{D:()=>a})},50064:(e,n,l)=>{"use strict";l.d(n,{p:()=>i});var a=l(81778),t=l(94344);function i(){let e=(0,a.useRouter)();return(0,t.useMemo)(()=>{let n=e.query.path;return n?Array.isArray(n)?n:[n]:[]},[e.query.path])}},1102:(e,n,l)=>{"use strict";l.d(n,{h_:()=>eR,dH:()=>eD});var a=l(50612);let t=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"enabled",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"lastRunAt",storageKey:null},s={alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"integrations",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"tool",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null},r={args:null,kind:"FragmentSpread",name:"AgentRowAgentDefinitionFragment"};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MyLindiesContentSection_Identity",selections:[e,n,{alias:null,args:null,concreteType:"AgentFolders",kind:"LinkedField",name:"agentFolders",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentRootFolder",kind:"LinkedField",name:"root",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinitions",plural:!0,selections:[l,e,n,a,t,i,s,r],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AgentFolder",kind:"LinkedField",name:"folders",plural:!0,selections:[l,e,a,{alias:null,args:null,kind:"ScalarField",name:"clientId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"parentClientId",storageKey:null},{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinitions",plural:!0,selections:[l,e,n,i,a,t,s,r],storageKey:null}],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"AgentRowIdentityFragment"},{args:null,kind:"FragmentSpread",name:"CreateLindySection_Identity"},{args:null,kind:"FragmentSpread",name:"DeleteAgentFolder_Identity"}],type:"Identity",abstractKey:null}}();t.hash="b1b7df8811dd24890b756769873a162e";let i=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"enabled",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"lastRunAt",storageKey:null},s={alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"integrations",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"tool",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},n],storageKey:null},r={alias:null,args:null,concreteType:"AgentIcon",kind:"LinkedField",name:"icon",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null}],storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"isFavorite",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"isMuted",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"notificationsCount",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MyLindiesContentSectionPrefetchQuery",selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"me",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"MyLindiesContentSection_Identity"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MyLindiesContentSectionPrefetchQuery",selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"me",plural:!1,selections:[e,n,{alias:null,args:null,concreteType:"AgentFolders",kind:"LinkedField",name:"agentFolders",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentRootFolder",kind:"LinkedField",name:"root",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinitions",plural:!0,selections:[l,e,n,a,t,i,s,r,o,d,u,c],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AgentFolder",kind:"LinkedField",name:"folders",plural:!0,selections:[l,e,a,{alias:null,args:null,kind:"ScalarField",name:"clientId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"parentClientId",storageKey:null},{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinitions",plural:!0,selections:[l,e,n,i,a,t,s,r,o,d,u,c],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinitions",plural:!0,selections:[e,n,a,r,c],storageKey:null}],storageKey:null}]},params:{cacheID:"f79093aba0f0419e97864319d9233803",id:null,metadata:{},name:"MyLindiesContentSectionPrefetchQuery",operationKind:"query",text:"query MyLindiesContentSectionPrefetchQuery {\n  me {\n    ...MyLindiesContentSection_Identity\n    nodeId\n  }\n}\n\nfragment AgentContextMenuAgentDefinitionFragment on AgentDefinition {\n  id\n  name\n  isMuted\n  isFavorite\n  notificationsCount\n}\n\nfragment AgentContextMenuIdentityFragment on Identity {\n  id\n  ...DeleteAgentDefinitionMutationFragment\n  ...CopyAgentDefinitionMutationIdentityFragment\n}\n\nfragment AgentRowAgentDefinitionFragment on AgentDefinition {\n  id\n  name\n  enabled\n  icon {\n    name\n    color\n  }\n  lastRunAt\n  isFavorite\n  integrations {\n    tool\n    displayName\n    nodeId\n  }\n  ...AgentContextMenuAgentDefinitionFragment\n}\n\nfragment AgentRowIdentityFragment on Identity {\n  id\n  ...AgentContextMenuIdentityFragment\n}\n\nfragment CopyAgentDefinitionMutationIdentityFragment on Identity {\n  id\n  nodeId\n  agentDefinitions {\n    id\n    nodeId\n    name\n    icon {\n      name\n      color\n    }\n    createdAt\n  }\n  agentFolders {\n    root {\n      agentDefinitions {\n        id\n        nodeId\n        name\n        icon {\n          name\n          color\n        }\n        createdAt\n      }\n    }\n    folders {\n      id\n      agentDefinitions {\n        id\n        nodeId\n        name\n        icon {\n          name\n          color\n        }\n        createdAt\n      }\n    }\n  }\n}\n\nfragment CreateAgentMutationIdentityFragment on Identity {\n  id\n  nodeId\n  agentDefinitions {\n    id\n    nodeId\n    name\n    icon {\n      name\n      color\n    }\n  }\n  agentFolders {\n    root {\n      agentDefinitions {\n        id\n        nodeId\n        name\n        icon {\n          name\n          color\n        }\n      }\n    }\n    folders {\n      id\n      clientId\n      agentDefinitions {\n        id\n        nodeId\n        name\n        icon {\n          name\n          color\n        }\n      }\n    }\n  }\n}\n\nfragment CreateLindySection_Identity on Identity {\n  id\n  ...CreateAgentMutationIdentityFragment\n}\n\nfragment DeleteAgentDefinitionMutationFragment on Identity {\n  id\n  nodeId\n  agentDefinitions {\n    id\n    nodeId\n  }\n  agentFolders {\n    root {\n      agentDefinitions {\n        id\n        nodeId\n      }\n    }\n    folders {\n      id\n      agentDefinitions {\n        id\n        nodeId\n      }\n    }\n  }\n}\n\nfragment DeleteAgentFolder_Identity on Identity {\n  id\n  nodeId\n  agentFolders {\n    root {\n      agentDefinitions {\n        id\n        nodeId\n      }\n    }\n    folders {\n      id\n      name\n      clientId\n      parentClientId\n      agentDefinitions {\n        id\n        nodeId\n      }\n    }\n  }\n}\n\nfragment MyLindiesContentSection_Identity on Identity {\n  id\n  nodeId\n  agentFolders {\n    root {\n      agentDefinitions {\n        __typename\n        id\n        nodeId\n        name\n        enabled\n        lastRunAt\n        integrations {\n          tool\n          displayName\n          nodeId\n        }\n        ...AgentRowAgentDefinitionFragment\n      }\n    }\n    folders {\n      __typename\n      id\n      name\n      clientId\n      parentClientId\n      agentDefinitions {\n        __typename\n        id\n        nodeId\n        lastRunAt\n        name\n        enabled\n        integrations {\n          tool\n          displayName\n          nodeId\n        }\n        ...AgentRowAgentDefinitionFragment\n      }\n    }\n  }\n  ...AgentRowIdentityFragment\n  ...CreateLindySection_Identity\n  ...DeleteAgentFolder_Identity\n}\n"}}}();i.hash="ceba6d4e9bf0cefb36adbaf5eea34d5e";var s=l(10735),r=l(73850),o=l(15727),d=l(85680),u=l(66213),c=l(93652),g=l(44446),m=l(25919);let y="breadcrumb",p="__root__";function f(e){let n=(0,s.zM)({id:e.clientId,data:{type:y}});return(0,a.jsx)("div",{ref:n.setNodeRef,className:(0,m.QP)(n.isOver&&"bg-slate-7","p-1 rounded transition"),children:e.children})}var h=l(24121),k=l(50064),F=l(91871),x=l(90518),v=l(69462),b=l(30035),S=l.n(b);function T(e){let n=(0,k.p)();return(0,a.jsx)(f,{clientId:e.clientId,children:(0,a.jsx)(S(),{shallow:!0,href:"/my-lindies/".concat(e.path),className:(0,m.QP)("text-slate-9 transition hover:text-slate-11 hover:underline rounded-sm",F.Y),children:(0,a.jsxs)("span",{className:"flex items-center gap-x-1",children:[e.index+1===n.length?(0,a.jsx)(v.O,{className:"fill-blue-7"}):(0,a.jsx)(x.s,{className:"fill-blue-7"}),e.folderName]})})})}function K(e){return(0,a.jsx)("nav",{children:(0,a.jsxs)("ol",{className:"flex items-center gap-x-1 text-sm font-medium",children:[(0,a.jsx)("li",{children:(0,a.jsx)(T,{clientId:p,index:-1,path:"",folderName:"My Lindies"})}),e.breadcrumbs.map((n,l)=>{let t=e.breadcrumbs.slice(0,l+1).map(e=>(0,h.D)(e.name)).join("/");return(0,a.jsxs)("li",{className:"flex items-center gap-x-1",children:[(0,a.jsx)("span",{className:"text-slate-8",children:"/"}),(0,a.jsx)(T,{index:l,clientId:n.clientId,path:t,folderName:n.name})]},n.id)})]})})}var I=l(67373);function C(e){return(0,a.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{d:"M2.5 8.333V5c0-.92.746-1.667 1.667-1.667H7.44c.557 0 1.078.279 1.387.742l.924 1.387a.833.833 0 0 0 .694.371h5.387c.92 0 1.667.746 1.667 1.667v6.666c0 .92-.746 1.667-1.667 1.667H10m-5.833-4.167v2.5m0 0v2.5m0-2.5h-2.5m2.5 0h2.5",stroke:"currentColor",strokeWidth:"1.667",strokeLinecap:"round",strokeLinejoin:"round"})})}var A=l(20024),j=l(31284),N=l(8678);let L=(0,N.PA)(function(e){return j.a.ui.myLindiesPageSearchQuery?null:(0,a.jsx)("div",{className:"flex w-full items-center justify-center px-12",children:(0,a.jsxs)("div",{className:"flex h-full w-full max-w-6xl items-center justify-between",children:[(0,a.jsx)(K,{breadcrumbs:e.breadcrumbs}),(0,a.jsxs)("div",{className:"flex items-center gap-x-3",children:[(0,a.jsxs)(I.$,{onClick:e.onClickNewFolder,level:"outline",size:"xs",children:[(0,a.jsx)(C,{className:"mr-1 h-4 w-4 text-slate-12"})," New Folder"]}),(0,a.jsxs)(I.$,{onClick:e.onClickCreateLindy,level:"primary",size:"xs",children:[(0,a.jsx)(A.c,{className:"mr-1 h-4 w-4 text-white dark:text-slate-12"})," New Lindy"]})]})]})})});var _=l(85926),w=l(45801),R=l(91777),D=l(5051),P=l(49321),M=l.n(P),E=l(81778),V=l(94344),G=l(79124);let B="agent",O=(0,V.memo)((0,V.forwardRef)(function(e,n){let l=(0,s.PM)({disabled:e.disabled,id:e.id,data:{type:B}});return(0,a.jsx)("div",{ref:n,className:"group",children:(0,a.jsx)("div",{className:(0,m.QP)("will-change-transform hover:bg-slate-3 transition-colors","-mx-2 flex w-full rounded p-2",l.isDragging&&"bg-slate-3 z-20 opacity-20",e.active&&"bg-slate-3"),ref:l.setNodeRef,...l.listeners,...l.attributes,role:"row",children:e.children})})})),z=function(){var e={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AgentRowAgentDefinitionFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},e,{alias:null,args:null,kind:"ScalarField",name:"enabled",storageKey:null},{alias:null,args:null,concreteType:"AgentIcon",kind:"LinkedField",name:"icon",plural:!1,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"lastRunAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isFavorite",storageKey:null},{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"integrations",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"tool",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"AgentContextMenuAgentDefinitionFragment"}],type:"AgentDefinition",abstractKey:null}}();z.hash="a143faf85db2a040a932c565085ef38c";let Q={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AgentRowIdentityFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"AgentContextMenuIdentityFragment"}],type:"Identity",abstractKey:null};Q.hash="871f881ef08badfcb019da642f4ba536";var q=l(70732),U=l(56318),W=l(21180),H=l(24263),$=l(22498),Z=l(86565),Y=l(77283),J=l(66679),X=l(98448),ee=l(36639),en=l(32878),el=l(30970),ea=l(95845);l(97244);var et=l(46251);function ei(e){var n;if(!(null===(n=e.integrations)||void 0===n?void 0:n.length))return null;let l=e.integrations.length>4,t=l?3:e.integrations.length;return(0,a.jsxs)("div",{className:"flex gap-2",children:[e.integrations.slice(0,t).map(e=>(0,a.jsx)("div",{className:"h-5 w-5",children:(0,a.jsxs)(J.m_,{placement:"top",children:[(0,a.jsx)(J.ZI,{openDelay:.2,children:e.displayName}),(0,a.jsx)(J.k$,{children:(0,a.jsx)(et.si,{tool:e.tool,className:"h-5 w-5"})})]})},e.tool)),l&&(0,a.jsxs)(J.m_,{placement:"top",children:[(0,a.jsx)(J.ZI,{openDelay:.2,children:e.integrations.slice(t).map(e=>e.displayName).join(", ")}),(0,a.jsx)(J.k$,{children:(0,a.jsx)(et.LD,{className:"flex h-5 w-5 items-center justify-center bg-slate-1",children:(0,a.jsxs)("div",{className:"text-xs font-medium text-slate-11",children:["+",e.integrations.length-t]})})})]})]})}var es=l(79305),er=l(33762);function eo(e){let n=(0,V.useRef)(null),[l,t]=(0,V.useState)(e.name);(0,V.useEffect)(()=>{e.isRenaming&&requestAnimationFrame(()=>{var e,l;null===(e=n.current)||void 0===e||e.focus(),null===(l=n.current)||void 0===l||l.select()})},[e.isRenaming]);let i=(0,V.useCallback)(()=>{e.onNameChange(l)},[e,l]);(0,er.Wr)(n,i);let s=(0,V.useCallback)(n=>{"Escape"===n.key&&(e.onCancelRename(),l!==e.name&&t(e.name))},[e,l]),r=(0,V.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),i()},[i]);return e.isRenaming?(0,a.jsx)("form",{onSubmit:r,children:(0,a.jsx)(es.V,{ref:n,value:l,onChange:t,onBlur:i,onKeyUp:s,minWidth:12,className:(0,m.QP)("focus-visible:ring-2 ring-inset focus:ring-primary-8 focus:outline-none transition","h-6 font-medium text-slate-12 ring-inset bg-transparent rounded text-sm ring-offset-0 px-0.5 -ml-0.5")})}):(0,a.jsx)("div",{className:"flex size-full items-center overflow-hidden",children:(0,a.jsx)("span",{className:"truncate",children:e.name})})}function ed(e){return(0,a.jsx)("div",{role:"cell",className:(0,m.QP)("flex w-full items-center justify-start text-sm text-slate-12 font-medium",e.className),children:e.children})}let eu=(0,N.PA)(function(e){var n,l,t,i,r;let o=(0,G.useFragment)(z,e.agentDefinitionFragmentRef),d=(0,G.useFragment)(Q,e.identityFragmentRef),[u]=(0,H.HW)(),[c]=(0,Z.HC)(),[g]=(0,$._E)(),y=(0,V.useRef)(null),[p,f]=(0,V.useState)(!1),[h,k]=(0,V.useState)(!1),F=(0,V.useCallback)(()=>{f(!0),k(!1)},[]),x=(0,V.useCallback)(()=>{k(!0)},[]),v=(0,V.useCallback)(()=>{k(!1)},[]),b=(0,V.useCallback)(e=>{f(!1),c({variables:{name:e,ownerId:d.id,agentDefinitionId:o.id}})},[o,c,d]),T=(0,V.useCallback)(e=>{g({variables:{isFavorite:e,ownerId:d.id,agentDefinitionId:o.id}})},[g,o,d]),K=(0,V.useCallback)(()=>{f(!1)},[]),I=(0,V.useCallback)(e=>{u({variables:{ownerId:d.id,agentDefinitionId:o.id,enabled:e}})},[o,u,d]),C=(0,V.useMemo)(()=>{if(!o.lastRunAt)return null;let e=(0,el.A)(new Date(o.lastRunAt),{addSuffix:!0});return e.charAt(0).toUpperCase()+e.slice(1)},[o]),A=(0,V.useMemo)(()=>o.lastRunAt?(0,ea.A)(new Date(o.lastRunAt),"MMM dd, yyyy MM HH:mm aa"):null,[o]),N=null!==(r=null!==(i=null===(n=j.a.lindies.lindyById.get(o.id))||void 0===n?void 0:n.lastVisitedView)&&void 0!==i?i:j.a.ui.lastVisitedView)&&void 0!==r?r:en.E,L=(0,ee.nr)(o.id,o.name),_="/".concat(L,"/").concat(N),w=(0,s.fF)(),R=(0,V.useCallback)(e=>{(w.active||p)&&e.preventDefault()},[w.active,p]);return(0,a.jsxs)(S(),{shallow:!0,href:_,onClick:R,children:[(0,a.jsxs)(O,{ref:y,id:o.id,active:h||p,disabled:p,children:[(0,a.jsxs)(ed,{className:"grid grid-cols-[auto,auto,auto] gap-x-2 pr-2",children:[(0,a.jsx)(Y.l,{icon:(0,X.HI)(null===(l=o.icon)||void 0===l?void 0:l.name),color:(0,X.Rz)(null===(t=o.icon)||void 0===t?void 0:t.color)}),(0,a.jsx)(eo,{name:o.name,isRenaming:p,onNameChange:b,onCancelRename:K},o.name),(0,a.jsx)(W.U,{value:o.isFavorite,onChange:T,className:(0,m.QP)("transition",!o.isFavorite&&"opacity-0 group-hover:opacity-100")})]}),(0,a.jsx)(ed,{children:(0,a.jsxs)(J.m_,{children:[(0,a.jsx)(J.k$,{children:C}),(0,a.jsx)(J.ZI,{openDelay:.2,children:A})]})}),(0,a.jsx)(ed,{children:(0,a.jsx)(ei,{integrations:o.integrations})}),(0,a.jsx)(ed,{className:"flex-1",children:(0,a.jsx)("div",{className:"flex w-14 items-center justify-end",children:(0,a.jsx)(q.d,{checked:o.enabled,onChange:I})})})]}),(0,a.jsx)(U.S,{targetRef:y,isOpen:h,onOpen:x,onClose:v,onClickRename:F,agentDefinitionFragmentRef:o,identityFragmentRef:d})]})});function ec(){return(0,a.jsx)("div",{className:"flex min-h-40 w-full items-center justify-center text-sm font-medium text-slate-9",children:"This folder is empty"})}let eg="folder",em=(0,V.memo)((0,V.forwardRef)(function(e,n){let l=(0,s.PM)({disabled:e.disabled,id:e.clientId,data:{type:eg}}),t=(0,s.zM)({id:e.clientId,data:{type:eg}});return(0,a.jsx)("div",{ref:n,children:(0,a.jsx)("div",{className:(0,m.QP)("will-change-transform transition-colors","-mx-2 rounded p-2 group",l.isDragging?"bg-slate-4 opacity-20":"hover:bg-slate-3 active:bg-slate-4",e.active&&"bg-slate-3",t.isOver&&"bg-slate-5"),ref:l.setNodeRef,...l.listeners,...l.attributes,role:"row",children:(0,a.jsx)("div",{ref:t.setNodeRef,className:"flex w-full items-center justify-evenly",children:e.children})})})}));var ey=l(77218),ep=l(915),ef=l(42069),eh=l(60213),ek=l(99100);function eF(e){var n;let l=(0,V.useRef)(null),t=(0,k.p)(),[i,r]=(0,V.useState)(!1),[o,d]=(0,V.useState)(!1),u=(0,V.useCallback)(()=>{r(!0),d(!1)},[]),c=(0,V.useCallback)(()=>{var n;null===(n=e.onDelete)||void 0===n||n.call(e,e.id),d(!1)},[e]),g=(0,V.useCallback)(()=>{d(!0)},[]),m=(0,V.useCallback)(()=>{d(!1)},[]),y=(0,V.useCallback)(n=>{var l;r(!1),null===(l=e.onNameChange)||void 0===l||l.call(e,e.id,n)},[e]),p=(0,V.useCallback)(()=>{r(!1)},[]),f=(0,s.fF)(),F=(0,V.useCallback)(e=>{(i||(null==f?void 0:f.active))&&e.preventDefault()},[i,null==f?void 0:f.active]),v=(0,V.useMemo)(()=>"/my-lindies/"+[...t,(0,h.D)(e.name)].join("/"),[t,e.name]);return(0,a.jsxs)(S(),{shallow:!0,href:v,onClick:F,children:[(0,a.jsx)(em,{ref:l,clientId:null!==(n=e.clientId)&&void 0!==n?n:e.id,active:o||i,disabled:i,children:(0,a.jsxs)(ed,{className:"flex size-full space-x-2",children:[(0,a.jsx)(x.s,{className:"size-6 shrink-0 fill-blue-7"}),(0,a.jsxs)("div",{className:"flex min-w-0 items-center",children:[(0,a.jsx)(eo,{name:e.name,isRenaming:i,onNameChange:y,onCancelRename:p},e.name),null!=e.itemsCount&&(0,a.jsxs)("span",{className:"ml-2 shrink-0 whitespace-nowrap pt-[2px] text-xs font-semibold text-slate-9 opacity-0 transition-opacity group-hover:opacity-100",children:[e.itemsCount," items"]})]})]})}),(0,a.jsx)(eh.j,{targetRef:l,isOpen:o,onOpen:g,onClose:m,children:(0,a.jsx)("div",{onClick:ek.d,children:(0,a.jsxs)(ep.l,{children:[(0,a.jsx)(ey.mT,{onClick:u}),(0,a.jsx)(ef.z,{onClick:c})]})})})]})}function ex(e){let n=(0,V.useCallback)(n=>{e.onAdd(n)},[e]),l=(0,V.useCallback)(()=>{e.onCancel()},[e]);return(0,a.jsxs)("div",{className:"flex w-full items-center justify-start gap-x-2",children:[(0,a.jsx)(x.s,{className:"h-6 w-6 fill-blue-7"}),(0,a.jsx)(eo,{name:"Untitled folder",isRenaming:!0,onNameChange:n,onCancelRename:l})]})}var ev=l(1261);let eb=(0,N.PA)(function(e){let n=j.a.ui.myLindiesSortRow,l=j.a.ui.myLindiesSortOrder,t=(0,V.useCallback)(()=>{if(n===e.sortRow){j.a.ui.setMyLindiesSortOrder("asc"===l?"desc":"asc");return}j.a.ui.setMyLindiesSortRow(e.sortRow),j.a.ui.setMyLindiesSortOrder("asc")},[e.sortRow,n,l]);return(0,a.jsx)("div",{role:"columnheader",className:(0,m.QP)("flex w-full items-center justify-start text-sm font-medium text-slate-11",e.className),children:(0,a.jsxs)("button",{onClick:t,className:"flex items-center gap-x-1",children:[e.children,(0,a.jsx)(ev.A,{className:(0,m.QP)("h-4 w-4 hidden transition-transform",n===e.sortRow&&"text-slate-10 block","desc"===l&&"transform -rotate-180")})]})})});function eS(e){return(0,a.jsx)("div",{role:"row",className:"-mx-2 flex w-full items-center justify-evenly rounded p-2 transition ",children:e.children})}function eT(){return(0,a.jsxs)(eS,{children:[(0,a.jsx)(eb,{sortRow:"name",children:"Name"}),(0,a.jsx)(eb,{sortRow:"lastRun",children:"Last Run"}),(0,a.jsx)(eb,{sortRow:"integrations",children:"Integrations"}),(0,a.jsx)(eb,{sortRow:"enabled",className:"w-14",children:"Enabled"})]})}function eK(e){return(0,a.jsx)("div",{role:"rowgroup",className:(0,m.QP)("flex flex-col gap-y-2 w-full max-w-6xl mx-12",e.className),children:e.children})}function eI(e){return(0,a.jsx)("div",{role:"table",className:"flex h-full w-full flex-col items-center",children:e.children})}let eC={activationConstraint:{distance:10}},eA=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],l={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},i={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CreateAgentFolderOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:[a,t,{alias:null,args:null,concreteType:"AgentFolders",kind:"LinkedField",name:"agentFolders",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentFolder",kind:"LinkedField",name:"folders",plural:!0,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"clientId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"parentClientId",storageKey:null},{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinitions",plural:!0,selections:[a,t],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationCreateAgentFolderSuccess",abstractKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"CreateAgentFolderMutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"createAgentFolder",plural:!1,selections:[l,i],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"CreateAgentFolderMutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"createAgentFolder",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},l,i],storageKey:null}]},params:{cacheID:"26766f08af29c3f876f426cc71e00827",id:null,metadata:{},name:"CreateAgentFolderMutation",operationKind:"mutation",text:"mutation CreateAgentFolderMutation(\n  $input: CreateAgentFolderInput!\n) {\n  createAgentFolder(input: $input) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationCreateAgentFolderSuccess {\n      data {\n        owner {\n          id\n          nodeId\n          agentFolders {\n            folders {\n              id\n              name\n              clientId\n              parentClientId\n              agentDefinitions {\n                id\n                nodeId\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n"}}}();eA.hash="6d15f3078e3ba92fce5fabc451cfd014";var ej=l(98502);let eN=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},s={alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinitions",plural:!0,selections:[t,i],storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"DeleteAgentFolderMutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"deleteAgentFolder",plural:!1,selections:[{kind:"InlineFragment",selections:[l,a],type:"Error",abstractKey:"__isError"},{kind:"InlineFragment",selections:[l,{alias:null,args:null,concreteType:"DeleteAgentFolderOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"DeleteAgentFolder_Identity"}],storageKey:null}],storageKey:null}],type:"MutationDeleteAgentFolderSuccess",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"DeleteAgentFolderMutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"deleteAgentFolder",plural:!1,selections:[l,{kind:"InlineFragment",selections:[a],type:"Error",abstractKey:"__isError"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DeleteAgentFolderOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:[t,i,{alias:null,args:null,concreteType:"AgentFolders",kind:"LinkedField",name:"agentFolders",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentRootFolder",kind:"LinkedField",name:"root",plural:!1,selections:[s],storageKey:null},{alias:null,args:null,concreteType:"AgentFolder",kind:"LinkedField",name:"folders",plural:!0,selections:[t,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"clientId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"parentClientId",storageKey:null},s],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationDeleteAgentFolderSuccess",abstractKey:null}],storageKey:null}]},params:{cacheID:"de012b320926c2fc249d54a1fb70695a",id:null,metadata:{},name:"DeleteAgentFolderMutation",operationKind:"mutation",text:"mutation DeleteAgentFolderMutation(\n  $input: DeleteAgentFolderInput!\n) {\n  deleteAgentFolder(input: $input) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      __typename\n      message\n    }\n    ... on MutationDeleteAgentFolderSuccess {\n      __typename\n      data {\n        owner {\n          ...DeleteAgentFolder_Identity\n          nodeId\n        }\n      }\n    }\n  }\n}\n\nfragment DeleteAgentFolder_Identity on Identity {\n  id\n  nodeId\n  agentFolders {\n    root {\n      agentDefinitions {\n        id\n        nodeId\n      }\n    }\n    folders {\n      id\n      name\n      clientId\n      parentClientId\n      agentDefinitions {\n        id\n        nodeId\n      }\n    }\n  }\n}\n"}}}();eN.hash="8802b7772a23b0d191c13a469556fdda";let eL=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},l={alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinitions",plural:!0,selections:[e,n],storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DeleteAgentFolder_Identity",selections:[e,n,{alias:null,args:null,concreteType:"AgentFolders",kind:"LinkedField",name:"agentFolders",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentRootFolder",kind:"LinkedField",name:"root",plural:!1,selections:[l],storageKey:null},{alias:null,args:null,concreteType:"AgentFolder",kind:"LinkedField",name:"folders",plural:!0,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"clientId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"parentClientId",storageKey:null},l],storageKey:null}],storageKey:null}],type:"Identity",abstractKey:null}}();eL.hash="4c595101be98836433502d01f70a5d7f";let e_=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],l={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},i={alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinitions",plural:!0,selections:[a,t],storageKey:null},s={alias:null,args:null,concreteType:"AgentRootFolder",kind:"LinkedField",name:"root",plural:!1,selections:[i],storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"clientId",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"parentClientId",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"MoveToFolderMutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"moveItemsToAgentFolder",plural:!1,selections:[l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MoveItemsToAgentFolderOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:[a,t,{alias:null,args:null,concreteType:"AgentFolders",kind:"LinkedField",name:"agentFolders",plural:!1,selections:[s,{alias:null,args:null,concreteType:"AgentFolder",kind:"LinkedField",name:"folders",plural:!0,selections:[a,r,o,d,{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinitions",plural:!0,selections:[a],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationMoveItemsToAgentFolderSuccess",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"MoveToFolderMutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"moveItemsToAgentFolder",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MoveItemsToAgentFolderOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:[a,t,{alias:null,args:null,concreteType:"AgentFolders",kind:"LinkedField",name:"agentFolders",plural:!1,selections:[s,{alias:null,args:null,concreteType:"AgentFolder",kind:"LinkedField",name:"folders",plural:!0,selections:[a,r,o,d,i],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationMoveItemsToAgentFolderSuccess",abstractKey:null}],storageKey:null}]},params:{cacheID:"a97a25c5ca5913761d7606dd83c2e0e9",id:null,metadata:{},name:"MoveToFolderMutation",operationKind:"mutation",text:"mutation MoveToFolderMutation(\n  $input: MoveItemsToAgentFolderInput!\n) {\n  moveItemsToAgentFolder(input: $input) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationMoveItemsToAgentFolderSuccess {\n      data {\n        owner {\n          id\n          nodeId\n          agentFolders {\n            root {\n              agentDefinitions {\n                id\n                nodeId\n              }\n            }\n            folders {\n              id\n              name\n              clientId\n              parentClientId\n              agentDefinitions {\n                id\n                nodeId\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n"}}}();e_.hash="c195e335225be8469ec6519d9fb41e82";let ew=function(){var e={defaultValue:null,kind:"LocalArgument",name:"folderId"},n={defaultValue:null,kind:"LocalArgument",name:"name"},l={defaultValue:null,kind:"LocalArgument",name:"ownerId"},a=[{fields:[{kind:"Variable",name:"agentFolderId",variableName:"folderId"},{kind:"Variable",name:"id",variableName:"ownerId"},{kind:"Variable",name:"name",variableName:"name"}],kind:"ObjectValue",name:"input"}],t={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},s={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UpdateAgentFolderOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},{alias:null,args:null,concreteType:"AgentFolders",kind:"LinkedField",name:"agentFolders",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentFolder",kind:"LinkedField",name:"folders",plural:!0,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"clientId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"parentClientId",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationUpdateAgentFolderSuccess",abstractKey:null};return{fragment:{argumentDefinitions:[e,n,l],kind:"Fragment",metadata:null,name:"RenameAgentFolderMutation",selections:[{alias:null,args:a,concreteType:null,kind:"LinkedField",name:"updateAgentFolder",plural:!1,selections:[t,s],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,l,n],kind:"Operation",name:"RenameAgentFolderMutation",selections:[{alias:null,args:a,concreteType:null,kind:"LinkedField",name:"updateAgentFolder",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},t,s],storageKey:null}]},params:{cacheID:"771688fa78168f55add051a61af21ce8",id:null,metadata:{},name:"RenameAgentFolderMutation",operationKind:"mutation",text:"mutation RenameAgentFolderMutation(\n  $folderId: ID!\n  $ownerId: ID!\n  $name: String!\n) {\n  updateAgentFolder(input: {agentFolderId: $folderId, id: $ownerId, name: $name}) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationUpdateAgentFolderSuccess {\n      data {\n        owner {\n          id\n          nodeId\n          agentFolders {\n            folders {\n              id\n              name\n              clientId\n              parentClientId\n            }\n          }\n        }\n      }\n    }\n  }\n}\n"}}}();ew.hash="c1443b0c78a815f4b1324738c77c2046";let eR=(0,N.PA)(function(e){let n=(0,G.useFragment)(t,e.identityFragmentRef),[l]=(0,G.useMutation)(eA),[i]=(0,G.useMutation)(ew),[u]=(0,G.useMutation)(e_),f=j.a.ui.myLindiesPageSearchQuery;(0,V.useEffect)(()=>()=>{j.a.ui.setMyLindiesPageSearchQuery("")},[]);let F=(0,k.p)(),x=(0,o.j)(),[v,b]=(0,V.useState)(!1),S=(0,V.useCallback)(()=>{b(!0)},[]),T=(0,V.useCallback)(()=>{b(!1)},[]),K=(0,V.useCallback)(()=>{x.onOpen()},[x]),I=(0,V.useMemo)(()=>{let e=null;for(let l of F){let a=n.agentFolders.folders.find(e=>(0,h.D)(e.name)===l);if(!a)return null;e=a}return e},[F,n.agentFolders.folders]),C=(0,d.aV)(),A=(0,V.useCallback)(e=>{C({id:"my-lindies-mutation-error",level:"danger",label:"Error",message:e,duration:3e3})},[C]),N=(0,V.useCallback)(e=>{if(b(!1),!e||""===e.trim())return;let a={input:{name:e,clientId:(0,R.fp)(),parentClientId:null==I?void 0:I.clientId,id:n.id}};l({variables:a,optimisticResponse:function(e,n){let l=(0,ej.jM)(n,n=>{var l;n.agentFolders.folders.push({__typename:"AgentFolder",id:new R.GD().toString(),name:null!==(l=e.input.name)&&void 0!==l?l:"",parentClientId:e.input.parentClientId,clientId:e.input.clientId,agentDefinitions:[]})});return{createAgentFolder:{__typename:"MutationCreateAgentFolderSuccess",__isError:"MutationCreateAgentFolderSuccess",message:"",data:{owner:{id:n.id,nodeId:n.nodeId,agentFolders:{folders:l.agentFolders.folders.map(e=>({id:e.id,name:e.name,clientId:e.clientId,parentClientId:e.parentClientId,agentDefinitions:e.agentDefinitions.map(e=>({id:e.id,nodeId:e.nodeId}))}))}}}}}}(a,n),onCompleted:e=>{if(e.createAgentFolder.message){var n;A(null!==(n=e.createAgentFolder.message)&&void 0!==n?n:"An unexpected error occurred while creating the folder")}}})},[l,n,A,null==I?void 0:I.clientId]),[P]=function(e){let n=(0,G.useFragment)(eL,e),[l,a]=(0,G.useMutation)(eN),t=(0,d.aV)(),i=(0,V.useCallback)(e=>{t({id:"delete-agent-folder-error",level:"danger",label:"Error",message:null!=e?e:"An error occurred while deleting the folder",duration:3e3})},[t]),s=(0,V.useCallback)(e=>{let a={input:{id:n.id,agentFolderId:e.agentFolderId}};l({variables:a,optimisticResponse:function(e,n){let l=(0,ej.jM)(n,n=>{let l=n.agentFolders.folders.find(n=>n.id.toString()===e.input.agentFolderId.toString());if(!l)return;let a=n.agentFolders.folders.find(e=>e.clientId===l.parentClientId);if(a)for(let e of l.agentDefinitions)a.agentDefinitions.push(e);else for(let e of l.agentDefinitions)n.agentFolders.root.agentDefinitions.push(e);for(let e of(l.agentDefinitions=[],n.agentFolders.folders.filter(e=>e.parentClientId===l.clientId))){var t;e.parentClientId=null!==(t=null==a?void 0:a.clientId)&&void 0!==t?t:null}n.agentFolders.folders=n.agentFolders.folders.filter(n=>n.id.toString()!==e.input.agentFolderId.toString())});return{deleteAgentFolder:{__typename:"MutationDeleteAgentFolderSuccess",__isError:"MutationDeleteAgentFolderSuccess",message:"",data:{owner:{id:n.id,nodeId:n.nodeId,agentFolders:{root:{agentDefinitions:l.agentFolders.root.agentDefinitions.map(e=>({id:e.id,nodeId:e.nodeId}))},folders:l.agentFolders.folders.map(e=>({id:e.id,name:e.name,clientId:e.clientId,parentClientId:e.parentClientId,agentDefinitions:e.agentDefinitions.map(e=>({id:e.id,nodeId:e.nodeId}))}))}}}}}}(a,n),onError:e=>{i(e.message)},onCompleted:e=>{var n;(null===(n=e.deleteAgentFolder)||void 0===n?void 0:n.__typename)!=="MutationDeleteAgentFolderSuccess"&&i(e.deleteAgentFolder.message)}})},[n,l,i]);return(0,V.useMemo)(()=>[s,a],[s,a])}(n),O=(0,V.useCallback)(e=>{P({agentFolderId:e})},[P]),z=(0,V.useCallback)((e,l)=>{let a=n.agentFolders.folders.find(n=>n.id===e);if(!a||a.name===l)return;let t={ownerId:n.id,folderId:e,name:l};i({variables:t,optimisticResponse:function(e,n){let l=(0,ej.jM)(n,n=>{for(let l of n.agentFolders.folders)l.id===e.folderId&&(l.name=e.name)});return{updateAgentFolder:{__typename:"MutationUpdateAgentFolderSuccess",__isError:"MutationUpdateAgentFolderSuccess",message:"",data:{owner:{id:n.id,nodeId:n.nodeId,agentFolders:{folders:l.agentFolders.folders.map(e=>({id:e.id,name:e.name,clientId:e.clientId,parentClientId:e.parentClientId}))}}}}}}(t,n),onCompleted:e=>{if(e.updateAgentFolder.message){var n;A(null!==(n=e.updateAgentFolder.message)&&void 0!==n?n:"An unexpected error occurred while renaming the folder")}}})},[i,n,A]),Q=(0,V.useMemo)(()=>[...n.agentFolders.root.agentDefinitions,...n.agentFolders.folders.flatMap(e=>e.agentDefinitions)],[n.agentFolders.folders,n.agentFolders.root.agentDefinitions]),q=(0,V.useMemo)(()=>new D.A(Q,{keys:["name"],threshold:.3}),[Q]),U=(0,V.useMemo)(()=>{var e;return f?q.search(f).map(e=>e.item):0===F.length?n.agentFolders.root.agentDefinitions:null!==(e=null==I?void 0:I.agentDefinitions)&&void 0!==e?e:[]},[n,F,I,f,q]),W=(0,V.useMemo)(()=>f?[]:I?n.agentFolders.folders.filter(e=>e.parentClientId===I.clientId):n.agentFolders.folders.filter(e=>!e.parentClientId),[n.agentFolders,I,f]),[H,$]=(0,V.useState)(null),Z=(0,V.useCallback)(e=>{var n;(null===(n=e.active)||void 0===n?void 0:n.id)&&$(e.active.id.toString())},[]),Y=(0,V.useMemo)(()=>{let e=n.agentFolders.root.agentDefinitions.find(e=>e.id===H);return e?e:n.agentFolders.folders.flatMap(e=>e.agentDefinitions).find(e=>e.id===H)||n.agentFolders.folders.find(e=>e.clientId===H)},[H,n.agentFolders.folders,n.agentFolders.root.agentDefinitions]),J=(0,V.useCallback)(e=>{var l,a,t,i,s,r,o,d,c,g;if($(null),!(null===(l=e.over)||void 0===l?void 0:l.id)||!(null===(a=e.active)||void 0===a?void 0:a.id)||e.over.id===e.active.id)return;let m=[];(null===(i=e.active)||void 0===i?void 0:null===(t=i.data.current)||void 0===t?void 0:t.type)===eg&&m.push({agentFolderClientId:e.active.id.toString()}),(null===(r=e.active)||void 0===r?void 0:null===(s=r.data.current)||void 0===s?void 0:s.type)===B&&m.push({agentDefinitionId:e.active.id.toString()});let f=e.over.id===p?null:e.over.id.toString();if((null===(d=e.over)||void 0===d?void 0:null===(o=d.data.current)||void 0===o?void 0:o.type)===eg||(null===(g=e.over)||void 0===g?void 0:null===(c=g.data.current)||void 0===c?void 0:c.type)===y){let e={input:{agentFolderClientId:f,id:n.id,items:m}};u({variables:e,optimisticResponse:function(e,n){let l=(0,ej.jM)(n,n=>{for(let l of n.agentFolders.folders)for(let n of e.input.items)n.agentFolderClientId===l.clientId&&(l.parentClientId=e.input.agentFolderClientId),l.agentDefinitions=l.agentDefinitions.filter(e=>e.id!==n.agentDefinitionId);n.agentFolders.root.agentDefinitions=n.agentFolders.root.agentDefinitions.filter(n=>!e.input.items.some(e=>e.agentDefinitionId===n.id))});return{moveItemsToAgentFolder:{__typename:"MutationMoveItemsToAgentFolderSuccess",__isError:"MutationMoveItemsToAgentFolderSuccess",message:"",data:{owner:{id:n.id,nodeId:n.nodeId,agentFolders:{root:{agentDefinitions:l.agentFolders.root.agentDefinitions.map(e=>({id:e.id,nodeId:e.nodeId}))},folders:l.agentFolders.folders.map(e=>({id:e.id,name:e.name,clientId:e.clientId,parentClientId:e.parentClientId,agentDefinitions:e.agentDefinitions.map(e=>({id:e.id,nodeId:e.nodeId}))}))}}}}}}(e,n),onCompleted:e=>{if(e.moveItemsToAgentFolder.message){var n;A(null!==(n=e.moveItemsToAgentFolder.message)&&void 0!==n?n:"An unexpected error occurred while moving the folder")}}})}},[u,n,A]),X=(0,V.useMemo)(()=>{let e=null,l=[];for(let t of F){var a;let i=n.agentFolders.folders.find(n=>n.parentClientId===e&&(0,h.D)(n.name)===t);if(!i)break;e=i.clientId,l.push({id:i.id,clientId:null!==(a=i.clientId)&&void 0!==a?a:"__null__",parentClientId:i.parentClientId,name:i.name})}return l},[n.agentFolders.folders,F]),ee=j.a.ui.myLindiesSortRow,en=j.a.ui.myLindiesSortOrder,el=(0,V.useMemo)(()=>{let e=[...U];if("name"===ee){let n=e.sort((e,n)=>e.name.toLowerCase().localeCompare(n.name.toLowerCase()));return"asc"===en?n:n.reverse()}if("lastRun"===ee){let n=e.sort((e,n)=>e.lastRunAt?n.lastRunAt?e.lastRunAt===n.lastRunAt?0:new Date(e.lastRunAt).getTime()>new Date(n.lastRunAt).getTime()?-1:1:-1:1);return"asc"===en?n:n.reverse()}if("integrations"===ee){let n=e.sort((e,n)=>{var l,a;let t=(null===(l=e.integrations)||void 0===l?void 0:l.length)||0,i=(null===(a=n.integrations)||void 0===a?void 0:a.length)||0;return t===i?0:t>i?-1:1});return"asc"===en?n:n.reverse()}if("enabled"===ee){let n=e.sort((e,n)=>e.enabled===n.enabled?0:e.enabled?-1:1);return"asc"===en?n:n.reverse()}return U},[U,ee,en]),ea=(0,V.useMemo)(()=>{let e=[...W].sort((e,n)=>e.name.toLowerCase().localeCompare(n.name.toLowerCase()));return"desc"===en&&"name"===ee?e.reverse():e},[W,ee,en]),et=function(){let e=(0,s.MS)(s.cA,eC),n=(0,s.MS)(s.IG,eC),l=(0,s.MS)(s.AN,eC);return(0,s.FR)(e,n,l)}(),ei=(0,E.useRouter)(),es=(0,V.useCallback)(async(e,n)=>{if(x.onClose(),n){await ei.push("/".concat(e,"/editor"));return}await ei.push("/".concat(e,"/editor?newLindy=true"))},[x,ei]);if(!I&&F.length>0)return(0,a.jsx)("div",{children:"Folder not found"});let er=!ea.length&&!el.length&&!v;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(M(),{children:(0,a.jsxs)("title",{children:[(null==I?void 0:I.name)||"My Lindies"," - Lindy"]})}),(0,a.jsxs)(s.Mp,{collisionDetection:s.TT,onDragStart:Z,onDragEnd:J,sensors:et,children:[(0,a.jsxs)("main",{className:(0,m.QP)("pt-12 grid h-full w-full grid-rows-[auto,1fr] gap-y-4 overflow-y-hidden",w.Oc),children:[(0,a.jsx)(L,{breadcrumbs:X,onClickNewFolder:S,onClickCreateLindy:K}),(0,a.jsx)("div",{className:"flex w-full items-center justify-center overflow-y-hidden py-0.5",children:(0,a.jsxs)(eI,{children:[(0,a.jsx)("div",{className:"flex w-full justify-center",children:(0,a.jsx)(eK,{children:(0,a.jsx)(eT,{})})}),er&&(0,a.jsx)(ec,{}),(0,a.jsx)(_.OY,{children:(0,a.jsx)("div",{className:"mb-12 flex size-full justify-center",children:(0,a.jsxs)(eK,{className:"mt-0.5",children:[v&&(0,a.jsx)(ex,{onAdd:N,onCancel:T}),ea.length>0&&ea.map(e=>{let l=function e(n,l){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;if(a.has(n.id))return 0;a.add(n.id);let t=n.agentDefinitions.length;for(let i of l.filter(e=>e.parentClientId===n.clientId))t+=e(i,l,a);return t}(e,n.agentFolders.folders);return(0,a.jsx)(eF,{id:e.id,clientId:e.clientId,name:e.name,onNameChange:z,onDelete:O,itemsCount:l},e.id)}),el.length>0&&el.map(e=>(0,a.jsx)(eu,{identityFragmentRef:n,agentDefinitionFragmentRef:e},e.id))]})})})]})})]}),(0,a.jsxs)(s.Hd,{children:[Y&&"AgentDefinition"===Y.__typename&&(0,a.jsx)("div",{className:"opacity-50",children:(0,a.jsx)(eu,{agentDefinitionFragmentRef:Y,identityFragmentRef:n})}),Y&&"AgentFolder"===Y.__typename&&(0,a.jsx)("div",{className:"opacity-50",children:(0,a.jsx)(eF,{id:Y.id,clientId:Y.clientId,name:Y.name,onNameChange:z,onDelete:O})})]})]}),(0,a.jsx)(r.aF,{open:x.isOpen,setClosed:x.onClose,className:"overflow-hidden sm:max-w-[600px]",children:(0,a.jsx)(V.Suspense,{fallback:(0,a.jsx)(g.V,{}),children:(0,a.jsx)(c.EG,{identityFragmentRef:n,onCreate:es,toggle:x.onToggle,folderClientId:null==I?void 0:I.clientId})})})]})});function eD(){return(0,u.f)(i)}},50470:(e,n,l)=>{"use strict";l.d(n,{$:()=>y,q:()=>p});var a=l(50612);let t=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AgentEnabledSwitch_AgentDefinition",selections:[e,{alias:null,args:null,kind:"ScalarField",name:"enabled",storageKey:null},{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:[e,{args:null,kind:"FragmentSpread",name:"useSaveAgentWithPremiumModal_Identity"}],storageKey:null},{args:null,kind:"FragmentSpread",name:"useSaveAgentWithPremiumModal_AgentDefinition"}],type:"AgentDefinition",abstractKey:null}}();t.hash="c2c332e2c7f7a98b4acc43979591d5a4";var i=l(70732),s=l(24263),r=l(75092),o=l(8178),d=l(31284),u=l(45785),c=l(8678),g=l(94344),m=l(79124);l(97244);let y=(0,c.PA)(function(e){let{agentDefinitionFragmentRef:n,isDirty:l=!1,stateGraph:o,reactFlowInstance:d}=e,u=(0,m.useFragment)(t,n),[c]=(0,s.HW)(),{handleSave:y,premiumModalElement:p}=(0,r.g)(u.owner,u,o,d),f=!!(null==o?void 0:o.isSavedWithoutConfiguredEntryPoint),h=(0,g.useCallback)(async()=>{await y(),c({variables:{ownerId:u.owner.id,agentDefinitionId:u.id,enabled:!0}})},[u.id,u.owner.id,c,y]),k=(0,g.useCallback)(e=>{c({variables:{ownerId:u.owner.id,agentDefinitionId:u.id,enabled:e}})},[u.id,u.owner.id,c]),F=f?(0,a.jsx)(i.d,{title:"Enable Lindy",autoLabelEntity:"Lindy",disabled:!l,checked:!1,onChange:h}):(0,a.jsx)(i.d,{title:"Enable Lindy",autoLabelEntity:"Lindy",checked:u.enabled,onChange:k});return(0,a.jsxs)(a.Fragment,{children:[F,p]})}),p=(0,c.PA)(function(e){var n;let{agentDefinitionFragmentRef:l}=e,t=null===(n=d.a.lindies.currentLindy)||void 0===n?void 0:n.isDirty,i=(0,o.H)(),s=(0,u.VH)();return(0,a.jsx)(y,{agentDefinitionFragmentRef:l,isDirty:t,stateGraph:i,reactFlowInstance:s})})},97339:(e,n,l)=>{"use strict";l.d(n,{$:()=>x});var a=l(50612);let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SettingsCommonLayout_Identity",selections:[{alias:null,args:null,kind:"ScalarField",name:"enabledFeatureFlags",storageKey:null}],type:"Identity",abstractKey:null};t.hash="cf3cbdb03e05549dc1d86bb823bf74ca";var i=l(93030),s=l(59794),r=l(25919);function o(e){return(0,a.jsx)("aside",{className:(0,r.QP)("flex h-full w-[280px] flex-col gap-y-2 py-6 px-6",e.className),children:e.children})}var d=l(91871),u=l(30035),c=l.n(u);function g(e){return(0,a.jsx)(c(),{shallow:!0,href:e.href,className:(0,r.QP)("rounded-md text-slate-11 text-sm font-normal flex items-center gap-x-2 p-2 transition hover:bg-slate-3 active:bg-slate-4",e.active&&"bg-slate-3 text-slate-12",d.Y),children:e.children})}var m=l(39159),y=l(92214);let p=(0,l(94344).memo)(function(e){let{className:n}=e;return(0,a.jsx)("svg",{className:n,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M7.27864 8.90648C8.10389 10.5398 9.19878 12.0719 10.5633 13.4365C11.9279 14.801 13.4601 15.8959 15.0933 16.7211L16.7613 15.0531C17.1313 14.6831 17.7055 14.6116 18.1548 14.8797L21.0248 16.4775C21.6644 16.8305 21.7739 17.8548 21.2475 18.3813L18.2751 21.3537C17.6983 21.9305 16.8544 22.1652 16.0801 21.9079C14.6162 21.4215 13.1931 20.7779 11.8371 19.9771C10.2668 19.0499 8.78664 17.9114 7.43746 16.5622C6.08828 15.213 4.94996 13.7329 4.02255 12.1626C3.22172 10.8066 2.57811 9.38347 2.09177 7.91959C1.83453 7.14527 2.06905 6.30145 2.64594 5.72456L5.61827 2.75223C6.14486 2.22564 7.16921 2.33502 7.52216 2.97463L9.12 5.84463C9.38811 6.29399 9.31669 6.86841 8.94669 7.23841L7.27864 8.90648Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})});var f=l(2302),h=l(14306),k=l(81778),F=l(79124);function x(e){let n=(0,k.useRouter)(),l=(0,F.useFragment)(t,e.identityFragmentRef).enabledFeatureFlags.includes(h.T.NotificationSettingsPage);return(0,a.jsxs)("div",{className:"grid size-full grid-cols-[auto,1fr] overflow-hidden",children:[(0,a.jsxs)(o,{className:"border-r border-slate-5",children:[(0,a.jsxs)(g,{href:"/user-settings/general",active:"/user-settings/general"===n.pathname,children:[(0,a.jsx)(i.A,{className:"size-5"}),"General"]}),(0,a.jsxs)(g,{href:"/user-settings/billing",active:"/user-settings/billing"===n.pathname,children:[(0,a.jsx)(m.x,{className:"size-5"}),"Billing"]}),(0,a.jsxs)(g,{href:"/user-settings/speech-to-text",active:"/user-settings/speech-to-text"===n.pathname,children:[(0,a.jsx)(f.A,{className:"size-5"}),"Speech to Text"]}),(0,a.jsxs)(g,{href:"/user-settings/connections",active:"/user-settings/connections"===n.pathname,children:[(0,a.jsx)(y.d,{className:"size-5"}),"Connections"]}),(0,a.jsxs)(g,{href:"/user-settings/phone",active:"/user-settings/phone"===n.pathname,children:[(0,a.jsx)(p,{className:"size-5"}),"Phone Numbers"]}),l&&(0,a.jsxs)(g,{href:"/user-settings/notifications",active:"/user-settings/notifications"===n.pathname,children:[(0,a.jsx)(s.A,{className:"size-5"}),"Notifications"]})]}),(0,a.jsx)("div",{className:"overflow-y-auto",children:e.children})]})}},91780:(e,n,l)=>{"use strict";l.d(n,{$:()=>i});var a=l(50612),t=l(25919);function i(e){let{className:n,children:l}=e;return(0,a.jsx)("div",{className:(0,t.QP)("flex w-[650px] flex-col gap-4 p-5 rounded-xl bg-panel border border-slate-5",n),children:l})}},59905:(e,n,l)=>{"use strict";l.r(n),l.d(n,{UserBillingSettingsLayout:()=>k,userBillingSettingsLayoutQuery:()=>h});var a=l(50612);let t=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},a={alias:null,args:null,concreteType:"AgentIcon",kind:"LinkedField",name:"icon",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null}],storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},i={alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinitions",plural:!0,selections:[e,t,n,a,l],storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"creditAllocation",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"planType",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UserBillingSettingsLayoutQuery",selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"me",plural:!1,selections:[e,{args:null,kind:"FragmentSpread",name:"CommonLayoutSidebarIdentityFragment"},{args:null,kind:"FragmentSpread",name:"UserBillingSettingsContentSection_Identity"},{args:null,kind:"FragmentSpread",name:"CommonLayout_Identity"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"UserBillingSettingsLayoutQuery",selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"me",plural:!1,selections:[e,n,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"avatar",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinitions",plural:!0,selections:[e,n,{alias:null,args:null,kind:"ScalarField",name:"isFavorite",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"lastRunAt",storageKey:null},l,{alias:null,args:null,kind:"ScalarField",name:"notificationsCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isMuted",storageKey:null},a,{alias:null,args:null,concreteType:"StateGraph",kind:"LinkedField",name:"stateGraph",plural:!1,selections:[e,t],storageKey:null},t],storageKey:null},t,{alias:null,args:null,concreteType:"AgentFolders",kind:"LinkedField",name:"agentFolders",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentRootFolder",kind:"LinkedField",name:"root",plural:!1,selections:[i],storageKey:null},{alias:null,args:null,concreteType:"AgentFolder",kind:"LinkedField",name:"folders",plural:!0,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"clientId",storageKey:null},i],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"IdentityFlags",kind:"LinkedField",name:"flags",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"dismissedQualifiedSignupUpsell",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isQualifiedSignup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isMedicalScribe",storageKey:null},{alias:null,args:null,concreteType:"SubscriptionInfo",kind:"LinkedField",name:"billingInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"billingPeriodEndsAt",storageKey:null},{alias:null,args:null,concreteType:"SubscriptionPlan",kind:"LinkedField",name:"subscriptionPlan",plural:!1,selections:[n,s,r],storageKey:null},{alias:null,args:null,concreteType:"CreditsInfo",kind:"LinkedField",name:"creditsInfo",plural:!1,selections:[s,{alias:null,args:null,kind:"ScalarField",name:"consumed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"percentConsumed",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"TrialInfo",kind:"LinkedField",name:"trialInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"expiresAt",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"SubscriptionFeatures",kind:"LinkedField",name:"features",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isEligibleForFreePlan",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"UpcomingPlan",kind:"LinkedField",name:"upcomingPlan",plural:!1,selections:[{alias:null,args:null,concreteType:"SubscriptionPlan",kind:"LinkedField",name:"subscriptionPlan",plural:!1,selections:[s,r,n],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"startDate",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"portal",storageKey:null},{alias:null,args:null,concreteType:"PaymentInfo",kind:"LinkedField",name:"paymentInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"brand",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"expMonth",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"expYear",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"last4",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PaymentFailure",kind:"LinkedField",name:"lastPaymentFailure",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"amount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"date",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"enabledFeatureFlags",storageKey:null}],storageKey:null}]},params:{cacheID:"16e52bd36ed4f1d23d21278a67f4113b",id:null,metadata:{},name:"UserBillingSettingsLayoutQuery",operationKind:"query",text:"query UserBillingSettingsLayoutQuery {\n  me {\n    id\n    ...CommonLayoutSidebarIdentityFragment\n    ...UserBillingSettingsContentSection_Identity\n    ...CommonLayout_Identity\n    nodeId\n  }\n}\n\nfragment AgentContextMenuAgentDefinitionFragment on AgentDefinition {\n  id\n  name\n  isMuted\n  isFavorite\n  notificationsCount\n}\n\nfragment AgentContextMenuIdentityFragment on Identity {\n  id\n  ...DeleteAgentDefinitionMutationFragment\n  ...CopyAgentDefinitionMutationIdentityFragment\n}\n\nfragment AgentSidebarItemAgentDefinitionFragment on AgentDefinition {\n  id\n  name\n  notificationsCount\n  isMuted\n  icon {\n    name\n    color\n  }\n  stateGraph {\n    id\n    nodeId\n  }\n  ...AgentContextMenuAgentDefinitionFragment\n}\n\nfragment AgentSidebarItemIdentityFragment on Identity {\n  id\n  ...AgentContextMenuIdentityFragment\n}\n\nfragment CommonLayoutSidebarIdentityFragment on Identity {\n  id\n  name\n  avatar {\n    url\n  }\n  agentDefinitions {\n    id\n    name\n    isFavorite\n    lastRunAt\n    createdAt\n    ...AgentSidebarItemAgentDefinitionFragment\n    nodeId\n  }\n  ...CreateLindySection_Identity\n  ...QualifiedSignupCtaFooter_Identity\n  ...CreditsFooterMe\n  ...AgentSidebarItemIdentityFragment\n}\n\nfragment CommonLayout_Identity on Identity {\n  ...PlansModal_Identity\n}\n\nfragment CopyAgentDefinitionMutationIdentityFragment on Identity {\n  id\n  nodeId\n  agentDefinitions {\n    id\n    nodeId\n    name\n    icon {\n      name\n      color\n    }\n    createdAt\n  }\n  agentFolders {\n    root {\n      agentDefinitions {\n        id\n        nodeId\n        name\n        icon {\n          name\n          color\n        }\n        createdAt\n      }\n    }\n    folders {\n      id\n      agentDefinitions {\n        id\n        nodeId\n        name\n        icon {\n          name\n          color\n        }\n        createdAt\n      }\n    }\n  }\n}\n\nfragment CreateAgentMutationIdentityFragment on Identity {\n  id\n  nodeId\n  agentDefinitions {\n    id\n    nodeId\n    name\n    icon {\n      name\n      color\n    }\n  }\n  agentFolders {\n    root {\n      agentDefinitions {\n        id\n        nodeId\n        name\n        icon {\n          name\n          color\n        }\n      }\n    }\n    folders {\n      id\n      clientId\n      agentDefinitions {\n        id\n        nodeId\n        name\n        icon {\n          name\n          color\n        }\n      }\n    }\n  }\n}\n\nfragment CreateLindySection_Identity on Identity {\n  id\n  ...CreateAgentMutationIdentityFragment\n}\n\nfragment CreditsFooterMe on Identity {\n  nodeId\n  isMedicalScribe\n  billingInfo {\n    billingPeriodEndsAt\n    subscriptionPlan {\n      name\n    }\n    creditsInfo {\n      creditAllocation\n      consumed\n      percentConsumed\n    }\n    trialInfo {\n      expiresAt\n    }\n  }\n  ...PlansModal_Identity\n}\n\nfragment CurrentPlanMe on Identity {\n  isMedicalScribe\n  billingInfo {\n    trialInfo {\n      expiresAt\n    }\n    portal\n    creditsInfo {\n      consumed\n      creditAllocation\n      percentConsumed\n    }\n    subscriptionPlan {\n      name\n      planType\n      creditAllocation\n    }\n    upcomingPlan {\n      subscriptionPlan {\n        planType\n      }\n    }\n  }\n  ...PlansModal_Identity\n  ...UpcomingPlanMe\n}\n\nfragment DeleteAgentDefinitionMutationFragment on Identity {\n  id\n  nodeId\n  agentDefinitions {\n    id\n    nodeId\n  }\n  agentFolders {\n    root {\n      agentDefinitions {\n        id\n        nodeId\n      }\n    }\n    folders {\n      id\n      agentDefinitions {\n        id\n        nodeId\n      }\n    }\n  }\n}\n\nfragment PaymentMethodMe on Identity {\n  billingInfo {\n    paymentInfo {\n      brand\n      expMonth\n      expYear\n      last4\n    }\n    lastPaymentFailure {\n      amount\n      date\n    }\n  }\n}\n\nfragment PlansModal_Identity on Identity {\n  nodeId\n  isMedicalScribe\n  billingInfo {\n    trialInfo {\n      expiresAt\n    }\n    features {\n      isEligibleForFreePlan\n    }\n  }\n  ...ProPlanMe\n  ...ProPlanMedicalMe\n  ...UpcomingPlanMe\n}\n\nfragment ProPlanMe on Identity {\n  billingInfo {\n    subscriptionPlan {\n      creditAllocation\n    }\n    upcomingPlan {\n      subscriptionPlan {\n        creditAllocation\n        planType\n      }\n    }\n  }\n}\n\nfragment ProPlanMedicalMe on Identity {\n  billingInfo {\n    creditsInfo {\n      creditAllocation\n    }\n    upcomingPlan {\n      subscriptionPlan {\n        planType\n      }\n    }\n  }\n}\n\nfragment QualifiedSignupCtaFooter_Identity on Identity {\n  id\n  nodeId\n  flags {\n    dismissedQualifiedSignupUpsell\n  }\n  isQualifiedSignup\n}\n\nfragment SettingsCommonLayout_Identity on Identity {\n  enabledFeatureFlags\n}\n\nfragment UpcomingPlanMe on Identity {\n  isMedicalScribe\n  billingInfo {\n    trialInfo {\n      expiresAt\n    }\n    subscriptionPlan {\n      creditAllocation\n    }\n    upcomingPlan {\n      subscriptionPlan {\n        creditAllocation\n        name\n        planType\n      }\n      startDate\n    }\n  }\n}\n\nfragment UserBillingSettingsContentSection_Identity on Identity {\n  ...CurrentPlanMe\n  ...PaymentMethodMe\n  ...SettingsCommonLayout_Identity\n}\n"}}}();t.hash="fb921f7711d1d59dbf84d4afe64300fc";var i=l(9234),s=l(57511),r=l(7061),o=l(49321),d=l.n(o),u=l(79124);l(97244);var c=l(49117),g=l(92836),m=l(56587),y=l(43578),p=l(61082);function f(){return(0,a.jsx)(p.X,{children:(0,a.jsx)(y.q,{children:(0,a.jsx)(g.d,{children:(0,a.jsx)(m.g,{children:"Billing Settings"})})})})}let h=t;function k(){let e=(0,u.useLazyLoadQuery)(h,{});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d(),{children:(0,a.jsx)("title",{children:"Billing Settings"})}),(0,a.jsx)(i.i,{userId:e.me.id,identityFragmentRef:e.me,children:(0,a.jsx)(s.V,{sidebar:(0,a.jsx)(r.Qm,{identityFragmentRef:e.me}),header:(0,a.jsx)(f,{}),content:(0,a.jsx)(c.w9,{identityFragmentRef:e.me})})})]})}},49117:(e,n,l)=>{"use strict";l.d(n,{w9:()=>h,in:()=>F,JG:()=>k});var a=l(50612);let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UserBillingSettingsContentSection_Identity",selections:[{args:null,kind:"FragmentSpread",name:"CurrentPlanMe"},{args:null,kind:"FragmentSpread",name:"PaymentMethodMe"},{args:null,kind:"FragmentSpread",name:"SettingsCommonLayout_Identity"}],type:"Identity",abstractKey:null};t.hash="44446f4f20f104da3414c27f13866dd5";let i=function(){var e={alias:null,args:null,kind:"ScalarField",name:"creditAllocation",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"planType",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UserBillingSettingsContentSectionPrefetchQuery",selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"me",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"UserBillingSettingsContentSection_Identity"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"UserBillingSettingsContentSectionPrefetchQuery",selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"me",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isMedicalScribe",storageKey:null},{alias:null,args:null,concreteType:"SubscriptionInfo",kind:"LinkedField",name:"billingInfo",plural:!1,selections:[{alias:null,args:null,concreteType:"TrialInfo",kind:"LinkedField",name:"trialInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"expiresAt",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"portal",storageKey:null},{alias:null,args:null,concreteType:"CreditsInfo",kind:"LinkedField",name:"creditsInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"consumed",storageKey:null},e,{alias:null,args:null,kind:"ScalarField",name:"percentConsumed",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"SubscriptionPlan",kind:"LinkedField",name:"subscriptionPlan",plural:!1,selections:[n,l,e],storageKey:null},{alias:null,args:null,concreteType:"UpcomingPlan",kind:"LinkedField",name:"upcomingPlan",plural:!1,selections:[{alias:null,args:null,concreteType:"SubscriptionPlan",kind:"LinkedField",name:"subscriptionPlan",plural:!1,selections:[l,e,n],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"startDate",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"SubscriptionFeatures",kind:"LinkedField",name:"features",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isEligibleForFreePlan",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PaymentInfo",kind:"LinkedField",name:"paymentInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"brand",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"expMonth",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"expYear",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"last4",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PaymentFailure",kind:"LinkedField",name:"lastPaymentFailure",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"amount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"date",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"enabledFeatureFlags",storageKey:null}],storageKey:null}]},params:{cacheID:"ada354e0e31a1c0a036a04a8b3ec1c5a",id:null,metadata:{},name:"UserBillingSettingsContentSectionPrefetchQuery",operationKind:"query",text:"query UserBillingSettingsContentSectionPrefetchQuery {\n  me {\n    ...UserBillingSettingsContentSection_Identity\n    nodeId\n  }\n}\n\nfragment CurrentPlanMe on Identity {\n  isMedicalScribe\n  billingInfo {\n    trialInfo {\n      expiresAt\n    }\n    portal\n    creditsInfo {\n      consumed\n      creditAllocation\n      percentConsumed\n    }\n    subscriptionPlan {\n      name\n      planType\n      creditAllocation\n    }\n    upcomingPlan {\n      subscriptionPlan {\n        planType\n      }\n    }\n  }\n  ...PlansModal_Identity\n  ...UpcomingPlanMe\n}\n\nfragment PaymentMethodMe on Identity {\n  billingInfo {\n    paymentInfo {\n      brand\n      expMonth\n      expYear\n      last4\n    }\n    lastPaymentFailure {\n      amount\n      date\n    }\n  }\n}\n\nfragment PlansModal_Identity on Identity {\n  nodeId\n  isMedicalScribe\n  billingInfo {\n    trialInfo {\n      expiresAt\n    }\n    features {\n      isEligibleForFreePlan\n    }\n  }\n  ...ProPlanMe\n  ...ProPlanMedicalMe\n  ...UpcomingPlanMe\n}\n\nfragment ProPlanMe on Identity {\n  billingInfo {\n    subscriptionPlan {\n      creditAllocation\n    }\n    upcomingPlan {\n      subscriptionPlan {\n        creditAllocation\n        planType\n      }\n    }\n  }\n}\n\nfragment ProPlanMedicalMe on Identity {\n  billingInfo {\n    creditsInfo {\n      creditAllocation\n    }\n    upcomingPlan {\n      subscriptionPlan {\n        planType\n      }\n    }\n  }\n}\n\nfragment SettingsCommonLayout_Identity on Identity {\n  enabledFeatureFlags\n}\n\nfragment UpcomingPlanMe on Identity {\n  isMedicalScribe\n  billingInfo {\n    trialInfo {\n      expiresAt\n    }\n    subscriptionPlan {\n      creditAllocation\n    }\n    upcomingPlan {\n      subscriptionPlan {\n        creditAllocation\n        name\n        planType\n      }\n      startDate\n    }\n  }\n}\n\nfragment UserBillingSettingsContentSection_Identity on Identity {\n  ...CurrentPlanMe\n  ...PaymentMethodMe\n  ...SettingsCommonLayout_Identity\n}\n"}}}();i.hash="85d53c760f224fca1e436a9493c7967e";var s=l(66213),r=l(88025),o=l(76450),d=l(91780),u=l(97339),c=l(79124);l(97244);var g=l(1526),m=l(87465),y=l(32977),p=l(75935),f=l(72754);function h(e){let n=(0,c.useFragment)(t,e.identityFragmentRef);return(0,m.JY)(),(0,f.JO)(),(0,g.$h)(),(0,p.bB)(),(0,y.I4)(),(0,a.jsx)(u.$,{identityFragmentRef:n,children:(0,a.jsxs)("main",{className:"mx-auto flex flex-col items-center gap-3 px-6 py-16",children:[(0,a.jsx)(d.$,{children:(0,a.jsx)(r.P,{identityFragmentRef:n})}),(0,a.jsx)(d.$,{children:(0,a.jsx)(o.g,{identityFragmentRef:n})})]})})}let k=i;function F(){(0,s.f)(k)}},1526:(e,n,l)=>{"use strict";l.d(n,{tH:()=>f,$h:()=>k,mM:()=>h});var a=l(50612);let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UserConnectionSettingsContentSection_Identity",selections:[{args:null,kind:"FragmentSpread",name:"ConnectionsListFragment"},{args:null,kind:"FragmentSpread",name:"SettingsCommonLayout_Identity"}],type:"Identity",abstractKey:null};t.hash="e6a592a07ce82f00e5644775f3e64909";let i=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UserConnectionSettingsContentSectionPrefetchQuery",selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"me",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"UserConnectionSettingsContentSection_Identity"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"UserConnectionSettingsContentSectionPrefetchQuery",selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"me",plural:!1,selections:[e,n,{alias:null,args:null,concreteType:"Auth",kind:"LinkedField",name:"auth",plural:!0,selections:[e,n,{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"method",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"provider",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scopes",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fields",storageKey:null},{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"usedBy",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},n],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isConnected",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"enabledFeatureFlags",storageKey:null}],storageKey:null}]},params:{cacheID:"17065a6368edcd3580eda03911a26bc8",id:null,metadata:{},name:"UserConnectionSettingsContentSectionPrefetchQuery",operationKind:"query",text:"query UserConnectionSettingsContentSectionPrefetchQuery {\n  me {\n    ...UserConnectionSettingsContentSection_Identity\n    nodeId\n  }\n}\n\nfragment ConnectionsAuthItemFragment on Auth {\n  id\n  nodeId\n  displayName\n  method\n  provider\n  label\n  scopes\n  fields\n  usedBy {\n    name\n    nodeId\n  }\n  isConnected\n}\n\nfragment ConnectionsListFragment on Identity {\n  id\n  nodeId\n  auth {\n    id\n    ...ConnectionsAuthItemFragment\n    nodeId\n  }\n}\n\nfragment SettingsCommonLayout_Identity on Identity {\n  enabledFeatureFlags\n}\n\nfragment UserConnectionSettingsContentSection_Identity on Identity {\n  ...ConnectionsListFragment\n  ...SettingsCommonLayout_Identity\n}\n"}}}();i.hash="1ee34997b7e28881731d0485612af7c6";var s=l(66213),r=l(97838),o=l(91780),d=l(97339),u=l(79124);l(97244);var c=l(49117),g=l(87465),m=l(32977),y=l(75935),p=l(72754);function f(e){let n=(0,u.useFragment)(t,e.identityFragmentRef);return(0,g.JY)(),(0,c.in)(),(0,p.JO)(),(0,y.bB)(),(0,m.I4)(),(0,a.jsx)(d.$,{identityFragmentRef:n,children:(0,a.jsx)("main",{className:"mx-auto flex flex-col items-center gap-3 px-6 py-16",children:(0,a.jsx)(o.$,{children:(0,a.jsx)(r.E4,{identityFragmentRef:n})})})})}let h=i;function k(){(0,s.f)(h)}},87465:(e,n,l)=>{"use strict";l.d(n,{dh:()=>f,JY:()=>k,y_:()=>h});var a=l(50612);let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UserGeneralSettingsContentSection_Identity",selections:[{args:null,kind:"FragmentSpread",name:"AccountSection_Identity"},{args:null,kind:"FragmentSpread",name:"SettingsCommonLayout_Identity"}],type:"Identity",abstractKey:null};t.hash="65e5ec686ab3f21479ac9369ac51197e";let i={fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UserGeneralSettingsContentSectionPrefetchQuery",selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"me",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"UserGeneralSettingsContentSection_Identity"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"UserGeneralSettingsContentSectionPrefetchQuery",selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"me",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"avatar",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"email",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasPassword",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pendingEmail",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"enabledFeatureFlags",storageKey:null}],storageKey:null}]},params:{cacheID:"0baccee521e0bbbe53fa60ddda916066",id:null,metadata:{},name:"UserGeneralSettingsContentSectionPrefetchQuery",operationKind:"query",text:"query UserGeneralSettingsContentSectionPrefetchQuery {\n  me {\n    ...UserGeneralSettingsContentSection_Identity\n    nodeId\n  }\n}\n\nfragment AccountSection_Identity on Identity {\n  id\n  nodeId\n  name\n  ...AvatarSectionMeFragment\n  ...DeleteAccountSectionMeFragment\n  ...UpdatePasswordSectionMeFragment\n  ...UpdateEmailSectionMeFragment\n}\n\nfragment AvatarSectionMeFragment on Identity {\n  id\n  name\n  nodeId\n  avatar {\n    url\n  }\n}\n\nfragment DeleteAccountSectionMeFragment on Identity {\n  id\n}\n\nfragment SettingsCommonLayout_Identity on Identity {\n  enabledFeatureFlags\n}\n\nfragment UpdateEmailSectionMeFragment on Identity {\n  id\n  nodeId\n  name\n  email\n  pendingEmail\n}\n\nfragment UpdatePasswordSectionMeFragment on Identity {\n  id\n  email\n  hasPassword\n}\n\nfragment UserGeneralSettingsContentSection_Identity on Identity {\n  ...AccountSection_Identity\n  ...SettingsCommonLayout_Identity\n}\n"}};i.hash="0123959b24e5ce135a8114be9547cc18";var s=l(66213),r=l(91281),o=l(91780),d=l(97339),u=l(79124);l(97244);var c=l(49117),g=l(1526),m=l(32977),y=l(75935),p=l(72754);function f(e){let n=(0,u.useFragment)(t,e.identityFragmentRef);return(0,c.in)(),(0,p.JO)(),(0,g.$h)(),(0,y.bB)(),(0,m.I4)(),(0,a.jsx)(d.$,{identityFragmentRef:n,children:(0,a.jsx)("main",{className:"mx-auto flex flex-col items-center gap-3 px-6 py-16",children:(0,a.jsx)(o.$,{children:(0,a.jsx)(r.zu,{identityFragmentRef:n})})})})}let h=i;function k(){(0,s.f)(h)}},32977:(e,n,l)=>{"use strict";l.d(n,{IP:()=>S,I4:()=>K});var a=l(50612);let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UserNotificationSettingsContentSection_Identity",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"enabledFeatureFlags",storageKey:null},{alias:null,args:null,concreteType:"Settings",kind:"LinkedField",name:"settings",plural:!1,selections:[{alias:null,args:null,concreteType:"NotificationSettings",kind:"LinkedField",name:"notifications",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"emailLindyAwaitingConfirmation",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"emailLindyAuthRequest",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"emailLindyError",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"emailLindyMessage",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"emailWeeklyDigest",storageKey:null}],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"UpdateNotificationSettingMutationIdentityFragment"},{args:null,kind:"FragmentSpread",name:"SettingsCommonLayout_Identity"}],type:"Identity",abstractKey:null};t.hash="e60dbae5c29eccdd153d8787347faee7";let i={fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UserNotificationSettingsContentSectionPrefetchQuery",selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"me",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"UserNotificationSettingsContentSection_Identity"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"UserNotificationSettingsContentSectionPrefetchQuery",selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"me",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"enabledFeatureFlags",storageKey:null},{alias:null,args:null,concreteType:"Settings",kind:"LinkedField",name:"settings",plural:!1,selections:[{alias:null,args:null,concreteType:"NotificationSettings",kind:"LinkedField",name:"notifications",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"emailLindyAwaitingConfirmation",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"emailLindyAuthRequest",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"emailLindyError",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"emailLindyMessage",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"emailWeeklyDigest",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null}],storageKey:null}]},params:{cacheID:"a561a31dff9d17d1189eb1ede43b5b64",id:null,metadata:{},name:"UserNotificationSettingsContentSectionPrefetchQuery",operationKind:"query",text:"query UserNotificationSettingsContentSectionPrefetchQuery {\n  me {\n    ...UserNotificationSettingsContentSection_Identity\n    nodeId\n  }\n}\n\nfragment SettingsCommonLayout_Identity on Identity {\n  enabledFeatureFlags\n}\n\nfragment UpdateNotificationSettingMutationIdentityFragment on Identity {\n  id\n  settings {\n    notifications {\n      emailLindyError\n      emailLindyMessage\n      emailWeeklyDigest\n      emailLindyAwaitingConfirmation\n      emailLindyAuthRequest\n    }\n  }\n}\n\nfragment UserNotificationSettingsContentSection_Identity on Identity {\n  id\n  enabledFeatureFlags\n  settings {\n    notifications {\n      emailLindyAwaitingConfirmation\n      emailLindyAuthRequest\n      emailLindyError\n      emailLindyMessage\n      emailWeeklyDigest\n    }\n  }\n  ...UpdateNotificationSettingMutationIdentityFragment\n  ...SettingsCommonLayout_Identity\n}\n"}};i.hash="26a71306d989ad4b6c08d6a89a77186a";var s=l(32588),r=l(70732),o=l(66213),d=l(91780),u=l(97339),c=l(49117),g=l(1526),m=l(87465),y=l(75935),p=l(72754);let f=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"UpdateNotificationSettingMutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"updateNotificationSetting",plural:!1,selections:[l,a,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UpdateNotificationSettingOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"identity",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"UpdateNotificationSettingMutationIdentityFragment"}],storageKey:null}],storageKey:null}],type:"MutationUpdateNotificationSettingSuccess",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"UpdateNotificationSettingMutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"updateNotificationSetting",plural:!1,selections:[l,a,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UpdateNotificationSettingOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"identity",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"Settings",kind:"LinkedField",name:"settings",plural:!1,selections:[{alias:null,args:null,concreteType:"NotificationSettings",kind:"LinkedField",name:"notifications",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"emailLindyError",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"emailLindyMessage",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"emailWeeklyDigest",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"emailLindyAwaitingConfirmation",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"emailLindyAuthRequest",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationUpdateNotificationSettingSuccess",abstractKey:null}],storageKey:null}]},params:{cacheID:"9bddd279179e79240bba40726b956022",id:null,metadata:{},name:"UpdateNotificationSettingMutation",operationKind:"mutation",text:"mutation UpdateNotificationSettingMutation(\n  $input: UpdateNotificationSettingInput!\n) {\n  updateNotificationSetting(input: $input) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationUpdateNotificationSettingSuccess {\n      data {\n        identity {\n          ...UpdateNotificationSettingMutationIdentityFragment\n          nodeId\n        }\n      }\n    }\n  }\n}\n\nfragment UpdateNotificationSettingMutationIdentityFragment on Identity {\n  id\n  settings {\n    notifications {\n      emailLindyError\n      emailLindyMessage\n      emailWeeklyDigest\n      emailLindyAwaitingConfirmation\n      emailLindyAuthRequest\n    }\n  }\n}\n"}}}();f.hash="443efddc15c32c142c3202700236a462";let h={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UpdateNotificationSettingMutationIdentityFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"Settings",kind:"LinkedField",name:"settings",plural:!1,selections:[{alias:null,args:null,concreteType:"NotificationSettings",kind:"LinkedField",name:"notifications",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"emailLindyError",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"emailLindyMessage",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"emailWeeklyDigest",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"emailLindyAwaitingConfirmation",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"emailLindyAuthRequest",storageKey:null}],storageKey:null}],storageKey:null}],type:"Identity",abstractKey:null};h.hash="1d9235aa8e0de25a846d295a8e69f8a5";var k=l(85680),F=l(20923),x=l(94344),v=l(79124);l(97244);var b=l(14306);function S(e){let n=(0,v.useFragment)(t,e.identityFragmentRef);(0,m.JY)(),(0,c.in)(),(0,p.JO)(),(0,g.$h)(),(0,y.bB)();let l=n.enabledFeatureFlags.includes(b.T.NotificationSettingsPage),[i]=function(e){let n=(0,v.useFragment)(h,e),[l,a]=(0,v.useMutation)(f),t=(0,k.aV)(),i=(0,x.useCallback)(()=>{t({level:"danger",label:"Error",message:"Failed to update notification setting",duration:3e3})},[t]),s=(0,x.useCallback)(e=>{l({variables:e.variables,optimisticResponse:function(e,n){let l=(0,F.F)("Identity",e.input.identityId),a=n.settings.notifications;return{updateNotificationSetting:{__typename:"MutationUpdateNotificationSettingSuccess",__isError:"MutationUpdateNotificationSettingSuccess",message:"",data:{identity:{id:n.id,nodeId:l,settings:{notifications:{emailLindyAwaitingConfirmation:a.emailLindyAwaitingConfirmation,emailLindyAuthRequest:a.emailLindyAuthRequest,emailLindyError:a.emailLindyError,emailLindyMessage:a.emailLindyMessage,emailWeeklyDigest:a.emailWeeklyDigest,[e.input.setting]:e.input.enabled}}}}}}}(e.variables,n),onError:i,onCompleted:e=>{e.updateNotificationSetting.message&&i()}})},[l,n,i]);return(0,x.useMemo)(()=>[s,a],[s,a])}(n),r=(0,x.useCallback)((e,l)=>{i({variables:{input:{identityId:n.id,setting:e,enabled:l}}})},[i,n.id]),o=(0,x.useCallback)(e=>n=>{r(e,n)},[r]);return l?(0,a.jsx)(u.$,{identityFragmentRef:n,children:l&&(0,a.jsx)("main",{className:"mx-auto flex flex-col items-center gap-3 px-6 py-16",children:(0,a.jsx)(d.$,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mb-5 font-semibold text-slate-12",children:"Manage your email notifications"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(T,{title:"Confirmation",description:"Get notified when Lindy needs your confirmation",enabled:n.settings.notifications.emailLindyAwaitingConfirmation,onEnabledChange:o("emailLindyAwaitingConfirmation")}),(0,a.jsx)(T,{title:"Authentication Requests",description:"Get notified when Lindy needs authentication",enabled:n.settings.notifications.emailLindyAuthRequest,onEnabledChange:o("emailLindyAuthRequest")}),(0,a.jsx)(T,{title:"Errors",description:"Get notified when Lindy encounters an error",enabled:n.settings.notifications.emailLindyError,onEnabledChange:o("emailLindyError")}),(0,a.jsx)(T,{title:"Messages",description:"Get notified when Lindy sends you a message",enabled:n.settings.notifications.emailLindyMessage,onEnabledChange:o("emailLindyMessage")}),(0,a.jsx)(T,{title:"Weekly Activity Summary",description:"Receive weekly summaries of your task activity",enabled:n.settings.notifications.emailWeeklyDigest,onEnabledChange:o("emailWeeklyDigest")})]})]})})})}):(0,a.jsx)(s.r,{to:"/user-settings/general"})}function T(e){let{title:n,description:l,enabled:t,onEnabledChange:i}=e;return(0,a.jsxs)("div",{className:"flex justify-between gap-2",children:[(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("h3",{className:"font-semibold text-slate-12",children:n}),(0,a.jsx)("p",{className:"text-slate-9",children:l})]}),(0,a.jsx)(r.d,{checked:t,onChange:i})]})}function K(){(0,o.f)(i)}},75935:(e,n,l)=>{"use strict";l.d(n,{f:()=>L,bB:()=>_});var a=l(50612);let t=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UserPhoneSettingsContentSection_Identity",selections:[e,{alias:null,args:null,concreteType:"ProvisionedPhoneNumber",kind:"LinkedField",name:"provisionedPhoneNumbers",plural:!0,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"phoneNumber",storageKey:null},{args:null,kind:"FragmentSpread",name:"PhoneNumberStatusItem_PhoneNumber"}],storageKey:null},{args:null,kind:"FragmentSpread",name:"ReleasePhoneNumberMutationFragment"},{args:null,kind:"FragmentSpread",name:"SettingsCommonLayout_Identity"}],type:"Identity",abstractKey:null}}();t.hash="c6cc6d56dcdb76fa8ef96db80cac360b";let i=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},t={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"isDisabled",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"phoneNumber",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"UserPhoneSettingsContentSectionDisconnectPhoneNumberMutation",selections:[{alias:"mutationResult",args:n,concreteType:null,kind:"LinkedField",name:"disconnectPhoneNumber",plural:!1,selections:[l,a,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DisconnectPhoneNumberOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:[t,{alias:null,args:null,concreteType:"ProvisionedPhoneNumber",kind:"LinkedField",name:"provisionedPhoneNumbers",plural:!0,selections:[i,s,r,{args:null,kind:"FragmentSpread",name:"PhoneNumberStatusItem_PhoneNumber"}],storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationDisconnectPhoneNumberSuccess",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"UserPhoneSettingsContentSectionDisconnectPhoneNumberMutation",selections:[{alias:"mutationResult",args:n,concreteType:null,kind:"LinkedField",name:"disconnectPhoneNumber",plural:!1,selections:[l,a,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DisconnectPhoneNumberOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:[t,{alias:null,args:null,concreteType:"ProvisionedPhoneNumber",kind:"LinkedField",name:"provisionedPhoneNumbers",plural:!0,selections:[i,s,r,{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"callReceivedTriggerInUseByAgent",plural:!1,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},t],storageKey:null},t],storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationDisconnectPhoneNumberSuccess",abstractKey:null}],storageKey:null}]},params:{cacheID:"88024c55d40d85e16f1d0db61bc9c7ed",id:null,metadata:{},name:"UserPhoneSettingsContentSectionDisconnectPhoneNumberMutation",operationKind:"mutation",text:"mutation UserPhoneSettingsContentSectionDisconnectPhoneNumberMutation(\n  $input: DisconnectPhoneNumberInput!\n) {\n  mutationResult: disconnectPhoneNumber(input: $input) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationDisconnectPhoneNumberSuccess {\n      data {\n        owner {\n          nodeId\n          provisionedPhoneNumbers {\n            id\n            isDisabled\n            phoneNumber\n            ...PhoneNumberStatusItem_PhoneNumber\n            nodeId\n          }\n        }\n      }\n    }\n  }\n}\n\nfragment PhoneNumberStatusItem_PhoneNumber on ProvisionedPhoneNumber {\n  phoneNumber\n  isDisabled\n  callReceivedTriggerInUseByAgent {\n    id\n    name\n    nodeId\n  }\n}\n"}}}();i.hash="6fb55a2157f18d8ca681ca729c821a2d";let s=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UserPhoneSettingsContentSectionPrefetchQuery",selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"me",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"UserPhoneSettingsContentSection_Identity"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"UserPhoneSettingsContentSectionPrefetchQuery",selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"me",plural:!1,selections:[e,{alias:null,args:null,concreteType:"ProvisionedPhoneNumber",kind:"LinkedField",name:"provisionedPhoneNumbers",plural:!0,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"phoneNumber",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDisabled",storageKey:null},{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"callReceivedTriggerInUseByAgent",plural:!1,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},n],storageKey:null},n],storageKey:null},n,{alias:null,args:null,kind:"ScalarField",name:"enabledFeatureFlags",storageKey:null}],storageKey:null}]},params:{cacheID:"420f37d664eb50b4e9a7a83bcc6b918e",id:null,metadata:{},name:"UserPhoneSettingsContentSectionPrefetchQuery",operationKind:"query",text:"query UserPhoneSettingsContentSectionPrefetchQuery {\n  me {\n    ...UserPhoneSettingsContentSection_Identity\n    nodeId\n  }\n}\n\nfragment PhoneNumberStatusItem_PhoneNumber on ProvisionedPhoneNumber {\n  phoneNumber\n  isDisabled\n  callReceivedTriggerInUseByAgent {\n    id\n    name\n    nodeId\n  }\n}\n\nfragment ReleasePhoneNumberMutationFragment on Identity {\n  id\n  nodeId\n  provisionedPhoneNumbers {\n    id\n    nodeId\n  }\n}\n\nfragment SettingsCommonLayout_Identity on Identity {\n  enabledFeatureFlags\n}\n\nfragment UserPhoneSettingsContentSection_Identity on Identity {\n  id\n  provisionedPhoneNumbers {\n    id\n    phoneNumber\n    ...PhoneNumberStatusItem_PhoneNumber\n    nodeId\n  }\n  ...ReleasePhoneNumberMutationFragment\n  ...SettingsCommonLayout_Identity\n}\n"}}}();s.hash="e92df5d83e58d39b91f52e7993fd8f9b";var r=l(60171),o=l(15727),d=l(85680),u=l(66213),c=l(91780),g=l(97339),m=l(49117),y=l(1526),p=l(87465),f=l(32977),h=l(72754),k=l(67434),F=l(94344),x=l(79124);l(97244);let v={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PhoneNumberStatusItem_PhoneNumber",selections:[{alias:null,args:null,kind:"ScalarField",name:"phoneNumber",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDisabled",storageKey:null},{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"callReceivedTriggerInUseByAgent",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],type:"ProvisionedPhoneNumber",abstractKey:null};v.hash="d7b2a129927519e3cce4540a909a2464";var b=l(91141),S=l(1261),T=l(42717),K=l(67373),I=l(25919);function C(e){var n;let{phoneFragmentRef:l,onDisconnect:t,onRelease:i}=e,s=(0,x.useFragment)(v,l),r=(0,F.useCallback)(()=>{s.callReceivedTriggerInUseByAgent&&t({phoneNumber:s.phoneNumber,usedByAgent:{agentDefinitionId:s.callReceivedTriggerInUseByAgent.id,name:s.callReceivedTriggerInUseByAgent.name}})},[t,s]),o=(0,F.useCallback)(()=>i(s),[i,s]);return(0,a.jsxs)("div",{className:"grid grid-cols-3 items-center",children:[(0,a.jsx)("div",{className:"text-slate-12",children:s.phoneNumber}),(0,a.jsx)("div",{className:"text-slate-12",children:(null===(n=s.callReceivedTriggerInUseByAgent)||void 0===n?void 0:n.name)||"Not in use"}),(0,a.jsx)(b.W1,{as:"div",className:"relative",children:e=>{let{open:n}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.W1.Button,{as:"div",className:"flex",children:(0,a.jsx)(K.$,{level:"text",fullWidthContent:!0,className:"w-36 border-transparent px-3 py-1 shadow-none hover:border-slate-4",trailingIcon:(0,a.jsx)(S.A,{className:(0,I.QP)("size-4 text-slate-11 transition-transform",n&&"rotate-180")}),children:(0,a.jsxs)("div",{className:"flex w-full items-center gap-2",children:[(0,a.jsx)("span",{className:"size-2 rounded-full ".concat(s.isDisabled?"bg-red-400":s.callReceivedTriggerInUseByAgent?"bg-yellow-400":"bg-green-400")}),(0,a.jsx)("p",{className:"flex-1 text-left text-slate-12",children:s.isDisabled?"Disabled":s.callReceivedTriggerInUseByAgent?"In Use":"Available"})]})})}),(0,a.jsxs)(T._6,{open:n,children:[s.callReceivedTriggerInUseByAgent&&(0,a.jsx)(A,{onClick:r,children:(0,a.jsx)("span",{className:"text-slate-12",children:"Disconnect"})}),(0,a.jsx)(A,{onClick:o,children:(0,a.jsx)("span",{className:"text-red-500",children:"Release"})})]})]})}})]})}function A(e){let{onClick:n,children:l}=e;return(0,a.jsx)(b.W1.Item,{children:e=>{let{active:t}=e;return(0,a.jsx)("button",{className:(0,I.QP)("flex w-full items-center gap-3 rounded-md p-2 px-2.5 text-sm text-slate-12",t&&"bg-slate-3 dark:bg-slate-5"),onClick:n,children:l})}})}let j=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ReleasePhoneNumberMutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"releasePhoneNumber",plural:!1,selections:[l,a,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ReleasePhoneNumberOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"ReleasePhoneNumberMutationFragment"}],storageKey:null}],storageKey:null}],type:"MutationReleasePhoneNumberSuccess",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ReleasePhoneNumberMutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"releasePhoneNumber",plural:!1,selections:[l,a,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ReleasePhoneNumberOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:[t,i,{alias:null,args:null,concreteType:"ProvisionedPhoneNumber",kind:"LinkedField",name:"provisionedPhoneNumbers",plural:!0,selections:[t,i],storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationReleasePhoneNumberSuccess",abstractKey:null}],storageKey:null}]},params:{cacheID:"faf7dffdf8f409d2bde282da5e2ee674",id:null,metadata:{},name:"ReleasePhoneNumberMutation",operationKind:"mutation",text:"mutation ReleasePhoneNumberMutation(\n  $input: ReleasePhoneNumberInput!\n) {\n  releasePhoneNumber(input: $input) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationReleasePhoneNumberSuccess {\n      data {\n        owner {\n          ...ReleasePhoneNumberMutationFragment\n          nodeId\n        }\n      }\n    }\n  }\n}\n\nfragment ReleasePhoneNumberMutationFragment on Identity {\n  id\n  nodeId\n  provisionedPhoneNumbers {\n    id\n    nodeId\n  }\n}\n"}}}();j.hash="49fa83b44528c482890154012b212fc7";let N=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ReleasePhoneNumberMutationFragment",selections:[e,n,{alias:null,args:null,concreteType:"ProvisionedPhoneNumber",kind:"LinkedField",name:"provisionedPhoneNumbers",plural:!0,selections:[e,n],storageKey:null}],type:"Identity",abstractKey:null}}();function L(e){var n;let l=(0,x.useFragment)(t,e.identityFragmentRef);(0,p.JY)(),(0,m.in)(),(0,h.JO)(),(0,y.$h)(),(0,f.I4)();let[s,u]=(0,F.useState)(null),[v,b]=(0,F.useState)(null),S=(0,d.aV)(),T=(0,F.useCallback)(e=>{S({id:"lindy-phone-number-purchase-disconnect-error",level:"danger",label:"Error",message:e,duration:3e3})},[S]),{isOpen:K,onOpen:I,onClose:A}=(0,o.j)(!1),{isOpen:L,onOpen:_,onClose:w}=(0,o.j)(!1),R=(0,F.useCallback)(e=>{u(e),I()},[I]),D=(0,F.useCallback)(e=>{b(e),_()},[_]),[P]=(0,x.useMutation)(i),M=(0,F.useCallback)(()=>{s&&s.usedByAgent&&P({variables:{input:{phoneNumber:s.phoneNumber,agentDefinitionId:s.usedByAgent.agentDefinitionId}},onError:e=>{k.Cp(e),T(e.message)},onCompleted:()=>{A(),u(null)}})},[s,A,P,T]),[E]=function(e){let n=(0,x.useFragment)(N,e),l=(0,d.aV)(),a=(0,F.useCallback)(e=>{l({id:"release-phone-number-error",level:"danger",label:"Error",message:null!=e?e:"An unexpected error occurred while trying to release the phone number",duration:3e3})},[l]),[t,i]=(0,x.useMutation)(j),s=(0,F.useCallback)(e=>{var l;t({variables:e.variables,optimisticResponse:(l=e.variables,{releasePhoneNumber:{__typename:"MutationReleasePhoneNumberSuccess",__isError:"MutationReleasePhoneNumberSuccess",message:"",data:{owner:{id:n.id,nodeId:n.nodeId,provisionedPhoneNumbers:n.provisionedPhoneNumbers.filter(e=>e.id!==l.input.id)}}}}),onError:e=>{k.Cp(e),a()},onCompleted:n=>{var l;if("Error"===n.releasePhoneNumber.__typename){a(n.releasePhoneNumber.message);return}null===(l=e.onSuccess)||void 0===l||l.call(e)}})},[t,a,n]);return(0,F.useMemo)(()=>[s,i],[s,i])}(l),V=(0,F.useCallback)(()=>{var e;if(!v)return;let n=null===(e=l.provisionedPhoneNumbers)||void 0===e?void 0:e.find(e=>e.phoneNumber===v.phoneNumber);n&&(E({variables:{input:{id:n.id}}}),w(),b(null))},[v,l.provisionedPhoneNumbers,E,w]);return(0,a.jsxs)(g.$,{identityFragmentRef:l,children:[(0,a.jsx)("main",{className:"mx-auto flex flex-col items-center gap-3 px-6 py-16",children:(0,a.jsx)(c.$,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsx)("h2",{className:"text-base font-semibold text-slate-12",children:"Phone numbers"}),(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 text-sm text-gray-500",children:[(0,a.jsx)("div",{children:"Number"}),(0,a.jsx)("div",{children:"Used by"}),(0,a.jsx)("div",{children:"Status"})]}),null===(n=l.provisionedPhoneNumbers)||void 0===n?void 0:n.map(e=>(0,a.jsx)(C,{phoneFragmentRef:e,onDisconnect:R,onRelease:D},e.id))]})]})})}),s&&(0,a.jsx)(r.u,{open:K,onCancel:A,onConfirm:M,title:"Disconnect Number?",text:(0,a.jsxs)(a.Fragment,{children:["This number is currently being used by"," ",(0,a.jsx)("span",{className:"font-semibold",children:s.usedByAgent.name}),", disconnecting the number could prevent the workflow from running as expected."]}),level:"danger",confirmLabel:"Disconnect"}),v&&(0,a.jsx)(r.u,{open:L,onCancel:w,onConfirm:V,title:"Release Number?",text:v.usedByAgent?(0,a.jsxs)(a.Fragment,{children:["This number is currently being used by"," ",(0,a.jsx)("span",{className:"font-semibold",children:v.usedByAgent.name}),", releasing the number could prevent the workflow from running as expected. You won't be able to get this number back after releasing it."]}):"You won't be able to get this number back after releasing it.",level:"danger",confirmLabel:"Release"})]})}function _(){(0,u.f)(s)}N.hash="7f7466be6efed8265079605183edf432"},72754:(e,n,l)=>{"use strict";l.d(n,{d7:()=>f,JO:()=>k,aE:()=>h});var a=l(50612);let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UserSpeechToTextSettingsContentSection_Identity",selections:[{args:null,kind:"FragmentSpread",name:"SpeechToTextSettingsMe"},{args:null,kind:"FragmentSpread",name:"SettingsCommonLayout_Identity"}],type:"Identity",abstractKey:null};t.hash="52f8d3e663949f17a25c9515bf1161ef";let i={fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UserSpeechToTextSettingsContentSectionQuery",selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"me",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"UserSpeechToTextSettingsContentSection_Identity"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"UserSpeechToTextSettingsContentSectionQuery",selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"me",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isMedicalScribe",storageKey:null},{alias:null,args:null,concreteType:"SubscriptionInfo",kind:"LinkedField",name:"billingInfo",plural:!1,selections:[{alias:null,args:null,concreteType:"CreditsInfo",kind:"LinkedField",name:"creditsInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"creditAllocation",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"enabledFeatureFlags",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null}],storageKey:null}]},params:{cacheID:"28793deb66e7360086b7ffcecb230c97",id:null,metadata:{},name:"UserSpeechToTextSettingsContentSectionQuery",operationKind:"query",text:"query UserSpeechToTextSettingsContentSectionQuery {\n  me {\n    ...UserSpeechToTextSettingsContentSection_Identity\n    nodeId\n  }\n}\n\nfragment SettingsCommonLayout_Identity on Identity {\n  enabledFeatureFlags\n}\n\nfragment SpeechToTextSettingsMe on Identity {\n  isMedicalScribe\n  billingInfo {\n    creditsInfo {\n      creditAllocation\n    }\n  }\n}\n\nfragment UserSpeechToTextSettingsContentSection_Identity on Identity {\n  ...SpeechToTextSettingsMe\n  ...SettingsCommonLayout_Identity\n}\n"}};i.hash="8c77a471955ad6262a5a75ce6e678081";var s=l(66213),r=l(61298),o=l(91780),d=l(97339),u=l(79124);l(97244);var c=l(49117),g=l(1526),m=l(87465),y=l(32977),p=l(75935);function f(e){let n=(0,u.useFragment)(t,e.identityFragmentRef);return(0,m.JY)(),(0,c.in)(),(0,g.$h)(),(0,p.bB)(),(0,y.I4)(),(0,a.jsx)(d.$,{identityFragmentRef:n,children:(0,a.jsx)("main",{className:"mx-auto flex flex-col items-center gap-3 px-6 py-16",children:(0,a.jsx)(o.$,{className:"pt-1",children:(0,a.jsx)(r.K,{identityFragmentRef:n})})})})}let h=i;function k(){(0,s.f)(h)}},42392:(e,n,l)=>{"use strict";l.d(n,{u:()=>ni});var a=l(50612);let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RailsTestingQueryFragment",selections:[{args:null,kind:"FragmentSpread",name:"RailsTestingTaskView_Query"}],type:"Query",abstractKey:null};t.hash="621a35d7c4a2937b33e2641deed13974";let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RailsTestingAgentDefinitionFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},{args:null,kind:"FragmentSpread",name:"RailsTestingTaskView_AgentDefinition"},{args:null,kind:"FragmentSpread",name:"RailsTestingTriggerEntryPointViewAgentDefinitionFragment"},{args:null,kind:"FragmentSpread",name:"useRetryStateGraphTestRunExecutionMutation_AgentDefinition"}],type:"AgentDefinition",abstractKey:null};i.hash="5ed6daa80cb7f135dc22b1fc4097ceb8",function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RailsTestingStateGraphTestRunFragment",selections:[e,n,{alias:null,args:null,kind:"ScalarField",name:"initiallySelectedNodeId",storageKey:null},{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[e,n,{alias:null,args:null,kind:"ScalarField",name:"entryPointNodeId",storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:5e3}],concreteType:"ConversationBlocksConnection",kind:"LinkedField",name:"blocks",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationBlocksConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ConversationBlock",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"content",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"asJSON",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"blocks(first:5000)"}],storageKey:null},{alias:null,args:null,concreteType:"Trigger",kind:"LinkedField",name:"liveCaptureTrigger",plural:!1,selections:[e,n,{alias:null,args:null,kind:"ScalarField",name:"enabled",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"RailsTestingTaskView_StateGraphTestRun"},{args:null,kind:"FragmentSpread",name:"RailsTestingTriggerEntryPointViewStateGraphTestRunFragment"},{args:null,kind:"FragmentSpread",name:"useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun"}],type:"StateGraphTestRun",abstractKey:null}}().hash="eba75398bbf6962c5c74fd05919006f9";let s=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"nodeId"}],n=[{kind:"Variable",name:"id",variableName:"nodeId"}],l={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"supportsEmptyPayload",storageKey:null},{alias:null,args:null,concreteType:"TriggerTestingPolicy",kind:"LinkedField",name:"testingPolicy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"supportsSyntheticPayload",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"supportsLiveCapture",storageKey:null}],storageKey:null}],type:"TriggerDefinition",abstractKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"RailsTestingSelectedTriggerNodeDetailsQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[l],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"RailsTestingSelectedTriggerNodeDetailsQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},l,{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null}],storageKey:null}]},params:{cacheID:"43545a70c145225302910009b5cbdd58",id:null,metadata:{},name:"RailsTestingSelectedTriggerNodeDetailsQuery",operationKind:"query",text:"query RailsTestingSelectedTriggerNodeDetailsQuery(\n  $nodeId: ID!\n) {\n  node(id: $nodeId) {\n    __typename\n    ... on TriggerDefinition {\n      id\n      supportsEmptyPayload\n      testingPolicy {\n        supportsSyntheticPayload\n        supportsLiveCapture\n      }\n    }\n    nodeId\n  }\n}\n"}}}();s.hash="0537391967d5e8db63ec8e24f3dbab52";let r=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"nodeId"}],n=[{kind:"Variable",name:"id",variableName:"nodeId"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"tool",storageKey:null},s=[{kind:"Literal",name:"first",value:10}],r=[{kind:"Literal",name:"shouldRemoveFieldsHiddenFromUI",value:!0}],o={alias:null,args:r,kind:"ScalarField",name:"payload",storageKey:"payload(shouldRemoveFieldsHiddenFromUI:true)"},d={alias:null,args:null,concreteType:"TriggerShouldRunCheck",kind:"LinkedField",name:"shouldRunCheck",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"shouldRun",storageKey:null},{alias:null,args:null,concreteType:"TriggerShouldRunCheckReason",kind:"LinkedField",name:"reasons",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"softFilter",storageKey:null}],storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"llmSummary",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"RailsTestingStateGraphTestRunRefetchableFragmentRefetchQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"RailsTestingStateGraphTestRunRefetchableFragment"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"RailsTestingStateGraphTestRunRefetchableFragmentRefetchQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[l,a,{kind:"InlineFragment",selections:[t,{alias:null,args:null,kind:"ScalarField",name:"initiallySelectedNodeId",storageKey:null},{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[t,a,{alias:null,args:null,kind:"ScalarField",name:"entryPointNodeId",storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:5e3}],concreteType:"ConversationBlocksConnection",kind:"LinkedField",name:"blocks",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationBlocksConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ConversationBlock",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"content",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"asJSON",storageKey:null}],storageKey:null},a],storageKey:null}],storageKey:null}],storageKey:"blocks(first:5000)"},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,concreteType:"ConversationChannel",kind:"LinkedField",name:"openChannels",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"startingNodeId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"statefulToolKey",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"instanceKey",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdByNodeId",storageKey:null},{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[i,a,{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},a,t],storageKey:null},{alias:null,args:null,concreteType:"TriggerRunAttempt",kind:"LinkedField",name:"startingTriggerRunAttempt",plural:!1,selections:[t,a,{alias:null,args:null,kind:"ScalarField",name:"createdByExternalPayloadId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"payloadId",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Trigger",kind:"LinkedField",name:"liveCaptureTrigger",plural:!1,selections:[t,a,{alias:null,args:null,kind:"ScalarField",name:"enabled",storageKey:null},{alias:null,args:null,concreteType:"TriggerDefinition",kind:"LinkedField",name:"definition",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[i,a],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"payloadSchema",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"eventSchema",storageKey:null},{alias:null,args:null,concreteType:"TriggerTestingPolicy",kind:"LinkedField",name:"testingPolicy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"fullyProcessLiveCapturePayloads",storageKey:null}],storageKey:null},a],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"activeLiveCapturingInstructions",storageKey:null},{alias:null,args:s,concreteType:"TriggerTestingPayloadsConnection",kind:"LinkedField",name:"testingPayloads",plural:!1,selections:[{alias:null,args:null,concreteType:"TriggerTestingPayloadsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"TriggerTestingPayload",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"externalId",storageKey:null},o,d,u,a,l],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:"testingPayloads(first:10)"},{alias:null,args:s,filters:null,handle:"connection",key:"RailsTestingTriggerEntryPointView_testingPayloads",kind:"LinkedHandle",name:"testingPayloads"},{alias:null,args:[{kind:"Literal",name:"first",value:50}],concreteType:"TriggerRunAttemptsConnection",kind:"LinkedField",name:"runAttempts",plural:!1,selections:[{alias:null,args:null,concreteType:"TriggerRunAttemptsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"TriggerRunAttempt",kind:"LinkedField",name:"node",plural:!1,selections:[t,o,{alias:null,args:r,kind:"ScalarField",name:"processedPayload",storageKey:"processedPayload(shouldRemoveFieldsHiddenFromUI:true)"},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},d,u,a],storageKey:null}],storageKey:null}],storageKey:"runAttempts(first:50)"}],storageKey:null}],type:"StateGraphTestRun",abstractKey:null}],storageKey:null}]},params:{cacheID:"580243f72e7d506192a9e6431e569020",id:null,metadata:{},name:"RailsTestingStateGraphTestRunRefetchableFragmentRefetchQuery",operationKind:"query",text:"query RailsTestingStateGraphTestRunRefetchableFragmentRefetchQuery(\n  $nodeId: ID!\n) {\n  node(id: $nodeId) {\n    __typename\n    ...RailsTestingStateGraphTestRunRefetchableFragment\n    nodeId\n  }\n}\n\nfragment RailsTestingStateGraphTestRunRefetchableFragment on StateGraphTestRun {\n  id\n  nodeId\n  initiallySelectedNodeId\n  conversation {\n    id\n    nodeId\n    entryPointNodeId\n    blocks(first: 5000) {\n      edges {\n        node {\n          content {\n            __typename\n            asJSON\n          }\n          nodeId\n        }\n      }\n    }\n  }\n  liveCaptureTrigger {\n    id\n    nodeId\n    enabled\n  }\n  ...RailsTestingTaskView_StateGraphTestRun\n  ...RailsTestingTriggerEntryPointViewStateGraphTestRunFragment\n  ...useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun\n}\n\nfragment RailsTestingTaskView_StateGraphTestRun on StateGraphTestRun {\n  id\n  conversation {\n    id\n    nodeId\n    entryPointNodeId\n    status\n    openChannels {\n      startingNodeId\n      statefulToolKey\n      instanceKey\n      createdByNodeId\n      tool {\n        tool\n        nodeId\n      }\n      type\n      nodeId\n    }\n    ...useAutoUpdatePucksConversationFragment\n    blocks(first: 5000) {\n      edges {\n        node {\n          content {\n            __typename\n            asJSON\n          }\n          nodeId\n        }\n      }\n    }\n  }\n  ...useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun\n}\n\nfragment RailsTestingTriggerEntryPointViewLiveCaptureTriggerRefetchableFragment on Trigger {\n  runAttempts(first: 50) {\n    edges {\n      node {\n        id\n        payload(shouldRemoveFieldsHiddenFromUI: true)\n        processedPayload(shouldRemoveFieldsHiddenFromUI: true)\n        createdAt\n        shouldRunCheck {\n          shouldRun\n          reasons {\n            message\n          }\n          softFilter\n        }\n        llmSummary\n        nodeId\n      }\n    }\n  }\n  nodeId\n}\n\nfragment RailsTestingTriggerEntryPointViewStateGraphTestRunFragment on StateGraphTestRun {\n  id\n  liveCaptureTrigger {\n    definition {\n      name\n      tool {\n        tool\n        nodeId\n      }\n      payloadSchema\n      eventSchema\n      testingPolicy {\n        fullyProcessLiveCapturePayloads\n      }\n      nodeId\n    }\n    id\n    nodeId\n    activeLiveCapturingInstructions\n    testingPayloads(first: 10) {\n      edges {\n        node {\n          externalId\n          payload(shouldRemoveFieldsHiddenFromUI: true)\n          shouldRunCheck {\n            shouldRun\n            reasons {\n              message\n            }\n            softFilter\n          }\n          llmSummary\n          nodeId\n          __typename\n        }\n        cursor\n      }\n      pageInfo {\n        endCursor\n        hasNextPage\n      }\n    }\n    ...RailsTestingTriggerEntryPointViewLiveCaptureTriggerRefetchableFragment\n  }\n  conversation {\n    startingTriggerRunAttempt {\n      id\n      nodeId\n      createdByExternalPayloadId\n      payloadId\n    }\n    nodeId\n  }\n  nodeId\n}\n\nfragment useAutoUpdatePucksConversationFragment on Conversation {\n  id\n  openChannels {\n    id\n    startingNodeId\n    createdByNodeId\n    tool {\n      tool\n      displayName\n      nodeId\n    }\n    nodeId\n  }\n}\n\nfragment useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun on StateGraphTestRun {\n  id\n  conversation {\n    blocks(first: 5000) {\n      edges {\n        node {\n          content {\n            __typename\n            asJSON\n          }\n          nodeId\n        }\n      }\n    }\n    nodeId\n  }\n}\n"}}}();r.hash="4ab5d8fbc609edbf7c9e6b5eec5c65a8";let o=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:{refetch:{connection:null,fragmentPathInResult:["node"],operation:r,identifierInfo:{identifierField:"nodeId",identifierQueryVariableName:"id"}}},name:"RailsTestingStateGraphTestRunRefetchableFragment",selections:[e,n,{alias:null,args:null,kind:"ScalarField",name:"initiallySelectedNodeId",storageKey:null},{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[e,n,{alias:null,args:null,kind:"ScalarField",name:"entryPointNodeId",storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:5e3}],concreteType:"ConversationBlocksConnection",kind:"LinkedField",name:"blocks",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationBlocksConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ConversationBlock",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"content",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"asJSON",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"blocks(first:5000)"}],storageKey:null},{alias:null,args:null,concreteType:"Trigger",kind:"LinkedField",name:"liveCaptureTrigger",plural:!1,selections:[e,n,{alias:null,args:null,kind:"ScalarField",name:"enabled",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"RailsTestingTaskView_StateGraphTestRun"},{args:null,kind:"FragmentSpread",name:"RailsTestingTriggerEntryPointViewStateGraphTestRunFragment"},{args:null,kind:"FragmentSpread",name:"useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun"}],type:"StateGraphTestRun",abstractKey:null}}();o.hash="4ab5d8fbc609edbf7c9e6b5eec5c65a8";let d=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"triggerId"}],n=[{alias:null,args:[{kind:"Variable",name:"triggerId",variableName:"triggerId"}],concreteType:"Trigger",kind:"LinkedField",name:"reenableLiveCaptureTrigger",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"enabled",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"RailsTestingReenableLiveCaptureTriggerMutation",selections:n,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"RailsTestingReenableLiveCaptureTriggerMutation",selections:n},params:{cacheID:"439a7dd395b2410460217751aab508fb",id:null,metadata:{},name:"RailsTestingReenableLiveCaptureTriggerMutation",operationKind:"mutation",text:"mutation RailsTestingReenableLiveCaptureTriggerMutation(\n  $triggerId: ID!\n) {\n  reenableLiveCaptureTrigger(triggerId: $triggerId) {\n    id\n    nodeId\n    enabled\n  }\n}\n"}}}();d.hash="47723daaf1b3678f4b0603c8e7d895be";var u=l(3641),c=l(84370),g=l(79271),m=l(72679),y=l(31284),p=l(36441),f=l(94344),h=l(32419),k=l(71792),F=l(23664);function x(e,n){var l,a,t,i;h.z.capture("testing_select_node",{mode:n,...(0,k.HY)(e)?{kind:"action","action.tool":null===(l=e.action)||void 0===l?void 0:l.tool,"action.name":null===(a=e.action)||void 0===a?void 0:a.action}:(0,k.Eq)(e)?{kind:"trigger","trigger.tool":F.h6.Channels,"trigger.name":"messageReceived"}:(0,k.B2)(e)?{kind:"trigger","trigger.tool":null===(t=e.trigger)||void 0===t?void 0:t.tool,"trigger.name":null===(i=e.trigger)||void 0===i?void 0:i.name}:{kind:"trigger"}})}var v=l(25054),b=l(8178),S=l(93481),T=l(38102),K=l(51580),I=l(20923),C=l(76971),A=l(79124);function j(e,n){let l=(0,A.useRelayEnvironment)(),a=n&&(0,I.F)(e,n);(0,K.S)(C.B.graphQLNode,"invalidate",a,()=>{(0,A.commitLocalUpdate)(l,e=>{if(!a)return;let n=e.get(a);n&&n.invalidateRecord()})})}var N=l(34698),L=l(13268),_=l(91777),w=l(9187),R=l(61268),D=l(67434),P=l(45785),M=l(8678),E=l(25919);let V=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useRetryStateGraphTestRunExecutionMutation_AgentDefinition",selections:[e,{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:[e],storageKey:null}],type:"AgentDefinition",abstractKey:null}}();V.hash="949b54cfada94d82cb0c80e8c6fe8816";let G={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"first",value:5e3}],concreteType:"ConversationBlocksConnection",kind:"LinkedField",name:"blocks",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationBlocksConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ConversationBlock",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"content",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"asJSON",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"blocks(first:5000)"}],storageKey:null}],type:"StateGraphTestRun",abstractKey:null};G.hash="f7af8f9286da83872cf8c2ce99870978";var B=l(85680);let O=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},t=[a],i={kind:"InlineFragment",selections:t,type:"Error",abstractKey:"__isError"},s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"level",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"entityType",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},c={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"field",storageKey:null}],type:"StateGraphValidationConfigureIssue",abstractKey:null},g={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ValidationFieldError",kind:"LinkedField",name:"fieldErrors",plural:!0,selections:t,storageKey:null}],type:"ValidationError",abstractKey:null},m={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"initiallySelectedNodeId",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"entryPointNodeId",storageKey:null},f=[{kind:"Literal",name:"first",value:5e3}],h={alias:null,args:null,kind:"ScalarField",name:"asJSON",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"enabled",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"tool",storageKey:null},x=[{kind:"Literal",name:"first",value:10}],v=[{kind:"Literal",name:"shouldRemoveFieldsHiddenFromUI",value:!0}],b={alias:null,args:v,kind:"ScalarField",name:"payload",storageKey:"payload(shouldRemoveFieldsHiddenFromUI:true)"},S={alias:null,args:null,concreteType:"TriggerShouldRunCheck",kind:"LinkedField",name:"shouldRunCheck",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"shouldRun",storageKey:null},{alias:null,args:null,concreteType:"TriggerShouldRunCheckReason",kind:"LinkedField",name:"reasons",plural:!0,selections:t,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"softFilter",storageKey:null}],storageKey:null},T={alias:null,args:null,kind:"ScalarField",name:"llmSummary",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"RetryStateGraphTestRunExecutionMutation",selections:[{alias:"mutationResult",args:n,concreteType:null,kind:"LinkedField",name:"retryStateGraphTestRunExecution",plural:!1,selections:[l,i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"issues",plural:!0,selections:[s,r,o,d,u,a,c],storageKey:null}],type:"StateGraphValidationError",abstractKey:null},g,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"RetryStateGraphTestRunExecutionOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"StateGraphTestRun",kind:"LinkedField",name:"stateGraphTestRun",plural:!1,selections:[s,m,y,{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[s,m,p,{alias:null,args:f,concreteType:"ConversationBlocksConnection",kind:"LinkedField",name:"blocks",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationBlocksConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ConversationBlock",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"content",plural:!1,selections:[h],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"blocks(first:5000)"}],storageKey:null},{alias:null,args:null,concreteType:"Trigger",kind:"LinkedField",name:"liveCaptureTrigger",plural:!1,selections:[s,m,k],storageKey:null},{args:null,kind:"FragmentSpread",name:"RailsTestingTaskView_StateGraphTestRun"},{args:null,kind:"FragmentSpread",name:"RailsTestingTriggerEntryPointViewStateGraphTestRunFragment"},{args:null,kind:"FragmentSpread",name:"useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun"}],storageKey:null}],storageKey:null}],type:"MutationRetryStateGraphTestRunExecutionSuccess",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"RetryStateGraphTestRunExecutionMutation",selections:[{alias:"mutationResult",args:n,concreteType:null,kind:"LinkedField",name:"retryStateGraphTestRunExecution",plural:!1,selections:[l,i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"issues",plural:!0,selections:[l,s,r,o,d,u,a,c],storageKey:null}],type:"StateGraphValidationError",abstractKey:null},g,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"RetryStateGraphTestRunExecutionOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"StateGraphTestRun",kind:"LinkedField",name:"stateGraphTestRun",plural:!1,selections:[s,m,y,{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[s,m,p,{alias:null,args:f,concreteType:"ConversationBlocksConnection",kind:"LinkedField",name:"blocks",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationBlocksConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ConversationBlock",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"content",plural:!1,selections:[l,h],storageKey:null},m],storageKey:null}],storageKey:null}],storageKey:"blocks(first:5000)"},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,concreteType:"ConversationChannel",kind:"LinkedField",name:"openChannels",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"startingNodeId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"statefulToolKey",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"instanceKey",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdByNodeId",storageKey:null},{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[F,m,{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null},r,m,s],storageKey:null},{alias:null,args:null,concreteType:"TriggerRunAttempt",kind:"LinkedField",name:"startingTriggerRunAttempt",plural:!1,selections:[s,m,{alias:null,args:null,kind:"ScalarField",name:"createdByExternalPayloadId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"payloadId",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Trigger",kind:"LinkedField",name:"liveCaptureTrigger",plural:!1,selections:[s,m,k,{alias:null,args:null,concreteType:"TriggerDefinition",kind:"LinkedField",name:"definition",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[F,m],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"payloadSchema",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"eventSchema",storageKey:null},{alias:null,args:null,concreteType:"TriggerTestingPolicy",kind:"LinkedField",name:"testingPolicy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"fullyProcessLiveCapturePayloads",storageKey:null}],storageKey:null},m],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"activeLiveCapturingInstructions",storageKey:null},{alias:null,args:x,concreteType:"TriggerTestingPayloadsConnection",kind:"LinkedField",name:"testingPayloads",plural:!1,selections:[{alias:null,args:null,concreteType:"TriggerTestingPayloadsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"TriggerTestingPayload",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"externalId",storageKey:null},b,S,T,m,l],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:"testingPayloads(first:10)"},{alias:null,args:x,filters:null,handle:"connection",key:"RailsTestingTriggerEntryPointView_testingPayloads",kind:"LinkedHandle",name:"testingPayloads"},{alias:null,args:[{kind:"Literal",name:"first",value:50}],concreteType:"TriggerRunAttemptsConnection",kind:"LinkedField",name:"runAttempts",plural:!1,selections:[{alias:null,args:null,concreteType:"TriggerRunAttemptsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"TriggerRunAttempt",kind:"LinkedField",name:"node",plural:!1,selections:[s,b,{alias:null,args:v,kind:"ScalarField",name:"processedPayload",storageKey:"processedPayload(shouldRemoveFieldsHiddenFromUI:true)"},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},S,T,m],storageKey:null}],storageKey:null}],storageKey:"runAttempts(first:50)"}],storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationRetryStateGraphTestRunExecutionSuccess",abstractKey:null}],storageKey:null}]},params:{cacheID:"f1bb5ac1dd330290abc59612bf844674",id:null,metadata:{},name:"RetryStateGraphTestRunExecutionMutation",operationKind:"mutation",text:"mutation RetryStateGraphTestRunExecutionMutation(\n  $input: RetryStateGraphTestRunExecutionInput!\n) {\n  mutationResult: retryStateGraphTestRunExecution(input: $input) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on StateGraphValidationError {\n      issues {\n        __typename\n        id\n        type\n        level\n        entityType\n        label\n        message\n        ... on StateGraphValidationConfigureIssue {\n          field\n        }\n      }\n    }\n    ... on ValidationError {\n      fieldErrors {\n        message\n      }\n    }\n    ... on MutationRetryStateGraphTestRunExecutionSuccess {\n      data {\n        stateGraphTestRun {\n          id\n          nodeId\n          initiallySelectedNodeId\n          conversation {\n            id\n            nodeId\n            entryPointNodeId\n            blocks(first: 5000) {\n              edges {\n                node {\n                  content {\n                    __typename\n                    asJSON\n                  }\n                  nodeId\n                }\n              }\n            }\n          }\n          liveCaptureTrigger {\n            id\n            nodeId\n            enabled\n          }\n          ...RailsTestingTaskView_StateGraphTestRun\n          ...RailsTestingTriggerEntryPointViewStateGraphTestRunFragment\n          ...useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun\n        }\n      }\n    }\n  }\n}\n\nfragment RailsTestingTaskView_StateGraphTestRun on StateGraphTestRun {\n  id\n  conversation {\n    id\n    nodeId\n    entryPointNodeId\n    status\n    openChannels {\n      startingNodeId\n      statefulToolKey\n      instanceKey\n      createdByNodeId\n      tool {\n        tool\n        nodeId\n      }\n      type\n      nodeId\n    }\n    ...useAutoUpdatePucksConversationFragment\n    blocks(first: 5000) {\n      edges {\n        node {\n          content {\n            __typename\n            asJSON\n          }\n          nodeId\n        }\n      }\n    }\n  }\n  ...useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun\n}\n\nfragment RailsTestingTriggerEntryPointViewLiveCaptureTriggerRefetchableFragment on Trigger {\n  runAttempts(first: 50) {\n    edges {\n      node {\n        id\n        payload(shouldRemoveFieldsHiddenFromUI: true)\n        processedPayload(shouldRemoveFieldsHiddenFromUI: true)\n        createdAt\n        shouldRunCheck {\n          shouldRun\n          reasons {\n            message\n          }\n          softFilter\n        }\n        llmSummary\n        nodeId\n      }\n    }\n  }\n  nodeId\n}\n\nfragment RailsTestingTriggerEntryPointViewStateGraphTestRunFragment on StateGraphTestRun {\n  id\n  liveCaptureTrigger {\n    definition {\n      name\n      tool {\n        tool\n        nodeId\n      }\n      payloadSchema\n      eventSchema\n      testingPolicy {\n        fullyProcessLiveCapturePayloads\n      }\n      nodeId\n    }\n    id\n    nodeId\n    activeLiveCapturingInstructions\n    testingPayloads(first: 10) {\n      edges {\n        node {\n          externalId\n          payload(shouldRemoveFieldsHiddenFromUI: true)\n          shouldRunCheck {\n            shouldRun\n            reasons {\n              message\n            }\n            softFilter\n          }\n          llmSummary\n          nodeId\n          __typename\n        }\n        cursor\n      }\n      pageInfo {\n        endCursor\n        hasNextPage\n      }\n    }\n    ...RailsTestingTriggerEntryPointViewLiveCaptureTriggerRefetchableFragment\n  }\n  conversation {\n    startingTriggerRunAttempt {\n      id\n      nodeId\n      createdByExternalPayloadId\n      payloadId\n    }\n    nodeId\n  }\n  nodeId\n}\n\nfragment useAutoUpdatePucksConversationFragment on Conversation {\n  id\n  openChannels {\n    id\n    startingNodeId\n    createdByNodeId\n    tool {\n      tool\n      displayName\n      nodeId\n    }\n    nodeId\n  }\n}\n\nfragment useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun on StateGraphTestRun {\n  id\n  conversation {\n    blocks(first: 5000) {\n      edges {\n        node {\n          content {\n            __typename\n            asJSON\n          }\n          nodeId\n        }\n      }\n    }\n    nodeId\n  }\n}\n"}}}();O.hash="b9d0ca0f74687e744e31d7b74499e3e8";var z=l(21536),Q=l(7461),q=l(13249);async function U(e){var n,l;let{identityId:a,entityId:t,nodesMapById:i,edgesMapById:s,stateGraph:r,currentConversationBlocks:o=[],extraNodeValidators:d=[]}=e;if(!t)return{isTestable:!1,reason:"No entity ID was provided"};let u=i.get(t),c=s.get(t),g=r.edges.reduce((e,n)=>{var l;let a=null!==(l=e.get(n.from))&&void 0!==l?l:[];return a.push(n),e.set(n.from,a),e},new Map),m=r.edges.reduce((e,n)=>{var l;let a=null!==(l=e.get(n.to))&&void 0!==l?l:[];return a.push(n),e.set(n.to,a),e},new Map);if(c)return{isTestable:!1,reason:"Edges cannot be tested"};if(!u)return{isTestable:!1,reason:"The given node was not found in the graph"};let y=await q.NV.validateStateGraphIsomorphic({...r,_id:null!==(n=r._id)&&void 0!==n?n:"<unknown>",owner:a},{extraNodeValidators:d});if(!y.isValid)return{isTestable:!1,reason:"There are validation issues",issues:y.issues};if((0,Q.gj)(u)||((0,Q.wh)(u)||(0,Q.mY)(u))&&0===(null!==(l=m.get(u._id))&&void 0!==l?l:[]).length)return{isTestable:!0};let p=o.filter(N.qG);if(!p.every((e,n)=>{var l,a;let t=(null===(l=e.from)||void 0===l?void 0:l._id)?i.get(e.from._id):null,r=i.get(e.to._id);if(!r)return!1;if(!t)return!!(0===n||(0,Q.gj)(r)||(0,Q.mY)(r));let o=i.get(t._id),d=i.get(r._id);if(!o||!d)return!1;if(!e.edge)return!0;let u=null!==(a=g.get(t._id))&&void 0!==a?a:[];return!!s.get(e.edge._id.toString())&&u.some(e=>e.to===d._id)}))return{isTestable:!1,reason:"The graph changed since the last time the test conversation ran, please start from the beginning."};let f=p.map(e=>e.to._id),h=new Set(f),k=Array.from(q.NV.computeUpstreamEntities({stateGraph:r,nodeId:u._id,maxDepth:1}).nodeIds);return L.D.findLastEntry(f,e=>e===u._id)?{isTestable:!0}:k.some(e=>h.has(e))?{isTestable:!0}:{isTestable:!1,reason:"This node is not reachable from the current conversation execution path, please test the previous node."}}function W(e){let{agentDefinitionFragmentRef:n,stateGraphTestRunFragmentRef:l}=e,a=(0,b.Z)(),t=(0,P.VH)(),i=(0,B.aV)(),s=(0,z.V)(a,t),r=(0,S.Z)({stateGraph:a,reactFlowInstance:t}),o=(0,A.useFragment)(V,n),d=(0,A.useFragment)(G,l),[u,c]=(0,m.d)(O);return{retryStateGraphTestRunExecution:(0,f.useCallback)(async e=>{var n,l,t,g;let{executionId:m,nodeId:y,newBlocks:p}=e;if(!(null==d?void 0:d.id))throw Error("Could not find the current test run");if(c)throw Error("Already retrying test run");if(!y)throw Error("Could not find the node to retry");let f=await U({identityId:o.owner.id,entityId:y,stateGraph:a.serializedStateGraph,nodesMapById:new Map(a.nodes.map(e=>[e.id,e.serializedData])),edgesMapById:new Map(a.edges.map(e=>[e.id,e.serializedData])),currentConversationBlocks:null!==(g=null===(t=d.conversation)||void 0===t?void 0:null===(l=t.blocks)||void 0===l?void 0:null===(n=l.edges)||void 0===n?void 0:n.map(e=>null==e?void 0:e.node.content.asJSON).filter(e=>!!e))&&void 0!==g?g:[]});if(!f.isTestable){i({level:"danger",label:"Cannot start test",message:f.reason,duration:5e3}),s(f.issues,!0);return}let h=new Set(p.filter(N.qG).map(e=>e.to._id));a.nodes.forEach(e=>{e.updateTestingState(y===e.id?"testing":h.has(e.id)?"tested":"none")});let k=await u({variables:{input:{agentDefinitionId:o.id,stateGraphTestRunId:d.id,nodes:a.nodes.map(e=>e.serializedData),edges:a.edges.map(e=>e.serializedData),executionId:m}}});k.mutationResult.data||r(k.mutationResult)},[o,a,d,i,s,r,u,c]),isRetryingTestExecution:c}}let H=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},t=[a],i={kind:"InlineFragment",selections:t,type:"Error",abstractKey:"__isError"},s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"level",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"entityType",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},c={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"field",storageKey:null}],type:"StateGraphValidationConfigureIssue",abstractKey:null},g={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ValidationFieldError",kind:"LinkedField",name:"fieldErrors",plural:!0,selections:t,storageKey:null}],type:"ValidationError",abstractKey:null},m={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"initiallySelectedNodeId",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"entryPointNodeId",storageKey:null},f=[{kind:"Literal",name:"first",value:5e3}],h={alias:null,args:null,kind:"ScalarField",name:"asJSON",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"enabled",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"tool",storageKey:null},x=[{kind:"Literal",name:"first",value:10}],v=[{kind:"Literal",name:"shouldRemoveFieldsHiddenFromUI",value:!0}],b={alias:null,args:v,kind:"ScalarField",name:"payload",storageKey:"payload(shouldRemoveFieldsHiddenFromUI:true)"},S={alias:null,args:null,concreteType:"TriggerShouldRunCheck",kind:"LinkedField",name:"shouldRunCheck",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"shouldRun",storageKey:null},{alias:null,args:null,concreteType:"TriggerShouldRunCheckReason",kind:"LinkedField",name:"reasons",plural:!0,selections:t,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"softFilter",storageKey:null}],storageKey:null},T={alias:null,args:null,kind:"ScalarField",name:"llmSummary",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"CreateStateGraphTestRunWithActionMutation",selections:[{alias:"mutationResult",args:n,concreteType:null,kind:"LinkedField",name:"createStateGraphTestRunWithAction",plural:!1,selections:[l,i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"issues",plural:!0,selections:[s,r,o,d,u,a,c],storageKey:null}],type:"StateGraphValidationError",abstractKey:null},g,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CreateStateGraphTestRunWithActionOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"StateGraphTestRun",kind:"LinkedField",name:"stateGraphTestRun",plural:!1,selections:[s,m,y,{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[s,m,p,{alias:null,args:f,concreteType:"ConversationBlocksConnection",kind:"LinkedField",name:"blocks",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationBlocksConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ConversationBlock",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"content",plural:!1,selections:[h],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"blocks(first:5000)"}],storageKey:null},{alias:null,args:null,concreteType:"Trigger",kind:"LinkedField",name:"liveCaptureTrigger",plural:!1,selections:[s,m,k],storageKey:null},{args:null,kind:"FragmentSpread",name:"RailsTestingTaskView_StateGraphTestRun"},{args:null,kind:"FragmentSpread",name:"RailsTestingTriggerEntryPointViewStateGraphTestRunFragment"},{args:null,kind:"FragmentSpread",name:"useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun"}],storageKey:null}],storageKey:null}],type:"MutationCreateStateGraphTestRunWithActionSuccess",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"CreateStateGraphTestRunWithActionMutation",selections:[{alias:"mutationResult",args:n,concreteType:null,kind:"LinkedField",name:"createStateGraphTestRunWithAction",plural:!1,selections:[l,i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"issues",plural:!0,selections:[l,s,r,o,d,u,a,c],storageKey:null}],type:"StateGraphValidationError",abstractKey:null},g,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CreateStateGraphTestRunWithActionOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"StateGraphTestRun",kind:"LinkedField",name:"stateGraphTestRun",plural:!1,selections:[s,m,y,{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[s,m,p,{alias:null,args:f,concreteType:"ConversationBlocksConnection",kind:"LinkedField",name:"blocks",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationBlocksConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ConversationBlock",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"content",plural:!1,selections:[l,h],storageKey:null},m],storageKey:null}],storageKey:null}],storageKey:"blocks(first:5000)"},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,concreteType:"ConversationChannel",kind:"LinkedField",name:"openChannels",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"startingNodeId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"statefulToolKey",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"instanceKey",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdByNodeId",storageKey:null},{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[F,m,{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null},r,m,s],storageKey:null},{alias:null,args:null,concreteType:"TriggerRunAttempt",kind:"LinkedField",name:"startingTriggerRunAttempt",plural:!1,selections:[s,m,{alias:null,args:null,kind:"ScalarField",name:"createdByExternalPayloadId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"payloadId",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Trigger",kind:"LinkedField",name:"liveCaptureTrigger",plural:!1,selections:[s,m,k,{alias:null,args:null,concreteType:"TriggerDefinition",kind:"LinkedField",name:"definition",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[F,m],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"payloadSchema",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"eventSchema",storageKey:null},{alias:null,args:null,concreteType:"TriggerTestingPolicy",kind:"LinkedField",name:"testingPolicy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"fullyProcessLiveCapturePayloads",storageKey:null}],storageKey:null},m],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"activeLiveCapturingInstructions",storageKey:null},{alias:null,args:x,concreteType:"TriggerTestingPayloadsConnection",kind:"LinkedField",name:"testingPayloads",plural:!1,selections:[{alias:null,args:null,concreteType:"TriggerTestingPayloadsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"TriggerTestingPayload",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"externalId",storageKey:null},b,S,T,m,l],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:"testingPayloads(first:10)"},{alias:null,args:x,filters:null,handle:"connection",key:"RailsTestingTriggerEntryPointView_testingPayloads",kind:"LinkedHandle",name:"testingPayloads"},{alias:null,args:[{kind:"Literal",name:"first",value:50}],concreteType:"TriggerRunAttemptsConnection",kind:"LinkedField",name:"runAttempts",plural:!1,selections:[{alias:null,args:null,concreteType:"TriggerRunAttemptsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"TriggerRunAttempt",kind:"LinkedField",name:"node",plural:!1,selections:[s,b,{alias:null,args:v,kind:"ScalarField",name:"processedPayload",storageKey:"processedPayload(shouldRemoveFieldsHiddenFromUI:true)"},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},S,T,m],storageKey:null}],storageKey:null}],storageKey:"runAttempts(first:50)"}],storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationCreateStateGraphTestRunWithActionSuccess",abstractKey:null}],storageKey:null}]},params:{cacheID:"29eb2e0b9706dcc8c436e2436e1e76b4",id:null,metadata:{},name:"CreateStateGraphTestRunWithActionMutation",operationKind:"mutation",text:"mutation CreateStateGraphTestRunWithActionMutation(\n  $input: CreateStateGraphTestRunWithActionInput!\n) {\n  mutationResult: createStateGraphTestRunWithAction(input: $input) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on StateGraphValidationError {\n      issues {\n        __typename\n        id\n        type\n        level\n        entityType\n        label\n        message\n        ... on StateGraphValidationConfigureIssue {\n          field\n        }\n      }\n    }\n    ... on ValidationError {\n      fieldErrors {\n        message\n      }\n    }\n    ... on MutationCreateStateGraphTestRunWithActionSuccess {\n      data {\n        stateGraphTestRun {\n          id\n          nodeId\n          initiallySelectedNodeId\n          conversation {\n            id\n            nodeId\n            entryPointNodeId\n            blocks(first: 5000) {\n              edges {\n                node {\n                  content {\n                    __typename\n                    asJSON\n                  }\n                  nodeId\n                }\n              }\n            }\n          }\n          liveCaptureTrigger {\n            id\n            nodeId\n            enabled\n          }\n          ...RailsTestingTaskView_StateGraphTestRun\n          ...RailsTestingTriggerEntryPointViewStateGraphTestRunFragment\n          ...useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun\n        }\n      }\n    }\n  }\n}\n\nfragment RailsTestingTaskView_StateGraphTestRun on StateGraphTestRun {\n  id\n  conversation {\n    id\n    nodeId\n    entryPointNodeId\n    status\n    openChannels {\n      startingNodeId\n      statefulToolKey\n      instanceKey\n      createdByNodeId\n      tool {\n        tool\n        nodeId\n      }\n      type\n      nodeId\n    }\n    ...useAutoUpdatePucksConversationFragment\n    blocks(first: 5000) {\n      edges {\n        node {\n          content {\n            __typename\n            asJSON\n          }\n          nodeId\n        }\n      }\n    }\n  }\n  ...useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun\n}\n\nfragment RailsTestingTriggerEntryPointViewLiveCaptureTriggerRefetchableFragment on Trigger {\n  runAttempts(first: 50) {\n    edges {\n      node {\n        id\n        payload(shouldRemoveFieldsHiddenFromUI: true)\n        processedPayload(shouldRemoveFieldsHiddenFromUI: true)\n        createdAt\n        shouldRunCheck {\n          shouldRun\n          reasons {\n            message\n          }\n          softFilter\n        }\n        llmSummary\n        nodeId\n      }\n    }\n  }\n  nodeId\n}\n\nfragment RailsTestingTriggerEntryPointViewStateGraphTestRunFragment on StateGraphTestRun {\n  id\n  liveCaptureTrigger {\n    definition {\n      name\n      tool {\n        tool\n        nodeId\n      }\n      payloadSchema\n      eventSchema\n      testingPolicy {\n        fullyProcessLiveCapturePayloads\n      }\n      nodeId\n    }\n    id\n    nodeId\n    activeLiveCapturingInstructions\n    testingPayloads(first: 10) {\n      edges {\n        node {\n          externalId\n          payload(shouldRemoveFieldsHiddenFromUI: true)\n          shouldRunCheck {\n            shouldRun\n            reasons {\n              message\n            }\n            softFilter\n          }\n          llmSummary\n          nodeId\n          __typename\n        }\n        cursor\n      }\n      pageInfo {\n        endCursor\n        hasNextPage\n      }\n    }\n    ...RailsTestingTriggerEntryPointViewLiveCaptureTriggerRefetchableFragment\n  }\n  conversation {\n    startingTriggerRunAttempt {\n      id\n      nodeId\n      createdByExternalPayloadId\n      payloadId\n    }\n    nodeId\n  }\n  nodeId\n}\n\nfragment useAutoUpdatePucksConversationFragment on Conversation {\n  id\n  openChannels {\n    id\n    startingNodeId\n    createdByNodeId\n    tool {\n      tool\n      displayName\n      nodeId\n    }\n    nodeId\n  }\n}\n\nfragment useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun on StateGraphTestRun {\n  id\n  conversation {\n    blocks(first: 5000) {\n      edges {\n        node {\n          content {\n            __typename\n            asJSON\n          }\n          nodeId\n        }\n      }\n    }\n    nodeId\n  }\n}\n"}}}();H.hash="04f6c85416d65777ca3703c4c5a52018";let $=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},t=[a],i={kind:"InlineFragment",selections:t,type:"Error",abstractKey:"__isError"},s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"level",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"entityType",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},c={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"field",storageKey:null}],type:"StateGraphValidationConfigureIssue",abstractKey:null},g={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ValidationFieldError",kind:"LinkedField",name:"fieldErrors",plural:!0,selections:t,storageKey:null}],type:"ValidationError",abstractKey:null},m={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"initiallySelectedNodeId",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"entryPointNodeId",storageKey:null},f=[{kind:"Literal",name:"first",value:5e3}],h={alias:null,args:null,kind:"ScalarField",name:"asJSON",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"enabled",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"tool",storageKey:null},x=[{kind:"Literal",name:"first",value:10}],v=[{kind:"Literal",name:"shouldRemoveFieldsHiddenFromUI",value:!0}],b={alias:null,args:v,kind:"ScalarField",name:"payload",storageKey:"payload(shouldRemoveFieldsHiddenFromUI:true)"},S={alias:null,args:null,concreteType:"TriggerShouldRunCheck",kind:"LinkedField",name:"shouldRunCheck",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"shouldRun",storageKey:null},{alias:null,args:null,concreteType:"TriggerShouldRunCheckReason",kind:"LinkedField",name:"reasons",plural:!0,selections:t,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"softFilter",storageKey:null}],storageKey:null},T={alias:null,args:null,kind:"ScalarField",name:"llmSummary",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"CreateStateGraphTestRunWithSyntheticTriggerPayloadMutation",selections:[{alias:"mutationResult",args:n,concreteType:null,kind:"LinkedField",name:"createStateGraphTestRunWithSyntheticTriggerPayload",plural:!1,selections:[l,i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"issues",plural:!0,selections:[s,r,o,d,u,a,c],storageKey:null}],type:"StateGraphValidationError",abstractKey:null},g,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CreateStateGraphTestRunWithSyntheticTriggerPayloadOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"StateGraphTestRun",kind:"LinkedField",name:"stateGraphTestRun",plural:!1,selections:[s,m,y,{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[s,m,p,{alias:null,args:f,concreteType:"ConversationBlocksConnection",kind:"LinkedField",name:"blocks",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationBlocksConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ConversationBlock",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"content",plural:!1,selections:[h],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"blocks(first:5000)"}],storageKey:null},{alias:null,args:null,concreteType:"Trigger",kind:"LinkedField",name:"liveCaptureTrigger",plural:!1,selections:[s,m,k],storageKey:null},{args:null,kind:"FragmentSpread",name:"RailsTestingTaskView_StateGraphTestRun"},{args:null,kind:"FragmentSpread",name:"RailsTestingTriggerEntryPointViewStateGraphTestRunFragment"},{args:null,kind:"FragmentSpread",name:"useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun"}],storageKey:null}],storageKey:null}],type:"MutationCreateStateGraphTestRunWithSyntheticTriggerPayloadSuccess",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"CreateStateGraphTestRunWithSyntheticTriggerPayloadMutation",selections:[{alias:"mutationResult",args:n,concreteType:null,kind:"LinkedField",name:"createStateGraphTestRunWithSyntheticTriggerPayload",plural:!1,selections:[l,i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"issues",plural:!0,selections:[l,s,r,o,d,u,a,c],storageKey:null}],type:"StateGraphValidationError",abstractKey:null},g,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CreateStateGraphTestRunWithSyntheticTriggerPayloadOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"StateGraphTestRun",kind:"LinkedField",name:"stateGraphTestRun",plural:!1,selections:[s,m,y,{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[s,m,p,{alias:null,args:f,concreteType:"ConversationBlocksConnection",kind:"LinkedField",name:"blocks",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationBlocksConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ConversationBlock",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"content",plural:!1,selections:[l,h],storageKey:null},m],storageKey:null}],storageKey:null}],storageKey:"blocks(first:5000)"},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,concreteType:"ConversationChannel",kind:"LinkedField",name:"openChannels",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"startingNodeId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"statefulToolKey",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"instanceKey",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdByNodeId",storageKey:null},{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[F,m,{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null},r,m,s],storageKey:null},{alias:null,args:null,concreteType:"TriggerRunAttempt",kind:"LinkedField",name:"startingTriggerRunAttempt",plural:!1,selections:[s,m,{alias:null,args:null,kind:"ScalarField",name:"createdByExternalPayloadId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"payloadId",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Trigger",kind:"LinkedField",name:"liveCaptureTrigger",plural:!1,selections:[s,m,k,{alias:null,args:null,concreteType:"TriggerDefinition",kind:"LinkedField",name:"definition",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[F,m],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"payloadSchema",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"eventSchema",storageKey:null},{alias:null,args:null,concreteType:"TriggerTestingPolicy",kind:"LinkedField",name:"testingPolicy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"fullyProcessLiveCapturePayloads",storageKey:null}],storageKey:null},m],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"activeLiveCapturingInstructions",storageKey:null},{alias:null,args:x,concreteType:"TriggerTestingPayloadsConnection",kind:"LinkedField",name:"testingPayloads",plural:!1,selections:[{alias:null,args:null,concreteType:"TriggerTestingPayloadsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"TriggerTestingPayload",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"externalId",storageKey:null},b,S,T,m,l],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:"testingPayloads(first:10)"},{alias:null,args:x,filters:null,handle:"connection",key:"RailsTestingTriggerEntryPointView_testingPayloads",kind:"LinkedHandle",name:"testingPayloads"},{alias:null,args:[{kind:"Literal",name:"first",value:50}],concreteType:"TriggerRunAttemptsConnection",kind:"LinkedField",name:"runAttempts",plural:!1,selections:[{alias:null,args:null,concreteType:"TriggerRunAttemptsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"TriggerRunAttempt",kind:"LinkedField",name:"node",plural:!1,selections:[s,b,{alias:null,args:v,kind:"ScalarField",name:"processedPayload",storageKey:"processedPayload(shouldRemoveFieldsHiddenFromUI:true)"},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},S,T,m],storageKey:null}],storageKey:null}],storageKey:"runAttempts(first:50)"}],storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationCreateStateGraphTestRunWithSyntheticTriggerPayloadSuccess",abstractKey:null}],storageKey:null}]},params:{cacheID:"70381735ca9e0c3642056d01b8772dc6",id:null,metadata:{},name:"CreateStateGraphTestRunWithSyntheticTriggerPayloadMutation",operationKind:"mutation",text:"mutation CreateStateGraphTestRunWithSyntheticTriggerPayloadMutation(\n  $input: CreateStateGraphTestRunWithSyntheticTriggerPayloadInput!\n) {\n  mutationResult: createStateGraphTestRunWithSyntheticTriggerPayload(input: $input) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on StateGraphValidationError {\n      issues {\n        __typename\n        id\n        type\n        level\n        entityType\n        label\n        message\n        ... on StateGraphValidationConfigureIssue {\n          field\n        }\n      }\n    }\n    ... on ValidationError {\n      fieldErrors {\n        message\n      }\n    }\n    ... on MutationCreateStateGraphTestRunWithSyntheticTriggerPayloadSuccess {\n      data {\n        stateGraphTestRun {\n          id\n          nodeId\n          initiallySelectedNodeId\n          conversation {\n            id\n            nodeId\n            entryPointNodeId\n            blocks(first: 5000) {\n              edges {\n                node {\n                  content {\n                    __typename\n                    asJSON\n                  }\n                  nodeId\n                }\n              }\n            }\n          }\n          liveCaptureTrigger {\n            id\n            nodeId\n            enabled\n          }\n          ...RailsTestingTaskView_StateGraphTestRun\n          ...RailsTestingTriggerEntryPointViewStateGraphTestRunFragment\n          ...useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun\n        }\n      }\n    }\n  }\n}\n\nfragment RailsTestingTaskView_StateGraphTestRun on StateGraphTestRun {\n  id\n  conversation {\n    id\n    nodeId\n    entryPointNodeId\n    status\n    openChannels {\n      startingNodeId\n      statefulToolKey\n      instanceKey\n      createdByNodeId\n      tool {\n        tool\n        nodeId\n      }\n      type\n      nodeId\n    }\n    ...useAutoUpdatePucksConversationFragment\n    blocks(first: 5000) {\n      edges {\n        node {\n          content {\n            __typename\n            asJSON\n          }\n          nodeId\n        }\n      }\n    }\n  }\n  ...useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun\n}\n\nfragment RailsTestingTriggerEntryPointViewLiveCaptureTriggerRefetchableFragment on Trigger {\n  runAttempts(first: 50) {\n    edges {\n      node {\n        id\n        payload(shouldRemoveFieldsHiddenFromUI: true)\n        processedPayload(shouldRemoveFieldsHiddenFromUI: true)\n        createdAt\n        shouldRunCheck {\n          shouldRun\n          reasons {\n            message\n          }\n          softFilter\n        }\n        llmSummary\n        nodeId\n      }\n    }\n  }\n  nodeId\n}\n\nfragment RailsTestingTriggerEntryPointViewStateGraphTestRunFragment on StateGraphTestRun {\n  id\n  liveCaptureTrigger {\n    definition {\n      name\n      tool {\n        tool\n        nodeId\n      }\n      payloadSchema\n      eventSchema\n      testingPolicy {\n        fullyProcessLiveCapturePayloads\n      }\n      nodeId\n    }\n    id\n    nodeId\n    activeLiveCapturingInstructions\n    testingPayloads(first: 10) {\n      edges {\n        node {\n          externalId\n          payload(shouldRemoveFieldsHiddenFromUI: true)\n          shouldRunCheck {\n            shouldRun\n            reasons {\n              message\n            }\n            softFilter\n          }\n          llmSummary\n          nodeId\n          __typename\n        }\n        cursor\n      }\n      pageInfo {\n        endCursor\n        hasNextPage\n      }\n    }\n    ...RailsTestingTriggerEntryPointViewLiveCaptureTriggerRefetchableFragment\n  }\n  conversation {\n    startingTriggerRunAttempt {\n      id\n      nodeId\n      createdByExternalPayloadId\n      payloadId\n    }\n    nodeId\n  }\n  nodeId\n}\n\nfragment useAutoUpdatePucksConversationFragment on Conversation {\n  id\n  openChannels {\n    id\n    startingNodeId\n    createdByNodeId\n    tool {\n      tool\n      displayName\n      nodeId\n    }\n    nodeId\n  }\n}\n\nfragment useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun on StateGraphTestRun {\n  id\n  conversation {\n    blocks(first: 5000) {\n      edges {\n        node {\n          content {\n            __typename\n            asJSON\n          }\n          nodeId\n        }\n      }\n    }\n    nodeId\n  }\n}\n"}}}();$.hash="45ff5c892640460ade05d5221678aa54";let Z=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},t=[a],i={kind:"InlineFragment",selections:t,type:"Error",abstractKey:"__isError"},s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"level",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"entityType",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},c={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"field",storageKey:null}],type:"StateGraphValidationConfigureIssue",abstractKey:null},g={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ValidationFieldError",kind:"LinkedField",name:"fieldErrors",plural:!0,selections:t,storageKey:null}],type:"ValidationError",abstractKey:null},m={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},y=[s,m],p={alias:null,args:null,concreteType:"StateGraphTestRun",kind:"LinkedField",name:"stateGraphTestRun",plural:!1,selections:[s,m,{alias:null,args:null,concreteType:"Trigger",kind:"LinkedField",name:"liveCaptureTrigger",plural:!1,selections:y,storageKey:null},{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:y,storageKey:null}],storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"payloadSchema",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"activeLiveCapturingInstructions",storageKey:null},k=[{kind:"Literal",name:"shouldRemoveFieldsHiddenFromUI",value:!0}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"StartLiveCaptureForStateGraphTestRunMutation",selections:[{alias:"mutationResult",args:n,concreteType:null,kind:"LinkedField",name:"startLiveCaptureForStateGraphTestRun",plural:!1,selections:[l,i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"issues",plural:!0,selections:[s,r,o,d,u,a,c],storageKey:null}],type:"StateGraphValidationError",abstractKey:null},g,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"StartLiveCaptureForStateGraphTestRunOutput",kind:"LinkedField",name:"data",plural:!1,selections:[p,{alias:null,args:null,concreteType:"Trigger",kind:"LinkedField",name:"liveCaptureTrigger",plural:!1,selections:[s,{alias:null,args:null,concreteType:"TriggerDefinition",kind:"LinkedField",name:"definition",plural:!1,selections:[f],storageKey:null},h,{args:null,kind:"FragmentSpread",name:"RailsTestingTriggerEntryPointViewLiveCaptureTriggerRefetchableFragment"}],storageKey:null}],storageKey:null}],type:"MutationStartLiveCaptureForStateGraphTestRunSuccess",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"StartLiveCaptureForStateGraphTestRunMutation",selections:[{alias:"mutationResult",args:n,concreteType:null,kind:"LinkedField",name:"startLiveCaptureForStateGraphTestRun",plural:!1,selections:[l,i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"issues",plural:!0,selections:[l,s,r,o,d,u,a,c],storageKey:null}],type:"StateGraphValidationError",abstractKey:null},g,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"StartLiveCaptureForStateGraphTestRunOutput",kind:"LinkedField",name:"data",plural:!1,selections:[p,{alias:null,args:null,concreteType:"Trigger",kind:"LinkedField",name:"liveCaptureTrigger",plural:!1,selections:[s,{alias:null,args:null,concreteType:"TriggerDefinition",kind:"LinkedField",name:"definition",plural:!1,selections:[f,m],storageKey:null},h,{alias:null,args:[{kind:"Literal",name:"first",value:50}],concreteType:"TriggerRunAttemptsConnection",kind:"LinkedField",name:"runAttempts",plural:!1,selections:[{alias:null,args:null,concreteType:"TriggerRunAttemptsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"TriggerRunAttempt",kind:"LinkedField",name:"node",plural:!1,selections:[s,{alias:null,args:k,kind:"ScalarField",name:"payload",storageKey:"payload(shouldRemoveFieldsHiddenFromUI:true)"},{alias:null,args:k,kind:"ScalarField",name:"processedPayload",storageKey:"processedPayload(shouldRemoveFieldsHiddenFromUI:true)"},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,concreteType:"TriggerShouldRunCheck",kind:"LinkedField",name:"shouldRunCheck",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"shouldRun",storageKey:null},{alias:null,args:null,concreteType:"TriggerShouldRunCheckReason",kind:"LinkedField",name:"reasons",plural:!0,selections:t,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"softFilter",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"llmSummary",storageKey:null},m],storageKey:null}],storageKey:null}],storageKey:"runAttempts(first:50)"},m],storageKey:null}],storageKey:null}],type:"MutationStartLiveCaptureForStateGraphTestRunSuccess",abstractKey:null}],storageKey:null}]},params:{cacheID:"c35f74b9f73161e6437d636873f84ce2",id:null,metadata:{},name:"StartLiveCaptureForStateGraphTestRunMutation",operationKind:"mutation",text:"mutation StartLiveCaptureForStateGraphTestRunMutation(\n  $input: StartLiveCaptureForStateGraphTestRunInput!\n) {\n  mutationResult: startLiveCaptureForStateGraphTestRun(input: $input) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on StateGraphValidationError {\n      issues {\n        __typename\n        id\n        type\n        level\n        entityType\n        label\n        message\n        ... on StateGraphValidationConfigureIssue {\n          field\n        }\n      }\n    }\n    ... on ValidationError {\n      fieldErrors {\n        message\n      }\n    }\n    ... on MutationStartLiveCaptureForStateGraphTestRunSuccess {\n      data {\n        stateGraphTestRun {\n          id\n          nodeId\n          liveCaptureTrigger {\n            id\n            nodeId\n          }\n          conversation {\n            id\n            nodeId\n          }\n        }\n        liveCaptureTrigger {\n          id\n          definition {\n            payloadSchema\n            nodeId\n          }\n          activeLiveCapturingInstructions\n          ...RailsTestingTriggerEntryPointViewLiveCaptureTriggerRefetchableFragment\n          nodeId\n        }\n      }\n    }\n  }\n}\n\nfragment RailsTestingTriggerEntryPointViewLiveCaptureTriggerRefetchableFragment on Trigger {\n  runAttempts(first: 50) {\n    edges {\n      node {\n        id\n        payload(shouldRemoveFieldsHiddenFromUI: true)\n        processedPayload(shouldRemoveFieldsHiddenFromUI: true)\n        createdAt\n        shouldRunCheck {\n          shouldRun\n          reasons {\n            message\n          }\n          softFilter\n        }\n        llmSummary\n        nodeId\n      }\n    }\n  }\n  nodeId\n}\n"}}}();Z.hash="528d8e4cf0f2096cdfffbcba3872855a";let Y=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},t=[a],i={kind:"InlineFragment",selections:t,type:"Error",abstractKey:"__isError"},s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"level",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"entityType",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},c={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"field",storageKey:null}],type:"StateGraphValidationConfigureIssue",abstractKey:null},g={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ValidationFieldError",kind:"LinkedField",name:"fieldErrors",plural:!0,selections:t,storageKey:null}],type:"ValidationError",abstractKey:null},m={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"initiallySelectedNodeId",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"entryPointNodeId",storageKey:null},f=[{kind:"Literal",name:"first",value:5e3}],h={alias:null,args:null,kind:"ScalarField",name:"asJSON",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"enabled",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"tool",storageKey:null},x=[{kind:"Literal",name:"first",value:10}],v=[{kind:"Literal",name:"shouldRemoveFieldsHiddenFromUI",value:!0}],b={alias:null,args:v,kind:"ScalarField",name:"payload",storageKey:"payload(shouldRemoveFieldsHiddenFromUI:true)"},S={alias:null,args:null,concreteType:"TriggerShouldRunCheck",kind:"LinkedField",name:"shouldRunCheck",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"shouldRun",storageKey:null},{alias:null,args:null,concreteType:"TriggerShouldRunCheckReason",kind:"LinkedField",name:"reasons",plural:!0,selections:t,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"softFilter",storageKey:null}],storageKey:null},T={alias:null,args:null,kind:"ScalarField",name:"llmSummary",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"StopLiveCaptureForStateGraphTestRunMutation",selections:[{alias:"mutationResult",args:n,concreteType:null,kind:"LinkedField",name:"stopLiveCaptureForStateGraphTestRun",plural:!1,selections:[l,i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"issues",plural:!0,selections:[s,r,o,d,u,a,c],storageKey:null}],type:"StateGraphValidationError",abstractKey:null},g,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"StopLiveCaptureForStateGraphTestRunOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"StateGraphTestRun",kind:"LinkedField",name:"stateGraphTestRun",plural:!1,selections:[s,m,y,{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[s,m,p,{alias:null,args:f,concreteType:"ConversationBlocksConnection",kind:"LinkedField",name:"blocks",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationBlocksConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ConversationBlock",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"content",plural:!1,selections:[h],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"blocks(first:5000)"}],storageKey:null},{alias:null,args:null,concreteType:"Trigger",kind:"LinkedField",name:"liveCaptureTrigger",plural:!1,selections:[s,m,k],storageKey:null},{args:null,kind:"FragmentSpread",name:"RailsTestingTaskView_StateGraphTestRun"},{args:null,kind:"FragmentSpread",name:"RailsTestingTriggerEntryPointViewStateGraphTestRunFragment"},{args:null,kind:"FragmentSpread",name:"useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun"}],storageKey:null}],storageKey:null}],type:"MutationStopLiveCaptureForStateGraphTestRunSuccess",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"StopLiveCaptureForStateGraphTestRunMutation",selections:[{alias:"mutationResult",args:n,concreteType:null,kind:"LinkedField",name:"stopLiveCaptureForStateGraphTestRun",plural:!1,selections:[l,i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"issues",plural:!0,selections:[l,s,r,o,d,u,a,c],storageKey:null}],type:"StateGraphValidationError",abstractKey:null},g,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"StopLiveCaptureForStateGraphTestRunOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"StateGraphTestRun",kind:"LinkedField",name:"stateGraphTestRun",plural:!1,selections:[s,m,y,{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[s,m,p,{alias:null,args:f,concreteType:"ConversationBlocksConnection",kind:"LinkedField",name:"blocks",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationBlocksConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ConversationBlock",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"content",plural:!1,selections:[l,h],storageKey:null},m],storageKey:null}],storageKey:null}],storageKey:"blocks(first:5000)"},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,concreteType:"ConversationChannel",kind:"LinkedField",name:"openChannels",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"startingNodeId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"statefulToolKey",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"instanceKey",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdByNodeId",storageKey:null},{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[F,m,{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null},r,m,s],storageKey:null},{alias:null,args:null,concreteType:"TriggerRunAttempt",kind:"LinkedField",name:"startingTriggerRunAttempt",plural:!1,selections:[s,m,{alias:null,args:null,kind:"ScalarField",name:"createdByExternalPayloadId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"payloadId",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Trigger",kind:"LinkedField",name:"liveCaptureTrigger",plural:!1,selections:[s,m,k,{alias:null,args:null,concreteType:"TriggerDefinition",kind:"LinkedField",name:"definition",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[F,m],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"payloadSchema",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"eventSchema",storageKey:null},{alias:null,args:null,concreteType:"TriggerTestingPolicy",kind:"LinkedField",name:"testingPolicy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"fullyProcessLiveCapturePayloads",storageKey:null}],storageKey:null},m],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"activeLiveCapturingInstructions",storageKey:null},{alias:null,args:x,concreteType:"TriggerTestingPayloadsConnection",kind:"LinkedField",name:"testingPayloads",plural:!1,selections:[{alias:null,args:null,concreteType:"TriggerTestingPayloadsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"TriggerTestingPayload",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"externalId",storageKey:null},b,S,T,m,l],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:"testingPayloads(first:10)"},{alias:null,args:x,filters:null,handle:"connection",key:"RailsTestingTriggerEntryPointView_testingPayloads",kind:"LinkedHandle",name:"testingPayloads"},{alias:null,args:[{kind:"Literal",name:"first",value:50}],concreteType:"TriggerRunAttemptsConnection",kind:"LinkedField",name:"runAttempts",plural:!1,selections:[{alias:null,args:null,concreteType:"TriggerRunAttemptsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"TriggerRunAttempt",kind:"LinkedField",name:"node",plural:!1,selections:[s,b,{alias:null,args:v,kind:"ScalarField",name:"processedPayload",storageKey:"processedPayload(shouldRemoveFieldsHiddenFromUI:true)"},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},S,T,m],storageKey:null}],storageKey:null}],storageKey:"runAttempts(first:50)"}],storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationStopLiveCaptureForStateGraphTestRunSuccess",abstractKey:null}],storageKey:null}]},params:{cacheID:"0a0922147ddc945f38ff8fdc8a0e6b4b",id:null,metadata:{},name:"StopLiveCaptureForStateGraphTestRunMutation",operationKind:"mutation",text:"mutation StopLiveCaptureForStateGraphTestRunMutation(\n  $input: StopLiveCaptureForStateGraphTestRunInput!\n) {\n  mutationResult: stopLiveCaptureForStateGraphTestRun(input: $input) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on StateGraphValidationError {\n      issues {\n        __typename\n        id\n        type\n        level\n        entityType\n        label\n        message\n        ... on StateGraphValidationConfigureIssue {\n          field\n        }\n      }\n    }\n    ... on ValidationError {\n      fieldErrors {\n        message\n      }\n    }\n    ... on MutationStopLiveCaptureForStateGraphTestRunSuccess {\n      data {\n        stateGraphTestRun {\n          id\n          nodeId\n          initiallySelectedNodeId\n          conversation {\n            id\n            nodeId\n            entryPointNodeId\n            blocks(first: 5000) {\n              edges {\n                node {\n                  content {\n                    __typename\n                    asJSON\n                  }\n                  nodeId\n                }\n              }\n            }\n          }\n          liveCaptureTrigger {\n            id\n            nodeId\n            enabled\n          }\n          ...RailsTestingTaskView_StateGraphTestRun\n          ...RailsTestingTriggerEntryPointViewStateGraphTestRunFragment\n          ...useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun\n        }\n      }\n    }\n  }\n}\n\nfragment RailsTestingTaskView_StateGraphTestRun on StateGraphTestRun {\n  id\n  conversation {\n    id\n    nodeId\n    entryPointNodeId\n    status\n    openChannels {\n      startingNodeId\n      statefulToolKey\n      instanceKey\n      createdByNodeId\n      tool {\n        tool\n        nodeId\n      }\n      type\n      nodeId\n    }\n    ...useAutoUpdatePucksConversationFragment\n    blocks(first: 5000) {\n      edges {\n        node {\n          content {\n            __typename\n            asJSON\n          }\n          nodeId\n        }\n      }\n    }\n  }\n  ...useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun\n}\n\nfragment RailsTestingTriggerEntryPointViewLiveCaptureTriggerRefetchableFragment on Trigger {\n  runAttempts(first: 50) {\n    edges {\n      node {\n        id\n        payload(shouldRemoveFieldsHiddenFromUI: true)\n        processedPayload(shouldRemoveFieldsHiddenFromUI: true)\n        createdAt\n        shouldRunCheck {\n          shouldRun\n          reasons {\n            message\n          }\n          softFilter\n        }\n        llmSummary\n        nodeId\n      }\n    }\n  }\n  nodeId\n}\n\nfragment RailsTestingTriggerEntryPointViewStateGraphTestRunFragment on StateGraphTestRun {\n  id\n  liveCaptureTrigger {\n    definition {\n      name\n      tool {\n        tool\n        nodeId\n      }\n      payloadSchema\n      eventSchema\n      testingPolicy {\n        fullyProcessLiveCapturePayloads\n      }\n      nodeId\n    }\n    id\n    nodeId\n    activeLiveCapturingInstructions\n    testingPayloads(first: 10) {\n      edges {\n        node {\n          externalId\n          payload(shouldRemoveFieldsHiddenFromUI: true)\n          shouldRunCheck {\n            shouldRun\n            reasons {\n              message\n            }\n            softFilter\n          }\n          llmSummary\n          nodeId\n          __typename\n        }\n        cursor\n      }\n      pageInfo {\n        endCursor\n        hasNextPage\n      }\n    }\n    ...RailsTestingTriggerEntryPointViewLiveCaptureTriggerRefetchableFragment\n  }\n  conversation {\n    startingTriggerRunAttempt {\n      id\n      nodeId\n      createdByExternalPayloadId\n      payloadId\n    }\n    nodeId\n  }\n  nodeId\n}\n\nfragment useAutoUpdatePucksConversationFragment on Conversation {\n  id\n  openChannels {\n    id\n    startingNodeId\n    createdByNodeId\n    tool {\n      tool\n      displayName\n      nodeId\n    }\n    nodeId\n  }\n}\n\nfragment useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun on StateGraphTestRun {\n  id\n  conversation {\n    blocks(first: 5000) {\n      edges {\n        node {\n          content {\n            __typename\n            asJSON\n          }\n          nodeId\n        }\n      }\n    }\n    nodeId\n  }\n}\n"}}}();Y.hash="3b68a292bfaf33185cf705d99075d613";var J=l(72735),X=l(63620),ee=l(26042),en=l(58455),el=l(46251),ea=l(57802);function et(e){let{node:n,className:l,...t}=e,i=null==n?void 0:n.tool,s=null==n?void 0:n.displayNamePrimary,r=null==n?void 0:n.displayNameSecondary,o=(0,k.HY)(n)?n.occurrence:null,d=!!(0,k.HY)(n)&&n.isRepeatedAction;if(!s)return null;let u=ea.cs.Action;(0,k.P8)(n)?u=ea.cs.AgentState:(0,k.ji)(n)?u=ea.cs.EntryPoint:(0,k.Ri)(n)?u=ea.cs.Logic:n.isKnowledgeBaseNode?u=ea.b7.KnowledgeBase:n.isTalkToUserNode&&(u=ea.b7.TalkToUser);let c=i?(0,a.jsx)(el.si,{tool:i,className:"size-5 shrink-0"}):(0,a.jsx)("div",{className:(0,E.QP)("flex h-5 w-5 shrink-0 items-center justify-center rounded-[5px]",X.f[u].color),children:X.f[u].icon});return(0,a.jsxs)(en.F,{node:n,...t,className:(0,E.QP)("flex items-center gap-2 truncate",l),children:[c,(0,a.jsx)("span",{className:"text-sm font-medium text-slate-12",children:s}),r&&(0,a.jsx)("span",{className:"truncate text-nowrap text-sm font-normal text-slate-10",children:r}),d&&o&&(0,a.jsx)(ee.u,{occurrence:o})]})}var ei=l(67373),es=l(35121);function er(e){return(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:(0,E.QP)("text-slate-11",e.className),children:(0,a.jsx)("path",{d:"M4.75 4.75L19.25 19.25M19.25 4.75L4.75 19.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})})}var eo=l(16008),ed=l(35774),eu=l(81778);let ec={initial:{opacity:0,width:0},animate:{opacity:1,width:"28px"},exit:{opacity:0,width:0},transition:{duration:.1,ease:"easeInOut"}},eg={initial:{opacity:1},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1,ease:"easeInOut"}},em={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1,ease:"easeInOut"}};function ey(e){let{state:n,close:l,goBack:t,retryTestRun:i,isRetryingTestRun:s}=e,r=(0,b.Z)(),o=(0,eu.useRouter)(),d=(0,f.useCallback)(async()=>{var e;if(!r.selectedTestingNode)return;let n=new URL(window.location.href,"https://chat.lindy.ai"),l=o.query[J.nw],a=Array.isArray(l)?l[0]:l;l&&(await o.push("/".concat(a,"/editor").concat(n.search),void 0,{shallow:!0}),null===(e=y.a.lindies.currentLindy)||void 0===e||e.stateGraph.setSelectedEntityById(r.selectedTestingNode.id),y.a.ui.setTestingPanelOpen(!1))},[o,r.selectedTestingNode]);return(0,a.jsxs)("header",{className:"flex h-16 flex-row items-center justify-between gap-4 py-5 pl-4 pr-3",children:[(0,a.jsx)("div",{className:"relative flex h-full items-center",children:(0,a.jsx)(eo.N,{children:n.canGoBack?(0,a.jsx)(ed.P.div,{...ec,className:(0,E.QP)("flex items-center",!n.canRetry&&"absolute left-0 top-0"),children:(0,a.jsx)(ei.$,{level:"text",className:"mr-1 size-6 p-0 text-slate-10",onClick:t,children:(0,a.jsx)(es.z,{className:"size-6 rotate-90"})})}):(0,a.jsx)(ed.P.h2,{...eg,className:"select-none text-base font-medium text-slate-12",children:"Test"})})}),r.selectedTestingNode&&"nodeSelection"!==n.view.type&&(0,a.jsx)(et,{node:r.selectedTestingNode,className:"cursor-pointer",onClick:d}),(0,a.jsx)("div",{className:"flex shrink-0 items-center gap-2",children:(0,a.jsxs)(eo.N,{children:[n.canRetry&&(0,a.jsx)(ed.P.div,{...em,className:"flex items-center",children:(0,a.jsx)(ei.$,{onClick:i,level:"outline",className:"px-2 py-1 text-sm",isLoading:s,children:"Retry"})}),n.canClose&&(0,a.jsx)(ed.P.div,{...em,className:"flex items-center",children:(0,a.jsx)(ei.$,{onClick:l,level:"text",className:"ml-auto p-0",children:(0,a.jsx)(er,{className:"size-5"})})})]})})]})}let ep=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"ids"}],n=[{kind:"Variable",name:"ids",variableName:"ids"}],l={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"TriggerTestingPolicy",kind:"LinkedField",name:"testingPolicy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"supportsLiveCapture",storageKey:null}],storageKey:null}],type:"TriggerDefinition",abstractKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"RailsTestingNodeSelectionTriggerDefinitionsQuery",selections:[{alias:"triggerDefinitions",args:n,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[l],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"RailsTestingNodeSelectionTriggerDefinitionsQuery",selections:[{alias:"triggerDefinitions",args:n,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},l,{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null}],storageKey:null}]},params:{cacheID:"2522b9e3803e5db753b6712375d6c146",id:null,metadata:{},name:"RailsTestingNodeSelectionTriggerDefinitionsQuery",operationKind:"query",text:"query RailsTestingNodeSelectionTriggerDefinitionsQuery(\n  $ids: [ID!]!\n) {\n  triggerDefinitions: nodes(ids: $ids) {\n    __typename\n    ... on TriggerDefinition {\n      id\n      testingPolicy {\n        supportsLiveCapture\n      }\n    }\n    nodeId\n  }\n}\n"}}}();ep.hash="637fe270f1f5fd27cf1e07255a00902e";var ef=l(91318);function eh(e){let{node:n,isNotTestableReason:l,setSelectedNode:t}=e,i=(0,f.useCallback)(()=>{x(n,"manual"),l||t(n)},[l,t,n]);return(0,a.jsx)("li",{className:"w-full",children:(0,a.jsx)(ei.$,{fullWidthContent:!0,level:"outline",className:(0,E.QP)("w-full rounded-xl border border-slate-5 p-3"),onClick:i,disabled:!!l,"data-ph-capture-attribute-testing-step":"select-trigger",children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(et,{node:n,className:"w-full"}),l&&(0,a.jsx)("div",{className:"truncate text-xs text-slate-10",children:l})]})})})}let ek=(0,M.PA)(function(e){let{setSelectedNode:n}=e,l=(0,b.Z)(),t=(0,f.useMemo)(()=>l.entryPointNodes.filter(k.B2).map(e=>(0,I.F)("TriggerDefinition",(0,R.ni)({tool:e.trigger.tool,key:e.trigger.name}))),[l.entryPointNodes]),i=(0,A.useLazyLoadQuery)(ep,{ids:t}),s=(0,ef.q2)(()=>{let e=[];for(let a of l.entryPointNodes){var n;if((0,k.Eq)(a)){e.push({node:a});continue}let l=a.trigger;if(!l)continue;let t=i.triggerDefinitions.find(e=>(null==e?void 0:e.id)===(0,R.ni)({tool:l.tool,key:l.name}));if(!t){e.push({node:a,isNotTestableReason:"No trigger definition found"});continue}if(!(null===(n=t.testingPolicy)||void 0===n?void 0:n.supportsLiveCapture)){e.push({node:a,isNotTestableReason:"Trigger does not support live capture"});continue}e.push({node:a})}return e.push(...l.workflowStartNodes.map(e=>({node:e}))),e.sort((e,n)=>e.node.position.y-n.node.position.y||e.node.position.x-n.node.position.x),e},[l.entryPointNodes,l.workflowStartNodes,i.triggerDefinitions]);return(0,a.jsxs)("section",{className:"flex flex-col gap-y-4 p-5 pt-0",children:[(0,a.jsx)("h3",{className:"select-none text-sm font-medium text-slate-10",children:"Which step do you want to test?"}),(0,a.jsx)("ul",{className:"flex flex-col gap-y-4",children:s.map(e=>{let{node:l,isNotTestableReason:t}=e;return(0,a.jsx)(en.F,{node:l,children:(0,a.jsx)(eh,{node:l,setSelectedNode:n,isNotTestableReason:t})},l.id)})})]})}),eF={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RailsTestingTaskView_Query",selections:[{args:null,kind:"FragmentSpread",name:"ConversationViewQueryFragment"}],type:"Query",abstractKey:null};eF.hash="5b3eff34409dc9578229125e61c6ec7c";let ex=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RailsTestingTaskView_AgentDefinition",selections:[e,{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:[e],storageKey:null},{args:null,kind:"FragmentSpread",name:"useRetryStateGraphTestRunExecutionMutation_AgentDefinition"},{args:null,kind:"FragmentSpread",name:"ConversationView_AgentDefinition"}],type:"AgentDefinition",abstractKey:null}}();ex.hash="682f24411e1fd2a9a9191c63e1079acf";let ev=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RailsTestingTaskView_StateGraphTestRun",selections:[e,{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entryPointNodeId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,concreteType:"ConversationChannel",kind:"LinkedField",name:"openChannels",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"startingNodeId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"statefulToolKey",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"instanceKey",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdByNodeId",storageKey:null},{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"tool",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"useAutoUpdatePucksConversationFragment"},{alias:null,args:[{kind:"Literal",name:"first",value:5e3}],concreteType:"ConversationBlocksConnection",kind:"LinkedField",name:"blocks",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationBlocksConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ConversationBlock",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"content",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"asJSON",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"blocks(first:5000)"}],storageKey:null},{args:null,kind:"FragmentSpread",name:"useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun"}],type:"StateGraphTestRun",abstractKey:null}}();ev.hash="5ec3498dd5430d7bf7096ae1d62621ec";var eb=l(83026),eS=l(45710),eT=l(38001);let eK=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useAutoUpdatePucksConversationFragment",selections:[e,{alias:null,args:null,concreteType:"ConversationChannel",kind:"LinkedField",name:"openChannels",plural:!0,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"startingNodeId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdByNodeId",storageKey:null},{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"tool",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null}],storageKey:null}],type:"Conversation",abstractKey:null}}();eK.hash="66157c6bb1c0efbc17ab448989135f8d";var eI=l(98448);let eC=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},t=[a],i={kind:"InlineFragment",selections:t,type:"Error",abstractKey:"__isError"},s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"level",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"entityType",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},c={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"field",storageKey:null}],type:"StateGraphValidationConfigureIssue",abstractKey:null},g={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ValidationFieldError",kind:"LinkedField",name:"fieldErrors",plural:!0,selections:t,storageKey:null}],type:"ValidationError",abstractKey:null},m={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"initiallySelectedNodeId",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"entryPointNodeId",storageKey:null},f=[{kind:"Literal",name:"first",value:5e3}],h={alias:null,args:null,kind:"ScalarField",name:"asJSON",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"enabled",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"tool",storageKey:null},x=[{kind:"Literal",name:"first",value:10}],v=[{kind:"Literal",name:"shouldRemoveFieldsHiddenFromUI",value:!0}],b={alias:null,args:v,kind:"ScalarField",name:"payload",storageKey:"payload(shouldRemoveFieldsHiddenFromUI:true)"},S={alias:null,args:null,concreteType:"TriggerShouldRunCheck",kind:"LinkedField",name:"shouldRunCheck",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"shouldRun",storageKey:null},{alias:null,args:null,concreteType:"TriggerShouldRunCheckReason",kind:"LinkedField",name:"reasons",plural:!0,selections:t,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"softFilter",storageKey:null}],storageKey:null},T={alias:null,args:null,kind:"ScalarField",name:"llmSummary",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ContinueStateGraphTestRunWithTaskMutation",selections:[{alias:"mutationResult",args:n,concreteType:null,kind:"LinkedField",name:"continueStateGraphTestRunWithTask",plural:!1,selections:[l,i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"issues",plural:!0,selections:[s,r,o,d,u,a,c],storageKey:null}],type:"StateGraphValidationError",abstractKey:null},g,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ContinueStateGraphTestRunWithTaskOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"StateGraphTestRun",kind:"LinkedField",name:"stateGraphTestRun",plural:!1,selections:[s,m,y,{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[s,m,p,{alias:null,args:f,concreteType:"ConversationBlocksConnection",kind:"LinkedField",name:"blocks",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationBlocksConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ConversationBlock",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"content",plural:!1,selections:[h],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"blocks(first:5000)"}],storageKey:null},{alias:null,args:null,concreteType:"Trigger",kind:"LinkedField",name:"liveCaptureTrigger",plural:!1,selections:[s,m,k],storageKey:null},{args:null,kind:"FragmentSpread",name:"RailsTestingTaskView_StateGraphTestRun"},{args:null,kind:"FragmentSpread",name:"RailsTestingTriggerEntryPointViewStateGraphTestRunFragment"},{args:null,kind:"FragmentSpread",name:"useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun"}],storageKey:null},{alias:null,args:null,concreteType:"AgentMessage",kind:"LinkedField",name:"agentMessage",plural:!1,selections:[s],storageKey:null}],storageKey:null}],type:"MutationContinueStateGraphTestRunWithTaskSuccess",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ContinueStateGraphTestRunWithTaskMutation",selections:[{alias:"mutationResult",args:n,concreteType:null,kind:"LinkedField",name:"continueStateGraphTestRunWithTask",plural:!1,selections:[l,i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"issues",plural:!0,selections:[l,s,r,o,d,u,a,c],storageKey:null}],type:"StateGraphValidationError",abstractKey:null},g,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ContinueStateGraphTestRunWithTaskOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"StateGraphTestRun",kind:"LinkedField",name:"stateGraphTestRun",plural:!1,selections:[s,m,y,{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[s,m,p,{alias:null,args:f,concreteType:"ConversationBlocksConnection",kind:"LinkedField",name:"blocks",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationBlocksConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ConversationBlock",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"content",plural:!1,selections:[l,h],storageKey:null},m],storageKey:null}],storageKey:null}],storageKey:"blocks(first:5000)"},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,concreteType:"ConversationChannel",kind:"LinkedField",name:"openChannels",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"startingNodeId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"statefulToolKey",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"instanceKey",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdByNodeId",storageKey:null},{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[F,m,{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null},r,m,s],storageKey:null},{alias:null,args:null,concreteType:"TriggerRunAttempt",kind:"LinkedField",name:"startingTriggerRunAttempt",plural:!1,selections:[s,m,{alias:null,args:null,kind:"ScalarField",name:"createdByExternalPayloadId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"payloadId",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Trigger",kind:"LinkedField",name:"liveCaptureTrigger",plural:!1,selections:[s,m,k,{alias:null,args:null,concreteType:"TriggerDefinition",kind:"LinkedField",name:"definition",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[F,m],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"payloadSchema",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"eventSchema",storageKey:null},{alias:null,args:null,concreteType:"TriggerTestingPolicy",kind:"LinkedField",name:"testingPolicy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"fullyProcessLiveCapturePayloads",storageKey:null}],storageKey:null},m],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"activeLiveCapturingInstructions",storageKey:null},{alias:null,args:x,concreteType:"TriggerTestingPayloadsConnection",kind:"LinkedField",name:"testingPayloads",plural:!1,selections:[{alias:null,args:null,concreteType:"TriggerTestingPayloadsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"TriggerTestingPayload",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"externalId",storageKey:null},b,S,T,m,l],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:"testingPayloads(first:10)"},{alias:null,args:x,filters:null,handle:"connection",key:"RailsTestingTriggerEntryPointView_testingPayloads",kind:"LinkedHandle",name:"testingPayloads"},{alias:null,args:[{kind:"Literal",name:"first",value:50}],concreteType:"TriggerRunAttemptsConnection",kind:"LinkedField",name:"runAttempts",plural:!1,selections:[{alias:null,args:null,concreteType:"TriggerRunAttemptsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"TriggerRunAttempt",kind:"LinkedField",name:"node",plural:!1,selections:[s,b,{alias:null,args:v,kind:"ScalarField",name:"processedPayload",storageKey:"processedPayload(shouldRemoveFieldsHiddenFromUI:true)"},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},S,T,m],storageKey:null}],storageKey:null}],storageKey:"runAttempts(first:50)"}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AgentMessage",kind:"LinkedField",name:"agentMessage",plural:!1,selections:[s,m],storageKey:null}],storageKey:null}],type:"MutationContinueStateGraphTestRunWithTaskSuccess",abstractKey:null}],storageKey:null}]},params:{cacheID:"776fd5fa957dc30c26acdaf38b7e54d8",id:null,metadata:{},name:"ContinueStateGraphTestRunWithTaskMutation",operationKind:"mutation",text:"mutation ContinueStateGraphTestRunWithTaskMutation(\n  $input: ContinueStateGraphTestRunWithTaskInput!\n) {\n  mutationResult: continueStateGraphTestRunWithTask(input: $input) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on StateGraphValidationError {\n      issues {\n        __typename\n        id\n        type\n        level\n        entityType\n        label\n        message\n        ... on StateGraphValidationConfigureIssue {\n          field\n        }\n      }\n    }\n    ... on ValidationError {\n      fieldErrors {\n        message\n      }\n    }\n    ... on MutationContinueStateGraphTestRunWithTaskSuccess {\n      data {\n        stateGraphTestRun {\n          id\n          nodeId\n          initiallySelectedNodeId\n          conversation {\n            id\n            nodeId\n            entryPointNodeId\n            blocks(first: 5000) {\n              edges {\n                node {\n                  content {\n                    __typename\n                    asJSON\n                  }\n                  nodeId\n                }\n              }\n            }\n          }\n          liveCaptureTrigger {\n            id\n            nodeId\n            enabled\n          }\n          ...RailsTestingTaskView_StateGraphTestRun\n          ...RailsTestingTriggerEntryPointViewStateGraphTestRunFragment\n          ...useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun\n        }\n        agentMessage {\n          id\n          nodeId\n        }\n      }\n    }\n  }\n}\n\nfragment RailsTestingTaskView_StateGraphTestRun on StateGraphTestRun {\n  id\n  conversation {\n    id\n    nodeId\n    entryPointNodeId\n    status\n    openChannels {\n      startingNodeId\n      statefulToolKey\n      instanceKey\n      createdByNodeId\n      tool {\n        tool\n        nodeId\n      }\n      type\n      nodeId\n    }\n    ...useAutoUpdatePucksConversationFragment\n    blocks(first: 5000) {\n      edges {\n        node {\n          content {\n            __typename\n            asJSON\n          }\n          nodeId\n        }\n      }\n    }\n  }\n  ...useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun\n}\n\nfragment RailsTestingTriggerEntryPointViewLiveCaptureTriggerRefetchableFragment on Trigger {\n  runAttempts(first: 50) {\n    edges {\n      node {\n        id\n        payload(shouldRemoveFieldsHiddenFromUI: true)\n        processedPayload(shouldRemoveFieldsHiddenFromUI: true)\n        createdAt\n        shouldRunCheck {\n          shouldRun\n          reasons {\n            message\n          }\n          softFilter\n        }\n        llmSummary\n        nodeId\n      }\n    }\n  }\n  nodeId\n}\n\nfragment RailsTestingTriggerEntryPointViewStateGraphTestRunFragment on StateGraphTestRun {\n  id\n  liveCaptureTrigger {\n    definition {\n      name\n      tool {\n        tool\n        nodeId\n      }\n      payloadSchema\n      eventSchema\n      testingPolicy {\n        fullyProcessLiveCapturePayloads\n      }\n      nodeId\n    }\n    id\n    nodeId\n    activeLiveCapturingInstructions\n    testingPayloads(first: 10) {\n      edges {\n        node {\n          externalId\n          payload(shouldRemoveFieldsHiddenFromUI: true)\n          shouldRunCheck {\n            shouldRun\n            reasons {\n              message\n            }\n            softFilter\n          }\n          llmSummary\n          nodeId\n          __typename\n        }\n        cursor\n      }\n      pageInfo {\n        endCursor\n        hasNextPage\n      }\n    }\n    ...RailsTestingTriggerEntryPointViewLiveCaptureTriggerRefetchableFragment\n  }\n  conversation {\n    startingTriggerRunAttempt {\n      id\n      nodeId\n      createdByExternalPayloadId\n      payloadId\n    }\n    nodeId\n  }\n  nodeId\n}\n\nfragment useAutoUpdatePucksConversationFragment on Conversation {\n  id\n  openChannels {\n    id\n    startingNodeId\n    createdByNodeId\n    tool {\n      tool\n      displayName\n      nodeId\n    }\n    nodeId\n  }\n}\n\nfragment useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun on StateGraphTestRun {\n  id\n  conversation {\n    blocks(first: 5000) {\n      edges {\n        node {\n          content {\n            __typename\n            asJSON\n          }\n          nodeId\n        }\n      }\n    }\n    nodeId\n  }\n}\n"}}}();eC.hash="f812525704bff63d94e113f95f95bdfc";let eA=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},t=[a],i={kind:"InlineFragment",selections:t,type:"Error",abstractKey:"__isError"},s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"level",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"entityType",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},c={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"field",storageKey:null}],type:"StateGraphValidationConfigureIssue",abstractKey:null},g={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ValidationFieldError",kind:"LinkedField",name:"fieldErrors",plural:!0,selections:t,storageKey:null}],type:"ValidationError",abstractKey:null},m={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"initiallySelectedNodeId",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"entryPointNodeId",storageKey:null},f=[{kind:"Literal",name:"first",value:5e3}],h={alias:null,args:null,kind:"ScalarField",name:"asJSON",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"enabled",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"tool",storageKey:null},x=[{kind:"Literal",name:"first",value:10}],v=[{kind:"Literal",name:"shouldRemoveFieldsHiddenFromUI",value:!0}],b={alias:null,args:v,kind:"ScalarField",name:"payload",storageKey:"payload(shouldRemoveFieldsHiddenFromUI:true)"},S={alias:null,args:null,concreteType:"TriggerShouldRunCheck",kind:"LinkedField",name:"shouldRunCheck",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"shouldRun",storageKey:null},{alias:null,args:null,concreteType:"TriggerShouldRunCheckReason",kind:"LinkedField",name:"reasons",plural:!0,selections:t,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"softFilter",storageKey:null}],storageKey:null},T={alias:null,args:null,kind:"ScalarField",name:"llmSummary",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"CreateStateGraphTestRunWithTaskMutation",selections:[{alias:"mutationResult",args:n,concreteType:null,kind:"LinkedField",name:"createStateGraphTestRunWithTask",plural:!1,selections:[l,i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"issues",plural:!0,selections:[s,r,o,d,u,a,c],storageKey:null}],type:"StateGraphValidationError",abstractKey:null},g,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CreateStateGraphTestRunOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"StateGraphTestRun",kind:"LinkedField",name:"stateGraphTestRun",plural:!1,selections:[s,m,y,{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[s,m,p,{alias:null,args:f,concreteType:"ConversationBlocksConnection",kind:"LinkedField",name:"blocks",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationBlocksConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ConversationBlock",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"content",plural:!1,selections:[h],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"blocks(first:5000)"}],storageKey:null},{alias:null,args:null,concreteType:"Trigger",kind:"LinkedField",name:"liveCaptureTrigger",plural:!1,selections:[s,m,k],storageKey:null},{args:null,kind:"FragmentSpread",name:"RailsTestingTaskView_StateGraphTestRun"},{args:null,kind:"FragmentSpread",name:"RailsTestingTriggerEntryPointViewStateGraphTestRunFragment"},{args:null,kind:"FragmentSpread",name:"useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun"}],storageKey:null},{alias:null,args:null,concreteType:"AgentMessage",kind:"LinkedField",name:"agentMessage",plural:!1,selections:[s],storageKey:null}],storageKey:null}],type:"MutationCreateStateGraphTestRunWithTaskSuccess",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"CreateStateGraphTestRunWithTaskMutation",selections:[{alias:"mutationResult",args:n,concreteType:null,kind:"LinkedField",name:"createStateGraphTestRunWithTask",plural:!1,selections:[l,i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"issues",plural:!0,selections:[l,s,r,o,d,u,a,c],storageKey:null}],type:"StateGraphValidationError",abstractKey:null},g,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CreateStateGraphTestRunOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"StateGraphTestRun",kind:"LinkedField",name:"stateGraphTestRun",plural:!1,selections:[s,m,y,{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[s,m,p,{alias:null,args:f,concreteType:"ConversationBlocksConnection",kind:"LinkedField",name:"blocks",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationBlocksConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ConversationBlock",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"content",plural:!1,selections:[l,h],storageKey:null},m],storageKey:null}],storageKey:null}],storageKey:"blocks(first:5000)"},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,concreteType:"ConversationChannel",kind:"LinkedField",name:"openChannels",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"startingNodeId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"statefulToolKey",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"instanceKey",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdByNodeId",storageKey:null},{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[F,m,{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null},r,m,s],storageKey:null},{alias:null,args:null,concreteType:"TriggerRunAttempt",kind:"LinkedField",name:"startingTriggerRunAttempt",plural:!1,selections:[s,m,{alias:null,args:null,kind:"ScalarField",name:"createdByExternalPayloadId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"payloadId",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Trigger",kind:"LinkedField",name:"liveCaptureTrigger",plural:!1,selections:[s,m,k,{alias:null,args:null,concreteType:"TriggerDefinition",kind:"LinkedField",name:"definition",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[F,m],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"payloadSchema",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"eventSchema",storageKey:null},{alias:null,args:null,concreteType:"TriggerTestingPolicy",kind:"LinkedField",name:"testingPolicy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"fullyProcessLiveCapturePayloads",storageKey:null}],storageKey:null},m],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"activeLiveCapturingInstructions",storageKey:null},{alias:null,args:x,concreteType:"TriggerTestingPayloadsConnection",kind:"LinkedField",name:"testingPayloads",plural:!1,selections:[{alias:null,args:null,concreteType:"TriggerTestingPayloadsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"TriggerTestingPayload",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"externalId",storageKey:null},b,S,T,m,l],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:"testingPayloads(first:10)"},{alias:null,args:x,filters:null,handle:"connection",key:"RailsTestingTriggerEntryPointView_testingPayloads",kind:"LinkedHandle",name:"testingPayloads"},{alias:null,args:[{kind:"Literal",name:"first",value:50}],concreteType:"TriggerRunAttemptsConnection",kind:"LinkedField",name:"runAttempts",plural:!1,selections:[{alias:null,args:null,concreteType:"TriggerRunAttemptsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"TriggerRunAttempt",kind:"LinkedField",name:"node",plural:!1,selections:[s,b,{alias:null,args:v,kind:"ScalarField",name:"processedPayload",storageKey:"processedPayload(shouldRemoveFieldsHiddenFromUI:true)"},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},S,T,m],storageKey:null}],storageKey:null}],storageKey:"runAttempts(first:50)"}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AgentMessage",kind:"LinkedField",name:"agentMessage",plural:!1,selections:[s,m],storageKey:null}],storageKey:null}],type:"MutationCreateStateGraphTestRunWithTaskSuccess",abstractKey:null}],storageKey:null}]},params:{cacheID:"52d4e3347fcdd9d9cdc1252ea02eae43",id:null,metadata:{},name:"CreateStateGraphTestRunWithTaskMutation",operationKind:"mutation",text:"mutation CreateStateGraphTestRunWithTaskMutation(\n  $input: CreateStateGraphTestRunWithTaskInput!\n) {\n  mutationResult: createStateGraphTestRunWithTask(input: $input) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on StateGraphValidationError {\n      issues {\n        __typename\n        id\n        type\n        level\n        entityType\n        label\n        message\n        ... on StateGraphValidationConfigureIssue {\n          field\n        }\n      }\n    }\n    ... on ValidationError {\n      fieldErrors {\n        message\n      }\n    }\n    ... on MutationCreateStateGraphTestRunWithTaskSuccess {\n      data {\n        stateGraphTestRun {\n          id\n          nodeId\n          initiallySelectedNodeId\n          conversation {\n            id\n            nodeId\n            entryPointNodeId\n            blocks(first: 5000) {\n              edges {\n                node {\n                  content {\n                    __typename\n                    asJSON\n                  }\n                  nodeId\n                }\n              }\n            }\n          }\n          liveCaptureTrigger {\n            id\n            nodeId\n            enabled\n          }\n          ...RailsTestingTaskView_StateGraphTestRun\n          ...RailsTestingTriggerEntryPointViewStateGraphTestRunFragment\n          ...useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun\n        }\n        agentMessage {\n          id\n          nodeId\n        }\n      }\n    }\n  }\n}\n\nfragment RailsTestingTaskView_StateGraphTestRun on StateGraphTestRun {\n  id\n  conversation {\n    id\n    nodeId\n    entryPointNodeId\n    status\n    openChannels {\n      startingNodeId\n      statefulToolKey\n      instanceKey\n      createdByNodeId\n      tool {\n        tool\n        nodeId\n      }\n      type\n      nodeId\n    }\n    ...useAutoUpdatePucksConversationFragment\n    blocks(first: 5000) {\n      edges {\n        node {\n          content {\n            __typename\n            asJSON\n          }\n          nodeId\n        }\n      }\n    }\n  }\n  ...useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun\n}\n\nfragment RailsTestingTriggerEntryPointViewLiveCaptureTriggerRefetchableFragment on Trigger {\n  runAttempts(first: 50) {\n    edges {\n      node {\n        id\n        payload(shouldRemoveFieldsHiddenFromUI: true)\n        processedPayload(shouldRemoveFieldsHiddenFromUI: true)\n        createdAt\n        shouldRunCheck {\n          shouldRun\n          reasons {\n            message\n          }\n          softFilter\n        }\n        llmSummary\n        nodeId\n      }\n    }\n  }\n  nodeId\n}\n\nfragment RailsTestingTriggerEntryPointViewStateGraphTestRunFragment on StateGraphTestRun {\n  id\n  liveCaptureTrigger {\n    definition {\n      name\n      tool {\n        tool\n        nodeId\n      }\n      payloadSchema\n      eventSchema\n      testingPolicy {\n        fullyProcessLiveCapturePayloads\n      }\n      nodeId\n    }\n    id\n    nodeId\n    activeLiveCapturingInstructions\n    testingPayloads(first: 10) {\n      edges {\n        node {\n          externalId\n          payload(shouldRemoveFieldsHiddenFromUI: true)\n          shouldRunCheck {\n            shouldRun\n            reasons {\n              message\n            }\n            softFilter\n          }\n          llmSummary\n          nodeId\n          __typename\n        }\n        cursor\n      }\n      pageInfo {\n        endCursor\n        hasNextPage\n      }\n    }\n    ...RailsTestingTriggerEntryPointViewLiveCaptureTriggerRefetchableFragment\n  }\n  conversation {\n    startingTriggerRunAttempt {\n      id\n      nodeId\n      createdByExternalPayloadId\n      payloadId\n    }\n    nodeId\n  }\n  nodeId\n}\n\nfragment useAutoUpdatePucksConversationFragment on Conversation {\n  id\n  openChannels {\n    id\n    startingNodeId\n    createdByNodeId\n    tool {\n      tool\n      displayName\n      nodeId\n    }\n    nodeId\n  }\n}\n\nfragment useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun on StateGraphTestRun {\n  id\n  conversation {\n    blocks(first: 5000) {\n      edges {\n        node {\n          content {\n            __typename\n            asJSON\n          }\n          nodeId\n        }\n      }\n    }\n    nodeId\n  }\n}\n"}}}();eA.hash="06439ac66c8992efe8bc3ece7035d8b4";var ej=l(2932),eN=l(25270),eL=l(45209),e_=l(21690);let ew={closed:{height:0,overflow:"hidden",transition:{duration:.1,ease:"easeInOut"}},open:{height:"auto",overflow:"hidden",transition:{duration:.1,ease:"easeInOut"}}},eR={closed:{opacity:0,y:-12,transition:{duration:.1,delay:.1,ease:"easeOut"}},open:{opacity:1,y:0,transition:{duration:.1,ease:"easeIn"}}},eD={closed:{opacity:0,transition:{duration:.1,ease:"easeOut"}},open:{opacity:1,transition:{duration:.1,ease:"easeIn"}}};function eP(e){let{header:n,headerClassName:l,content:t}=e,[i,s]=(0,f.useState)(!1),{refs:r,context:o}=(0,e_.we)({open:i,onOpenChange:s}),d=(0,e_.iQ)(o),u=(0,e_.kp)(o),{getReferenceProps:c,getFloatingProps:g}=(0,e_.bv)([d,u]),m=(0,f.useCallback)(()=>{r.floating.current&&(r.floating.current.style.overflow="auto")},[r.floating]);return(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsxs)("button",{"data-open":i,className:(0,E.QP)("relative z-[100] flex w-full flex-row items-center justify-between bg-slate-2 p-4 text-xs font-medium text-slate-10",t&&"cursor-pointer",l),ref:r.setReference,...c(),children:["function"==typeof n?n(i):n,!!t&&(0,a.jsx)(es.z,{direction:i?"up":"down",className:"transition-transform"})]}),(0,a.jsx)(eo.N,{children:i&&!!t&&(0,a.jsxs)(ed.P.div,{ref:r.setFloating,...g(),variants:ew,initial:"closed",animate:"open",exit:"closed",className:"absolute z-[100] -mt-4 flex max-h-[60vh] w-full flex-col",onAnimationComplete:m,children:[(0,a.jsx)("div",{className:" w-full flex-col bg-slate-2 p-4 pt-0",children:(0,a.jsx)(ed.P.div,{variants:eR,initial:"closed",animate:"open",exit:"closed",className:"flex flex-col",children:t})}),(0,a.jsx)(ed.P.div,{variants:eD,initial:"closed",animate:"open",exit:"closed",className:"pointer-events-none h-4 w-full bg-gradient-to-b from-[#7d7d7d36] to-transparent"})]})})]})}let eM=(0,M.PA)(function(e){var n,l,t,i;let{queryFragmentRef:s,agentDefinitionFragmentRef:r,stateGraphTestRunFragmentRef:o,refetchStateGraphTestRun:d,autoFocusInput:u=!0}=e,c=(0,A.useFragment)(eF,s),g=(0,A.useFragment)(ex,r),p=(0,A.useFragment)(ev,o),h=y.a.lindies.currentLindy,k=null==h?void 0:null===(n=h.stateGraph)||void 0===n?void 0:n.hasConversationEntryPointNode,x=null==p?void 0:p.conversation;j("Conversation",null==x?void 0:x.id);let v=(0,f.useMemo)(()=>{var e,n;return(null!==(n=null==x?void 0:null===(e=x.blocks)||void 0===e?void 0:e.edges)&&void 0!==n?n:[]).map(e=>null==e?void 0:e.node.content.asJSON).filter(e=>!!e)},[null==x?void 0:null===(l=x.blocks)||void 0===l?void 0:l.edges]),T=!!x&&x.status&&(0,eN.N)((0,eI.LF)(x.status,ej.Y));!function(e){let n=(0,A.useFragment)(eK,e),l=null==n?void 0:n.openChannels,a=(0,b.Z)();(0,f.useEffect)(()=>{let e=null==l?void 0:l.filter(e=>!!e.startingNodeId).map(e=>{var n;let l=e.startingNodeId,a={createdByNodeId:null!==(n=e.createdByNodeId)&&void 0!==n?n:l,tool:(0,eI.LF)(e.tool.tool,F.h6),toolDisplayName:e.tool.displayName};return{nodeId:l,puck:a}});a.setNodeTestingPucks(null!=e?e:[])},[l,a])}(x),function(e,n){let l=(0,b.Z)(),a=e.length>0;(0,f.useEffect)(()=>{l.setIsTestCurrentlyRunning(n||a)},[l,n,a]),(0,f.useEffect)(()=>{var a,t;let i=e.filter(N.qG),s=n&&null!==(t=null===(a=i.at(-1))||void 0===a?void 0:a.to._id)&&void 0!==t?t:null;l.initializeGraphTestingState(i,s)},[e,n,l])}(v,T);let I=null!==(i=null==p?void 0:null===(t=p.conversation)||void 0===t?void 0:t.id)&&void 0!==i?i:null,_=(0,b.Z)(),w=(0,P.VH)(),R=(0,B.aV)(),D=(0,z.V)(_,w),M=(0,S.Z)({stateGraph:_,reactFlowInstance:w}),[E]=(0,m.d)(eA),[V]=(0,m.d)(eC),{retryStateGraphTestRunExecution:G}=W({agentDefinitionFragmentRef:g,stateGraphTestRunFragmentRef:p}),O=(0,f.useMemo)(()=>({allowStyledRetry:!1,customRetryExecution:G}),[G]),Q=(0,ef.q2)(()=>{var e,n;let l=null==x?void 0:null===(e=x.openChannels)||void 0===e?void 0:e.find(e=>"user"===e.type);return null!==(n=_.nodes.find(e=>e.id===(null==l?void 0:l.startingNodeId)))&&void 0!==n?n:null},[null==x?void 0:x.openChannels,_]),q=(0,f.useMemo)(()=>{let e=null==x?void 0:x.openChannels.some(e=>"user"===e.type&&null!=e.startingNodeId&&e.startingNodeId!==eL._);return k||!!e},[null==x?void 0:x.openChannels,k]),H=(0,f.useMemo)(()=>x?L.D.filterMap(x.openChannels,(e,n)=>e&&e.createdByNodeId&&_._nodesById.get(e.createdByNodeId)||n):[],[x,_._nodesById]),$=(0,f.useCallback)(async e=>{var n;let{task:l,attachments:a}=e,t=Date.now(),i=I?Q:_.selectedTestingNode;if(!i)return R({level:"danger",label:"Cannot start test",message:I?"The thread is not listening for an user message":"Cannot find the conversation trigger.",duration:5e3}),null;let s=await U({identityId:g.owner.id,entityId:i.id,stateGraph:_.serializedStateGraph,nodesMapById:new Map(_.nodes.map(e=>[e.id,e.serializedData])),edgesMapById:new Map(_.edges.map(e=>[e.id,e.serializedData])),currentConversationBlocks:v});if(!s.isTestable)return R({level:"danger",label:"Cannot start test",message:s.reason,duration:5e3}),D(s.issues,!0),null;let r=a.map(e=>e.attachmentId).filter(e=>!!e),o=(null==p?void 0:null===(n=p.conversation)||void 0===n?void 0:n.id)?await V({variables:{input:{task:l,attachmentIds:r,agentDefinitionId:g.id,stateGraphTestRunId:p.id,nodes:_.nodes.map(e=>e.serializedData),edges:_.edges.map(e=>e.serializedData)}}}):await E({variables:{input:{task:l,attachmentIds:r,entryPointNodeId:i.id,agentDefinitionId:g.id,nodes:_.nodes.map(e=>e.serializedData),edges:_.edges.map(e=>e.serializedData)}}});if(!o.mutationResult.data)return M(o.mutationResult),null;let d=null==o?void 0:o.mutationResult.data;return(null==d?void 0:d.agentMessage)&&(null==d?void 0:d.stateGraphTestRun.conversation)?(_.setTestRunId(d.stateGraphTestRun.id),_.setIsTestCurrentlyRunning(!0),i.updateTestingState("testing",t),{messageId:d.agentMessage.id,conversationId:d.stateGraphTestRun.conversation.id}):null},[I,Q,_,g.owner.id,g.id,v,V,E,p,R,D,M]);(0,K.S)(C.B.conversation,"setStatus",I,e=>{(0,eN.N)(e)||(_.setPendingNodesToTested(),d())});let Z=(0,f.useCallback)(e=>{let n=e.currentTarget.dataset.nodeId;n&&_.setSelectedEntityById(n)},[_]),Y="event".concat(1!==H.length?"s":"");return(0,a.jsxs)(eT.Y5,{conversationId:I,children:[H.length>0&&(0,a.jsx)(eP,{header:(0,a.jsxs)("div",{className:"flex items-center",children:["This thread listens to ",H.length," ",Y,"."]}),content:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"bg-slate-2 pb-4 text-xs font-medium text-slate-10",children:["Manually trigger ",H.length>1?"these":"this"," ",Y," to see Lindyâ€™s response."]}),(0,a.jsx)("ul",{className:"flex flex-col gap-4",children:H.map(e=>(0,a.jsx)("li",{className:"cursor-pointer",onClick:Z,"data-node-id":e.id,children:(0,a.jsx)(et,{node:e})},e.id))})]})}),(0,a.jsx)(eS.e.Provider,{value:O,children:(0,a.jsx)(eb.LW,{agentEnabled:!0,className:"overflow-hidden",gqlQuery:c,agentDefinitionFragmentRef:g,onSubmitTask:$,autoFocusInput:u,shouldRenderInput:q})})]})}),eE={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RailsTestingTriggerEntryPointViewAgentDefinitionFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null}],type:"AgentDefinition",abstractKey:null};eE.hash="b1b61d25d2b23933102316f27fddd8ff";let eV=function(){var e=[{defaultValue:10,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"},{defaultValue:null,kind:"LocalArgument",name:"nodeId"}],n=[{kind:"Variable",name:"id",variableName:"nodeId"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i=[{kind:"Variable",name:"after",variableName:"cursor"},{kind:"Variable",name:"first",variableName:"count"}],s=[{kind:"Literal",name:"shouldRemoveFieldsHiddenFromUI",value:!0}],r={alias:null,args:s,kind:"ScalarField",name:"payload",storageKey:"payload(shouldRemoveFieldsHiddenFromUI:true)"},o={alias:null,args:null,concreteType:"TriggerShouldRunCheck",kind:"LinkedField",name:"shouldRunCheck",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"shouldRun",storageKey:null},{alias:null,args:null,concreteType:"TriggerShouldRunCheckReason",kind:"LinkedField",name:"reasons",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"softFilter",storageKey:null}],storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"llmSummary",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"RailsTestingStateGraphTestRunPaginatedQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{args:[{kind:"Variable",name:"count",variableName:"count"},{kind:"Variable",name:"cursor",variableName:"cursor"}],kind:"FragmentSpread",name:"RailsTestingTriggerEntryPointViewStateGraphTestRunFragment"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"RailsTestingStateGraphTestRunPaginatedQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[l,a,{kind:"InlineFragment",selections:[t,{alias:null,args:null,concreteType:"Trigger",kind:"LinkedField",name:"liveCaptureTrigger",plural:!1,selections:[{alias:null,args:null,concreteType:"TriggerDefinition",kind:"LinkedField",name:"definition",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"tool",storageKey:null},a],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"payloadSchema",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"eventSchema",storageKey:null},{alias:null,args:null,concreteType:"TriggerTestingPolicy",kind:"LinkedField",name:"testingPolicy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"fullyProcessLiveCapturePayloads",storageKey:null}],storageKey:null},a],storageKey:null},t,a,{alias:null,args:null,kind:"ScalarField",name:"activeLiveCapturingInstructions",storageKey:null},{alias:null,args:i,concreteType:"TriggerTestingPayloadsConnection",kind:"LinkedField",name:"testingPayloads",plural:!1,selections:[{alias:null,args:null,concreteType:"TriggerTestingPayloadsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"TriggerTestingPayload",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"externalId",storageKey:null},r,o,d,a,l],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:i,filters:null,handle:"connection",key:"RailsTestingTriggerEntryPointView_testingPayloads",kind:"LinkedHandle",name:"testingPayloads"},{alias:null,args:[{kind:"Literal",name:"first",value:50}],concreteType:"TriggerRunAttemptsConnection",kind:"LinkedField",name:"runAttempts",plural:!1,selections:[{alias:null,args:null,concreteType:"TriggerRunAttemptsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"TriggerRunAttempt",kind:"LinkedField",name:"node",plural:!1,selections:[t,r,{alias:null,args:s,kind:"ScalarField",name:"processedPayload",storageKey:"processedPayload(shouldRemoveFieldsHiddenFromUI:true)"},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},o,d,a],storageKey:null}],storageKey:null}],storageKey:"runAttempts(first:50)"}],storageKey:null},{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[{alias:null,args:null,concreteType:"TriggerRunAttempt",kind:"LinkedField",name:"startingTriggerRunAttempt",plural:!1,selections:[t,a,{alias:null,args:null,kind:"ScalarField",name:"createdByExternalPayloadId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"payloadId",storageKey:null}],storageKey:null},a],storageKey:null}],type:"StateGraphTestRun",abstractKey:null}],storageKey:null}]},params:{cacheID:"26ff5de2f963d0d2d2ff76fe8142a777",id:null,metadata:{},name:"RailsTestingStateGraphTestRunPaginatedQuery",operationKind:"query",text:"query RailsTestingStateGraphTestRunPaginatedQuery(\n  $count: Int = 10\n  $cursor: String\n  $nodeId: ID!\n) {\n  node(id: $nodeId) {\n    __typename\n    ...RailsTestingTriggerEntryPointViewStateGraphTestRunFragment_1G22uz\n    nodeId\n  }\n}\n\nfragment RailsTestingTriggerEntryPointViewLiveCaptureTriggerRefetchableFragment on Trigger {\n  runAttempts(first: 50) {\n    edges {\n      node {\n        id\n        payload(shouldRemoveFieldsHiddenFromUI: true)\n        processedPayload(shouldRemoveFieldsHiddenFromUI: true)\n        createdAt\n        shouldRunCheck {\n          shouldRun\n          reasons {\n            message\n          }\n          softFilter\n        }\n        llmSummary\n        nodeId\n      }\n    }\n  }\n  nodeId\n}\n\nfragment RailsTestingTriggerEntryPointViewStateGraphTestRunFragment_1G22uz on StateGraphTestRun {\n  id\n  liveCaptureTrigger {\n    definition {\n      name\n      tool {\n        tool\n        nodeId\n      }\n      payloadSchema\n      eventSchema\n      testingPolicy {\n        fullyProcessLiveCapturePayloads\n      }\n      nodeId\n    }\n    id\n    nodeId\n    activeLiveCapturingInstructions\n    testingPayloads(after: $cursor, first: $count) {\n      edges {\n        node {\n          externalId\n          payload(shouldRemoveFieldsHiddenFromUI: true)\n          shouldRunCheck {\n            shouldRun\n            reasons {\n              message\n            }\n            softFilter\n          }\n          llmSummary\n          nodeId\n          __typename\n        }\n        cursor\n      }\n      pageInfo {\n        endCursor\n        hasNextPage\n      }\n    }\n    ...RailsTestingTriggerEntryPointViewLiveCaptureTriggerRefetchableFragment\n  }\n  conversation {\n    startingTriggerRunAttempt {\n      id\n      nodeId\n      createdByExternalPayloadId\n      payloadId\n    }\n    nodeId\n  }\n  nodeId\n}\n"}}}();eV.hash="17f662e31dd05ec83c2664a2421e17c6";let eG=function(){var e=["liveCaptureTrigger","testingPayloads"],n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null};return{argumentDefinitions:[{defaultValue:10,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"}],kind:"Fragment",metadata:{connection:[{count:"count",cursor:"cursor",direction:"forward",path:e}],refetch:{connection:{forward:{count:"count",cursor:"cursor"},backward:null,path:e},fragmentPathInResult:["node"],operation:eV,identifierInfo:{identifierField:"nodeId",identifierQueryVariableName:"id"}}},name:"RailsTestingTriggerEntryPointViewStateGraphTestRunFragment",selections:[n,{alias:null,args:null,concreteType:"Trigger",kind:"LinkedField",name:"liveCaptureTrigger",plural:!1,selections:[{alias:null,args:null,concreteType:"TriggerDefinition",kind:"LinkedField",name:"definition",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"tool",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"payloadSchema",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"eventSchema",storageKey:null},{alias:null,args:null,concreteType:"TriggerTestingPolicy",kind:"LinkedField",name:"testingPolicy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"fullyProcessLiveCapturePayloads",storageKey:null}],storageKey:null}],storageKey:null},n,l,{alias:null,args:null,kind:"ScalarField",name:"activeLiveCapturingInstructions",storageKey:null},{alias:"testingPayloads",args:null,concreteType:"TriggerTestingPayloadsConnection",kind:"LinkedField",name:"__RailsTestingTriggerEntryPointView_testingPayloads_connection",plural:!1,selections:[{alias:null,args:null,concreteType:"TriggerTestingPayloadsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"TriggerTestingPayload",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"externalId",storageKey:null},{alias:null,args:[{kind:"Literal",name:"shouldRemoveFieldsHiddenFromUI",value:!0}],kind:"ScalarField",name:"payload",storageKey:"payload(shouldRemoveFieldsHiddenFromUI:true)"},{alias:null,args:null,concreteType:"TriggerShouldRunCheck",kind:"LinkedField",name:"shouldRunCheck",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"shouldRun",storageKey:null},{alias:null,args:null,concreteType:"TriggerShouldRunCheckReason",kind:"LinkedField",name:"reasons",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"softFilter",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"llmSummary",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"RailsTestingTriggerEntryPointViewLiveCaptureTriggerRefetchableFragment"}],storageKey:null},{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[{alias:null,args:null,concreteType:"TriggerRunAttempt",kind:"LinkedField",name:"startingTriggerRunAttempt",plural:!1,selections:[n,l,{alias:null,args:null,kind:"ScalarField",name:"createdByExternalPayloadId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"payloadId",storageKey:null}],storageKey:null}],storageKey:null},l],type:"StateGraphTestRun",abstractKey:null}}();eG.hash="17f662e31dd05ec83c2664a2421e17c6";let eB=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"nodeId"}],n=[{kind:"Variable",name:"id",variableName:"nodeId"}],l={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},a=[{kind:"Literal",name:"shouldRemoveFieldsHiddenFromUI",value:!0}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"RailsTestingRefetchStateGraphTestRunLiveCaptureTriggerQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"RailsTestingTriggerEntryPointViewLiveCaptureTriggerRefetchableFragment"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"RailsTestingRefetchStateGraphTestRunLiveCaptureTriggerQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},l,{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"first",value:50}],concreteType:"TriggerRunAttemptsConnection",kind:"LinkedField",name:"runAttempts",plural:!1,selections:[{alias:null,args:null,concreteType:"TriggerRunAttemptsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"TriggerRunAttempt",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:a,kind:"ScalarField",name:"payload",storageKey:"payload(shouldRemoveFieldsHiddenFromUI:true)"},{alias:null,args:a,kind:"ScalarField",name:"processedPayload",storageKey:"processedPayload(shouldRemoveFieldsHiddenFromUI:true)"},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,concreteType:"TriggerShouldRunCheck",kind:"LinkedField",name:"shouldRunCheck",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"shouldRun",storageKey:null},{alias:null,args:null,concreteType:"TriggerShouldRunCheckReason",kind:"LinkedField",name:"reasons",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"softFilter",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"llmSummary",storageKey:null},l],storageKey:null}],storageKey:null}],storageKey:"runAttempts(first:50)"}],type:"Trigger",abstractKey:null}],storageKey:null}]},params:{cacheID:"c58801b01b33ac06b169ac745e35dee5",id:null,metadata:{},name:"RailsTestingRefetchStateGraphTestRunLiveCaptureTriggerQuery",operationKind:"query",text:"query RailsTestingRefetchStateGraphTestRunLiveCaptureTriggerQuery(\n  $nodeId: ID!\n) {\n  node(id: $nodeId) {\n    __typename\n    ...RailsTestingTriggerEntryPointViewLiveCaptureTriggerRefetchableFragment\n    nodeId\n  }\n}\n\nfragment RailsTestingTriggerEntryPointViewLiveCaptureTriggerRefetchableFragment on Trigger {\n  runAttempts(first: 50) {\n    edges {\n      node {\n        id\n        payload(shouldRemoveFieldsHiddenFromUI: true)\n        processedPayload(shouldRemoveFieldsHiddenFromUI: true)\n        createdAt\n        shouldRunCheck {\n          shouldRun\n          reasons {\n            message\n          }\n          softFilter\n        }\n        llmSummary\n        nodeId\n      }\n    }\n  }\n  nodeId\n}\n"}}}();eB.hash="aedb5b4db4c7ce174ec94d1bdfbad0bb";let eO=function(){var e=[{kind:"Literal",name:"shouldRemoveFieldsHiddenFromUI",value:!0}];return{argumentDefinitions:[],kind:"Fragment",metadata:{refetch:{connection:null,fragmentPathInResult:["node"],operation:eB,identifierInfo:{identifierField:"nodeId",identifierQueryVariableName:"id"}}},name:"RailsTestingTriggerEntryPointViewLiveCaptureTriggerRefetchableFragment",selections:[{alias:null,args:[{kind:"Literal",name:"first",value:50}],concreteType:"TriggerRunAttemptsConnection",kind:"LinkedField",name:"runAttempts",plural:!1,selections:[{alias:null,args:null,concreteType:"TriggerRunAttemptsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"TriggerRunAttempt",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:e,kind:"ScalarField",name:"payload",storageKey:"payload(shouldRemoveFieldsHiddenFromUI:true)"},{alias:null,args:e,kind:"ScalarField",name:"processedPayload",storageKey:"processedPayload(shouldRemoveFieldsHiddenFromUI:true)"},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,concreteType:"TriggerShouldRunCheck",kind:"LinkedField",name:"shouldRunCheck",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"shouldRun",storageKey:null},{alias:null,args:null,concreteType:"TriggerShouldRunCheckReason",kind:"LinkedField",name:"reasons",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"softFilter",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"llmSummary",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"runAttempts(first:50)"},{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null}],type:"Trigger",abstractKey:null}}();eO.hash="aedb5b4db4c7ce174ec94d1bdfbad0bb";var ez=l(30900),eQ=l(85307),eq=l(1894),eU=l(52105),eW=l(5862),eH=l(7094);let e$=(0,eW._)({post:{body:eH.z.object({id:eH.z.string()}),data:eH.z.object({ok:eH.z.boolean()})}}),eZ=(0,eU.In)("POST","/api/events/keepAlive",e$.post.data);var eY=l(5808),eJ=l(31024),eX=l(66850),e0=l(76804),e1=l(95654),e2=l(64434),e3=l(86937),e6=l(30970),e5=l(48080);let e4=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},t=[a],i={kind:"InlineFragment",selections:t,type:"Error",abstractKey:"__isError"},s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"level",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"entityType",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},c={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"field",storageKey:null}],type:"StateGraphValidationConfigureIssue",abstractKey:null},g={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ValidationFieldError",kind:"LinkedField",name:"fieldErrors",plural:!0,selections:t,storageKey:null}],type:"ValidationError",abstractKey:null},m={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"initiallySelectedNodeId",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"entryPointNodeId",storageKey:null},f=[{kind:"Literal",name:"first",value:5e3}],h={alias:null,args:null,kind:"ScalarField",name:"asJSON",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"enabled",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"tool",storageKey:null},x=[{kind:"Literal",name:"first",value:10}],v=[{kind:"Literal",name:"shouldRemoveFieldsHiddenFromUI",value:!0}],b={alias:null,args:v,kind:"ScalarField",name:"payload",storageKey:"payload(shouldRemoveFieldsHiddenFromUI:true)"},S={alias:null,args:null,concreteType:"TriggerShouldRunCheck",kind:"LinkedField",name:"shouldRunCheck",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"shouldRun",storageKey:null},{alias:null,args:null,concreteType:"TriggerShouldRunCheckReason",kind:"LinkedField",name:"reasons",plural:!0,selections:t,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"softFilter",storageKey:null}],storageKey:null},T={alias:null,args:null,kind:"ScalarField",name:"llmSummary",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"SelectStateGraphTestRunTriggerEntryPointPayloadMutation",selections:[{alias:"mutationResult",args:n,concreteType:null,kind:"LinkedField",name:"selectStateGraphTestRunTriggerEntryPointPayload",plural:!1,selections:[l,i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"issues",plural:!0,selections:[s,r,o,d,u,a,c],storageKey:null}],type:"StateGraphValidationError",abstractKey:null},g,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"SelectStateGraphTestRunTriggerEntryPointPayloadOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"StateGraphTestRun",kind:"LinkedField",name:"stateGraphTestRun",plural:!1,selections:[s,m,y,{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[s,m,p,{alias:null,args:f,concreteType:"ConversationBlocksConnection",kind:"LinkedField",name:"blocks",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationBlocksConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ConversationBlock",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"content",plural:!1,selections:[h],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"blocks(first:5000)"}],storageKey:null},{alias:null,args:null,concreteType:"Trigger",kind:"LinkedField",name:"liveCaptureTrigger",plural:!1,selections:[s,m,k],storageKey:null},{args:null,kind:"FragmentSpread",name:"RailsTestingTaskView_StateGraphTestRun"},{args:null,kind:"FragmentSpread",name:"RailsTestingTriggerEntryPointViewStateGraphTestRunFragment"},{args:null,kind:"FragmentSpread",name:"useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun"}],storageKey:null}],storageKey:null}],type:"MutationSelectStateGraphTestRunTriggerEntryPointPayloadSuccess",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"SelectStateGraphTestRunTriggerEntryPointPayloadMutation",selections:[{alias:"mutationResult",args:n,concreteType:null,kind:"LinkedField",name:"selectStateGraphTestRunTriggerEntryPointPayload",plural:!1,selections:[l,i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"issues",plural:!0,selections:[l,s,r,o,d,u,a,c],storageKey:null}],type:"StateGraphValidationError",abstractKey:null},g,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"SelectStateGraphTestRunTriggerEntryPointPayloadOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"StateGraphTestRun",kind:"LinkedField",name:"stateGraphTestRun",plural:!1,selections:[s,m,y,{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[s,m,p,{alias:null,args:f,concreteType:"ConversationBlocksConnection",kind:"LinkedField",name:"blocks",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationBlocksConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ConversationBlock",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"content",plural:!1,selections:[l,h],storageKey:null},m],storageKey:null}],storageKey:null}],storageKey:"blocks(first:5000)"},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,concreteType:"ConversationChannel",kind:"LinkedField",name:"openChannels",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"startingNodeId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"statefulToolKey",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"instanceKey",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdByNodeId",storageKey:null},{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[F,m,{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null},r,m,s],storageKey:null},{alias:null,args:null,concreteType:"TriggerRunAttempt",kind:"LinkedField",name:"startingTriggerRunAttempt",plural:!1,selections:[s,m,{alias:null,args:null,kind:"ScalarField",name:"createdByExternalPayloadId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"payloadId",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Trigger",kind:"LinkedField",name:"liveCaptureTrigger",plural:!1,selections:[s,m,k,{alias:null,args:null,concreteType:"TriggerDefinition",kind:"LinkedField",name:"definition",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[F,m],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"payloadSchema",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"eventSchema",storageKey:null},{alias:null,args:null,concreteType:"TriggerTestingPolicy",kind:"LinkedField",name:"testingPolicy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"fullyProcessLiveCapturePayloads",storageKey:null}],storageKey:null},m],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"activeLiveCapturingInstructions",storageKey:null},{alias:null,args:x,concreteType:"TriggerTestingPayloadsConnection",kind:"LinkedField",name:"testingPayloads",plural:!1,selections:[{alias:null,args:null,concreteType:"TriggerTestingPayloadsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"TriggerTestingPayload",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"externalId",storageKey:null},b,S,T,m,l],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:"testingPayloads(first:10)"},{alias:null,args:x,filters:null,handle:"connection",key:"RailsTestingTriggerEntryPointView_testingPayloads",kind:"LinkedHandle",name:"testingPayloads"},{alias:null,args:[{kind:"Literal",name:"first",value:50}],concreteType:"TriggerRunAttemptsConnection",kind:"LinkedField",name:"runAttempts",plural:!1,selections:[{alias:null,args:null,concreteType:"TriggerRunAttemptsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"TriggerRunAttempt",kind:"LinkedField",name:"node",plural:!1,selections:[s,b,{alias:null,args:v,kind:"ScalarField",name:"processedPayload",storageKey:"processedPayload(shouldRemoveFieldsHiddenFromUI:true)"},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},S,T,m],storageKey:null}],storageKey:null}],storageKey:"runAttempts(first:50)"}],storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationSelectStateGraphTestRunTriggerEntryPointPayloadSuccess",abstractKey:null}],storageKey:null}]},params:{cacheID:"64143e9944af1cf26e3d8aeebd03800e",id:null,metadata:{},name:"SelectStateGraphTestRunTriggerEntryPointPayloadMutation",operationKind:"mutation",text:"mutation SelectStateGraphTestRunTriggerEntryPointPayloadMutation(\n  $input: SelectStateGraphTestRunTriggerEntryPointPayloadInput!\n) {\n  mutationResult: selectStateGraphTestRunTriggerEntryPointPayload(input: $input) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on StateGraphValidationError {\n      issues {\n        __typename\n        id\n        type\n        level\n        entityType\n        label\n        message\n        ... on StateGraphValidationConfigureIssue {\n          field\n        }\n      }\n    }\n    ... on ValidationError {\n      fieldErrors {\n        message\n      }\n    }\n    ... on MutationSelectStateGraphTestRunTriggerEntryPointPayloadSuccess {\n      data {\n        stateGraphTestRun {\n          id\n          nodeId\n          initiallySelectedNodeId\n          conversation {\n            id\n            nodeId\n            entryPointNodeId\n            blocks(first: 5000) {\n              edges {\n                node {\n                  content {\n                    __typename\n                    asJSON\n                  }\n                  nodeId\n                }\n              }\n            }\n          }\n          liveCaptureTrigger {\n            id\n            nodeId\n            enabled\n          }\n          ...RailsTestingTaskView_StateGraphTestRun\n          ...RailsTestingTriggerEntryPointViewStateGraphTestRunFragment\n          ...useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun\n        }\n      }\n    }\n  }\n}\n\nfragment RailsTestingTaskView_StateGraphTestRun on StateGraphTestRun {\n  id\n  conversation {\n    id\n    nodeId\n    entryPointNodeId\n    status\n    openChannels {\n      startingNodeId\n      statefulToolKey\n      instanceKey\n      createdByNodeId\n      tool {\n        tool\n        nodeId\n      }\n      type\n      nodeId\n    }\n    ...useAutoUpdatePucksConversationFragment\n    blocks(first: 5000) {\n      edges {\n        node {\n          content {\n            __typename\n            asJSON\n          }\n          nodeId\n        }\n      }\n    }\n  }\n  ...useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun\n}\n\nfragment RailsTestingTriggerEntryPointViewLiveCaptureTriggerRefetchableFragment on Trigger {\n  runAttempts(first: 50) {\n    edges {\n      node {\n        id\n        payload(shouldRemoveFieldsHiddenFromUI: true)\n        processedPayload(shouldRemoveFieldsHiddenFromUI: true)\n        createdAt\n        shouldRunCheck {\n          shouldRun\n          reasons {\n            message\n          }\n          softFilter\n        }\n        llmSummary\n        nodeId\n      }\n    }\n  }\n  nodeId\n}\n\nfragment RailsTestingTriggerEntryPointViewStateGraphTestRunFragment on StateGraphTestRun {\n  id\n  liveCaptureTrigger {\n    definition {\n      name\n      tool {\n        tool\n        nodeId\n      }\n      payloadSchema\n      eventSchema\n      testingPolicy {\n        fullyProcessLiveCapturePayloads\n      }\n      nodeId\n    }\n    id\n    nodeId\n    activeLiveCapturingInstructions\n    testingPayloads(first: 10) {\n      edges {\n        node {\n          externalId\n          payload(shouldRemoveFieldsHiddenFromUI: true)\n          shouldRunCheck {\n            shouldRun\n            reasons {\n              message\n            }\n            softFilter\n          }\n          llmSummary\n          nodeId\n          __typename\n        }\n        cursor\n      }\n      pageInfo {\n        endCursor\n        hasNextPage\n      }\n    }\n    ...RailsTestingTriggerEntryPointViewLiveCaptureTriggerRefetchableFragment\n  }\n  conversation {\n    startingTriggerRunAttempt {\n      id\n      nodeId\n      createdByExternalPayloadId\n      payloadId\n    }\n    nodeId\n  }\n  nodeId\n}\n\nfragment useAutoUpdatePucksConversationFragment on Conversation {\n  id\n  openChannels {\n    id\n    startingNodeId\n    createdByNodeId\n    tool {\n      tool\n      displayName\n      nodeId\n    }\n    nodeId\n  }\n}\n\nfragment useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun on StateGraphTestRun {\n  id\n  conversation {\n    blocks(first: 5000) {\n      edges {\n        node {\n          content {\n            __typename\n            asJSON\n          }\n          nodeId\n        }\n      }\n    }\n    nodeId\n  }\n}\n"}}}();e4.hash="80a52d437e54dc0bdec8c66500026081";let e7={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1,ease:"easeInOut"}},e9={initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.1,ease:"easeInOut"}},e8={initial:{height:0},animate:{height:"auto"},transition:{duration:.1,ease:"easeOut"}},ne=["title","name","description","text","message","content"];function nn(e){var n,l,t,i,s,r,o,d,u;let{agentDefinitionFragmentRef:c,stateGraphTestRunFragmentRef:g,goToTaskView:y}=e,p=(0,A.useFragment)(eE,c),{data:k,loadNext:F,hasNext:x,isLoadingNext:v}=(0,A.usePaginationFragment)(eG,g),T=null==k?void 0:k.liveCaptureTrigger,I=(0,f.useCallback)(()=>{k&&F(10,{UNSTABLE_extraVariables:{nodeId:k.nodeId}})},[F,k]),[j,N]=(0,A.useRefetchableFragment)(eO,null==k?void 0:k.liveCaptureTrigger);u=(null==T?void 0:T.id)&&(0,R.Ct)(null==T?void 0:T.id),(0,K.S)(C.B.keepAlive,"check",u,()=>{u&&eZ({body:{id:u}})});let _=(0,b.Z)(),M=(0,P.VH)(),E=(0,S.Z)({stateGraph:_,reactFlowInstance:M}),[V,G,B]=(0,m.d)(e4),O=null!==(d=null==B?void 0:null===(n=B.input)||void 0===n?void 0:n.runAttemptId)&&void 0!==d?d:null==B?void 0:null===(l=B.input)||void 0===l?void 0:l.externalPayloadId,z=(0,f.useCallback)(async e=>{var n,l,a,t;if(e.stopPropagation(),!k)return;(null==T?void 0:T.definition)&&h.z.capture("testing_select_payload",{"trigger.tool":T.definition.tool.tool,"trigger.name":T.definition.name});let i=e.currentTarget.dataset.payloadId,s="true"===e.currentTarget.dataset.isExternalPayload;if(i){if(s?(null==k?void 0:null===(l=k.conversation)||void 0===l?void 0:null===(n=l.startingTriggerRunAttempt)||void 0===n?void 0:n.createdByExternalPayloadId)===i:(null==k?void 0:null===(t=k.conversation)||void 0===t?void 0:null===(a=t.startingTriggerRunAttempt)||void 0===a?void 0:a.payloadId)===i){y();return}try{let e=await V({variables:{input:s?{agentDefinitionId:p.id,externalPayloadId:i,stateGraphTestRunId:k.id}:{agentDefinitionId:p.id,runAttemptId:i,stateGraphTestRunId:k.id}}});if(!e.mutationResult.data){E(e.mutationResult);return}y()}catch(e){D.Cp(e,{tags:{eng_project:w.t.RailsTesting}})}}},[V,p.id,y,E,k,null==T?void 0:T.definition]);(0,K.S)(C.B.triggerRunAttempt,"newRunAttempt",null==T?void 0:T.id,()=>{(null==T?void 0:T.nodeId)&&(0,f.startTransition)(()=>{N({nodeId:T.nodeId},{fetchPolicy:"store-and-network"})})});let Q=(0,f.useCallback)((e,n)=>{var l,a,t,i,s;let r=n?null==T?void 0:null===(l=T.definition)||void 0===l?void 0:l.eventSchema:null==T?void 0:null===(a=T.definition)||void 0===a?void 0:a.payloadSchema;return null!==(s=L.D.filterMap(null!==(i=null==r?void 0:null===(t=r.lindyMetadata)||void 0===t?void 0:t.significantFields)&&void 0!==i?i:ne,(n,l)=>{var a,t;let i;let s=(0,e5.A)(e,n);if(void 0===s)return l;r&&(0,e2.fc)(r,(e,l)=>{let{path:a}=l;a.every(e=>"string"==typeof e)&&a.join(".")===n&&(i=e)});let o=null!==(a=n.split(".").pop())&&void 0!==a?a:n;return[i&&null!==(t=(0,e1.ub)(i,o))&&void 0!==t?t:(0,e3.De)(o),s]}))&&void 0!==s?s:[]},[null==T?void 0:null===(t=T.definition)||void 0===t?void 0:t.eventSchema,null==T?void 0:null===(i=T.definition)||void 0===i?void 0:i.payloadSchema]),q=(0,f.useMemo)(()=>{var e,n,l,a;let t=e=>{let{id:n,payload:l,shouldRunCheck:a,subtitle:t,isExternalPayload:i,isProcessedPayload:s,llmSummary:r}=e,o=Q(l,s);return{id:n,title:r,subtitle:t,userText:o.map(e=>{let[n,l]=e;return"## ".concat(n,":\n\n").concat(function(e){if("object"!=typeof e||null===e)return String(e);let n=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a="  ".repeat(l);return Array.isArray(e)?e.map(e=>"".concat(a,"- ").concat(n(e,l+1))).join("\n"):"object"==typeof e&&null!==e?Object.entries(e).map(e=>{let[t,i]=e,s="".concat(a,"- **").concat(t,"**:");return"object"==typeof i&&null!==i?"".concat(s,"\n").concat(n(i,l+1)):"".concat(s," ").concat(String(i))}).join("\n"):String(e)};return n(e)}(l))}).join("\n"),payload:l,shouldRunCheck:a,isExternalPayload:i,significantPayload:o}};return function(e){let n;let l=[],a=[],t=!1;for(let r of e){if(r.shouldRunCheck&&r.shouldRunCheck.shouldRun!==t){var i,s;a.length&&n&&l.push({runAttempts:a,shouldRun:t,id:n}),a=[],n=void 0,t=null!==(s=null===(i=r.shouldRunCheck)||void 0===i?void 0:i.shouldRun)&&void 0!==s&&s}a.push(r),n=r.id}return a.length&&n&&l.push({runAttempts:a,shouldRun:t,id:n}),l}([...null!==(l=null==j?void 0:null===(e=j.runAttempts)||void 0===e?void 0:e.edges.map(e=>{var n,l,a,i;return(null==e?void 0:e.node)?t({id:e.node.id,payload:(null==T?void 0:null===(n=T.definition.testingPolicy)||void 0===n?void 0:n.fullyProcessLiveCapturePayloads)?e.node.processedPayload:e.node.payload,shouldRunCheck:e.node.shouldRunCheck&&{shouldRun:e.node.shouldRunCheck.shouldRun,reasons:(null!==(a=e.node.shouldRunCheck.reasons)&&void 0!==a?a:[]).map(e=>e.message),softFilter:e.node.shouldRunCheck.softFilter},subtitle:(0,e6.A)(new Date(e.node.createdAt),{addSuffix:!0,includeSeconds:!0}),isExternalPayload:!1,isProcessedPayload:null!==(i=null==T?void 0:null===(l=T.definition.testingPolicy)||void 0===l?void 0:l.fullyProcessLiveCapturePayloads)&&void 0!==i&&i,llmSummary:e.node.llmSummary}):null}).filter(e=>null!==e))&&void 0!==l?l:[],...null!==(a=null==T?void 0:null===(n=T.testingPayloads)||void 0===n?void 0:n.edges.map(e=>{var n;return(null==e?void 0:e.node)?t({id:e.node.externalId,payload:e.node.payload,shouldRunCheck:e.node.shouldRunCheck&&{shouldRun:e.node.shouldRunCheck.shouldRun,reasons:(null!==(n=e.node.shouldRunCheck.reasons)&&void 0!==n?n:[]).map(e=>e.message),softFilter:e.node.shouldRunCheck.softFilter},subtitle:"Previous event",isExternalPayload:!0,isProcessedPayload:!1,llmSummary:e.node.llmSummary}):null}).filter(e=>null!==e))&&void 0!==a?a:[]])},[Q,null==T?void 0:null===(s=T.definition.testingPolicy)||void 0===s?void 0:s.fullyProcessLiveCapturePayloads,null==T?void 0:null===(r=T.testingPayloads)||void 0===r?void 0:r.edges,null==j?void 0:null===(o=j.runAttempts)||void 0===o?void 0:o.edges]);return(0,a.jsxs)("div",{className:"flex size-full flex-col overflow-hidden text-slate-12",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-slate-2 p-4",children:[(0,a.jsx)("div",{children:(0,a.jsx)(e0.y,{className:"size-3 stroke-slate-9"})}),(0,a.jsx)(eo.N,{children:(null==T?void 0:T.activeLiveCapturingInstructions)?(0,a.jsx)(ed.P.div,{...e7,children:(0,a.jsx)(eQ.v,{className:"text-xs font-medium text-slate-10",children:T.activeLiveCapturingInstructions})}):" "})]}),q.length>0&&(0,a.jsx)("div",{className:"h-full grow overflow-auto",children:(0,a.jsx)(eJ.V,{className:"gap-0 py-5",left:!0,children:q.map(e=>{let{runAttempts:n,shouldRun:l,id:t}=e;return(0,a.jsx)(eo.N,{children:l?(0,a.jsx)("div",{className:"flex w-full flex-col gap-2",children:n.map(e=>(0,a.jsx)(nl,{attempt:e,onRunAttemptClick:z,isSendingTestRunAttempt:G,selectedRunAttemptId:O},e.id))}):(0,a.jsx)("div",{className:"w-full px-4 pb-4 pt-2",children:(0,a.jsx)(eY.N,{header:(0,a.jsxs)("div",{className:"text-sm text-slate-11",children:[n.length," filtered result",1===n.length?"":"s"]}),defaultClosed:!0,children:(0,a.jsx)("div",{className:"mt-4 flex w-full flex-col gap-2",children:n.map(e=>{var n;return(0,a.jsx)(nl,{attempt:e,onRunAttemptClick:z,isSendingTestRunAttempt:G,didNotRunReasons:null===(n=e.shouldRunCheck)||void 0===n?void 0:n.reasons,selectedRunAttemptId:O,noXPadding:!0},e.id)})})})})},t)})})}),q.length>0&&x&&(0,a.jsx)("div",{className:"flex items-center justify-center p-4",children:(0,a.jsx)(ei.$,{level:"outline",onClick:I,isLoading:v,children:"Load more"})})]})}function nl(e){var n;let{attempt:l,onRunAttemptClick:t,isSendingTestRunAttempt:i,selectedRunAttemptId:s,didNotRunReasons:r,noXPadding:o}=e;return(0,a.jsx)(ed.P.div,{className:(0,E.QP)("overflow-hidden w-full",o?"":"px-4"),...e8,children:(0,a.jsx)(ed.P.div,{className:(0,E.QP)("mb-2"),...e9,children:(0,a.jsx)(eq.P,{title:l.title,subtitle:l.subtitle,userText:null!==(n=l.userText)&&void 0!==n?n:"",payload:l.payload,additionalContent:(0,a.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[r&&r.length>0&&(0,a.jsx)(ez.F,{type:"warning",withIcon:!0,className:"w-full justify-start",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-slate-11",children:"This event would not have passed the trigger's filters"}),r.map(e=>(0,a.jsx)("div",{className:"text-xs text-slate-11",children:e},e))]})}),(0,a.jsxs)(ei.$,{level:"outline",onClick:t,"data-payload-id":l.id,"data-is-external-payload":l.isExternalPayload?"true":"false",disabled:i,children:[(0,a.jsx)("div",{children:"Select"}),i&&s===l.id?(0,a.jsx)(e0.y,{className:"ml-3 size-3 stroke-slate-12"}):(0,a.jsx)(eX.u,{className:"ml-3 size-3 text-slate-12"})]})]})})},l.id)},l.id)}let na=function(e,n){return function(l){let[a,t]=(0,f.useReducer)(e,null,l);return[(0,f.useMemo)(()=>{var e;return null!==(e=null==n?void 0:n(a))&&void 0!==e?e:a},[a]),t]}}((e,n)=>{switch(n.action){case"go-back":return y.a.ui.setTestingPanelLastView({type:"nodeSelection"}),{type:"nodeSelection",lastAction:"go-back"};case"set-view":return y.a.ui.setTestingPanelLastView(n.view),{...n.view,lastAction:"set-view"}}},e=>({view:e,lastAction:e.lastAction,canClear:!1,canRetry:"taskView"===e.type,canGoBack:"triggerEntryPointView"===e.type||"taskView"===e.type,canClose:"nodeSelection"===e.type})),nt=(0,M.PA)(function(e){return(0,a.jsx)(c.mF,{children:(0,a.jsx)("div",{className:(0,E.QP)("flex flex-col overflow-y-hidden",e.className),children:(0,a.jsx)(T.ZU,{children:e.children})})})}),ni=(0,M.PA)(function(e){var n,l,r,c,h,F,T,K;let{className:C,...M}=e,E=(0,A.useFragment)(t,M.queryFragmentRef),V=(0,A.useFragment)(i,M.agentDefinitionFragmentRef),{isFullyOpen:G}=(0,u.TT)(),[B,O]=(0,A.useRefetchableFragment)(o,M.stateGraphTestRunFragmentRef),z=(0,f.useCallback)(()=>{B&&(0,f.startTransition)(()=>{O({nodeId:null==B?void 0:B.nodeId},{fetchPolicy:"network-only"})})},[B,O]),Q=!!(null==B?void 0:B.conversation),q=(0,b.Z)(),U=(0,P.VH)(),{selectedTestingNode:J,nodes:X,edges:ee,selectTestingNode:en,clearTestingStates:el,entryPointNodes:ea,workflowStartNodes:et}=q;!function(){var e,n;let l=(0,f.useRef)(null!==(n=null===(e=y.a.lindies.currentLindy)||void 0===e?void 0:e.stateGraph.selectedEntityChangeCount)&&void 0!==n?n:null);(0,f.useEffect)(()=>(0,p.fm)(()=>{var e;let n=y.a.lindies.currentLindy;(null==n?void 0:null===(e=n.stateGraph.selectedEntity)||void 0===e?void 0:e.id)&&(null==n?void 0:n.stateGraph.selectedEntityChangeCount)!==l.current&&(0,p.h5)(()=>{y.a.ui.closeTestingPanel()})}),[])}(),j("Conversation",null==B?void 0:null===(n=B.conversation)||void 0===n?void 0:n.id);let ei=(0,S.Z)({stateGraph:q,reactFlowInstance:U}),[es]=(0,m.d)(Z),[er]=(0,m.d)(Y),[eo]=(0,m.d)(H),[ed]=(0,m.d)($),[eu]=(0,A.useMutation)(d),[ec,eg]=na(()=>{var e,n;return null!==(n=y.a.ui.testingPanelLastView)&&void 0!==n?n:(null==J?void 0:J.isConversationEntryPointNode)?{type:"taskView"}:Q?{type:"taskView"}:(null==B?void 0:null===(e=B.liveCaptureTrigger)||void 0===e?void 0:e.id)?{type:"triggerEntryPointView"}:{type:"nodeSelection"}}),em=(0,A.useRelayEnvironment)(),ep=(0,f.useCallback)(()=>{B&&((null==J?void 0:J.isConversationEntryPointNode)||(en(null),eg({action:"set-view",view:{type:"nodeSelection"}})),(0,A.commitLocalUpdate)(em,e=>{e.delete(B.nodeId)}),q.setTestRunId(null),el())},[em,B,null==J?void 0:J.isConversationEntryPointNode,q,el,en,eg]),{retryStateGraphTestRunExecution:ef,isRetryingTestExecution:eh}=W({agentDefinitionFragmentRef:V,stateGraphTestRunFragmentRef:B}),eF=(0,g.B)(null==B?void 0:null===(l=B.conversation)||void 0===l?void 0:l.id,ef),ex=(0,f.useCallback)(()=>{var e,n,l,a;let t=null!==(a=null==B?void 0:null===(l=B.conversation)||void 0===l?void 0:null===(n=l.blocks)||void 0===n?void 0:null===(e=n.edges)||void 0===e?void 0:e.map(e=>null==e?void 0:e.node.content.asJSON).filter(e=>!!e))&&void 0!==a?a:[],i=L.D.filterMap(t,(e,n)=>(0,N.sw)(e)?e.executionId:n).at(0);if(!i)throw Error("Could not find a execution to retry");eF({executionId:i})},[eF,null==B?void 0:null===(c=B.conversation)||void 0===c?void 0:null===(r=c.blocks)||void 0===r?void 0:r.edges]),ev=(0,f.useCallback)(()=>{eg({action:"go-back"})},[eg]),eb=(0,f.useCallback)(()=>{eg({action:"set-view",view:{type:"taskView"}})},[eg]),eS=(0,f.useCallback)(async e=>{var n,l,a,t,i,r,o;let d=J===e;if(B){let a=!J,t=!!ec.lastAction,i=!a&&!ec.lastAction;if("taskView"===ec.view.type&&d)return;if(B.conversation&&a){en(e),eb();return}if((null===(n=B.liveCaptureTrigger)||void 0===n?void 0:n.id)&&(a||t&&d||i&&(null===(l=y.a.ui.testingPanelLastView)||void 0===l?void 0:l.type)==="triggerEntryPointView")){d||en(e),eg({action:"set-view",view:{type:"triggerEntryPointView"}}),B.liveCaptureTrigger&&eu({variables:{triggerId:B.liveCaptureTrigger.id},optimisticResponse:{reenableLiveCaptureTrigger:{id:B.liveCaptureTrigger.id,nodeId:B.liveCaptureTrigger.nodeId,enabled:!0}}});return}if(B.conversation&&d&&!a){eb();return}if(J&&y.a.ui.testingPanelLastView&&i){d||en(e),eg({action:"set-view",view:y.a.ui.testingPanelLastView});return}}ep(),en(e);try{if((0,k.HY)(e)||(0,k.P8)(e)){eg({action:"set-view",view:{type:"taskView"}});let n=(0,_.Kh)(),l=await eo({variables:{input:{agentDefinitionId:V.id,nodes:X.map(e=>e.serializedData),edges:ee.map(e=>e.serializedData),actionNodeId:(0,p.HO)(e.data._id)}},optimisticResponse:{mutationResult:{__typename:"MutationCreateStateGraphTestRunWithActionSuccess",__isError:"MutationCreateStateGraphTestRunWithActionSuccess",message:"",data:{agentDefinition:{id:V.id,nodeId:V.nodeId},stateGraphTestRun:{nodeId:n,id:n,conversation:null,liveCaptureTrigger:null}}}}});if(l.mutationResult.data)q.setTestRunId(l.mutationResult.data.stateGraphTestRun.id);else{ei(l.mutationResult),eg({action:"set-view",view:{type:"nodeSelection"}});return}}else if((0,k.jq)(e)){if(!e.trigger)throw Error("Please select a trigger for this node");let n=(0,I.F)("TriggerDefinition",(0,R.ni)({tool:e.trigger.tool,key:e.trigger.name})),l=await (0,A.fetchQuery)(em,s,{nodeId:n}).toPromise();if((null==l?void 0:null===(a=l.node)||void 0===a?void 0:a.supportsEmptyPayload)&&(null==l?void 0:null===(i=l.node)||void 0===i?void 0:null===(t=i.testingPolicy)||void 0===t?void 0:t.supportsSyntheticPayload)){eg({action:"set-view",view:{type:"taskView"}});let n=await ed({variables:{input:{agentDefinitionId:V.id,nodes:X.map(e=>e.serializedData),edges:ee.map(e=>e.serializedData),syntheticTriggerNodeId:(0,p.HO)(e.id)}}});n.mutationResult.data?q.setTestRunId(n.mutationResult.data.stateGraphTestRun.id):(ei(n.mutationResult),eg({action:"set-view",view:{type:"nodeSelection"}}));return}if(null==l?void 0:null===(o=l.node)||void 0===o?void 0:null===(r=o.testingPolicy)||void 0===r?void 0:r.supportsLiveCapture){eg({action:"set-view",view:{type:"triggerEntryPointView"}});let n=(0,_.Ak)(),l=(0,_.Kh)(),a=(0,_.Ak)(),t=await es({variables:{input:{agentDefinitionId:V.id,nodes:X.map(e=>e.serializedData),edges:ee.map(e=>e.serializedData),triggerNodeId:(0,p.HO)(e.id)}},optimisticResponse:{mutationResult:{__typename:"MutationStartLiveCaptureForStateGraphTestRunSuccess",__isError:"MutationStartLiveCaptureForStateGraphTestRunSuccess",message:"",data:{liveCaptureTrigger:{nodeId:n,id:n,definition:{nodeId:a,payloadSchema:""},activeLiveCapturingInstructions:"",runAttempts:{edges:[]}},stateGraphTestRun:{nodeId:l,id:l,liveCaptureTrigger:{nodeId:n,id:n},conversation:null}}}}});if(t.mutationResult.data)q.setTestRunId(t.mutationResult.data.stateGraphTestRun.id);else{ei(t.mutationResult),eg({action:"set-view",view:{type:"nodeSelection"}});return}}}else eg({action:"set-view",view:{type:"taskView"}}),await er({variables:{input:{agentDefinitionId:V.id}}})}catch(e){D.Cp(e,{tags:{eng_project:w.t.RailsTesting,did_cause_broken_ux:!0}}),eg({action:"set-view",view:{type:"nodeSelection"}})}},[B,ep,en,J,ec.lastAction,ec.view.type,eg,eu,eo,V.id,V.nodeId,X,ee,ei,q,em,es,ed,er,eb]),eT=1===ea.length&&0===et.length,eK=1===et.length&&0===ea.length;return!function(e,n){let l=(0,b.Z)(),a=(0,v.JL)(e),t=(0,f.useRef)(!1);(0,f.useEffect)(()=>{a&&!t.current&&(x(a,"auto"),l.selectTestingNode(a),n(a),t.current=!0)},[l,a,n])}(Q?null==B?void 0:null===(h=B.conversation)||void 0===h?void 0:h.entryPointNodeId:eT?null===(F=ea[0])||void 0===F?void 0:F.id:eK?null===(T=et[0])||void 0===T?void 0:T.id:null!==(K=null==B?void 0:B.initiallySelectedNodeId)&&void 0!==K?K:null,eS),(0,a.jsxs)(nt,{className:C,children:[(0,a.jsx)(ey,{state:ec,goBack:ev,isRetryingTestRun:eh,retryTestRun:(null==J?void 0:J.isConversationEntryPointNode)?ep:ex,close:y.a.ui.closeTestingPanel}),"taskView"===ec.view.type?(0,a.jsx)(eM,{...M,autoFocusInput:G,queryFragmentRef:E,agentDefinitionFragmentRef:V,stateGraphTestRunFragmentRef:B,refetchStateGraphTestRun:z}):"nodeSelection"===ec.view.type?(0,a.jsx)(ek,{setSelectedNode:eS}):"triggerEntryPointView"===ec.view.type?(0,a.jsx)(nn,{agentDefinitionFragmentRef:V,stateGraphTestRunFragmentRef:B,goToTaskView:eb}):null]})})},57414:(e,n,l)=>{"use strict";l.d(n,{g:()=>d});var a=l(50612),t=l(67373),i=l(66850),s=l(31284),r=l(8678),o=l(25919);let d=(0,r.PA)(function(){return(0,a.jsx)(t.$,{onClick:s.a.ui.toggleTestingPanelOpen,level:"outline",size:"sm",className:(0,o.QP)("h-8",s.a.ui.isTestingPanelOpen&&"text-blue-9 bg-blue-1 border-blue-9"),icon:(0,a.jsx)(i.u,{className:(0,o.QP)("size-4",s.a.ui.isTestingPanelOpen&&"text-blue-9")}),"data-ph-capture-attribute-testing-step":"open-test",children:"Test"})})},80936:(e,n,l)=>{"use strict";l.d(n,{H:()=>c});var a=l(50612),t=l(95158),i=l(86383),s=l(98755),r=l(85739),o=l(70732),d=l(94344),u=l(25919);let c=e=>{let{accepted:n=!1,disabled:l=!1,onChange:t=()=>{},value:i=[],onToggle:s,checkIcon:r,placeholder:o="Add a new item",className:u}=e,c=(0,d.useCallback)((e,n)=>{t(i.map((l,a)=>a===n?{value:e,isActive:!0,id:l.id}:l))},[t,i]),m=(0,d.useCallback)(e=>{t([...i,{value:e}])},[t,i]),y=(0,d.useCallback)(e=>{t(i.filter((n,l)=>l!==e))},[t,i]),p=(0,d.useCallback)((e,n)=>{let l=i.at(n)?{...i.at(n)}:void 0;l&&(l.isActive=e,t(i.map((e,a)=>a===n?l:e)),null==s||s(l.value,e))},[t,s,i]),f=(0,d.useMemo)(()=>[...i.map(e=>({entry:e,isAddNew:!1})),...l?[]:[{entry:{value:""},isAddNew:!0}]],[i,l]);return(0,a.jsx)("div",{className:"relative z-0 space-y-[1px] rounded-md border-0 border-slate-4","data-testid":"lindy.agent-wizard.editable-tile-list",children:f.map((e,t)=>{var i;let{entry:s,isAddNew:d}=e;return(0,a.jsx)(g,{value:s.value,index:t,onChange:d?m:c,deleteTile:y,accepted:n,disabled:l,placeholder:d?o:void 0,isAddNew:d,onToggle:p,checked:null===(i=s.isActive)||void 0===i||i,checkIcon:r,className:u},t)})})};function g(e){let{value:n,placeholder:l,onChange:c,onToggle:g,checked:m=!1,deleteTile:y,accepted:p,disabled:f,index:h=0,checkIcon:k=!0,isAddNew:F,className:x}=e,[v,b]=(0,d.useState)(m),S=(0,d.useCallback)(e=>{b(e),null==g||g(e,h)},[b,g,h]),T=(0,d.useCallback)(e=>{c(e,h)},[c,h]),K=(0,d.useCallback)(()=>{y&&y(h)},[y,h]),[I,C]=(0,d.useState)(!1),A=(0,d.useCallback)(()=>{C(!0)},[]),j=(0,d.useCallback)(()=>{""!==n.trim()||F||null==y||y(h),C(!1)},[y,F,h,n]),N=(0,d.useCallback)(e=>{if("Enter"===e.key&&!e.shiftKey){let l=e.currentTarget.closest('[data-testid="lindy.agent-wizard.editable-tile"]');if(!l){e.currentTarget.blur(),e.preventDefault();return}let a=l.closest('[data-testid="lindy.agent-wizard.editable-tile-list"]');if(!a){e.currentTarget.blur(),e.preventDefault();return}let t=a.querySelectorAll('[data-testid="lindy.agent-wizard.editable-tile"]'),i=Array.from(t).indexOf(l),s=t[i+1];if(s){var n;null===(n=s.querySelector("textarea"))||void 0===n||n.focus()}else e.currentTarget.blur();e.preventDefault()}},[]);return(0,a.jsxs)("div",{className:(0,u.QP)("flex items-center justify-between gap-2 relative","focus-within:z-10 hover:z-5 focus-within:hover:z-10"),"data-testid":"lindy.agent-wizard.editable-tile","data-is-accepted":p,children:[(0,a.jsx)(s.g,{className:(0,u.QP)("resize-none truncate whitespace-pre-wrap rounded-none border-0 text-sm text-slate-12 bg-slate-1","outline outline-1 outline-slate-6 outline-offset-0 hover:outline-slate-8 focus:outline-primary-9 focus:hover:outline-primary-9 focus:outline-offset-0 transition",0===h?"rounded-t-md border-0":"",0===h&&g?"rounded-t-md":"",F?"rounded-b-md":"",F&&g?"rounded-b-md":"",f?"":k&&I&&n?"pr-32":"pr-24",x),placeholder:l,minHeight:38,maxHeight:200,value:n,autoComplete:"off",onChange:T,disabled:f,onFocus:A,onBlur:j,onKeyDown:N}),!f&&(0,a.jsxs)("div",{className:"absolute right-2 top-0 flex h-full items-center justify-center gap-1",children:[g&&n&&(0,a.jsx)(o.d,{className:"mr-3",onChange:S,checked:v}),k&&I&&!!n&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(r.K,{tooltip:"Confirm",className:"mr-0 h-6 w-6 border border-transparent bg-none hover:border-slate-8",disabled:f,children:(0,a.jsx)(t.A,{className:"h-4 w-4 text-primary-9"})})}),y&&!F&&(0,a.jsx)(r.K,{tooltip:"Remove",className:"mr-0 h-6 w-6 border border-transparent bg-none hover:border-slate-8",onClick:K,disabled:f,children:(0,a.jsx)(i.A,{className:"h-4 w-4 text-slate-9 group-hover:text-slate-12"})})]})]})}},34372:(e,n,l)=>{"use strict";l.d(n,{f:()=>s});var a=l(31284),t=l(36441),i=l(94344);function s(){let e=(0,i.useRef)(null);(0,i.useEffect)(()=>(0,t.fm)(()=>{var n,l,t,i;a.a.ui.isTestingPanelOpen||null===(l=a.a.lindies.currentLindy)||void 0===l||l.stateGraph.clearTestingStates({keepTestRun:!0});let s=null===(n=a.a.lindies.currentLindy)||void 0===n?void 0:n.stateGraph.selectedTestingNode;s&&s.data!==e.current&&((null===(t=e.current)||void 0===t?void 0:t._id)===s.data._id&&(null===(i=a.a.lindies.currentLindy)||void 0===i||i.stateGraph.clearTestingStates(),a.a.ui.closeTestingPanel()),e.current=s.data)}),[])}},39528:(e,n,l)=>{"use strict";l.d(n,{x:()=>o});var a=l(54345),t=l(72735),i=l(31284),s=l(81778),r=l(94344);function o(){var e;let n=(0,s.useRouter)(),l="string"==typeof n.query[t.wG]?n.query[t.wG]:null,o=(0,r.useRef)(!1),d=null===(e=i.a.lindies.currentLindy)||void 0===e?void 0:e.stateGraph;(0,a.l)(()=>{if(d){if(o.current){if(d.testRunId!==l){let e=new URL(window.location.href);d.testRunId?e.searchParams.set(t.wG,d.testRunId):e.searchParams.delete(t.wG),n.replace(e,void 0)}}else d.setTestRunId(l),o.current=!0}},[l,d,n])}},97838:(e,n,l)=>{"use strict";l.d(n,{E4:()=>M});var a=l(50612);let t=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ConnectionsListFragment",selections:[e,{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},{alias:null,args:null,concreteType:"Auth",kind:"LinkedField",name:"auth",plural:!0,selections:[e,{args:null,kind:"FragmentSpread",name:"ConnectionsAuthItemFragment"}],storageKey:null}],type:"Identity",abstractKey:null}}();t.hash="91c322146f780d4932e795c65ea6ae34";let i=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"nodeId"}],n=[{kind:"Variable",name:"id",variableName:"nodeId"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"fields",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"isConnected",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"method",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"provider",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"scopes",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ConnectionsListRefetchByNodeIdQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[l,a,t,i,s,r,o,d],type:"Auth",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ConnectionsListRefetchByNodeIdQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},{kind:"InlineFragment",selections:[a,t,i,s,r,o,d],type:"Auth",abstractKey:null}],storageKey:null}]},params:{cacheID:"8b90fe00e39f6a4a8442259fd62a1b72",id:null,metadata:{},name:"ConnectionsListRefetchByNodeIdQuery",operationKind:"query",text:"query ConnectionsListRefetchByNodeIdQuery(\n  $nodeId: ID!\n) {\n  node(id: $nodeId) {\n    __typename\n    ... on Auth {\n      __typename\n      fields\n      id\n      isConnected\n      label\n      method\n      provider\n      scopes\n    }\n    nodeId\n  }\n}\n"}}}();i.hash="57c103aad4b3fadcfbf6f8080452852e";let s=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"authId"}],n=[{fields:[{kind:"Variable",name:"authId",variableName:"authId"}],kind:"ObjectValue",name:"input"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},t={alias:null,args:null,kind:"ScalarField",name:"deletedAuthNodeId",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ConnectionsListDeleteAuthMutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"deleteAuth",plural:!1,selections:[l,a,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DeleteAuthOutput",kind:"LinkedField",name:"data",plural:!1,selections:[t],storageKey:null}],type:"MutationDeleteAuthSuccess",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ConnectionsListDeleteAuthMutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"deleteAuth",plural:!1,selections:[l,a,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DeleteAuthOutput",kind:"LinkedField",name:"data",plural:!1,selections:[t,{alias:null,args:null,filters:null,handle:"deleteRecord",key:"",kind:"ScalarHandle",name:"deletedAuthNodeId"}],storageKey:null}],type:"MutationDeleteAuthSuccess",abstractKey:null}],storageKey:null}]},params:{cacheID:"248c78cad7ac84cc58b43083d9aabb8f",id:null,metadata:{},name:"ConnectionsListDeleteAuthMutation",operationKind:"mutation",text:"mutation ConnectionsListDeleteAuthMutation(\n  $authId: ID!\n) {\n  deleteAuth(input: {authId: $authId}) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationDeleteAuthSuccess {\n      data {\n        deletedAuthNodeId\n      }\n    }\n  }\n}\n"}}}();s.hash="7ce539bbf577493cf2fdc1258a0c267c";var r=l(73850),o=l(60171),d=l(30495),u=l(20628),c=l(15727),g=l(85680),m=l(51580),y=l(16908),p=l(18658),f=l(50072),h=l(40453),k=l(20923),F=l(76971),x=l(31284),v=l(94344),b=l(79124);l(97244);let S={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ConnectionsAuthItemFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"method",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"provider",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scopes",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fields",storageKey:null},{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"usedBy",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isConnected",storageKey:null}],type:"Auth",abstractKey:null};S.hash="3a01fdae4e46c21e1af2fcaa848a73a5";var T=l(91141),K=l(42717),I=l(67373),C=l(35121),A=l(46251),j=l(66679),N=l(23664),L=l(25919);let _=e=>{let{authFragmentRef:n,onRemove:l,onReconnect:t}=e,i=(0,b.useFragment)(S,n),s=(0,v.useCallback)(()=>t({id:i.id,method:i.method,fields:i.fields,displayName:i.displayName,scopes:i.scopes,label:i.label,provider:i.provider,usedBy:i.usedBy}),[t,i]),r=(0,v.useCallback)(()=>l({id:i.id,nodeId:i.nodeId,displayName:i.displayName,label:i.label,provider:i.provider,usedBy:i.usedBy}),[l,i]),o=(0,v.useMemo)(()=>P(i.provider),[i.provider]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-5",children:(0,a.jsx)(A.si,{tool:o,className:"size-5 rounded-md bg-white"})}),(0,a.jsxs)("div",{className:"flex items-baseline gap-1 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-slate-12",children:i.displayName}),(0,a.jsx)("div",{className:"text-xs text-slate-11",children:"â€¢"}),(0,a.jsx)("div",{className:"text-xs text-slate-11",children:i.label})]})]}),(0,a.jsx)("div",{className:"flex w-56 items-center justify-between",children:i.usedBy&&i.usedBy.length>0?(0,a.jsxs)(j.m_,{placement:"top",children:[(0,a.jsx)(j.ZI,{className:"max-w-[300px]",children:i.usedBy.map(e=>e.name).join(", ")}),(0,a.jsx)(j.k$,{children:(0,a.jsx)(R,{count:i.usedBy.length})})]}):(0,a.jsx)(R,{count:0})}),(0,a.jsx)(T.W1,{as:"div",className:"relative",children:e=>{let{open:n}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.W1.Button,{as:"div",className:"flex",children:(0,a.jsx)(I.$,{level:"text",fullWidthContent:!0,className:"w-36 border-transparent px-3 py-1 shadow-none hover:border-slate-4",trailingIcon:(0,a.jsx)(C.z,{direction:n?"up":"down",className:(0,L.QP)("size-5 text-slate-11 transition-transform")}),children:(0,a.jsxs)("div",{className:"flex w-full items-center gap-2",children:[(0,a.jsx)("div",{className:(0,L.QP)("h-2 w-2 rounded-full flex-shrink-0",i.isConnected?"bg-green-9":"bg-red-9")}),(0,a.jsx)("p",{className:"flex-1 text-left text-slate-12",children:i.isConnected?"Connected":"Expired"})]})})}),(0,a.jsxs)(K._6,{open:n,children:[(0,a.jsx)(w,{onClick:s,children:"Reconnect"}),(0,a.jsx)(w,{onClick:r,children:(0,a.jsx)("span",{className:"text-red-11",children:"Remove"})})]})]})}})]})};function w(e){let{onClick:n,children:l}=e;return(0,a.jsx)(T.W1.Item,{children:e=>{let{focus:t}=e;return(0,a.jsx)("button",{className:(0,L.QP)("flex items-center gap-3 p-2 px-2.5 text-sm text-slate-12 w-full rounded-md",t&&"bg-slate-3 dark:bg-slate-5"),onClick:n,children:l})}})}function R(e){let{count:n}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm font-medium text-slate-12",children:[(0,a.jsx)(D,{}),(0,a.jsx)("span",{children:n})]})}function D(){return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"17",fill:"none",children:(0,a.jsxs)("g",{fill:"#889096",opacity:".6",children:[(0,a.jsx)("path",{d:"M7.839 2.567 6.817 3.589a.227.227 0 0 0 0 .322l4.427 4.428a.227.227 0 0 1 0 .322l-4.427 4.428a.227.227 0 0 0 0 .321l1.022 1.023c.09.09.233.09.322 0l5.772-5.772a.227.227 0 0 0 0-.322L8.161 2.567a.227.227 0 0 0-.322 0Z"}),(0,a.jsx)("path",{d:"m4.756 8.34 2.361-2.362a.227.227 0 0 0 0-.322L6.095 4.634a.227.227 0 0 0-.322 0L2.067 8.339a.227.227 0 0 0 0 .322l3.706 3.707c.09.089.234.089.322 0l1.023-1.023a.227.227 0 0 0 0-.322L4.756 8.661a.227.227 0 0 1 0-.322Z"})]})})}function P(e){if(!e)return N.h6.Lindy;let n=Object.values(N.h6),l=e.endsWith("Auth")?e.slice(0,-4):e;return n.find(e=>e.toLowerCase()===l.toLowerCase())||N.h6.Lindy}function M(e){var n,l;let{identityFragmentRef:S}=e,T=(0,b.useRelayEnvironment)(),K=(0,b.useFragment)(t,S),I=(0,g.aV)(),[C,A]=(0,v.useState)(null),{isOpen:j,onOpen:N,onClose:L}=(0,c.j)(!1),w=(0,v.useCallback)(e=>{if("OAuth"===e.method){var n;window.open((0,f.sO)({provider:e.provider,scopes:[...null!==(n=e.scopes)&&void 0!==n?n:[]],authId:e.id}),"_blank");return}A(e),N()},[N]),R=(0,v.useCallback)(e=>{(0,b.fetchQuery)(T,i,{nodeId:(0,k.F)("Auth",e)},{fetchPolicy:"network-only"}).toPromise().then(e=>{var n,l,a;(null==e?void 0:null===(n=e.node)||void 0===n?void 0:n.__typename)==="Auth"&&x.a.auth.updateOrCreateAuth({id:e.node.id,isConnected:null!==(l=e.node.isConnected)&&void 0!==l&&l,fields:e.node.fields,label:e.node.label,method:e.node.method,provider:e.node.provider,scopes:[...null!==(a=e.node.scopes)&&void 0!==a?a:[]]})}).catch(e=>{I({level:"danger",message:(0,h.SP)(e),duration:3e3})})},[T,I]);(0,m.S)(F.B.auth,"update",null==K?void 0:K.id,e=>{R(e.id),I({level:"success",message:"Successfully connected to ".concat(e.label),duration:3e3})}),(0,m.S)(F.B.auth,"error",null==K?void 0:K.id,e=>{let{message:n}=e;I({level:"danger",message:n,duration:3e3})});let[D,M]=(0,v.useState)(null),{isOpen:E,onOpen:V,onClose:G}=(0,c.j)(!1),B=(0,v.useCallback)(e=>{M(e),V()},[V]),[O]=(0,b.useMutation)(s),z=(0,v.useCallback)(()=>{D&&(O({variables:{authId:D.id},optimisticResponse:{deleteAuth:{__typename:"MutationDeleteAuthSuccess",__isError:"MutationDeleteAuthSuccess",message:"",data:{deletedAuthNodeId:D.nodeId}}},onCompleted:e=>{if(!e.deleteAuth.message){x.a.auth.removeAuth(D.id),I({level:"success",message:"".concat(D.label," authorization removed"),duration:3e3});return}I({level:"danger",label:"Error",message:e.deleteAuth.message,duration:3e3})}}),G(),M(null))},[D,O,G,I]),Q=(0,v.useCallback)(e=>{L(),(null==e?void 0:e.id)&&R(e.id)},[L,R]);return(0,a.jsxs)("div",{className:"flex size-full flex-col gap-6",children:[(0,a.jsx)("div",{className:"text-base font-semibold text-slate-12",children:"Connections"}),(0,a.jsxs)("div",{className:"grid grid-cols-[60%,15%,25%] gap-x-2 gap-y-4",children:[(0,a.jsx)("div",{className:"text-sm font-semibold text-slate-10",children:"App"}),(0,a.jsx)("div",{className:"text-sm font-semibold text-slate-10",children:"Used by"}),(0,a.jsx)("div",{className:"text-sm font-semibold text-slate-10",children:"Status"}),K.auth.filter(Boolean).map(e=>(0,a.jsx)(_,{authFragmentRef:e,onRemove:B,onReconnect:w},e.id))]}),(0,a.jsx)(r.aF,{className:"w-auto max-w-none py-0 sm:w-auto sm:max-w-none",open:j,setClosed:L,children:(0,a.jsxs)(y.$,{children:[(0,a.jsx)(d.o,{onClick:L}),(0,a.jsx)(u.r,{children:null==C?void 0:C.displayName}),C&&(0,a.jsx)(p.ge,{authId:C.id,method:C.method,provider:C.provider,displayName:null!==(l=null==C?void 0:C.displayName)&&void 0!==l?l:"",fields:null==C?void 0:C.fields,onComplete:Q})]})}),(0,a.jsx)(o.u,{open:E,onCancel:G,onConfirm:z,title:"Remove connection? (".concat(null==D?void 0:D.label,")"),text:"You will remove your ".concat(P(null==D?void 0:D.provider)," connection").concat((null==D?void 0:null===(n=D.usedBy)||void 0===n?void 0:n.length)?" to ".concat(D.usedBy.map(e=>e.name).join(", ")):"","."),level:"danger",confirmLabel:"Remove"})]})}},30040:(e,n,l)=>{"use strict";l.r(n),l.d(n,{default:()=>s});var a=l(50612),t=l(27966);l.n(t)()(()=>Promise.resolve().then(l.bind(l,59905)).then(e=>e.UserBillingSettingsLayout),{loadableGenerated:{webpack:()=>[59905]},ssr:!1,loading:()=>null});let i=l(59905).UserBillingSettingsLayout;function s(){return(0,a.jsx)(i,{})}},77283:(e,n,l)=>{"use strict";l.d(n,{l:()=>o});var a=l(50612),t=l(90508),i=l(95674),s=l(94344),r=l(25919);let o=(0,s.memo)(function(e){let{icon:n,color:l,className:s}=e,o=(0,t.hq)(n),d=(0,t.Tm)(o.displayName||i.H0.AgentIcon1)?(0,r.QP)("bg-gradient-to-br fill-white",i.zy[null!=l?l:i.fJ.Blue]):(0,r.QP)("bg-gradient-to-bl",i.HU[null!=l?l:i.Pl.Sky]);return(0,a.jsx)(o,{className:(0,r.QP)("w-6 h-6 rounded p-1 shrink-0",d,s),color:l})})},459:(e,n,l)=>{"use strict";l.d(n,{V:()=>r});var a=l(50612),t=l(94344),i=l(25919),s=l(77218);let r=(0,t.forwardRef)(function(e,n){let{className:l,children:t,...r}=e;return(0,a.jsx)("button",{ref:n,className:(0,i.QP)(s.Kk,"focus-visible:bg-slate-4 focus:outline-none","disabled:opacity-50",l),...r,children:t})})},16167:(e,n,l)=>{"use strict";l.d(n,{H:()=>s,b:()=>i});var a=l(50612),t=l(25919);let i=(0,t.QP)("h-4 w-4 stroke-slate-10 stroke-[1.5px] fill-none");function s(e){let{className:n,children:l,...s}=e;return(0,a.jsx)("span",{className:(0,t.QP)(i,n),...s,children:l})}},915:(e,n,l)=>{"use strict";l.d(n,{l:()=>i});var a=l(50612),t=l(19362);function i(e){return(0,a.jsx)("div",{style:t.i3,className:t.IJ,children:e.children})}},48134:(e,n,l)=>{"use strict";l.d(n,{A:()=>i});var a=l(50612),t=l(25919);function i(e){let{children:n,className:l,...i}=e;return(0,a.jsx)("span",{className:(0,t.QP)("text-sm text-slate-12 font-medium",l),...i,children:n})}},19362:(e,n,l)=>{"use strict";l.d(n,{IJ:()=>d,i3:()=>o,y9:()=>u});var a=l(50612),t=l(91141),i=l(79058),s=l(67373),r=l(25919);let o={boxShadow:"0px 3px 6px 0px rgba(0, 0, 0, 0.10), 0px 0.5px 1px 0px rgba(0, 0, 0, 0.10)"},d=(0,r.QP)("flex min-w-[188px] origin-top flex-col gap-y-1 rounded-[10px] bg-white p-1 dark:bg-slate-1 mt-1","ring-1 ring-slate-12 ring-opacity-5 focus:outline-none border border-slate-4");function u(e){var n;return(0,a.jsxs)(t.W1,{children:[(0,a.jsx)(t.IU,{as:"div",className:"flex h-5 w-5 items-center justify-center",children:(0,a.jsx)(s.$,{level:"text",className:"group h-5 w-5 !cursor-pointer p-0.5 hover:border-slate-8 hover:bg-slate-5 active:border-slate-8 active:bg-slate-7",children:(0,a.jsx)(i.A,{"aria-label":"Expand context menu",className:"group h-5 w-5 text-slate-11 transition-colors group-hover:text-slate-12"})})}),(0,a.jsx)(t.c,{style:o,anchor:null!==(n=e.anchor)&&void 0!==n?n:"bottom end",className:d,children:e.children})]})}},42069:(e,n,l)=>{"use strict";l.d(n,{z:()=>d});var a=l(50612),t=l(84093),i=l(94344),s=l(459),r=l(16167),o=l(48134);let d=(0,i.forwardRef)(function(e,n){return(0,a.jsxs)(s.V,{ref:n,className:"hover:bg-red-3",onClick:e.onClick,children:[(0,a.jsx)(r.H,{children:(0,a.jsx)(t.u,{className:"size-4 stroke-red-9"})}),(0,a.jsx)(o.A,{className:"text-danger-9",children:"Delete"})]})})},60213:(e,n,l)=>{"use strict";l.d(n,{j:()=>d});var a=l(50612),t=l(21690),i=l(96929),s=l(97036),r=l(94344);let o={width:0,height:0,x:0,y:0,top:0,right:0,bottom:0,left:0};function d(e){var n;let l=(0,r.useRef)(o),d=(0,r.useCallback)(n=>{var a,t;if(n){null===(t=e.onOpen)||void 0===t||t.call(e,l.current);return}null===(a=e.onClose)||void 0===a||a.call(e)},[e]),u=(0,r.useRef)(!1),{refs:c,floatingStyles:g,context:m}=(0,t.we)({open:e.isOpen,onOpenChange:d,middleware:[(0,i.cY)(0),(0,i.UU)({fallbackPlacements:["left-start"]}),(0,i.BN)({padding:10})],placement:"right-start",strategy:"fixed",whileElementsMounted:s.ll}),y=(0,t.It)(m,{role:"menu"}),p=(0,t.s9)(m),{getFloatingProps:f}=(0,t.bv)([y,p]);return(0,r.useEffect)(()=>{var n,a;let t;function i(e){e.preventDefault();let n={width:0,height:0,x:e.clientX,y:e.clientY,top:e.clientY,right:e.clientX,bottom:e.clientY,left:e.clientX};c.setPositionReference({getBoundingClientRect:()=>n}),l.current=n,d(!0),clearTimeout(t),u.current=!1,t=window.setTimeout(()=>{u.current=!0},300)}function s(){u.current&&(l.current=o,d(!1))}return null===(n=e.targetRef.current)||void 0===n||n.addEventListener("contextmenu",i),null===(a=e.targetRef.current)||void 0===a||a.addEventListener("mouseup",s),()=>{var n,l;null===(n=e.targetRef.current)||void 0===n||n.removeEventListener("contextmenu",i),null===(l=e.targetRef.current)||void 0===l||l.removeEventListener("mouseup",s),clearTimeout(t)}},[c,e,d]),(0,a.jsx)(t.XF,{children:e.isOpen&&(0,a.jsx)(t.zR,{className:"z-floating-menu",lockScroll:!0,children:(0,a.jsx)(t.s3,{context:m,initialFocus:0,returnFocus:null===(n=e.returnFocus)||void 0===n||n,children:(0,a.jsx)("div",{id:"ryan.context-menu",ref:c.setFloating,style:g,...f(),children:e.children})})})})}},60653:(e,n,l)=>{"use strict";l.d(n,{j:()=>u});var a=l(50612),t=l(59794),i=l(38777),s=l(94344),r=l(459),o=l(16167),d=l(48134);let u=(0,s.forwardRef)(function(e,n){let l=(0,s.useCallback)(()=>{e.onClick(!e.isMuted)},[e]);return(0,a.jsxs)(r.V,{ref:n,onClick:l,children:[(0,a.jsx)(o.H,{children:e.isMuted?(0,a.jsx)(t.A,{className:o.b}):(0,a.jsx)(i.A,{className:o.b})}),(0,a.jsx)(d.A,{children:e.isMuted?"Enable notifications":"Mute notifications"})]})})},68888:(e,n,l)=>{"use strict";l.d(n,{m:()=>d});var a=l(50612),t=l(55210),i=l(94344),s=l(459),r=l(16167),o=l(48134);let d=(0,i.forwardRef)(function(e,n){return(0,a.jsxs)(s.V,{ref:n,onClick:e.onClick,children:[(0,a.jsx)(r.H,{children:(0,a.jsx)(t.R,{className:r.b})}),(0,a.jsx)(o.A,{children:"Rename"})]})})},77218:(e,n,l)=>{"use strict";l.d(n,{i3:()=>d.i3,Kk:()=>c,VJ:()=>t.V,Hf:()=>i.H,kt:()=>r,AB:()=>o.A,y9:()=>d.y9,mT:()=>u.m,b3:()=>i.b,IJ:()=>d.IJ});var a=l(25919),t=l(459),i=l(16167),s=l(50612);let r=(0,l(94344).forwardRef)(function(e,n){let{children:l,className:t,...i}=e;return(0,s.jsx)("div",{ref:n,className:(0,a.QP)(c,t),...i,children:l})});var o=l(48134),d=l(19362),u=l(68888);let c=(0,a.QP)("group flex items-center gap-3 px-1.5 py-2 text-sm text-slate-12 w-full rounded-md cursor-pointer hover:bg-slate-3")},66623:(e,n,l)=>{"use strict";l.d(n,{s:()=>o});var a=l(50612),t=l(44646),i=l(95674),s=l(94344),r=l(25919);function o(e){let n=(0,s.useCallback)(n=>()=>{e.onColorChange(n)},[e]);return(0,a.jsx)("div",{className:"flex flex-row gap-2 border-b border-slate-6 pb-4",children:Object.values(i.fJ).map(l=>(0,a.jsx)("button",{className:(0,r.QP)("p-0.5 border border-slate-1 cursor-pointer rounded-full hover:border-slate-6 h-8 w-8 flex justify-center items-center hover:bg-slate-3","border-slate-7"),onClick:n(l),children:(0,a.jsx)("div",{className:(0,r.QP)("rounded-full w-[22px] h-[22px] flex justify-center items-center",i.wu[l]),children:(0,a.jsx)(t.S,{className:(0,r.QP)("hidden h-3.5 w-3.5 fill-white",e.color===l&&"flex")})},l)},l))})}},43383:(e,n,l)=>{"use strict";l.d(n,{Y:()=>c});var a=l(50612),t=l(72260),i=l(42009),s=l(94344),r=l(25919),o=l(66623),d=l(86767),u=l(82133);function c(e){let[n,l]=(0,s.useState)(""),c=(0,s.useRef)(null),g=(0,s.useCallback)(n=>{e.onIconChange({name:e.icon,color:n})},[e]),m=(0,s.useCallback)(n=>{e.onIconChange({name:n,color:e.color}),e.closeOnIconSelection&&c.current&&c.current()},[e]);return(0,a.jsx)(t.AM,{as:"div",children:s=>{let{open:y,close:p}=s;return c.current=p,(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.ut,{className:(0,r.QP)(e.className,"hover:opacity-80 transition-opacity",y&&"opacity-90"),children:e.children}),(0,a.jsxs)(i.x,{open:y,className:"flex w-[352px] flex-auto gap-y-4 overflow-hidden rounded-md px-4 pt-4 text-sm",children:[(0,a.jsx)(u.C,{setIconSearch:l,iconSearch:n}),(0,a.jsx)(o.s,{color:e.color,onColorChange:g}),(0,a.jsx)(d.a,{iconSearch:n,iconName:e.icon,iconColor:e.color,onIconChange:m})]})]})}})}},86767:(e,n,l)=>{"use strict";l.d(n,{a:()=>o});var a=l(50612),t=l(63321),i=l(95674),s=l(94344),r=l(25919);function o(e){let{iconName:n,iconColor:l,iconSearch:o,onIconChange:d,onClick:u}=e,c=(0,s.useMemo)(()=>Object.entries(t.r).filter(e=>{let[n]=e;return n.toLowerCase().includes(o.toLowerCase())}),[o]),g=(0,s.useCallback)(e=>()=>{d(e)},[d]);return(0,a.jsx)("div",{className:(0,r.QP)("h-48 w-80 overflow-y-auto pb-4"),children:(0,a.jsx)("div",{className:"grid grid-cols-8 gap-2",onClick:u,children:c.map((e,t)=>{let[s,o]=e;return(0,a.jsx)("div",{className:(0,r.QP)("p-0.5 border border-slate-1 cursor-pointer rounded-md hover:border-slate-6 h-8 w-8 flex justify-center items-center hover:bg-slate-3 transition-colors",s===n&&"border-slate-7"),onClick:g(s),children:(0,a.jsx)(o,{className:(0,r.QP)("h-6 w-6 transition-colors","delay-[--transition-delay]",i.tr[l]),style:{"--transition-delay":"".concat(15*Math.floor(t/8)+t%8*15,"ms")}})},s)})})})}},82133:(e,n,l)=>{"use strict";l.d(n,{C:()=>i});var a=l(50612),t=l(20335);function i(e){let{setIconSearch:n,iconSearch:l}=e;return(0,a.jsx)(t.pd,{type:"text",id:"iconSearch",required:!0,className:"bg-slate-1 px-1.5 py-1 text-sm",placeholder:"Search icons",onChange:n,value:l},"iconSearch")}},1332:(e,n,l)=>{"use strict";l.d(n,{Y:()=>a.Y}),l(66623);var a=l(43383);l(86767),l(82133)},31212:(e,n,l)=>{"use strict";l.d(n,{N:()=>t});var a=l(50612);function t(){return(0,a.jsx)("div",{className:"relative w-full",children:(0,a.jsx)("hr",{className:"absolute -inset-x-1 border-slate-3"})})}},91018:(e,n,l)=>{"use strict";l.d(n,{S:()=>t});var a=l(50612);function t(e){return(0,a.jsx)("div",{className:"flex h-5 min-w-[18px] shrink-0 items-center justify-center self-end rounded bg-red-9 px-1 text-xs font-semibold text-white",children:e.children})}},95814:(e,n,l)=>{"use strict";l.d(n,{W:()=>t});var a=l(50612);function t(e){let{className:n}=e;return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",className:n,children:(0,a.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:"1.5",d:"m14.667 14.667-3.292-3.292M13 7.167a5.833 5.833 0 1 1-11.667 0 5.833 5.833 0 0 1 11.667 0Z"})})}},94531:(e,n,l)=>{"use strict";l.d(n,{v:()=>t});var a=l(50612);function t(e){return(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{fill:"currentColor",d:"M6 4a.667.667 0 0 0 0 1.333V4Zm4 1.333A.667.667 0 1 0 10 4v1.333ZM6 6.667A.667.667 0 1 0 6 8V6.667ZM8 8a.667.667 0 0 0 0-1.333V8ZM4.667 2.667h6.666V1.333H4.667v1.334ZM12 3.333v9.334h1.333V3.333H12Zm-.667 10H4.667v1.334h6.666v-1.334ZM4 12.667V3.333H2.667v9.334H4Zm.667.666A.667.667 0 0 1 4 12.667H2.667a2 2 0 0 0 2 2v-1.334ZM12 12.667a.667.667 0 0 1-.667.666v1.334a2 2 0 0 0 2-2H12Zm-.667-10c.368 0 .667.298.667.666h1.333a2 2 0 0 0-2-2v1.334ZM4.667 1.333a2 2 0 0 0-2 2H4c0-.368.298-.666.667-.666V1.333ZM12 8v2h1.333V8H12Zm-.667 2.667H4.667V12h6.666v-1.333Zm-6.666 4h2v-1.334h-2v1.334Zm0-4a2 2 0 0 0-2 2H4c0-.368.298-.667.667-.667v-1.333ZM12 10a.667.667 0 0 1-.667.667V12a2 2 0 0 0 2-2H12ZM6 5.333h4V4H6v1.333ZM6 8h2V6.667H6V8Z"})})}},20024:(e,n,l)=>{"use strict";l.d(n,{c:()=>t});var a=l(50612);function t(e){return(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{d:"M8 4.666v3.333m0 0v3.334m0-3.334H4.667M8 8h3.333",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})})}},73928:(e,n,l)=>{"use strict";l.d(n,{G:()=>t});var a=l(50612);function t(e){return(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{d:"M8.915 1.241a1.016 1.016 0 0 0-1.83 0L5.51 4.52l-3.627.475c-.841.11-1.191 1.15-.565 1.74l2.65 2.5-.665 3.568c-.158.847.74 1.475 1.48 1.075L8 12.143l3.216 1.734c.741.4 1.638-.228 1.48-1.075l-.665-3.569 2.65-2.5c.627-.59.277-1.628-.564-1.739L10.49 4.52 8.915 1.241Z",fill:"currentColor",strokeWidth:"1.33333",strokeLinecap:"round",strokeLinejoin:"round"})})}},55210:(e,n,l)=>{"use strict";l.d(n,{R:()=>t});var a=l(50612);let t=(0,l(94344).memo)(function(e){return(0,a.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{d:"m11.25 5 1.458-1.458a2.652 2.652 0 0 1 3.75 3.75L15 8.75M11.25 5l-8.506 8.506a.833.833 0 0 0-.244.59V17.5h3.405a.833.833 0 0 0 .59-.244L15 8.75M11.25 5 15 8.75",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})},84093:(e,n,l)=>{"use strict";l.d(n,{u:()=>t});var a=l(50612);let t=(0,l(94344).memo)(function(e){return(0,a.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{d:"M5 5v10a2.5 2.5 0 0 0 2.5 2.5h5A2.5 2.5 0 0 0 15 15V5M5 5h10M5 5H3.333M15 5h1.667M7.5 5a2.5 2.5 0 0 1 5 0m-.833 4.167v4.166M8.333 9.167v4.166",strokeWidth:"1.667",strokeLinecap:"round",strokeLinejoin:"round"})})})},9187:(e,n,l)=>{"use strict";l.d(n,{V:()=>t,t:()=>a});var a=function(e){return e.DesktopAutoUpdate="DesktopAutoUpdate",e.RailsTesting="RailsTesting",e.KnowledgeBase="KnowledgeBase",e.PhoneCalls="PhoneCalls",e.SignInWithProvider="SignInWithProvider",e.BillingGatedFeatures="BillingGatedFeatures",e.ActionConfiguration="ActionConfiguration",e.Slack="Slack",e.LLM="LLM",e}({}),t=function(e){return e.EngProject="eng_project",e}({})},45209:(e,n,l)=>{"use strict";l.d(n,{_:()=>a});let a="RailsIgnoreAgentMessage"},36639:(e,n,l)=>{"use strict";l.d(n,{Gh:()=>i,nr:()=>t});var a=l(91777);function t(e,n){if(!n)return e;let l=n.toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\da-z-]/g,"").replace(/-+/g,"-").replace(/^-+|-+$/g,"").slice(0,100);return"".concat(l,"-").concat(e)}function i(e){let n=e.split("/").at(1);if(n)return function(e){let n=e.split("-").at(-1);if(a.GD.isValid(n))return n}(n)}},7565:e=>{e.exports={animationContainer:"liveAnimation_animationContainer___dHX7",innerCircle:"liveAnimation_innerCircle__vfFKx",ring:"liveAnimation_ring__ngu88",pulseOut:"liveAnimation_pulseOut__r_0dC"}}},e=>{var n=n=>e(e.s=n);e.O(0,[1350,6280,8895,2286,8353,3746,7210,1577,6929,209,3933,8866,4125,1995,5166,1389,7236,7366,5845,6394,2580,5518,3174,9219,735,404,3818,3762,601,7961,1611,5704,3850,5592,1488,3712,7384,6251,2677,6957,8077,6903,6020,4527,636,6593,8792],()=>n(48741)),_N_E=e.O()}]);