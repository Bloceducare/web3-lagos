"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8077],{73942:(e,n,t)=>{t.d(n,{M:()=>r,a:()=>i});var a=t(27966),l=t.n(a);let i={background:"none",overflow:"auto",width:"100%"},r=l()(()=>t.e(6042).then(t.t.bind(t,46042,23)),{loadableGenerated:{webpack:()=>[46042]},loading:()=>null,ssr:!1})},30495:(e,n,t)=>{t.d(n,{o:()=>i});var a=t(50612),l=t(31928);function i(e){return(0,a.jsx)("button",{type:"button",className:"group mr-0 inline-flex h-6 w-6 items-center justify-center rounded border border-transparent transition-all hover:border-slate-6 hover:bg-slate-3",onClick:e.onClick,children:(0,a.jsx)(l.A,{className:"h-5 w-5 text-gray-11"})})}},20628:(e,n,t)=>{t.d(n,{r:()=>i});var a=t(50612),l=t(25919);function i(e){return(0,a.jsx)("h2",{className:(0,l.QP)("flex items-center text-xl font-medium mb-0 text-slate-12",e.className),children:e.children})}},77715:(e,n,t)=>{t.d(n,{n:()=>r});var a=t(50612),l=t(73942),i=t(958);function r(e){let{src:n,collapsed:t=!0,collapseStringsAfterLength:r}=e,{isDark:o}=(0,i.G)();if(null!==n&&(Array.isArray(n)||"object"==typeof n))return(0,a.jsx)(l.M,{style:l.a,theme:o?"twilight":"rjv-default",collapsed:t,collapseStringsAfterLength:r,src:n});if("string"==typeof n)try{return(0,a.jsx)(l.M,{style:l.a,theme:o?"twilight":"rjv-default",collapsed:t,collapseStringsAfterLength:r,src:JSON.parse(n)})}catch(e){if(!(e instanceof SyntaxError))throw e}return(0,a.jsx)("div",{className:"overflow-hidden overflow-x-auto font-mono text-xs text-neutral-800 dark:text-neutral-200",children:"string"==typeof n?'"'.concat(n,'"'):JSON.stringify(n)})}},5375:(e,n,t)=>{t.d(n,{S:()=>r});var a=t(50612),l=t(13813),i=t(25919);let r=e=>{let{id:n,label:t,subLabel:r,tooltip:o,checked:s,className:d,error:u,disabled:c,...m}=e;return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("label",{className:"flex w-fit items-start",children:[(0,a.jsx)("div",{className:"flex h-6 items-center",children:(0,a.jsx)("input",{id:n,"aria-describedby":"comments-description",name:"comments",type:"checkbox",checked:s,disabled:c,className:(0,i.QP)("focus:outline-none","ring-offset-2  focus-visible:ring-2 ring-red-9","h-4 w-4 bg-transparent rounded border-neutral-400 dark:border-neutral-600 text-blue-9",s&&"border-primary-9",c&&"opacity-40 cursor-not-allowed focus:ring-transparent",d),...m})}),!!t&&(0,a.jsxs)("div",{className:"ml-3 text-sm leading-6",children:[(0,a.jsxs)("span",{className:"flex items-center font-medium text-neutral-900 dark:text-neutral-100",children:[t,(0,a.jsx)(l.I,{placement:"top",iconClassName:"ml-2 size-5 shrink-0 text-slate-8 hover:text-slate-12",children:o})]}),null!=r&&(0,a.jsx)("p",{id:"comments-description",children:r})]})]}),u&&(0,a.jsx)("p",{className:"text-xs text-danger-9",children:u})]})}},11293:(e,n,t)=>{t.d(n,{U:()=>o});var a=t(98354),l=t(20136),i=t.n(l),r=t(94344);function o(e){let{name:n,queryFn:t,keyFn:l}=e,o=new(i())(t,{cache:!1,cacheKeyFn:l});return{useOne(e,t){let i=(0,r.useMemo)(()=>["batch-query-loader",n,null===e?null:l(e)],[e]);return(0,a.I)({queryKey:i,queryFn:async()=>null===e?null:await o.load(e),...t,enabled:null!==e})},useMany(e,t){let i=(0,r.useMemo)(()=>["batch-query-loader-many",n,...e.map(l)],[e]);return(0,a.I)({queryKey:i,queryFn:async()=>(await o.loadMany(e)).filter(e=>!(e instanceof Error)),...t})},loader:o}}},6028:(e,n,t)=>{t.d(n,{T5:()=>c,$G:()=>m});var a=t(52105),l=t(5862),i=t(98279),r=t(7094);let o=(0,l._)({get:{query:r.z.object({actions:r.z.string()}),data:r.z.array(i.au)}});t(94344),t(79879);let s=(0,a.In)("GET","/api/tools/actions/details",o.get.data);var d=t(11293),u=t(13268);let{useOne:c,useMany:m,loader:p}=(0,d.U)({name:"action-details",queryFn:async e=>{let n=u.D.dedup(e.map(e=>{let{tool:n,key:t}=e;return"".concat(n,".").concat(t)})).join(","),t=await s({query:{actions:n}}),a=new Map;return t.data&&t.data.forEach(e=>{a.set("".concat(e.tool,".").concat(e.actionKey),e)}),e.map(e=>{var n;let t="".concat(e.tool,".").concat(e.key);return null!==(n=a.get(t))&&void 0!==n?n:Error("Action details not found")})},keyFn:e=>{let{tool:n,key:t}=e;return"".concat(n,".").concat(t)}})},72672:(e,n,t)=>{t.d(n,{a:()=>ec});var a=t(50612),l=t(73850),i=t(30495),r=t(20628),o=t(91318),s=t(16908),d=t(8178),u=t(11607),c=t(71792),m=t(84814),p=t(31284);function h(e){if(!e)return[];if("OAuth2AuthConfig"===e.__typename||"CustomOAuth2AuthConfig"===e.__typename){var n;return null!==(n=e.scopes)&&void 0!==n?n:[]}return[]}function g(e,n){return!!n&&e.method===n.method&&e.provider===n.provider}function f(e){return!!((0,c.N)(e)||(0,c.B2)(e))&&(!e.auth||e.isMissingAuthScopes)}var v=t(8678),b=t(94344),y=t(33762),k=t(18658),x=t(67373);let C=(0,b.memo)(function(e){let{className:n,...t}=e;return(0,a.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:n,...t,children:(0,a.jsx)("g",{id:"filled=off, stroke=2, radius=2, join=round",children:(0,a.jsx)("path",{id:"Icons",d:"M9.5 11.75L11 13.25L14.5 9.75M20 11.9123V7.17737C20 6.32338 19.4578 5.56361 18.6502 5.286L12.6502 3.2235C12.2288 3.07866 11.7712 3.07866 11.3498 3.22349L5.34984 5.286C4.54224 5.56361 4 6.32338 4 7.17737V11.9123C4 16.8848 8 19 12 21.1579C16 19 20 16.8848 20 11.9123Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})});var z=t(30035),A=t.n(z),j=t(48675),I=t(95147);function w(e){let{children:n,title:t}=e;return(0,a.jsxs)("div",{className:"mt-3 flex w-full items-center justify-between gap-3 rounded-lg bg-amber-2 p-2 pl-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(I.Y,{className:"h-5 w-5"}),(0,a.jsx)("div",{className:"select-none text-sm tracking-tighter text-amber-12",children:t})]}),n]})}let N=e=>{let{href:n,onClick:t,disabled:l,children:i,...r}=e,o=(0,b.useCallback)(e=>{if(l){e.preventDefault();return}null==t||t();let a=window.open(n);return a&&e.preventDefault(),!!a},[l,t,n]);return l?(0,a.jsx)(a.Fragment,{children:i}):(0,a.jsx)("a",{className:"flex",href:n,target:"_blank",rel:"noreferrer",onClick:o,...r,children:i})},S=e=>{let{tool:n,method:t,item:l,isMissingScopes:i,redirectUri:r,onRequestAuth:o,hideComplianceInfo:s}=e,d=(0,b.useCallback)(()=>o(!0),[o]),u=(0,b.useCallback)(()=>o(!1),[o]);return l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.b,{title:l.label,tool:n,className:"text-slate-12"}),i&&(0,a.jsx)(w,{title:"More permissions needed",children:(0,a.jsx)(F,{label:"Authorize",method:t,redirectUri:r,onClick:u})})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)(j.b,{title:"Connect account",tool:n,className:"text-slate-9 dark:text-slate-11",children:(0,a.jsx)(F,{label:"Connect",method:t,redirectUri:r,onClick:d})}),!s&&(0,a.jsxs)("div",{className:"mt-1.5 inline-flex items-start justify-start gap-2 rounded-md bg-slate-2 p-2",children:[(0,a.jsx)(C,{className:"mt-0.5 size-4 shrink-0 text-blue-9"}),(0,a.jsxs)("p",{className:"text-xs leading-5 text-slate-9",children:["Lindy is"," ",(0,a.jsx)(A(),{href:"https://app.drata.com/trust/9cb791f0-0c38-11ee-865f-029d78a187d9",target:"_blank",className:"font-normal text-slate-12",children:"SOC2 and HIPAA compliant"}),". You can remove and manage connected accounts"," ",(0,a.jsx)(A(),{href:"/settings/connections",target:"_blank",className:"font-normal text-slate-12",children:"here"}),"."]})]})]})};function F(e){let{label:n,method:t,redirectUri:l,onClick:i}=e,r=(0,a.jsx)(x.$,{level:"warning",size:"sm",onClick:i,className:"h-7 pt-[5px]",children:n});return"OAuth"===t&&l?(0,a.jsx)(N,{href:l,tabIndex:-1,children:r}):r}var _=t(91141),T=t(42717),M=t(31634);t(23913);var K=t(38928),P=t(7094),O=function(e){return e.Airtable="airtableAuth",e.BrowseAI="browseAIAuth",e.Calendly="calendlyAuth",e.Clickup="clickupAuth",e.Clockify="clockifyAuth",e.Deepgram="deepgramAuth",e.GitHub="githubAuth",e.GitHubToken="gitHubKBPATAuth",e.Google="googleAuth",e.HubSpot="hubspotAuth",e.Intercom="intercomAuth",e.Jira="jiraAuth",e.Linear="linearAuth",e.MicrosoftOutlook="microsoftOutlookAuth",e.Notion="notionAuth",e.Salesforce="salesforceAuth",e.SerpApi="serpApiAuth",e.Shopify="shopifyAuth",e.Slack="slackAuth",e.Test="testAuth",e.Todoist="todoistAuth",e.Twilio="twilioAuth",e.Twitter="twitterAuth",e.Wandb="wandbAuth",e.ZohoCrm="zohoCrmAuth",e.Zoom="zoomAuth",e}({});let L=P.z.object({iss:P.z.string(),azp:P.z.string(),aud:P.z.string(),sub:P.z.string(),iat:P.z.number().transform(e=>1e3*e).pipe(P.z.coerce.date()),exp:P.z.number().transform(e=>1e3*e).pipe(P.z.coerce.date()),name:P.z.string(),email:P.z.string().email(),email_verified:P.z.boolean().default(!1),picture:P.z.string().nullish(),hd:P.z.string().nullish()}),D=P.z.object({method:P.z.literal("oauth"),accessToken:P.z.string(),refreshToken:P.z.string().nullable(),expiry:P.z.coerce.date().nullable(),scopes:P.z.array(P.z.string()),issuedAt:P.z.coerce.date(),metadata:P.z.record(P.z.unknown()).optional(),lastOpenIDToken:L.nullish(),openIDConnectedAt:P.z.coerce.date().nullish()}),R=P.z.object({method:P.z.literal("token"),token:P.z.string().optional(),scopes:P.z.array(P.z.string()).default([]),source:P.z.enum(["user","app"]).default("user"),metadata:P.z.record(P.z.unknown()).optional()}),U=P.z.object({method:P.z.literal("custom"),metadata:P.z.record(P.z.unknown()).optional()}),E=P.z.object({method:P.z.literal("pipedream"),metadata:P.z.record(P.z.unknown()).optional()});var V=function(e){return e.Active="Active",e.RevokedByProvider="RevokedByProvider",e}({});let $=P.z.object({_id:K.k.objectIdString(),owner:K.k.objectIdString(),accountId:P.z.string(),label:P.z.string(),provider:P.z.string(),status:K.k.nativeEnumWithDefault(V,"Active").nullish()}),q=P.z.discriminatedUnion("method",[D,R,U,E]);$.and(q),P.z.object({workspace_id:P.z.string()}),P.z.object({instance_url:P.z.string()}),P.z.object({team:P.z.object({id:P.z.string(),name:P.z.string().optional()}),user:P.z.object({token:P.z.string(),refreshToken:P.z.string(),expiresAt:P.z.number(),scopes:P.z.array(P.z.string()),id:P.z.string()}),bot:P.z.object({token:P.z.string(),refreshToken:P.z.string(),expiresAt:P.z.number(),scopes:P.z.array(P.z.string()),id:P.z.string(),userId:P.z.string()}).optional(),appId:P.z.string()}),P.z.object({api_domain:P.z.string()});var B=t(35121),G=t(39388),Q=t(5305),H=t(46251),J=t(25919);function W(e){let n=(0,b.useMemo)(()=>e.provider===O.Google?(0,a.jsx)(Q.N,{className:"size-5 overflow-hidden rounded-md"}):e.tool?(0,a.jsx)(H.si,{className:"size-5",tool:e.tool}):void 0,[e.provider,e.tool]),t=(0,b.useCallback)(()=>{e.newAuthRedirect&&window.open(e.newAuthRedirect),e.onRequestAuth(!0)},[e]),l=(0,b.useCallback)(()=>{e.addScopesRedirect&&window.open(e.addScopesRedirect),e.onRequestAuth(!1)},[e]),i=n=>()=>e.onChange(n);return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(_.W1,{as:"div",className:"relative",children:l=>{var r,o;let{open:s}=l;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_.IU,{disabled:e.disabled,as:"div",className:"flex",children:(0,a.jsx)(x.$,{level:"outline",fullWidthContent:!0,disabled:e.disabled,className:"h-12 w-full border-slate-4 bg-slate-1 pl-3 shadow-none hover:bg-slate-3",trailingIcon:(0,a.jsx)(B.z,{direction:s?"up":"down",className:(0,J.QP)("size-5 text-slate-11 transition-transform")}),children:(0,a.jsxs)("div",{className:"flex w-full items-center gap-3",children:[n,(0,a.jsx)("p",{className:"flex-1 truncate text-left text-slate-12",children:null!==(o=null===(r=e.item)||void 0===r?void 0:r.label)&&void 0!==o?o:"Select account"})]})})}),(0,a.jsxs)(T._6,{open:s&&!e.disabled,children:[e.list.filter(Boolean).map(n=>{var t;return(0,a.jsx)(Z,{onClick:i(n),children:(0,a.jsxs)(M.f,{between:!0,className:"size-full",children:[(0,a.jsx)("div",{className:"flex-1 truncate text-left",children:n.label}),n.id===(null===(t=e.item)||void 0===t?void 0:t.id)&&(0,a.jsx)("div",{children:(0,a.jsx)(G.v,{})})]})},n.id)}),(0,a.jsx)(Z,{className:"text-blue-9",onClick:t,children:"Add account"})]})]})}}),e.item&&(e.isMissingScopes||!e.item.isConnected)&&(0,a.jsx)(w,{title:e.isMissingScopes?"More permissions needed":"Connection expired or revoked",children:(0,a.jsx)(x.$,{level:"warning",size:"sm",onClick:l,className:"h-7 pt-1",children:e.isMissingScopes?"Authorize":"Reconnect"})})]})}function Z(e){return(0,a.jsx)(_.Dr,{children:n=>{let{focus:t}=n;return(0,a.jsx)("button",{className:(0,J.QP)("flex items-center gap-3 p-2 px-2.5 text-sm text-slate-12 w-full rounded-md",t&&"bg-slate-3 dark:bg-slate-5",e.className),onClick:e.onClick,children:e.children})}})}var Y=t(50072);let X=function(){var e={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"PipedreamConnectTokenOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"linkToken",storageKey:null}],storageKey:null}],type:"MutationCreatePipedreamConnectTokenSuccess",abstractKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"usePipedreamAuthCreatePipedreamConnectTokenMutation",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"createPipedreamConnectToken",plural:!1,selections:[e],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"usePipedreamAuthCreatePipedreamConnectTokenMutation",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"createPipedreamConnectToken",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},e],storageKey:null}]},params:{cacheID:"5e59368720644fb4860adc689c447f0b",id:null,metadata:{},name:"usePipedreamAuthCreatePipedreamConnectTokenMutation",operationKind:"mutation",text:"mutation usePipedreamAuthCreatePipedreamConnectTokenMutation {\n  createPipedreamConnectToken {\n    __typename\n    ... on MutationCreatePipedreamConnectTokenSuccess {\n      data {\n        linkToken\n      }\n    }\n  }\n}\n"}}}();X.hash="f916df388c50cda4e3c88b224186bf56";let ee=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],t={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ConnectPipedreamAccountOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"authId",storageKey:null}],storageKey:null}],type:"MutationConnectPipedreamAccountSuccess",abstractKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"usePipedreamAuthConnectPipedreamCallbackMutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"connectPipedreamAccount",plural:!1,selections:[t],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"usePipedreamAuthConnectPipedreamCallbackMutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"connectPipedreamAccount",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},t],storageKey:null}]},params:{cacheID:"affa77ab0bd876fe415a006b829a18e5",id:null,metadata:{},name:"usePipedreamAuthConnectPipedreamCallbackMutation",operationKind:"mutation",text:"mutation usePipedreamAuthConnectPipedreamCallbackMutation(\n  $input: ConnectPipedreamAccountInput!\n) {\n  connectPipedreamAccount(input: $input) {\n    __typename\n    ... on MutationConnectPipedreamAccountSuccess {\n      data {\n        authId\n      }\n    }\n  }\n}\n"}}}();ee.hash="21c75dcbc7a230e641cb52b116636390";var en=t(72679),et=t(79124);let ea=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"nodeId"}],n=[{kind:"Variable",name:"id",variableName:"nodeId"}],t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"fields",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"isConnected",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"method",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"provider",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"scopes",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"useRealtimeAuthUpdatesByNodeIdQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[t,a,l,i,r,o,s,d],type:"Auth",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"useRealtimeAuthUpdatesByNodeIdQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[t,{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},{kind:"InlineFragment",selections:[a,l,i,r,o,s,d],type:"Auth",abstractKey:null}],storageKey:null}]},params:{cacheID:"c96665315e0e4e888db5282279b83f0a",id:null,metadata:{},name:"useRealtimeAuthUpdatesByNodeIdQuery",operationKind:"query",text:"query useRealtimeAuthUpdatesByNodeIdQuery(\n  $nodeId: ID!\n) {\n  node(id: $nodeId) {\n    __typename\n    ... on Auth {\n      __typename\n      fields\n      id\n      isConnected\n      label\n      method\n      provider\n      scopes\n    }\n    nodeId\n  }\n}\n"}}}();ea.hash="f10d1a669d8649721ece02c42d98bf1b";var el=t(85680),ei=t(51580),er=t(40453),eo=t(20923),es=t(76971),ed=t(97244);let eu=(0,v.PA)(function(e){var n,v;let x=(0,d.H)(),C=(0,o.q2)(()=>{var n;return function(e,n){if(!e.length||!n)return{nodeIds:[],scopes:h(n)};let t=e.filter(e=>(0,c.N)(e)&&g(n,e.authConfig)&&f(e)),a=e.filter(e=>(0,c.B2)(e)&&g(n,e.authConfig)&&f(e)),l=e.filter(c.P8).reduce((e,t)=>[...e,...t.agentStateNodeActions.filter(e=>g(n,e.authConfig)&&function(e){var n,t;if(!e.authConfig)return!1;let a=null!==(n=e.authId?p.a.auth.authById.get(e.authId):null)&&void 0!==n?n:(0,m.c)(p.a.auth.authList,e.authConfig).at(0);if(!a)return!0;let{hasAllScopes:l}=(0,u.Dq)({availableScopes:null!==(t=null==a?void 0:a.scopes)&&void 0!==t?t:[],requiredScopes:h(e.authConfig)});return!l}(e))],[]).flatMap(e=>({authScopes:h(e.authConfig)}));return{nodeIds:[...t,...a].map(e=>e.id),scopes:[...t,...a,...l].reduce((e,n)=>[...new Set([...e,...n.authScopes])],h(n))}}(null!==(n=null==x?void 0:x.nodes)&&void 0!==n?n:[],e.authConfig)},[null==x?void 0:x.nodes,e.authConfig]),z=(0,b.useCallback)(e=>{C&&C.nodeIds.forEach(n=>{var t;return null==x?void 0:null===(t=x.getNodeById(n))||void 0===t?void 0:t.setAuth(e)})},[C,x]),A=(0,b.useCallback)(n=>{z(n),e.onChange(n)},[e,z]),j=function(e,n,t,a){let l=(0,el.aV)(),i=(0,et.useRelayEnvironment)(),r=(0,b.useCallback)(e=>{(0,ed.fetchQuery)(i,ea,{nodeId:(0,eo.F)("Auth",e)},{fetchPolicy:"network-only"}).toPromise().then(e=>{var n,t,l;if((null==e?void 0:null===(n=e.node)||void 0===n?void 0:n.__typename)!=="Auth")return;let i={id:e.node.id,isConnected:null!==(t=e.node.isConnected)&&void 0!==t&&t,fields:e.node.fields,label:e.node.label,method:e.node.method,provider:e.node.provider,scopes:[...null!==(l=e.node.scopes)&&void 0!==l?l:[]]};p.a.auth.updateOrCreateAuth(i),a(i)}).catch(e=>{l({level:"danger",message:(0,er.SP)(e),duration:3e3})})},[a,i,l]);return(0,ei.S)(es.B.auth,"update",e,e=>{var a;if(e.provider!==n)return;r(e.id);let{hasAllScopes:i}=(0,u.Dq)({availableScopes:null!==(a=e.scopes)&&void 0!==a?a:[],requiredScopes:t});if(!i){l({level:"warning",message:"The account ".concat(e.label," is missing permissions"),duration:5e3});return}l({level:"success",message:"Successfully connected to ".concat(e.label),duration:3e3})}),(0,ei.S)(es.B.auth,"error",e,e=>{e.provider===n&&l({level:"danger",message:e.message,duration:3e3})}),r}(e.identityId,e.authConfig.provider,C.scopes,A),{newAuthRedirect:I,addScopesRedirect:w}=(0,Y.MJ)({enabled:"OAuth"===e.authConfig.method&&"CustomOAuth2AuthConfig"!==e.authConfig.__typename,authId:null===(n=e.auth)||void 0===n?void 0:n.id,provider:e.authConfig.provider,scopes:C.scopes}),N=(0,y.Cg)(!1),[F,_]=(0,b.useState)(!1),{handleConnect:T}=function(){let[e]=(0,en.d)(X),[n]=(0,en.d)(ee);return{handleConnect:async a=>{let l=await e({variables:{}}),{createFrontendClient:i}=await t.e(4768).then(t.bind(t,94768)),r=i();return new Promise((e,t)=>{var i;if(!(null===(i=l.createPipedreamConnectToken.data)||void 0===i?void 0:i.linkToken))return t("No token");r.connectAccount({app:a,token:l.createPipedreamConnectToken.data.linkToken,onSuccess:async l=>{let{id:i}=l,{connectPipedreamAccount:{data:{authId:r}={}}}=await n({variables:{input:{accountId:i,app:a}}});if(!r)return t("Not able to connect Pipedream account");e(r)},onError:t})})}}}(),M=(0,b.useCallback)(async n=>{if("OAuth"!==e.authConfig.method||"CustomOAuth2AuthConfig"===e.authConfig.__typename){if("Pipedream"===e.authConfig.method){let n=await T(e.authConfig.provider);if(!n)return;j(n);return}_(n),N.setTrue()}},[e.authConfig,N,T,j]),K=(0,b.useCallback)(e=>{N.setFalse(),(null==e?void 0:e.id)&&j(e.id)},[N,j]);return(0,a.jsxs)(a.Fragment,{children:[e.authList.length>0?(0,a.jsx)(W,{provider:e.authConfig.provider,list:e.authList,item:e.auth,isMissingScopes:e.isMissingScopes,tool:e.tool,onChange:e.onChange,addScopesRedirect:w,newAuthRedirect:I,onRequestAuth:M,disabled:e.disabled}):(0,a.jsx)(S,{tool:e.tool,method:e.authConfig.method,isMissingScopes:e.isMissingScopes,item:e.auth,redirectUri:w,onRequestAuth:M,hideComplianceInfo:e.hideComplianceInfo}),(0,a.jsx)(l.aF,{className:"w-auto max-w-none py-0 sm:w-auto sm:max-w-none",open:N.value,setClosed:N.setFalse,children:(0,a.jsxs)(s.$,{children:[(0,a.jsx)(i.o,{onClick:N.setFalse}),(0,a.jsx)(r.r,{children:e.displayName}),(0,a.jsx)(k.ge,{authId:F?null:null===(v=e.auth)||void 0===v?void 0:v.id,provider:e.authConfig.provider,method:e.authConfig.method,fields:"CustomAuthConfig"===e.authConfig.__typename||"CustomOAuth2AuthConfig"===e.authConfig.__typename?e.authConfig.fields:void 0,displayName:e.displayName,onComplete:K})]})})]})});function ec(e){return(0,a.jsx)(b.Suspense,{children:(0,a.jsx)(eu,{...e})})}},18658:(e,n,t)=>{t.d(n,{ge:()=>k});var a=t(50612);let l=function(){var e={defaultValue:null,kind:"LocalArgument",name:"authId"},n={defaultValue:null,kind:"LocalArgument",name:"conversationId"},t={defaultValue:null,kind:"LocalArgument",name:"fields"},a={defaultValue:null,kind:"LocalArgument",name:"provider"},l=[{alias:null,args:[{fields:[{kind:"Variable",name:"authId",variableName:"authId"},{kind:"Variable",name:"conversationId",variableName:"conversationId"},{kind:"Variable",name:"fields",variableName:"fields"},{kind:"Variable",name:"provider",variableName:"provider"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"updateOrCreateCustomAuth",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UpdateOrCreateCustomAuthOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Auth",kind:"LinkedField",name:"auth",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationUpdateOrCreateCustomAuthSuccess",abstractKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n,t,a],kind:"Fragment",metadata:null,name:"AuthFieldsInputUpdateOrCreateCustomAuthMutation",selections:l,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e,a,t],kind:"Operation",name:"AuthFieldsInputUpdateOrCreateCustomAuthMutation",selections:l},params:{cacheID:"a8f28399ad03cd0b9b7d2ab2a59a5238",id:null,metadata:{},name:"AuthFieldsInputUpdateOrCreateCustomAuthMutation",operationKind:"mutation",text:"mutation AuthFieldsInputUpdateOrCreateCustomAuthMutation(\n  $conversationId: ID\n  $authId: ID\n  $provider: String!\n  $fields: JSONObject!\n) {\n  updateOrCreateCustomAuth(input: {conversationId: $conversationId, authId: $authId, provider: $provider, fields: $fields}) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationUpdateOrCreateCustomAuthSuccess {\n      data {\n        auth {\n          id\n          nodeId\n        }\n      }\n    }\n  }\n}\n"}}}();l.hash="acc4ce85998432b8d1e22d4e0bcc7098";let i=function(){var e={defaultValue:null,kind:"LocalArgument",name:"authId"},n={defaultValue:null,kind:"LocalArgument",name:"conversationId"},t={defaultValue:null,kind:"LocalArgument",name:"provider"},a={defaultValue:null,kind:"LocalArgument",name:"token"},l=[{alias:null,args:[{fields:[{kind:"Variable",name:"authId",variableName:"authId"},{kind:"Variable",name:"conversationId",variableName:"conversationId"},{kind:"Variable",name:"provider",variableName:"provider"},{kind:"Variable",name:"token",variableName:"token"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"updateOrCreateTokenAuth",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UpdateOrCreateTokenAuthOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Auth",kind:"LinkedField",name:"auth",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationUpdateOrCreateTokenAuthSuccess",abstractKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n,t,a],kind:"Fragment",metadata:null,name:"AuthFieldsInputUpdateOrCreateTokenAuthMutation",selections:l,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e,t,a],kind:"Operation",name:"AuthFieldsInputUpdateOrCreateTokenAuthMutation",selections:l},params:{cacheID:"ef1326785a180b072a0aa7dcc176187d",id:null,metadata:{},name:"AuthFieldsInputUpdateOrCreateTokenAuthMutation",operationKind:"mutation",text:"mutation AuthFieldsInputUpdateOrCreateTokenAuthMutation(\n  $conversationId: ID\n  $authId: ID\n  $provider: String!\n  $token: String!\n) {\n  updateOrCreateTokenAuth(input: {conversationId: $conversationId, authId: $authId, provider: $provider, token: $token}) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationUpdateOrCreateTokenAuthSuccess {\n      data {\n        auth {\n          id\n          nodeId\n        }\n      }\n    }\n  }\n}\n"}}}();i.hash="06dbffcb1c27e6cd609049b5fc331aa7";var r=t(5375),o=t(32159),s=t(85307),d=t(67373),u=t(40985),c=t(41285),m=t(94344);let p=e=>{let n={};return Object.keys(e).forEach(t=>{var a,l,i;n[t]=null!==(i=null===(a=e[t])||void 0===a?void 0:a.default)&&void 0!==i?i:(null===(l=e[t])||void 0===l?void 0:l.type)!=="boolean"&&""}),n},h=e=>{let{description:n}=e;return(0,a.jsx)(s.v,{className:"mb-[5px] text-sm text-gray-600 dark:text-gray-400",children:n})};function g(e){let[n,t]=(0,m.useState)(()=>p(e.fields)),l=e=>n=>{t(t=>({...t,[e]:n}))},i=e=>n=>{t(t=>({...t,[e]:n.target.checked}))},s=Object.entries(e.fields).every(e=>{let[t,a]=e;return!1===a.required||n[t]}),g=(0,m.useCallback)(()=>{e.onSubmit(n)},[n,e]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex grow flex-col space-y-6 overflow-auto p-1",children:Object.entries(e.fields).map(e=>{let[t,s]=e;if("boolean"===s.type)return(0,a.jsxs)("div",{children:[s.description&&(0,a.jsx)(h,{description:s.description}),(0,a.jsx)(r.S,{id:t,label:s.label+(!1===s.required?" (optional)":""),value:!0===n[t]?"true":"false",onChange:i(t)},t)]},t);if("select"===s.type){var d;let e=n[t];return(0,a.jsxs)("div",{children:[s.description&&(0,a.jsx)(h,{description:s.description}),(0,a.jsx)(c.J,{children:s.label+(!1===s.required?" (optional)":"")}),(0,a.jsx)(o.m,{menuPosition:"bottom",options:Array.from(null!==(d=s.options)&&void 0!==d?d:[]),value:"string"==typeof e?e:null,onChange:l(t)})]},t)}{let e=n[t];return(0,a.jsxs)("div",{children:[s.description&&(0,a.jsx)(h,{description:s.description}),(0,a.jsx)(u.R,{id:t,label:s.label+(!1===s.required?" (optional)":""),value:"string"==typeof e?e:void 0,onChange:l(t),type:s.type},t)]},t)}})}),(0,a.jsx)(d.$,{className:"self-end",disabled:!s,onClick:g,children:"Connect"})]})}function f(e){let[n,t]=(0,m.useState)(""),l=(0,m.useCallback)(t=>{t.preventDefault(),e.onSubmit(n)},[e,n]);return(0,a.jsxs)("form",{onSubmit:l,children:[(0,a.jsx)("div",{className:"flex h-full flex-col space-y-6 pb-4",children:(0,a.jsx)(u.R,{id:name+"_apitoken",label:"API Token",value:n,onChange:t,type:"password"})}),(0,a.jsx)(d.$,{type:"submit",className:"self-end",disabled:!n,children:"Connect"})]})}var v=t(85680),b=t(50072),y=t(79124);function k(e){let n=(0,v.aV)(),[t]=(0,y.useMutation)(i),r=(0,m.useCallback)(a=>{var l,i;t({variables:{conversationId:null!==(l=e.conversationId)&&void 0!==l?l:null,authId:null!==(i=e.authId)&&void 0!==i?i:null,provider:e.provider,token:a},onCompleted:t=>{var a;let{updateOrCreateTokenAuth:l}=t;if(l.message){n({level:"danger",label:"Error",message:l.message,duration:3e3});return}n({level:"success",message:"Authorization updated",duration:3e3}),e.onComplete(null===(a=l.data)||void 0===a?void 0:a.auth)}})},[t,e,n]),[o]=(0,y.useMutation)(l),s=(0,m.useCallback)(t=>{var a,l;o({variables:{conversationId:null!==(a=e.conversationId)&&void 0!==a?a:null,authId:null!==(l=e.authId)&&void 0!==l?l:null,provider:e.provider,fields:t},onCompleted:t=>{var a;let{updateOrCreateCustomAuth:l}=t;if(l.message){n({level:"danger",label:"Error",message:l.message,duration:3e3});return}n({level:"success",message:"Authorization updated",duration:3e3}),e.onComplete(null===(a=l.data)||void 0===a?void 0:a.auth)}})},[o,e,n]),d=(0,m.useCallback)(async n=>{var t;let a=(0,b.FH)({authId:e.authId,provider:e.provider,scopes:[...null!==(t=e.scopes)&&void 0!==t?t:[]],fields:n});window.open(a,"_blank"),e.onComplete()},[e]);return"Token"===e.method?(0,a.jsx)(f,{onSubmit:r},e.displayName):"Custom"===e.method&&e.fields?(0,a.jsx)(g,{fields:e.fields,onSubmit:s},e.displayName):"OAuth"===e.method&&e.fields?(0,a.jsx)(g,{fields:e.fields,onSubmit:d},e.displayName):null}t(97244)},48675:(e,n,t)=>{t.d(n,{b:()=>r});var a=t(50612),l=t(46251),i=t(25919);function r(e){let{children:n,title:t,tool:r,className:o}=e,s=r?(0,a.jsx)(l.si,{className:"h-5 w-5",tool:r}):void 0;return(0,a.jsxs)("div",{className:"flex h-12 w-full items-center justify-between gap-3 rounded-md border border-slate-4 px-3",children:[(0,a.jsxs)("div",{className:"flex w-full items-center",children:[s&&(0,a.jsx)("div",{className:"mr-3",children:s}),(0,a.jsx)("div",{className:(0,i.QP)("w-full truncate select-none text-sm","text-slate-9",o),children:t})]}),(0,a.jsx)("div",{className:"flex shrink-0 items-center",children:n})]})}},50072:(e,n,t)=>{t.d(n,{FH:()=>o,MJ:()=>l,sO:()=>r});var a=t(91318);function l(e){let{enabled:n,authId:t,provider:l,scopes:i}=e;return(0,a.q2)(()=>{if(!n)return{newAuthRedirect:null,addScopesRedirect:null};let e={provider:l,scopes:i};return{newAuthRedirect:r(e),addScopesRedirect:r({...e,authId:t})}},[n,l,i,t])}let i=e=>"".concat("https://api.lindy.ai","/api/oauth2/redirect?").concat(e.toString());function r(e){let{provider:n,scopes:t,authId:a,conversationId:l}=e,r=new URLSearchParams({provider:n,scopes:encodeURIComponent(JSON.stringify(t))});return a&&r.set("authId",a),l&&r.set("conversationId",l),i(r)}function o(e){let{provider:n,scopes:t,fields:a,authId:l}=e,r=new URLSearchParams({provider:n,scopes:encodeURIComponent(JSON.stringify(t)),fields:encodeURIComponent(JSON.stringify(a))});return l&&r.set("authId",l),i(r)}},16908:(e,n,t)=>{t.d(n,{$:()=>i});var a=t(50612),l=t(25919);function i(e){return(0,a.jsx)("div",{className:(0,l.QP)("relative mx-auto flex max-h-[85vh] w-[48rem] flex-col items-stretch justify-center gap-y-4 py-6 transition-all sm:mx-0 sm:w-[42rem]",e.className),children:e.children})}},8178:(e,n,t)=>{t.d(n,{H:()=>i,Z:()=>l});var a=t(31284);function l(){var e;let n=null===(e=a.a.lindies.currentLindy)||void 0===e?void 0:e.stateGraph;if(!n)throw Error("useStateGraph must be used within a StateGraphProvider");return n}function i(){var e;return null===(e=a.a.lindies.currentLindy)||void 0===e?void 0:e.stateGraph}},95147:(e,n,t)=>{t.d(n,{Y:()=>l});var a=t(50612);let l=(0,t(94344).memo)(function(e){return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",...e,children:(0,a.jsx)("path",{fill:"#FFA01C",stroke:"#FFA01C",strokeWidth:".833",d:"M8.2 3.091c.804-1.378 2.795-1.378 3.599 0l5.848 10.026c.81 1.389-.192 3.133-1.8 3.133H4.151c-1.608 0-2.61-1.744-1.8-3.133L8.2 3.09ZM11.25 7.5a1.25 1.25 0 0 0-2.5 0V10c0 .505.3.94.73 1.137a1.459 1.459 0 1 0 1.04 0c.43-.197.73-.632.73-1.137V7.5Z"})})})},20923:(e,n,t)=>{t.d(n,{F:()=>l});let a=()=>"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:window;function l(e,n){return function(e){let n=a();if("function"==typeof n.Buffer)return n.Buffer.from(e).toString("base64");if("function"==typeof n.btoa)return n.btoa(e);throw Error("Unable to locate global `Buffer` or `btoa`")}("".concat(e,":").concat(n))}},98279:(e,n,t)=>{t.d(n,{au:()=>v,st:()=>y,CM:()=>b});var a=t(22149),l=t(77455),i=t(23664),r=t(7094);let o=r.z.union([r.z.literal("string"),r.z.literal("number"),r.z.literal("boolean"),r.z.literal("object"),r.z.literal("array"),r.z.literal("integer"),r.z.literal("null"),r.z.literal("unknown")]),s=r.z.object({value:r.z.string(),displayName:r.z.string().optional(),type:o});var d=t(56989),u=t(38928);r.z.union([r.z.instanceof(r.z.ZodString),r.z.instanceof(r.z.ZodArray)]);var c=function(e){return e.String="string",e.StringArray="string[]",e}({});let m=r.z.nativeEnum(c),p=r.z.object({key:r.z.string(),field:r.z.string(),output:m,displayName:r.z.string(),description:r.z.string().optional(),placeholder:r.z.string().optional(),defaultValue:r.z.object({value:r.z.string(),name:r.z.string()}).nullish(),icon:u.k.nativeEnumWithDefault(d.YN,d.YN.UnknownIcon).optional()}).extend({type:r.z.literal("dynamic")}),h=r.z.object({type:r.z.literal("static"),schema:r.z.any(),field:r.z.string()}),g=r.z.object({fields:r.z.array(r.z.union([h,p])),parentFields:r.z.array(r.z.string())});var f=t(39678);r.z.object({identityId:r.z.string().optional(),agentDefinitionId:r.z.string().optional()});let v=r.z.object({key:r.z.string().default(""),signature:r.z.object({tool:r.z.nativeEnum(i.h6).default(i.h6.Lindy),action:r.z.string().default(""),signature:r.z.string().array().default([])}).default({}),dependencies:r.z.array(r.z.string()).default([]),tool:r.z.nativeEnum(i.h6),toolDisplayName:r.z.string(),actionKey:r.z.string(),displayName:r.z.string(),description:r.z.string(),inputTree:g.nullish(),inputSchema:r.z.any(),outputSchema:r.z.any(),dynamicLoaders:r.z.object({loaders:d.g4.array(),refetchInputAfterLoad:r.z.boolean()}).nullish(),observableChannel:l.dS.nullish(),auth:a.bt.nullable(),hasSideEffects:r.z.boolean().nullish(),isPremium:r.z.boolean().nullish(),premiumActionCost:r.z.number().nullish(),outputProperties:r.z.array(s),deprecated:r.z.boolean().nullish(),suggest:r.z.boolean().nullish()}),b=r.z.object({tool:u.k.nativeEnumWithDefault(i.h6,i.h6.Lindy),displayName:r.z.string(),description:r.z.string(),popular:r.z.boolean(),actions:r.z.record(v),triggers:r.z.record(f.Gk)}),y=r.z.object({tool:u.k.nativeEnumWithDefault(i.h6,i.h6.Lindy),statefulToolKey:r.z.string(),displayName:r.z.string(),schema:r.z.any(),description:r.z.string().nullable(),actions:r.z.record(v)})}}]);