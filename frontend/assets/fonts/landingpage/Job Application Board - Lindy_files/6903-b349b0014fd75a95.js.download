(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6903],{5257:(e,n,t)=>{"use strict";t.d(n,{Gy:()=>g});var l=t(52105),a=t(5862),i=t(88345),r=t(38928),s=t(7094);let o=(0,a._)({get:{params:s.z.object({id:r.k.objectIdString()}),data:i.HQ}});var d=t(98354),u=t(94344),c=t(94559),m=t(79879);let p=(0,l.In)("GET","/api/agentMessages/:id",o.get.data);function g(e){let n=(0,u.useMemo)(()=>["agentMessages/[id]","get",e.params.id],[e.params.id]),t=(0,c.lB)(()=>null==e?void 0:e.options,[null==e?void 0:e.options]),l=(0,d.I)({queryKey:n,queryFn:async()=>{let{data:n,error:t}=await p(e);if(t)throw t;return n},...null==e?void 0:e.options}),a=(0,c.lB)(()=>l,[l]);return(0,m.R)(n,a,t)}},85702:(e,n,t)=>{"use strict";t.d(n,{Mt:()=>g});var l=t(52105),a=t(5862),i=t(18273),r=t(23664),s=t(7094);let o=(0,a._)({get:{params:s.z.object({tool:s.z.nativeEnum(r.h6),trigger:s.z.string()}),query:s.z.object({authId:s.z.string().optional()}),data:i.Cy}});var d=t(98354),u=t(94344),c=t(94559),m=t(79879);let p=(0,l.In)("GET","/api/tools/:tool/triggers/:trigger",o.get.data);function g(e){let n=function(e){let n=(0,m.f)(e.query);return(0,u.useMemo)(()=>["tools/[tool]/triggers/[trigger]","get",e.params.tool,e.params.trigger,n],[e.params.tool,e.params.trigger,n])}(e),t=(0,c.lB)(()=>null==e?void 0:e.options,[null==e?void 0:e.options]),l=(0,d.I)({queryKey:n,queryFn:async()=>{let{data:n,error:t}=await p(e);if(t)throw t;return n},...null==e?void 0:e.options}),a=(0,c.lB)(()=>l,[l]);return(0,m.R)(n,a,t)}},48314:(e,n,t)=>{"use strict";t.d(n,{sD:()=>m});var l=t(52105),a=t(5862),i=t(7094);let r=(0,a._)({get:{params:i.z.object({messageId:i.z.string()}),data:i.z.object({observing:i.z.boolean()})}});var s=t(98354),o=t(94344),d=t(94559),u=t(79879);let c=(0,l.In)("GET","/api/triggers/:messageId/observing",r.get.data);function m(e){let n=(0,o.useMemo)(()=>["triggers/[messageId]/observing","get",e.params.messageId],[e.params.messageId]),t=(0,d.lB)(()=>null==e?void 0:e.options,[null==e?void 0:e.options]),l=(0,s.I)({queryKey:n,queryFn:async()=>{let{data:n,error:t}=await c(e);if(t)throw t;return n},...null==e?void 0:e.options}),a=(0,d.lB)(()=>l,[l]);return(0,u.R)(n,a,t)}},21203:(e,n,t)=>{"use strict";t.d(n,{$:()=>g});var l=t(50612),a=t(67434);function i(e){let n=Math.floor(e/60),t=Math.round(e)%60,l="0".concat(t).slice(-2);return"".concat(n,":").concat(l)}function r(e){let n=Math.min(...e),t=Math.max(...e);return e.map(e=>(e-n)/(t-n))}var s=t(91871),o=t(25919);function d(e){let{filled:n,className:t,...a}=e;return(0,l.jsx)("svg",{width:"16",height:"18",viewBox:"0 0 16 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...a,className:(0,o.QP)("text-slate-11",t),children:n?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("path",{d:"M1.5 0C0.671573 0 0 0.671573 0 1.5V16.5C0 17.3284 0.671573 18 1.5 18H4.5C5.32843 18 6 17.3284 6 16.5V1.5C6 0.671573 5.32843 0 4.5 0H1.5Z",fill:"currentColor"}),(0,l.jsx)("path",{d:"M11.5 0C10.6716 0 10 0.671573 10 1.5V16.5C10 17.3284 10.6716 18 11.5 18H14.5C15.3284 18 16 17.3284 16 16.5V1.5C16 0.671573 15.3284 0 14.5 0H11.5Z",fill:"currentColor"})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("path",{d:"M4.5 5.5C4.5 4.39543 5.39543 3.5 6.5 3.5H7.5C8.60457 3.5 9.5 4.39543 9.5 5.5V18.5C9.5 19.6046 8.60457 20.5 7.5 20.5H6.5C5.39543 20.5 4.5 19.6046 4.5 18.5V5.5Z",stroke:"currentColor",strokeLinejoin:"round"}),(0,l.jsx)("path",{d:"M14.5 5.5C14.5 4.39543 15.3954 3.5 16.5 3.5H17.5C18.6046 3.5 19.5 4.39543 19.5 5.5V18.5C19.5 19.6046 18.6046 20.5 17.5 20.5H16.5C15.3954 20.5 14.5 19.6046 14.5 18.5V5.5Z",stroke:"currentColor",strokeLinejoin:"round"})]})})}var u=t(66850),c=t(31284),m=t(76023),p=t(94344);function g(e){let{audioItem:n,setWavesurferRef:t}=e,[g,h]=(0,p.useState)(null),[v,f]=(0,p.useState)(!1),x=(0,p.useCallback)(e=>{c.a.ui.currentAudioPlayer&&c.a.ui.currentAudioPlayer!==e&&c.a.ui.currentAudioPlayer.pause(),c.a.ui.setCurrentAudioPlayer(e)},[]),b=(0,p.useMemo)(()=>i(n.durationMs/1e3),[n.durationMs]),[y,j]=(0,p.useState)("0:00"),C=(0,p.useCallback)(e=>{j(i(e.getCurrentTime()))},[]),N=(0,p.useCallback)(e=>{h(e),t(e)},[t]),k=(0,p.useCallback)(e=>{x(e),e.play()},[x]),T=(0,p.useCallback)(()=>{f(!0)},[]),P=(0,p.useCallback)(()=>{f(!1)},[]),w=(0,p.useCallback)(()=>{g&&(x(g),g.playPause())},[g,x]),I=(0,p.useMemo)(()=>[(function(e){if(e.length%2!=0)return a.wd("Invalid audio peak data while normalizing"),e;let n=e.map(Math.abs),t=r(n.filter((e,n)=>n%2==0)),l=r(n.filter((e,n)=>n%2==1));return t.flatMap((e,n)=>[-1*e,l[n]])})(n.waveform.data).map((e,n)=>n%2==0?e-.5:e+.5)],[n.waveform.data]);return(0,l.jsxs)("div",{className:"grid grid-cols-[auto_1fr_auto] items-center gap-6",children:[(0,l.jsx)("button",{onClick:w,className:(0,o.QP)(s.Y,"rounded"),children:v?(0,l.jsx)(d,{filled:!0,className:"size-3 text-slate-12"}):(0,l.jsx)(u.u,{filled:!0,className:"size-3 text-slate-12"})}),(0,l.jsx)(m.A,{url:n.source.url,peaks:I,waveColor:"#C1C8CD",progressColor:"#0090FF",cursorColor:"transparent",height:18,barWidth:2,barRadius:6,barGap:3,onReady:N,onPlay:T,onPause:P,onInteraction:k,onTimeupdate:C,backend:"MediaElement"}),(0,l.jsx)("div",{className:"text-xs tabular-nums text-slate-12",children:"".concat(y," / ").concat(b)})]})}},62813:(e,n,t)=>{"use strict";t.d(n,{F:()=>m,z:()=>u});var l=t(50612),a=t(78133),i=t(31366),r=t(9966),s=t(94344),o=t(45801),d=t(25919),u=function(e){return e.ATTACHMENT="ATTACHMENT",e.TOOLTIP="TOOLTIP",e}({});let c={ATTACHMENT:{button:"w-36",icon:"stroke-slate-9 hover:stroke-slate-12 active:stroke-slate-12",scrollable:" pr-4"},TOOLTIP:{button:"w-28",icon:"stroke-slate-11",scrollable:""}},m=(0,s.memo)(function(e){let{children:n,type:t}=e,{scrollRef:u,showLeftChevron:m,showRightChevron:p,handleLeftChevronClick:g,handleRightChevronClick:h}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250,n=(0,s.useRef)(null),[t,l]=(0,s.useState)(!1),[a,i]=(0,s.useState)(!1),o=(0,s.useCallback)(()=>{let e=n.current;e&&(l(e.scrollLeft>0),i(e.scrollLeft<e.scrollWidth-e.clientWidth-1))},[]);(0,s.useEffect)(()=>{let e=n.current;return o(),null==e||e.addEventListener("scroll",o),()=>{null==e||e.removeEventListener("scroll",o)}},[o]),(0,r.A)(n,o);let d=(0,s.useCallback)(e=>{var t;null===(t=n.current)||void 0===t||t.scrollBy({left:e,behavior:"smooth"})},[]),u=(0,s.useCallback)(()=>{d(e)},[d,e]);return{scrollRef:n,showLeftChevron:t,showRightChevron:a,handleLeftChevronClick:(0,s.useCallback)(()=>{d(-e)},[d,e]),handleRightChevronClick:u}}(250),v=(0,s.useMemo)(()=>c[t],[t]);return(0,l.jsxs)("div",{className:"relative flex select-none flex-row items-center self-center",children:[m&&(0,l.jsx)("button",{type:"button",onClick:g,className:(0,d.QP)("absolute left-0 z-10 flex h-full items-center justify-start bg-gradient-to-l from-transparent to-slate-1",v.button),children:(0,l.jsx)(a.A,{className:(0,d.QP)("h-4 w-4 shrink-0 cursor-pointer stroke-2",v.icon)})}),(0,l.jsx)(o.yE,{className:"no-scrollbar flex flex-row items-center space-x-3 overflow-x-auto",ref:u,children:n}),p&&(0,l.jsx)("button",{type:"button",onClick:h,className:(0,d.QP)("absolute right-0 z-5 flex h-full items-center justify-end bg-gradient-to-r from-transparent to-slate-1",v.button),children:(0,l.jsx)(i.A,{className:(0,d.QP)("h-4 w-4 shrink-0 cursor-pointer stroke-2",v.icon)})})]})})},20096:(e,n,t)=>{"use strict";t.d(n,{b:()=>s});var l=t(50612),a=t(16672),i=t(94344),r=t(25919);let s=(0,i.memo)(function(e){let{className:n,value:t,onChange:i,options:s,...o}=e;return(0,l.jsx)(a.z6,{className:(0,r.QP)("flex w-fit gap-1 rounded-[0.250rem] border p-1 text-xs font-medium text-slate-12 border-slate-4",n),value:t,onChange:i,...o,children:s.map(e=>{let{label:n,value:t}="string"==typeof e?{label:e,value:e}:e;return(0,l.jsx)(a.z6.Option,{value:t,children:e=>{let{checked:t}=e;return(0,l.jsx)("div",{className:(0,r.QP)("flex items-center justify-center rounded-sm cursor-pointer min-w-[44px] h-5",t&&"bg-blue-4 text-blue-9"),children:(0,l.jsx)("p",{className:"w-full text-center",children:n})})}},t)})})})},3641:(e,n,t)=>{"use strict";t.d(n,{L5:()=>v,TT:()=>y,Y4:()=>g,bt:()=>h});var l=t(50612),a=t(97660),i=t(14770),r=t(16008),s=t(35774),o=t(94344),d=t(18153),u=t(25919),c=t(41324),m=t(33762);let p={initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{damping:35,mass:1,stiffness:300,type:"spring"}};var g=function(e){return e.PreRailsEditAgentPanel="lindy-edit-agent-panel-size",e.EditorSidebar="lindy-flow-editor-sidebar",e}({});function h(e){var n;let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400;return parseInt(null!==(n=localStorage.getItem(e))&&void 0!==n?n:t.toString(10))||t}let v=(0,o.memo)(function(e){let{mainContent:n,panelContent:t,open:g,defaultWidth:h,minWidth:v,maxWidth:b,persistKey:y,onAnimationComplete:C,isAboveContent:N=!0,className:k}=e,[T,P]=(0,o.useState)(h),[w]=(0,i.M)(y,h);(0,m.Es)(()=>{d.Bd&&P(w)},[d.Bd,w]);let I=(0,o.useCallback)(e=>{P(e)},[]),[A,S]=(0,o.useState)(g),_=(0,c.YQ)(S,200);(0,o.useLayoutEffect)(()=>{g||(_.cancel(),S(!1))},[g,_]);let L=(0,o.useCallback)(e=>{let{x:n}=e,t=p.animate.x===n;null==C||C(t),_(t)},[C,_]);return(0,l.jsxs)("div",{className:"relative flex size-full overflow-y-auto overflow-x-hidden",children:[(0,l.jsx)("div",{className:"size-full grow",children:n}),(0,l.jsx)(r.N,{children:g&&(0,l.jsx)(f,{isAboveContent:N,width:T,children:(0,l.jsx)(j,{isFullyOpen:A&&g,children:(0,l.jsx)(s.P.div,{className:(0,u.QP)("absolute right-0 h-full",k),initial:p.initial,animate:p.animate,exit:p.exit,transition:p.transition,onAnimationComplete:L,children:(0,l.jsx)(x,{isAboveContent:N,width:T,children:(0,l.jsx)(a.T,{className:"overflow-y-hidden",width:N||g?T:0,defaultWidth:h,minWidth:v,maxWidth:b,handleSide:"left",onResize:I,persistKey:y,children:t})})},"panel")})})})]})});function f(e){let{children:n,isAboveContent:t,width:a}=e;return t?(0,l.jsx)("div",{className:"absolute right-0 h-full",children:(0,l.jsx)(s.P.div,{animate:{"--width":"".concat(a,"px")},exit:{"--width":0},className:"grid h-full overflow-hidden",style:{gridTemplateColumns:"var(--width) 1fr"},children:n})}):(0,l.jsx)(l.Fragment,{children:n})}function x(e){let{children:n,isAboveContent:t,width:a}=e;return t?(0,l.jsx)(l.Fragment,{children:n}):(0,l.jsx)("div",{className:"grid size-full",style:{gridTemplateColumns:"".concat(a,"px 1fr")},children:n})}let b=(0,o.createContext)({isFullyOpen:!0}),y=()=>(0,o.useContext)(b),j=(0,o.memo)(function(e){let{children:n,isFullyOpen:t}=e,a=(0,o.useMemo)(()=>({isFullyOpen:t}),[t]);return(0,l.jsx)(b.Provider,{value:a,children:n})})},47716:(e,n,t)=>{"use strict";t.d(n,{C:()=>s});var l=t(50612),a=t(21968),i=t(86278),r=t(76804);function s(e){let{attachment:n,deleteAttachment:t}=e;return(0,l.jsxs)("div",{className:"group relative flex h-7 shrink-0 items-center gap-2 overflow-hidden rounded-md border border-slate-4 bg-slate-1  p-1 dark:border-slate-11",children:[n.uploaded?(0,l.jsx)("div",{className:"rounded-sm bg-pink-500 p-0.5 text-white dark:border-slate-4",children:(0,l.jsx)(a.A,{className:"h-3 w-3"})}):(0,l.jsx)(r.y,{className:"m-[2px] h-3 w-3"}),(0,l.jsx)("div",{className:"mr-1 whitespace-nowrap pr-3.5 text-xs leading-none text-slate-10",children:n.name}),t&&(0,l.jsx)("div",{className:"absolute inset-y-0 right-0 flex cursor-pointer items-center justify-center p-1 group-hover:opacity-100 hover:bg-slate-4 active:bg-slate-5",onClick:t,children:(0,l.jsx)(i.A,{className:"h-3 w-3 text-slate-9"})})]})}},40223:(e,n,t)=>{"use strict";t.d(n,{J:()=>c,e:()=>u});var l=t(50612),a=t(38001),i=t(2932),r=t(67434),s=t(94344),o=t(33762);let d=s.createContext({isPendingConversationStatusChange:!1,setIsPendingConversationStatusChange:e=>void 0,timedOut:!1,isOffline:!1});function u(e){let{data:n}=(0,a.LM)(),[t,u]=s.useState(!1),[c,m]=s.useState(!1),[p,g]=s.useState(!1),h=s.useRef(void 0),v=s.useCallback(()=>{m(!1),window.clearTimeout(h.current)},[]),f=s.useCallback(()=>{v(),h.current=window.setTimeout(()=>{m(!0)},15e3)},[v]),x=s.useCallback(()=>{v(),g(!0)},[v]),b=s.useCallback(()=>{g(!1)},[]);(0,o.ML)("online",b),(0,o.ML)("offline",x),s.useEffect(()=>v,[v]);let y=t||(null==n?void 0:n.status)===i.Y.Pending;s.useEffect(()=>{y?f():v()},[y,f,v]),s.useEffect(()=>{c&&r.wd("User received the query timeout warning due to the backend taking too long to process the conversation",{tags:{conversation_id:null==n?void 0:n._id,conversation_status:null==n?void 0:n.status,cause:"PromptTimedOutWarning"}})},[null==n?void 0:n._id,null==n?void 0:n.status,v,c]);let j=s.useMemo(()=>({isPendingConversationStatusChange:t,setIsPendingConversationStatusChange:u,timedOut:c,isOffline:t&&p}),[t,u,c,p]);return(0,l.jsx)(d.Provider,{value:j,children:e.children})}function c(){return s.useContext(d)}},94488:(e,n,t)=>{"use strict";t.d(n,{P:()=>p});var l=t(50612),a=t(60948),i=t(39274),r=t(39197),s=t(95674),o=t(89720),d=t(94344),u=t(25919),c=t(76532);let m=e=>{let{error:n,componentStack:t,eventId:o}=e,{showFrontendErrors:d}=(0,a.H)();return(0,l.jsxs)("div",{className:"relative pl-8",children:[(0,l.jsx)("div",{className:"absolute left-0 top-[1px]",children:(0,l.jsx)(i.l,{icon:r.Y,color:s.Pl.Fuchsia})}),(0,l.jsx)(c.V,{children:"Something went wrong with the response. Please try again. Our team has been notified of this issue."}),d&&(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsxs)("p",{className:"mb-2 text-sm font-bold text-neutral-600 dark:text-neutral-100",children:[(0,l.jsx)("span",{className:"mr-2",children:"\uD83D\uDEA8"})," Got an error when rendering response:"]}),(0,l.jsx)("p",{className:"break-words text-sm font-medium text-red-600 dark:text-red-400",children:n.message}),(0,l.jsx)("pre",{className:"break-words text-sm font-medium text-red-600 dark:text-red-400",children:t}),!!o&&(0,l.jsxs)("p",{className:"break-words text-sm font-medium text-red-600 dark:text-red-400",children:["Search Sentry for ",(0,l.jsxs)("code",{children:["event.id: ",o]})]})]})]})};function p(e){let{avatar:n,className:t,children:a,...i}=e,r=(0,d.useCallback)(e=>{e.setTag("is_react_error_boundary",!0),e.setTag("is_response_wrapper_error",!0)},[]),s=(0,d.useCallback)(e=>(0,l.jsx)(m,{...e}),[]);return(0,l.jsx)(o.tH,{fallback:s,beforeCapture:r,children:(0,l.jsxs)("div",{className:(0,u.QP)("relative pl-8",t),...i,children:[!!n&&(0,l.jsx)("div",{className:(0,u.QP)("absolute left-0","top-0.5"),children:n}),a]})})}},1894:(e,n,t)=>{"use strict";t.d(n,{P:()=>T});var l=t(50612),a=t(91337);t(5257),t(48314);var i=t(22283);t(94488);var r=t(65832),s=t(20292),o=t(15727);t(18273);var d=t(67373),u=t(35121);t(46251);var c=t(76804);t(81904),t(23664);var m=t(35774),p=t(24069),g=t(94344),h=t(25919),v=t(21203),f=t(55498),x=t(95845);function b(e){var n;let{transcript:t,isOpen:a}=e,i=(0,g.useRef)(null),r=(0,g.useCallback)(e=>{i.current=e},[]);(0,g.useEffect)(()=>{i.current&&!a&&i.current.pause()},[a]);let s=(0,g.useMemo)(()=>t.messages.reduce((e,n)=>{var t;return(null===(t=e.at(-1))||void 0===t?void 0:t.speaker)===n.speaker?[...e.slice(0,-1),{...e.at(-1),transcript:e.at(-1).transcript+"\n\n"+n.transcript}]:[...e,n]},[]),[t.messages]),o=null===(n=t.fullAudioItem)||void 0===n?void 0:n.source.url,u=(0,g.useCallback)(()=>{if(o){let e=document.createElement("a");e.href=o,e.target="_blank",e.click()}},[o]);return(0,l.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,f.qg)(t.fullAudioItem)&&(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsx)(v.$,{audioItem:t.fullAudioItem,setWavesurferRef:r})}),(0,l.jsx)("div",{className:"max-h-96 overflow-scroll border-t-1 border-solid border-t-slate-2 p-1",children:s.length?s.map((e,n)=>{var t;return(0,l.jsxs)("div",{className:"my-6 grid cursor-pointer grid-cols-6 gap-3 pt-1 hover:bg-slate-1 dark:hover:bg-slate-2","data-time":e.timestamp,children:[e.timestamp?(0,l.jsx)("div",{className:"text-right text-xs font-medium text-slate-11",children:(0,x.A)(new Date(e.timestamp),"HH:mm:ss")}):null,(0,l.jsxs)("div",{className:"col-span-5 border-l-2 border-solid border-l-slate-8 pl-3",children:[(0,l.jsx)("div",{className:"text-sm font-semibold text-black dark:text-slate-12",children:null!==(t=e.speaker)&&void 0!==t?t:"Unknown Speaker"}),(0,l.jsx)("div",{className:"text-sm text-slate-12",children:e.transcript})]})]},n)}):"No transcript available"}),o&&(0,l.jsx)("div",{className:"flex justify-end",children:(0,l.jsx)(d.$,{level:"outline",onClick:u,children:"Download Audio"})})]})}function y(e){let{cardData:n,isOpen:t}=e;return(0,l.jsx)(b,{transcript:n.transcript,isOpen:t})}let j={type:"tween",duration:.15,ease:"easeOut"},C={open:{height:"auto",overflow:"visible",transition:{...j,when:"beforeChildren"}},closed:{height:0,overflow:"hidden",transition:j}},N={open:{opacity:1,y:0},closed:{opacity:0,y:5}},k=e=>e.stopPropagation(),T=(0,g.memo)(function(e){let{title:n,subtitle:t,userText:g,link:v,payload:f,card:x,isLoading:b=!1,additionalContent:T,observing:P}=e,{isOpen:w,onOpen:I,onToggle:A}=(0,o.j)(),S=!!f&&!(0,p.A)(f),_=S&&!w;return b?(0,l.jsx)(c.y,{}):(0,l.jsxs)(s.Z,{className:_?"cursor-pointer":void 0,onClick:_?I:void 0,children:[(0,l.jsx)("div",{className:(0,h.QP)("flex items-start gap-2",S&&"cursor-pointer"),onClick:S?A:void 0,children:(0,l.jsxs)("div",{className:"mt-0.5 flex w-full flex-col gap-1.5",children:[(0,l.jsxs)("div",{className:"flex w-full justify-between",children:[(0,l.jsxs)("section",{className:"flex flex-col gap-1.5 truncate",children:[(0,l.jsx)("p",{className:"my-0 truncate py-0 pr-2 text-sm font-medium leading-4 text-slate-12 dark:text-neutral-100",children:n}),!!t&&(0,l.jsx)("p",{className:"py-0 text-xs font-normal text-slate-9 transition-all dark:text-neutral-300",children:t})]}),(0,l.jsxs)("section",{className:"flex w-fit items-center gap-3",children:[P&&(0,l.jsxs)("div",{className:"flex items-center gap-2 rounded-lg bg-indigo-2 px-3 py-1 text-sm font-normal text-indigo-9 transition-all dark:text-neutral-300",children:[(0,l.jsx)(a.A,{className:"size-4"})," Observing"]}),S&&(0,l.jsx)("section",{className:"mt-0 flex items-center",children:(0,l.jsx)(u.z,{direction:w?"up":"down",className:"size-5 transition-transform"})})]})]}),!!g&&(0,l.jsx)(i.o,{className:(0,h.QP)("text-sm leading-6 text-slate-12 dark:text-neutral-100","[&_a:hover]:no-underline [&_a]:underline [&_li]:mb-3 [&_li]:ml-4 [&_ol]:list-decimal [&_p:last-child]:mb-0 [&_p]:mb-3 [&_ul]:list-disc",S&&!w&&"line-clamp-6"),disableCopyUI:!0,allowHTML:!1,children:g.trim()}),v&&(0,l.jsx)("div",{className:"mt-3",children:(0,l.jsx)(d.z,{level:"outline",href:v.url,target:"_blank",onClick:k,children:v.label})}),T]})}),(0,l.jsx)(m.P.div,{initial:"closed",animate:w?"open":"closed",variants:C,children:x&&"twilio-transcript"===x.type?(0,l.jsx)(y,{cardData:x,isOpen:w}):(0,l.jsx)(m.P.div,{className:"pt-4",variants:N,transition:j,children:(0,l.jsx)(r.G,{input:f})})})]})})},85129:(e,n,t)=>{"use strict";t.d(n,{Kd:()=>d});var l=t(50612);let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BlockResponses_Identity",selections:[{args:null,kind:"FragmentSpread",name:"ActionTraceCard_Identity"}],type:"Identity",abstractKey:null};a.hash="66aafe979b0fd9a5a95fc5e784aacc14";let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BlockResponses_AgentDefinition",selections:[{args:null,kind:"FragmentSpread",name:"ActionTraceCard_AgentDefinition"}],type:"AgentDefinition",abstractKey:null};i.hash="32e2a916f8a11288c711731af374fe37";var r=t(70710),s=t(94344),o=t(79124);let d=(0,s.memo)(function(e){let{identityFragmentRef:n,agentDefinitionFragmentRef:t,handlerComponents:s,block:d,isLastBlock:c,disableInteraction:m,conversationContext:p,hideAvatar:g}=e,h=(0,o.useFragment)(a,n),v=(0,o.useFragment)(i,t),{Content:f,Avatar:x,avatarPosition:b,fullWidthContent:y}=s,j=Array.isArray(f)?f:[f],C=!!x&&!g,N={identityFragmentRef:h,agentDefinitionFragmentRef:v,block:d,isLastBlock:c,conversationContext:p,disableInteraction:m};return(0,l.jsx)(l.Fragment,{children:j.map((e,n)=>(0,l.jsxs)(r.P,{avatar:C&&0===n?(0,l.jsx)(x,{...N}):null,avatarPosition:b,fullWidthContent:y,children:[(0,l.jsx)(e,{...N}),(0,l.jsx)(u,{})]},n))})});function u(){return(0,l.jsx)("div",{className:"transform-gpu","aria-hidden":"true"})}},66903:(e,n,t)=>{"use strict";t.d(n,{ju:()=>eR});var l=t(50612);let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"Transcript_Identity",selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"avatar",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"Execution_Identity"}],type:"Identity",abstractKey:null};a.hash="be28f9b19756193ca6313474cebd98c8";let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"Transcript_AgentDefinition",selections:[{args:null,kind:"FragmentSpread",name:"Execution_AgentDefinition"}],type:"AgentDefinition",abstractKey:null};i.hash="89a0a76b4ec8e93da15276e6b386b290";var r=t(30900),s=t(40223);let o={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"Execution_Identity",selections:[{args:null,kind:"FragmentSpread",name:"BlockResponses_Identity"}],type:"Identity",abstractKey:null};o.hash="d34be1f4e867db5002cad767b6dddb54";let d={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"Execution_AgentDefinition",selections:[{args:null,kind:"FragmentSpread",name:"BlockResponses_AgentDefinition"}],type:"AgentDefinition",abstractKey:null};d.hash="94614f72169d17c0a1afb9fe56bf98f8";var u=t(97881),c=t(78700),m=t(52105),p=t(5862),g=t(84244),h=t(38928),v=t(7094);let f=(0,p._)({post:{body:v.z.object({conversationId:h.k.objectIdString(),executionId:h.k.objectIdString(),responseStyleType:v.z.nativeEnum(g.y).optional(),ts:v.z.coerce.date().optional()}),data:v.z.object({ok:v.z.literal(!0),agentDisabled:v.z.boolean().nullish()})}}),x=(0,m.In)("POST","/api/agent/retryQuery",f.post.data);var b=t(57473),y=t(9122),j=t(56567);let C=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},a=[l],i={kind:"InlineFragment",selections:a,type:"Error",abstractKey:"__isError"},r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"level",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"entityType",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},c={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"field",storageKey:null}],type:"StateGraphValidationConfigureIssue",abstractKey:null},m={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ValidationFieldError",kind:"LinkedField",name:"fieldErrors",plural:!0,selections:a,storageKey:null}],type:"ValidationError",abstractKey:null},p={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"initiallySelectedNodeId",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"entryPointNodeId",storageKey:null},v=[{kind:"Literal",name:"first",value:5e3}],f={alias:null,args:null,kind:"ScalarField",name:"asJSON",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"enabled",storageKey:null},b=[r],y={alias:null,args:null,kind:"ScalarField",name:"tool",storageKey:null},j=[{kind:"Literal",name:"first",value:10}],C=[{kind:"Literal",name:"shouldRemoveFieldsHiddenFromUI",value:!0}],N={alias:null,args:C,kind:"ScalarField",name:"payload",storageKey:"payload(shouldRemoveFieldsHiddenFromUI:true)"},k={alias:null,args:null,concreteType:"TriggerShouldRunCheck",kind:"LinkedField",name:"shouldRunCheck",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"shouldRun",storageKey:null},{alias:null,args:null,concreteType:"TriggerShouldRunCheckReason",kind:"LinkedField",name:"reasons",plural:!0,selections:a,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"softFilter",storageKey:null}],storageKey:null},T={alias:null,args:null,kind:"ScalarField",name:"llmSummary",storageKey:null},P=[r,p];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"CreateStateGraphTestRunWithConversationMutation",selections:[{alias:"mutationResult",args:n,concreteType:null,kind:"LinkedField",name:"createStateGraphTestRunWithConversation",plural:!1,selections:[t,i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"issues",plural:!0,selections:[r,s,o,d,u,l,c],storageKey:null}],type:"StateGraphValidationError",abstractKey:null},m,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CreateStateGraphTestRunWithConversationOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"StateGraphTestRun",kind:"LinkedField",name:"stateGraphTestRun",plural:!1,selections:[r,p,g,{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[r,p,h,{alias:null,args:v,concreteType:"ConversationBlocksConnection",kind:"LinkedField",name:"blocks",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationBlocksConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ConversationBlock",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"content",plural:!1,selections:[f],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"blocks(first:5000)"}],storageKey:null},{alias:null,args:null,concreteType:"Trigger",kind:"LinkedField",name:"liveCaptureTrigger",plural:!1,selections:[r,p,x],storageKey:null},{args:null,kind:"FragmentSpread",name:"RailsTestingTaskView_StateGraphTestRun"},{args:null,kind:"FragmentSpread",name:"RailsTestingTriggerEntryPointViewStateGraphTestRunFragment"},{args:null,kind:"FragmentSpread",name:"useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun"}],storageKey:null},{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinition",plural:!1,selections:b,storageKey:null},{alias:null,args:null,concreteType:"AgentMessage",kind:"LinkedField",name:"agentMessage",plural:!1,selections:b,storageKey:null}],storageKey:null}],type:"MutationCreateStateGraphTestRunWithConversationSuccess",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"CreateStateGraphTestRunWithConversationMutation",selections:[{alias:"mutationResult",args:n,concreteType:null,kind:"LinkedField",name:"createStateGraphTestRunWithConversation",plural:!1,selections:[t,i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"issues",plural:!0,selections:[t,r,s,o,d,u,l,c],storageKey:null}],type:"StateGraphValidationError",abstractKey:null},m,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CreateStateGraphTestRunWithConversationOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"StateGraphTestRun",kind:"LinkedField",name:"stateGraphTestRun",plural:!1,selections:[r,p,g,{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[r,p,h,{alias:null,args:v,concreteType:"ConversationBlocksConnection",kind:"LinkedField",name:"blocks",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationBlocksConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ConversationBlock",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"content",plural:!1,selections:[t,f],storageKey:null},p],storageKey:null}],storageKey:null}],storageKey:"blocks(first:5000)"},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,concreteType:"ConversationChannel",kind:"LinkedField",name:"openChannels",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"startingNodeId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"statefulToolKey",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"instanceKey",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdByNodeId",storageKey:null},{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[y,p,{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null},s,p,r],storageKey:null},{alias:null,args:null,concreteType:"TriggerRunAttempt",kind:"LinkedField",name:"startingTriggerRunAttempt",plural:!1,selections:[r,p,{alias:null,args:null,kind:"ScalarField",name:"createdByExternalPayloadId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"payloadId",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Trigger",kind:"LinkedField",name:"liveCaptureTrigger",plural:!1,selections:[r,p,x,{alias:null,args:null,concreteType:"TriggerDefinition",kind:"LinkedField",name:"definition",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"Tool",kind:"LinkedField",name:"tool",plural:!1,selections:[y,p],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"payloadSchema",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"eventSchema",storageKey:null},{alias:null,args:null,concreteType:"TriggerTestingPolicy",kind:"LinkedField",name:"testingPolicy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"fullyProcessLiveCapturePayloads",storageKey:null}],storageKey:null},p],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"activeLiveCapturingInstructions",storageKey:null},{alias:null,args:j,concreteType:"TriggerTestingPayloadsConnection",kind:"LinkedField",name:"testingPayloads",plural:!1,selections:[{alias:null,args:null,concreteType:"TriggerTestingPayloadsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"TriggerTestingPayload",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"externalId",storageKey:null},N,k,T,p,t],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:"testingPayloads(first:10)"},{alias:null,args:j,filters:null,handle:"connection",key:"RailsTestingTriggerEntryPointView_testingPayloads",kind:"LinkedHandle",name:"testingPayloads"},{alias:null,args:[{kind:"Literal",name:"first",value:50}],concreteType:"TriggerRunAttemptsConnection",kind:"LinkedField",name:"runAttempts",plural:!1,selections:[{alias:null,args:null,concreteType:"TriggerRunAttemptsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"TriggerRunAttempt",kind:"LinkedField",name:"node",plural:!1,selections:[r,N,{alias:null,args:C,kind:"ScalarField",name:"processedPayload",storageKey:"processedPayload(shouldRemoveFieldsHiddenFromUI:true)"},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},k,T,p],storageKey:null}],storageKey:null}],storageKey:"runAttempts(first:50)"}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"agentDefinition",plural:!1,selections:P,storageKey:null},{alias:null,args:null,concreteType:"AgentMessage",kind:"LinkedField",name:"agentMessage",plural:!1,selections:P,storageKey:null}],storageKey:null}],type:"MutationCreateStateGraphTestRunWithConversationSuccess",abstractKey:null}],storageKey:null}]},params:{cacheID:"2de1ada30e8b0bec6dee81c1e54b2159",id:null,metadata:{},name:"CreateStateGraphTestRunWithConversationMutation",operationKind:"mutation",text:"mutation CreateStateGraphTestRunWithConversationMutation(\n  $input: CreateStateGraphTestRunWithConversationInput!\n) {\n  mutationResult: createStateGraphTestRunWithConversation(input: $input) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on StateGraphValidationError {\n      issues {\n        __typename\n        id\n        type\n        level\n        entityType\n        label\n        message\n        ... on StateGraphValidationConfigureIssue {\n          field\n        }\n      }\n    }\n    ... on ValidationError {\n      fieldErrors {\n        message\n      }\n    }\n    ... on MutationCreateStateGraphTestRunWithConversationSuccess {\n      data {\n        stateGraphTestRun {\n          id\n          nodeId\n          initiallySelectedNodeId\n          conversation {\n            id\n            nodeId\n            entryPointNodeId\n            blocks(first: 5000) {\n              edges {\n                node {\n                  content {\n                    __typename\n                    asJSON\n                  }\n                  nodeId\n                }\n              }\n            }\n          }\n          liveCaptureTrigger {\n            id\n            nodeId\n            enabled\n          }\n          ...RailsTestingTaskView_StateGraphTestRun\n          ...RailsTestingTriggerEntryPointViewStateGraphTestRunFragment\n          ...useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun\n        }\n        agentDefinition {\n          id\n          nodeId\n        }\n        agentMessage {\n          id\n          nodeId\n        }\n      }\n    }\n  }\n}\n\nfragment RailsTestingTaskView_StateGraphTestRun on StateGraphTestRun {\n  id\n  conversation {\n    id\n    nodeId\n    entryPointNodeId\n    status\n    openChannels {\n      startingNodeId\n      statefulToolKey\n      instanceKey\n      createdByNodeId\n      tool {\n        tool\n        nodeId\n      }\n      type\n      nodeId\n    }\n    ...useAutoUpdatePucksConversationFragment\n    blocks(first: 5000) {\n      edges {\n        node {\n          content {\n            __typename\n            asJSON\n          }\n          nodeId\n        }\n      }\n    }\n  }\n  ...useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun\n}\n\nfragment RailsTestingTriggerEntryPointViewLiveCaptureTriggerRefetchableFragment on Trigger {\n  runAttempts(first: 50) {\n    edges {\n      node {\n        id\n        payload(shouldRemoveFieldsHiddenFromUI: true)\n        processedPayload(shouldRemoveFieldsHiddenFromUI: true)\n        createdAt\n        shouldRunCheck {\n          shouldRun\n          reasons {\n            message\n          }\n          softFilter\n        }\n        llmSummary\n        nodeId\n      }\n    }\n  }\n  nodeId\n}\n\nfragment RailsTestingTriggerEntryPointViewStateGraphTestRunFragment on StateGraphTestRun {\n  id\n  liveCaptureTrigger {\n    definition {\n      name\n      tool {\n        tool\n        nodeId\n      }\n      payloadSchema\n      eventSchema\n      testingPolicy {\n        fullyProcessLiveCapturePayloads\n      }\n      nodeId\n    }\n    id\n    nodeId\n    activeLiveCapturingInstructions\n    testingPayloads(first: 10) {\n      edges {\n        node {\n          externalId\n          payload(shouldRemoveFieldsHiddenFromUI: true)\n          shouldRunCheck {\n            shouldRun\n            reasons {\n              message\n            }\n            softFilter\n          }\n          llmSummary\n          nodeId\n          __typename\n        }\n        cursor\n      }\n      pageInfo {\n        endCursor\n        hasNextPage\n      }\n    }\n    ...RailsTestingTriggerEntryPointViewLiveCaptureTriggerRefetchableFragment\n  }\n  conversation {\n    startingTriggerRunAttempt {\n      id\n      nodeId\n      createdByExternalPayloadId\n      payloadId\n    }\n    nodeId\n  }\n  nodeId\n}\n\nfragment useAutoUpdatePucksConversationFragment on Conversation {\n  id\n  openChannels {\n    id\n    startingNodeId\n    createdByNodeId\n    tool {\n      tool\n      displayName\n      nodeId\n    }\n    nodeId\n  }\n}\n\nfragment useRetryStateGraphTestRunExecutionMutation_StateGraphTestRun on StateGraphTestRun {\n  id\n  conversation {\n    blocks(first: 5000) {\n      edges {\n        node {\n          content {\n            __typename\n            asJSON\n          }\n          nodeId\n        }\n      }\n    }\n    nodeId\n  }\n}\n"}}}();C.hash="9eaed7a95e14d861f23dd4a19ef7d56b";var N=t(79124),k=t(45710),T=t(79271),P=t(72679),w=t(85680),I=t(72735),A=t(93481),S=t(38102),_=t(92428),L=t(58455),F=t(8178),E=t(69507),R=t(34698),M=t(67373),D=t(25919);function K(e){let{...n}=e;return(0,l.jsx)("svg",{...n,width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:(0,D.QP)("text-slate-11",n.className),children:(0,l.jsx)("path",{d:"M12.4198 6.53752L14.0001 6.00001M12.4198 9.16668L14.1667 9.16668M12.4198 11.6292L14.0001 12.1667M3.58008 6.53752L2.00008 6.00001M3.58008 9.16668L1.83317 9.16668M3.58008 11.6292L2.00008 12.1667M8.00008 9.16668L8.00008 13.8333M10.8334 5.00001L10.8334 4.66668C10.8334 3.10187 9.56489 1.83334 8.00008 1.83334C6.43527 1.83334 5.16675 3.10187 5.16675 4.66668L5.16675 5.00001M12.1667 10L12.1667 6.50001C12.1667 5.76363 11.5698 5.16668 10.8334 5.16668L5.16675 5.16668C4.43037 5.16668 3.83341 5.76363 3.83341 6.50001L3.83342 10C3.83342 12.3012 5.6989 14.1667 8.00008 14.1667C10.3013 14.1667 12.1667 12.3012 12.1667 10Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}function O(e){return(0,l.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:(0,D.QP)("text-slate-11",e.className),children:(0,l.jsx)("path",{d:"M12 2V8M22 12H16M12 16V22M8 12H2M12 19C8.13401 19 5 15.866 5 12C5 8.13401 8.13401 5 12 5C15.866 5 19 8.13401 19 12C19 15.866 15.866 19 12 19Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})}var V=t(94344);let z=(0,V.memo)(function(e){return(0,l.jsx)("svg",{...e,width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"stroke-current text-slate-8 group-hover:text-slate-9",children:(0,l.jsx)("path",{d:"M2.66667 6H13.3333M2.66667 10.6667H8.00001",strokeWidth:"1.33333",strokeLinecap:"round",strokeLinejoin:"round"})})});var U=t(66679),H=t(32419),B=t(31284),G=t(89073),Q=t(77566),q=t(16008),J=t(35774),$=t(81778);let Z=(0,p._)({get:{params:v.z.object({id:v.z.string()}),data:v.z.object({creditsConsumed:v.z.number()})}});var W=t(98354),Y=t(94559),X=t(79879);let ee=(0,m.In)("GET","/api/executionDetails/:id/creditsConsumed",Z.get.data);var en=t(10293),et=t(13802);function el(e){let{className:n}=e;return(0,l.jsx)("svg",{viewBox:"0 0 13 13",xmlns:"http://www.w3.org/2000/svg",className:(0,D.QP)("fill-current",n),children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M.75 4.057c0-.632.341-1.215.892-1.525l3.5-1.969a1.75 1.75 0 0 1 1.716 0l3.5 1.97c.551.31.892.892.892 1.524v3.886a1.75 1.75 0 0 1-.892 1.525l-3.5 1.969c-.533.3-1.183.3-1.716 0l-3.5-1.969A1.75 1.75 0 0 1 .75 7.943V4.057ZM3.958 6a2.042 2.042 0 1 1 4.084 0 2.042 2.042 0 0 1-4.084 0Z",clipRule:"evenodd"})})}function ea(e){let{className:n}=e;return(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 14",fill:"none",className:"fill-current ".concat(n||""),children:(0,l.jsx)("path",{fill:"#FFB224",d:"M9.636 5.485a.277.277 0 0 0-.244-.15H5.343L6.367.672A.28.28 0 0 0 6.21.357a.271.271 0 0 0-.336.093L.385 8.226a.28.28 0 0 0 .08.401c.044.027.094.04.144.04h4.05l-1.024 4.66a.28.28 0 0 0 .156.316.271.271 0 0 0 .335-.093l5.49-7.776a.28.28 0 0 0 .02-.29Z"})})}var ei=t(51183),er=t(33762);let es=(0,V.memo)(function(e){var n,t;let{executionId:a,cancelSpinner:i,openTooltip:r,setOpenTooltip:s}=e,[o,d]=(0,V.useState)(!i),u=(0,et.$)(),c=function(e){let n=(0,V.useMemo)(()=>["executionDetails/[id]/creditsConsumed","get",e.params.id],[e.params.id]),t=(0,Y.lB)(()=>null==e?void 0:e.options,[null==e?void 0:e.options]),l=(0,W.I)({queryKey:n,queryFn:async()=>{let{data:n,error:t}=await ee(e);if(t)throw t;return n},...null==e?void 0:e.options}),a=(0,Y.lB)(()=>l,[l]);return(0,X.R)(n,a,t)}({params:{id:a}}),m=(0,en.f)(),p=(0,V.useRef)(c);(0,V.useEffect)(()=>{o&&setTimeout(()=>{var e;null===(e=p.current)||void 0===e||e.refetch(),d(!1)},2e3)},[p,d,o]);let g=(0,V.useMemo)(()=>u.find(e=>{var n;return e.value===(null==m?void 0:null===(n=m.data)||void 0===n?void 0:n.model)}),[u,null==m?void 0:null===(n=m.data)||void 0===n?void 0:n.model]),h=(0,V.useCallback)(()=>{s(e=>!e)},[s]),v=(0,V.useRef)(null);if((0,er.Wr)(v,h),c.error||c.isLoading||!(null===(t=c.data)||void 0===t?void 0:t.creditsConsumed)||m.error||m.isLoading||!m.data)return null;let f=(0,ei.Pp)(c.data.creditsConsumed),x="1"===f?"credit":"credits",b=o?null:(0,l.jsx)("span",{children:f});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(U.m_,{placement:"bottom",open:r,children:[(0,l.jsx)(U.ZI,{className:"z-5 max-w-[260px]",showArrow:!0,children:(0,l.jsxs)("div",{className:"mx-auto max-w-sm rounded-lg bg-neutral-700 p-1",ref:v,children:[(0,l.jsxs)("div",{className:"mb-0.5 flex items-center",children:[(0,l.jsxs)("span",{className:"mr-2 text-sm font-semibold text-white",children:[f," ",x," used"]}),g?g.icon:(0,l.jsx)(ea,{className:"mr-2 h-4 w-4"})]}),(0,l.jsx)("div",{className:"flex items-center text-xs text-gray-300",children:g?g.label:m.data.model}),(0,l.jsx)("p",{className:"mt-2 text-xs text-gray-400",children:"Try switching to a smaller model to optimize cost (may impact performance)."})]})}),(0,l.jsx)(U.k$,{className:"flex",asChild:!0,children:(0,l.jsxs)(M.$,{size:"xs",level:"text",className:"group px-1 py-0.5",onClick:h,children:[(0,l.jsx)(el,{className:"h-4 w-4 text-slate-8 transition group-hover:text-slate-9"}),(0,l.jsx)("span",{className:"ml-1 text-xs text-slate-9 group-hover:text-slate-10",children:b})]})})]}),(0,l.jsx)("span",{className:"px-2 text-xs text-slate-6",children:"â€¢"})]})}),eo={exit:{opacity:0},initial:{opacity:0},animate:{opacity:1},transition:{ease:"easeInOut",duration:.1}},ed={placement:"bottom",contentOffset:{mainAxis:0,crossAxis:0}},eu=(0,V.memo)(function(e){var n,t;let{blocks:a,executionId:i,nodeId:r,conversationId:s,isParentHovered:o,isRetriable:d,isRunnableOnTestMode:p,className:h}=e,v=(0,G.jE)(),f=(0,$.useRouter)(),N=(0,w.aV)(),{isRailsTesting:Z}=(0,S.dn)(),{allowStyledRetry:W,customRetryExecution:Y}=(0,V.useContext)(k.e),X=(0,b.C8)({params:{id:s}}),ee=(0,V.useRef)(null),en=(0,F.H)(),et=r&&(null==en?void 0:en.getNodeById(r)),el=(0,V.useCallback)(async()=>{var e,n;if(!r)return;null===(e=B.a.lindies.currentLindy)||void 0===e||e.stateGraph.setSelectedEntityById(r);let t=new URL(window.location.href,"https://chat.lindy.ai"),l=f.query[I.nw],a=Array.isArray(l)?l[0]:l;l&&(await f.push("/".concat(a,"/editor").concat(t.search),void 0,{shallow:!0}),null===(n=B.a.lindies.currentLindy)||void 0===n||n.stateGraph.setSelectedEntityById(r),B.a.ui.setTestingPanelOpen(!1))},[r,f]),{isMobileOnly:ea}=(0,E.Y0)(),[ei,er]=(0,V.useState)(!1),eu=(0,T.B)(s,async e=>{let{conversationId:n,executionId:t,responseStyleType:l,newBlocks:a,nodeId:i}=e;if(d){if(Y){await Y({conversationId:n,executionId:t,responseStyleType:l,newBlocks:a,nodeId:i});return}return await (0,m.oA)(x({body:{conversationId:n,executionId:t,responseStyleType:l,ts:new Date}}))}}),ec=(0,Q.n)({mutationFn:async e=>{if(d)return await eu(e)},onSettled:()=>{v.refetchQueries({queryKey:X})},onError:()=>{N({level:"danger",label:"There was an error retrying the query",message:"Please try again later",duration:5e3})},onSuccess:e=>{(null==e?void 0:e.agentDisabled)&&N({level:"primary",label:"This Lindy is currently disabled. Turn it back on to rerun this message.",message:"Please try again later",duration:5e3})}}),[em,ep]=(0,P.d)(C),eg=(0,A.Z)({stateGraph:en}),eh=(0,V.useCallback)(async()=>{let e=await em({variables:{input:{conversationId:s}}});if(!e.mutationResult.data){eg(e.mutationResult);return}let{id:n}=e.mutationResult.data.agentDefinition,t=new URL("/".concat(n,"/editor"),location.origin);t.search=new URLSearchParams({[_.c]:"true"}).toString(),f.push(t)},[em,s,eg,f]),ev=(0,V.useCallback)(()=>{ec.mutate({executionId:i,responseStyleType:g.y.NormalRetry}),H.z.capture("normal_retry")},[ec,i]),ef=(0,V.useCallback)(()=>{ec.mutate({executionId:i,responseStyleType:g.y.ShorterRetry}),H.z.capture("shorter_retry")},[ec,i]),ex=(0,V.useCallback)(()=>{ec.mutate({executionId:i,responseStyleType:g.y.LongerRetry}),H.z.capture("longer_retry")},[ec,i]),eb=(0,V.useCallback)(function(e){if(W){var n;null===(n=ee.current)||void 0===n||n.onTriggerContextMenu(e)}else ev()},[W,ev]),ey=(0,V.useMemo)(()=>{for(let t of[...a].reverse()){if((0,R.BZ)(t)||(0,R.s9)(t))return t.text;if((0,R.iq)(t)){var e,n;return null!==(n=null===(e=t.formatted)||void 0===e?void 0:e.userText)&&void 0!==n?n:t.text}}},[a]);return(0,l.jsx)("div",{className:(0,D.QP)("flex min-h-6",h),children:(0,l.jsx)(q.N,{children:(o||ei||ea||Z)&&(0,l.jsx)(J.P.div,{...eo,className:(0,D.QP)(!ea&&"z-10"),children:(0,l.jsxs)("div",{className:"flex select-none items-center justify-start",children:[(0,l.jsx)(es,{openTooltip:ei,setOpenTooltip:er,executionId:i,cancelSpinner:void 0===(t=null===(n=a.at(-1))||void 0===n?void 0:n.ts)||new Date().getTime()-t.getTime()>5e3}),!!ey&&(0,l.jsx)(j.Q,{result:ey,className:"p-px text-slate-8 group-hover:text-slate-9",iconClassName:"size-3.5"}),p&&!Z&&(0,l.jsxs)(U.m_,{children:[(0,l.jsx)(U.ZI,{children:"Run in Test Mode"}),(0,l.jsx)(U.k$,{asChild:!0,children:(0,l.jsx)(M.$,{level:"text",className:"group ml-1 p-0.5",onClick:eh,isLoading:ep,children:(0,l.jsx)(K,{className:"size-4 text-slate-8 transition group-hover:text-slate-9"})})})]}),d&&Z&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(M.$,{level:"text",className:"group ml-1 p-0.5",onClick:eb,children:(0,l.jsx)(u.A,{className:"size-4 stroke-[2.3px] text-slate-8 transition group-hover:text-slate-9"})}),(0,l.jsxs)(y.t,{ref:ee,children:[(0,l.jsx)(y.k,{icon:(0,l.jsx)(u.A,{className:"size-4 stroke-[2.3px] text-slate-8 transition group-hover:text-slate-9"}),onClick:ev,className:"mb-2",children:"Try again"}),(0,l.jsx)("div",{className:"border-t-1 border-slate-6 pt-2 group-hover:text-slate-9",onClick:ef,children:(0,l.jsx)(y.k,{icon:(0,l.jsx)(z,{className:"size-4 stroke-[2.3px] text-slate-8 transition group-hover:text-slate-9"}),className:"group-hover:text-slate-9 hover:bg-slate-4",children:"Shorter"})}),(0,l.jsx)(y.k,{icon:(0,l.jsx)(c.A,{className:"size-4 stroke-[2.3px] text-slate-8 transition group-hover:text-slate-9"}),onClick:ex,className:"pt-2",children:"Longer"})]})]}),et&&r&&Z&&(0,l.jsx)(L.F,{node:et,className:"ml-1 flex h-5 items-center",showTooltip:!0,tooltipOptions:ed,children:(0,l.jsx)(M.$,{size:"xs",level:"text",onClick:el,className:"group p-0",children:(0,l.jsx)(O,{className:"size-[18px] stroke-[2.3px] text-slate-8 transition group-hover:text-slate-9"})})})]})})})})});var ec=t(22132),em=t(85129),ep=t(59680);let eg=(0,V.memo)(function(e){let{date:n}=e;return(0,l.jsx)("p",{className:"text-center text-sm font-medium leading-[0.8] text-slate-9",children:function(e){let n=e.toLocaleString(void 0,{weekday:"short"}),t=e.toLocaleString(void 0,{weekday:"long"}),l=e.toLocaleString(void 0,{month:"long",day:"numeric"}),a=e.toLocaleString(void 0,{hour:"numeric",minute:"numeric"}),i=e.toDateString()===new Date().toDateString(),r=e.valueOf()-Date.now()<6048e5;return(i?"Today":r?t:"".concat(n,", ").concat(l," at"))+" ".concat(a)}(n)})});var eh=t(70710);function ev(e){let{timestamp:n,footer:t,loadingIndicator:a,children:i}=e;return(0,l.jsxs)("div",{children:[n&&(0,l.jsx)("div",{className:"mb-8",children:n}),(0,l.jsxs)("div",{className:"space-y-12",children:[i,a&&(0,l.jsx)(eh.P,{children:a})]}),(0,l.jsx)("div",{className:"ml-9 flex h-12 items-center",children:t})]})}var ef=t(20101),ex=t(88848),eb=t(15727),ey=t(47489),ej=t(13268),eC=t(23664);let eN=new Set([ex.H,ep.l]),ek=(0,V.memo)(function(e){let{identityFragmentRef:n,agentDefinitionFragmentRef:t,showLoadingIndicator:a,conversationContext:i,blocks:r,nodeId:s,inputBlock:u,executionDetailsBlock:c,startTs:m,showTimestamp:p=!1,isRetriable:g=!1,isRunnableOnTestMode:h=!1,allConversationBlocks:v}=e,f=(0,N.useFragment)(o,n),x=(0,N.useFragment)(d,t),b=r.at(-1),y=!!c&&((0,R.kf)(b)||(0,R.BZ)(b)||(0,R.s9)(b)),{isOpen:j,onOpen:C,onClose:k}=(0,eb.j)(),{blockElements:T,suppressLoadingIndicator:P}=(0,V.useMemo)(()=>{let e,n;return e=null,n=!1,{blockElements:r.map((t,a)=>{var s;let o=ec.V.match(t);if(!o)return null;let d=o.Avatar,u=d===e&&eN.has(d);e=d,n=null!==(s=o.suppressLoadingIndicator)&&void 0!==s&&s;let c=a===r.length-1,m=(0,R.kf)(t)&&v.some(e=>{var n;return(0,R.aD)(e)&&e.actionTraceId===t.traceId&&(null===(n=e.labels)||void 0===n?void 0:n.includes(ey.G.BlockedOnActionRateLimit))}),p=(0,R.Nh)(t)?t.executionId:void 0,g=(0,R.Nh)(t)&&t.toolName===eC.h6.Form&&v.some(e=>(0,R.SH)(e)&&e.actionExecutionId===p);return(0,l.jsx)(em.Kd,{identityFragmentRef:f,agentDefinitionFragmentRef:x,handlerComponents:o,block:t,isLastBlock:c,disableInteraction:!c||m||g,conversationContext:i,hideAvatar:u},t._id)}),suppressLoadingIndicator:n}},[r,i,f,x,v]);return T.every(e=>null===e)?null:(0,l.jsx)("div",{onMouseEnter:C,onMouseLeave:k,children:(0,l.jsx)(ev,{timestamp:p&&(0,l.jsx)(eg,{date:m}),footer:y&&(0,l.jsx)(eu,{blocks:r,conversationId:i.conversationId,executionId:c.executionId,nodeId:s,inputBlock:u,isParentHovered:j,isRetriable:g,isRunnableOnTestMode:h}),loadingIndicator:a&&!P&&(0,l.jsx)(ef.I,{}),children:T})})},function(e,n){return ej.D.hasSameElements(e.blocks,n.blocks)&&e.inputBlock===n.inputBlock&&e.executionDetailsBlock===n.executionDetailsBlock&&e.startTs===n.startTs&&e.showTimestamp===n.showTimestamp&&e.identityFragmentRef===n.identityFragmentRef&&e.agentDefinitionFragmentRef===n.agentDefinitionFragmentRef&&e.showLoadingIndicator===n.showLoadingIndicator&&e.conversationContext===n.conversationContext&&e.isRetriable===n.isRetriable});var eT=t(27631),eP=t(85926);function ew(e){let{children:n}=e,t=(0,V.useRef)(null),{isRailsTesting:a}=(0,S.dn)(),i=(0,V.useRef)(!1),r=(0,V.useCallback)(()=>{t.current&&(i.current||t.current.scrollTo({top:t.current.scrollHeight,behavior:"smooth"}))},[]);return(0,eT.f)("task-input-submitted",r),(0,eT.f)("blocks-added-to-task",r),(0,eT.f)("blocks-updated",r),(0,V.useEffect)(()=>{t.current&&t.current.scrollTo({top:t.current.scrollHeight})},[]),(0,V.useEffect)(()=>{let e=t.current;if(!e)return;let n=e.scrollTop,l=()=>{let t=e.scrollHeight-e.scrollTop-e.clientHeight;e.scrollTop<n?i.current=!0:t<80&&(i.current=!1),n=e.scrollTop};return e.addEventListener("scroll",l),()=>{e.removeEventListener("scroll",l)}},[]),(0,l.jsxs)(eP.E5,{children:[(0,l.jsx)(eP.Gl,{ref:t,children:(0,l.jsx)("div",{"data-testid":"conversation-transcript",className:(0,D.QP)("mx-auto max-w-2xl",a?"px-3 pt-5":"sm:p-8 p-3"),children:n})}),(0,l.jsx)(eP.Ze,{})]})}var eI=t(36175);function eA(e){return!e.hideFromUI&&(!!((0,R.sw)(e)||(0,R.qG)(e))||ec.V.canHandle(e))}function eS(e){return"string"==typeof e.ts||"number"==typeof e.ts?new Date(e.ts):e.ts}let e_=new Set([R.Jl.ACTION_NEEDED_OAUTH2_AUTH,R.Jl.ACTION_NEEDED_API_TOKEN_AUTH,R.Jl.ACTION_NEEDED_CUSTOM_AUTH,R.Jl.ACTION_NEEDED_CUSTOM_OAUTH2]);var eL=t(38001),eF=t(25270);let eE=(0,V.memo)(function(e){var n;let{conversation:t,identity:a,agentDefinition:i}=e,o=t.blocks,d=(0,V.useMemo)(()=>(function(e){let n,t;let l=(0,eI.r$)(e);e=e.filter(eA);let a=[],i=[],r=!1;for(let d of e){var s,o;if(!(0,R.qG)(d)||(t=d.to._id,(null===(s=d.edge)||void 0===s?void 0:s.condition)||"no_condition_met"===d.reason)){if((0,R.qE)(d))i.length>0&&a.push({blocks:i,inputBlock:n,startTs:eS(i[0]),isRetriable:!1,isRunnableOnTestMode:!1,nodeId:t}),i=[d],n=void 0;else if((0,R.sw)(d)){if(i.length>0){let e=(0,eI.xU)(l,d.executionId),s=!1;!r&&e&&(r=!0,s=!0),a.push({blocks:i,inputBlock:n,executionDetailsBlock:d,startTs:eS(null!==(o=i[0])&&void 0!==o?o:d),isRetriable:e,isRunnableOnTestMode:s,nodeId:t})}i=[],n=void 0}else i.push(d),(0,R.iq)(d)&&(n=d)}}for(let e of(i.length>0&&a.push({blocks:i,inputBlock:n,startTs:eS(i[0]),isRetriable:!1,isRunnableOnTestMode:!1,nodeId:t}),a))e.blocks=function(e){let n=[],t=[],l=e.filter(R.kf).length;for(let a of[...e].reverse()){if(l>0&&e_.has(a.type)){t.unshift(a);continue}n.unshift(a),(0,R.kf)(a)&&(n.unshift(...t),t=[],l--)}return n}(e.blocks);return function(e){let n=null;e.forEach(e=>{(!n||e.startTs.valueOf()-n.valueOf()>36e5)&&(e.showTimestamp=!0,n=e.startTs)})}(a),a})(o),[o]),{data:u}=(0,en.f)(null==t?void 0:t.agentDefinitionId),c=null==u?void 0:u.icon,m=(0,V.useMemo)(()=>{var e,n;return{conversationId:t._id,conversationParentId:t.parentId,userAvatar:{name:a.name,url:null!==(n=null===(e=a.avatar)||void 0===e?void 0:e.url)&&void 0!==n?n:void 0},agentAvatar:c?{iconName:c.name,color:c.color}:void 0,agentDefinitionId:t.agentDefinitionId}},[c,t._id,t.parentId,t.agentDefinitionId,null===(n=a.avatar)||void 0===n?void 0:n.url,a.name]),{timedOut:p,isOffline:g}=(0,s.J)(),h=(0,eF.N)(t.status);return(0,l.jsxs)(ew,{children:[d.map((e,n)=>(0,l.jsx)(ek,{identityFragmentRef:a,agentDefinitionFragmentRef:i,showLoadingIndicator:n===d.length-1&&h,conversationContext:m,allConversationBlocks:o,...e},e.startTs.valueOf())),g&&(0,l.jsx)(r.F,{type:"warning",children:"You may be offline at the moment."}),p&&(0,l.jsx)(r.F,{type:"warning",children:"We're experiencing high demand, your request will start momentarily."})]},t._id)}),eR=(0,V.memo)(function(e){let n=(0,N.useFragment)(a,e.identityFragmentRef),t=(0,N.useFragment)(i,e.agentDefinitionFragmentRef),{data:r}=(0,eL.LM)();return r&&n?(0,l.jsx)(eE,{conversation:r,identity:n,agentDefinition:t}):null})},22132:(e,n,t)=>{"use strict";t.d(n,{V:()=>nE});var l=t(50612),a=t(52105),i=t(5862),r=t(7094);let s=(0,i._)({get:{query:r.z.object({key:r.z.string()}),data:r.z.object({url:r.z.string().nullish()})}});var o=t(94344),d=t(79879);let u=(0,a.In)("GET","/api/meetings/video",s.get.data);var c=t(46945),m=t(46251),p=t(23664),g=t(95845),h=t(72720),v=t(25919),f=t(57459);let x=(0,o.memo)(function(e){let{videoS3KeyOrUrl:n,transcript:t,isPrivate:a=!0,showIcon:i=!1}=e,[r,s]=(0,o.useState)([]),[d,x]=(0,o.useState)(""),b=(0,o.useRef)(null);(0,o.useEffect)(()=>{s((t||[]).filter(e=>{var n,t;return null!==(t=null===(n=e.words)||void 0===n?void 0:n.length)&&void 0!==t&&t}).map(e=>{var n,t,l,a,i;return{speaker:e.speaker,sentence:"".concat(null===(n=e.words)||void 0===n?void 0:n.map(e=>e.text).join(" ")),start_timestamp:(null===(t=e.words)||void 0===t?void 0:t.length)&&e.words[0]?e.words[0].start_timestamp:0,end_timestamp:(null===(l=e.words)||void 0===l?void 0:l.length)&&e.words.at(-1)&&null!==(i=null===(a=e.words.at(-1))||void 0===a?void 0:a.end_timestamp)&&void 0!==i?i:0}},[]))},[t]),(0,o.useEffect)(()=>{(async function(){if(a&&n){let t=await u({query:{key:n}});if(200===t.res.statusCode){var e;x((null===(e=t.data)||void 0===e?void 0:e.url)||"")}return}x(n||"")})()},[a,n]);let y=(0,o.useCallback)(e=>{b&&b.current&&(e.preventDefault(),b.current.currentTime=parseFloat(e.currentTarget.dataset.time||"0"))},[b]),j=(0,o.useMemo)(()=>r.map(e=>{var n;return"[".concat((0,g.A)((0,h.A)(new Date(0,0,0,0),e.start_timestamp),"H:mm:ss"),"]\n").concat(null!==(n=e.speaker)&&void 0!==n?n:"Unknown Speaker",": ").concat(e.sentence)}).join("\n"),[r]);return(0,l.jsxs)(c.L,{title:"Meeting Completed",subtitle:"View the video and transcript",icon:i&&(0,l.jsx)(m.si,{tool:p.h6.LindyMeeting,className:"size-5"}),status:"none",autoToggleOnStatusChange:!1,hasSideEffects:!1,hasUserInput:!1,children:[(0,l.jsx)("div",{className:(0,v.QP)("flex  items-center justify-center rounded-sm bg-slate-1 font-bold text-slate-9",d?"h-auto":"h-28"),children:d?(0,l.jsx)("video",{controls:!0,className:"w-full rounded-lg",ref:b,children:(0,l.jsx)("source",{src:d,type:"video/mp4"})}):"No video available"}),(0,l.jsxs)("div",{className:"relative max-h-96 overflow-scroll border-t-1 border-solid border-t-slate-2 p-1",children:[r.length>0&&(0,l.jsx)("div",{className:"absolute right-2 top-2",children:(0,l.jsx)(f.T,{text:j,title:"Copy Transcript"})}),r.length?r.map((e,n)=>{var t;return(0,l.jsxs)("div",{className:"my-6 grid cursor-pointer grid-cols-6 gap-3 pt-1 hover:bg-slate-1 dark:hover:bg-slate-2","data-time":e.start_timestamp,onClick:y,children:[(0,l.jsx)("div",{className:"text-right text-xs font-medium text-slate-11",children:(0,g.A)((0,h.A)(new Date(0,0,0,0),e.start_timestamp),"HH:mm:ss")}),(0,l.jsxs)("div",{className:"col-span-5 border-l-2 border-solid border-l-slate-8 pl-3",children:[(0,l.jsx)("div",{className:"text-sm font-semibold text-black dark:text-slate-12",children:null!==(t=e.speaker)&&void 0!==t?t:"Unknown Speaker"}),(0,l.jsx)("div",{className:"text-sm text-slate-12",children:e.sentence})]})]},n)}):"No transcript available"]})]})});function b(e){let{date:n}=e,t=n.toLocaleDateString("en-US",{weekday:"short"}),a=n.getDate(),i=n.toLocaleDateString("en-US",{month:"short"}),r=n.getHours(),s=n.getMinutes().toString().padStart(2,"0"),o="".concat(t," ").concat(a," ").concat(i," ").concat(r,":").concat(s);return(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"grow border-t border-gray-300"}),(0,l.jsx)("span",{className:"px-4 leading-[0.8] text-slate-11",children:"Prompt updated on ".concat(o)}),(0,l.jsx)("div",{className:"grow border-t border-gray-300"})]})}var y=t(95277),j=t(5257),C=t(57473),N=t(88036),k=t(65832),T=t(10293),P=t(38001),w=t(90508),I=t(77576);function A(e){var n,t;let{data:l}=(0,P.LM)(),{data:a}=(0,I.U)(),{data:i}=(0,C.Tl)({params:{id:String(null!=e?e:null==l?void 0:l.parentId)},options:{enabled:!!e&&(null==a?void 0:a.id)!==e||null!=l&&!!l.parentId}}),{data:r}=(0,T.f)(null==i?void 0:i.agentDefinitionId);return{icon:(0,w.hq)(null==r?void 0:null===(n=r.icon)||void 0===n?void 0:n.name),color:null==r?void 0:null===(t=r.icon)||void 0===t?void 0:t.color}}var S=t(39274),_=t(59680),L=t(42168);function F(e){let{children:n,onClick:t,className:a}=e;return(0,l.jsx)("div",{className:(0,v.QP)("mt-6 flex items-center gap-3",a),onClick:t,children:n})}var E=t(62457),R=t(72735),M=t(93300),D=t(67373),K=t(31284);function O(e){let{agentDefinitionId:n,nodeId:t,nodeType:a}=e,i=(0,E.R)(),{lindyId:r,lindyWithMaybeSlug:s}=(0,M.P)(),[d,u]=(0,o.useState)(!1),c=(0,l.jsx)(L.A,{strokeWidth:1.6,className:(0,v.QP)(d?"text-slate-9 animate-spin-moderate":"text-slate-12","h-5 w-5 transition-colors group group-hover:text-slate-12")}),m=(0,o.useCallback)(()=>{u(!0)},[]),p=r===n,g=i.pathname.endsWith("editor"),h=(0,o.useMemo)(()=>{let e=new URLSearchParams(i.searchParams);return e.set(R.J8,t),{pathname:"/".concat(p?s:n,"/editor"),query:e.toString()}},[i,p,s,n,t]),f=!p||!g,x=(0,o.useCallback)(e=>{var n,l;!f&&(null===(n=K.a.lindies.currentLindy)||void 0===n?void 0:n.stateGraph)&&(e.preventDefault(),e.stopPropagation(),null===(l=K.a.lindies.currentLindy)||void 0===l||l.stateGraph.setSelectedEntityById(t,{shouldForceSelect:!0}))},[f,t]);return(0,l.jsx)(F,{onClick:m,className:"trigger"===a?"mt-3":"",children:(0,l.jsxs)(D.z,{href:h,size:"sm",level:"outline",icon:c,prefetch:f,replace:!f,onClickCapture:x,children:["Edit ",a," configuration"]})})}var V=t(76532),z=t(78629);let U={H1:8,H2:8,H3:9,H4:7,P:9,BLOCKQUOTE:20,PRE:0,UL:9,OL:9,TABLE:8,HR:0},H={H1:6,H2:7,H3:9,H4:6,P:8,BLOCKQUOTE:20,PRE:0,UL:8,OL:8,TABLE:15,HR:0},B={UL:8,OL:8},G={UL:8,OL:8};function Q(e){var n,t;let{firstChild:l,lastChild:a,includeMargin:i}=e,r=null!==(n=null==l?void 0:l.tagName)&&void 0!==n?n:"",s=null!==(t=null==a?void 0:a.tagName)&&void 0!==t?t:"",o=0,d=0;return r in U&&(o=U[r]),s in H&&(d=H[s]),i&&r in B&&(o+=B[r]),i&&s in G&&(d+=G[s]),{clipTop:o,clipBottom:d}}function q(e){let{children:n}=e,t=(0,o.useRef)(null),a=(0,o.useRef)(null),i=(0,o.useRef)(null);return(0,o.useLayoutEffect)(()=>{if(!i.current||!t.current||!a.current)return;let{clipTop:e,clipBottom:n}=Q({firstChild:i.current.firstElementChild,lastChild:i.current.lastElementChild,includeMargin:!0});t.current.style.height="1px",t.current.style.marginBottom="".concat(-e-1,"px"),a.current.style.height="1px",a.current.style.marginTop="".concat(-n-1,"px")},[n]),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{ref:t}),n(i),(0,l.jsx)("div",{ref:a})]})}var J=t(44646),$=t(33025),Z=t(35774),W=t(16008);let Y={initial:{opacity:.5},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1}},X={initial:{scale:.8},animate:{scale:1}},ee={initial:{opacity:0},animate:{opacity:1}};function en(e){let{top:n,height:t,onMouseEnter:a,onMouseLeave:i,onCopy:r}=e,[s,d]=(0,o.useState)(!1),u=(0,o.useCallback)(()=>{r(),d(!0);let e=setTimeout(()=>d(!1),2e3);return()=>clearTimeout(e)},[r]),c=(0,o.useMemo)(()=>{let e={left:-38,right:-10,top:n-10,height:t+20};return{...e,width:"calc(100% + ".concat(Math.abs(e.left),"px)")}},[n,t]);return(0,l.jsx)(Z.P.div,{className:"absolute rounded-lg border border-slate-5 bg-slate-3",style:c,...Y,onMouseEnter:a,onMouseLeave:i,children:(0,l.jsx)(Z.P.div,{className:"absolute left-1 top-[min(50%,3px)] translate-x-[-50%]",...X,children:(0,l.jsxs)(D.$,{size:"xs",level:"text",className:"group block p-1",onClick:u,children:[!s&&(0,l.jsx)(Z.P.div,{...ee,className:"text-slate-9 group-hover:text-slate-10",children:(0,l.jsx)($.T,{className:"size-4 stroke-slate-8 transition group-hover:stroke-slate-9"})}),s&&(0,l.jsx)(Z.P.div,{...ee,children:(0,l.jsx)(J.S,{className:"size-4 fill-slate-8 transition"})})]})})})}function et(e){let[n,t]=(0,o.useState)([]),[a,i]=(0,o.useState)(!1),[r,s]=(0,o.useState)(!1),d=(0,o.useCallback)(()=>s(!0),[]),u=(0,o.useCallback)(()=>s(!1),[]);(0,o.useEffect)(()=>{let n=e.current;if(n)return n.addEventListener("mouseover",a),n.addEventListener("mouseenter",r),n.addEventListener("mouseleave",s),()=>{n.removeEventListener("mouseover",a),n.removeEventListener("mouseenter",r),n.removeEventListener("mouseleave",s)};function l(e){return e.tagName.startsWith("H")?Number(e.tagName.slice(1)):null}function a(e){if(e.target instanceof HTMLElement){let a=function(e){let t=function e(t){return t instanceof HTMLElement?t.parentElement===n?t:e(t.parentElement):null}(e);if(!t)return null;let a=function e(n){return null!==l(n)?n:n.previousElementSibling instanceof HTMLElement?e(n.previousElementSibling):null}(t);if(!a)return[t];let i=l(a);if(null===i)return null;let r=[a],s=a.nextElementSibling;for(;s instanceof HTMLElement;){let e=l(s);if(null!==e&&e<=i)break;r.push(s),s=s.nextElementSibling}return r}(e.target);a&&t(a)}}function r(){i(!0)}function s(){i(!1)}},[e]);let c=(0,o.useMemo)(()=>{if(!a&&!r)return null;let e=n[0],t=n.at(-1);if(!e||!t)return null;let i=e.offsetTop,s=t.offsetTop+t.offsetHeight-e.offsetTop,{clipTop:o,clipBottom:c}=Q({firstChild:e,lastChild:t,includeMargin:!1}),m=i+o,p=s-o-c;return(0,l.jsx)(en,{top:m,height:p,onMouseEnter:d,onMouseLeave:u,onCopy:function(){let e=n.map(e=>e.textContent).join("\n\n"),t=n.map(e=>e.outerHTML).join("");if(void 0!==window.ClipboardItem){let n=new ClipboardItem({"text/plain":new Blob([e],{type:"text/plain"}),"text/html":new Blob([t],{type:"text/html"})});navigator.clipboard.write([n])}else navigator.clipboard.writeText(e)}},"".concat(m,"-").concat(p))},[n,a,r,d,u]);return{copyUnderlayElement:(0,o.useMemo)(()=>(0,l.jsx)(W.N,{children:c}),[c])}}var el=t(56779),ea=t(33296),ei=t(71995);let er=(0,el.l)(),es=["img"],eo={a:ea.A8,code:ea.xd};function ed(e){let{children:n,proseRef:t}=e,{copyUnderlayElement:a}=et(t),i=(0,o.useMemo)(()=>(0,el.m)(!1),[]);return(0,l.jsxs)("div",{className:"relative",children:[a,(0,l.jsx)(V.V,{className:"relative",ref:t,children:(0,l.jsx)(ei.o,{remarkPlugins:er,rehypePlugins:i,components:eo,disallowedElements:es,children:n})})]})}let eu=(0,o.memo)(function(e){let{children:n}=e;return(0,l.jsx)(q,{children:e=>(0,l.jsx)(ed,{proseRef:e,children:(0,z.ch)(n)})})});var ec=t(90819),em=t(36175);let ep={Content(e){let{block:n}=e,t=(0,ec.T)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eu,{children:(0,em.o2)(n.text)}),!!n.nodeId&&!!t&&(0,l.jsx)(O,{agentDefinitionId:t,nodeId:n.nodeId,nodeType:"action"})]})},Avatar:_.l,avatarPosition:"center-with-text",suppressLoadingIndicator:!0};var eg=t(99772);let eh={Content(e){let{block:n}=e;return(0,l.jsx)(eu,{children:(0,em.o2)(n.text)})},Avatar:_.l,avatarPosition:"center-with-text",suppressLoadingIndicator:!0};var ev=t(77455),ef=t(38928);let ex=(0,i._)({get:{params:r.z.object({id:ef.k.objectIdString()}),data:r.z.array(ev.Cq)}});var eb=t(98354),ey=t(94559);let ej=(0,a.In)("GET","/api/conversations/:id/channels",ex.get.data);var eC=t(88345),eN=t(95158),ek=t(68317),eT=t(73850),eP=t(30495),ew=t(20628),eI=t(15727),eA=t(16908),eS=t(18658),e_=t(34698);let eL={Content(e){let{block:n,isLastBlock:t,conversationContext:{conversationId:a}}=e,{isOpen:i,onOpen:r,onClose:s}=(0,eI.j)(!1),[d,u]=(0,o.useState)(!1);(0,o.useEffect)(()=>{n.didAuthenticate&&s()},[n.didAuthenticate,s]);let c=!t,p=c||n.didAuthenticate||d,g=(0,o.useCallback)(()=>{(0,ek.e)({body:{conversationId:a}}),u(!0)},[a]),h=n.icon?(0,l.jsx)(m.si,{className:"size-5",tool:n.icon}):void 0,v=(0,l.jsx)(eT.aF,{className:"w-auto max-w-none py-0 sm:w-auto sm:max-w-none",open:i,setClosed:s,children:(0,l.jsxs)(eA.$,{children:[(0,l.jsx)(eP.o,{onClick:s}),(0,l.jsx)(ew.r,{children:n.name}),n.type===e_.Jl.ACTION_NEEDED_API_TOKEN_AUTH&&(0,l.jsx)(eS.ge,{method:"Token",provider:n.authScheme,authId:n.authId,displayName:n.name,conversationId:a,onComplete:s}),n.type===e_.Jl.ACTION_NEEDED_CUSTOM_AUTH&&(0,l.jsx)(eS.ge,{method:"Custom",provider:n.authScheme,authId:n.authId,displayName:n.name,fields:n.fields,conversationId:a,onComplete:s}),n.type===e_.Jl.ACTION_NEEDED_CUSTOM_OAUTH2&&(0,l.jsx)(eS.ge,{method:"OAuth",provider:n.authScheme,authId:n.authId,displayName:n.name,fields:n.fields,conversationId:a,onComplete:s})]})});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eu,{children:"Please connect your ".concat(n.name," account")}),(0,l.jsxs)(F,{children:[(0,l.jsx)(D.$,{level:"primary",disabled:p,icon:h,trailingIcon:n.didAuthenticate?(0,l.jsx)(eN.A,{className:"size-5"}):void 0,onClick:r,children:n.didAuthenticate?"".concat(n.name," connected"):"Connect ".concat(n.name)}),(0,l.jsx)(D.$,{level:"outline",disabled:c||n.didAuthenticate,onClick:g,trailingIcon:d?(0,l.jsx)(eN.A,{className:"size-5"}):void 0,children:"Cancel"})]}),v]})},Avatar:_.l,avatarPosition:"center-with-text"};var eF=t(50072);let eE={Content(e){let{block:n,isLastBlock:t,conversationContext:{conversationId:a}}=e,{name:i,reason:r,icon:s,authLabel:d,authId:u,scopes:c,authScheme:p}=n,g=n.didAuthenticate,[h,v]=(0,o.useState)(!1),f=!t,x=f||g||h,b=(0,o.useMemo)(()=>(0,eF.sO)({provider:p,scopes:null!=c?c:[],authId:u,conversationId:a}),[u,a,c,p]),y=(0,o.useCallback)(e=>{if(x){e.preventDefault();return}let n=window.open(b);return n&&e.preventDefault(),!!n},[x,b]),j=(0,o.useCallback)(()=>{(0,ek.e)({body:{conversationId:a}}),v(!0)},[a]),C=s?(0,l.jsx)(m.si,{className:"size-5",tool:s}):void 0;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eu,{children:r||"Please connect your ".concat(i," account")}),(0,l.jsxs)(F,{children:[(0,l.jsx)("a",{target:"_blank",href:x?"":b,rel:"noreferrer",onClick:y,children:(0,l.jsx)(D.$,{level:"primary",disabled:x,icon:C,trailingIcon:g?(0,l.jsx)(eN.A,{className:"size-5"}):void 0,children:g?"".concat(d||i," connected"):"Connect ".concat(d||i)})}),(0,l.jsx)(D.$,{level:"outline",disabled:f||g,onClick:j,trailingIcon:h?(0,l.jsx)(eN.A,{className:"size-5"}):void 0,children:"Skip"})]})]})},Avatar:_.l,avatarPosition:"center-with-text"},eR={Content:[function(e){var n;let{block:t}=e;return(0,l.jsx)(eu,{children:null!==(n=t.name)&&void 0!==n?n:""})},function(){let{data:e}=(0,I.U)(),n=(null==e?void 0:e.name)?e.name.split(" ")[0]:"";return(0,l.jsx)(eu,{children:n?"Hello ".concat(n):"Hello"})}],Avatar:_.l,avatarPosition:"center-with-text"};var eM=t(98722),eD=t(85702),eK=t(87021),eO=t(85680),eV=t(40252),ez=t(89073),eU=t(77566);let eH={Content(e){var n,t,i,r,s,d,u,g,h,v,f,x,b;let{block:y,conversationContext:{conversationId:j,agentDefinitionId:N}}=e,[k,T]=(0,o.useState)(null!==(v=y.disabled)&&void 0!==v&&v),P=(0,eO.aV)(),[w,I]=(0,eK.Q)(),A=(0,ez.jE)(),S=(0,C.C8)({params:{id:j}}),_=(0,eD.Mt)({params:{tool:null!==(f=null===(n=y.requiredAuth)||void 0===n?void 0:n.toolName)&&void 0!==f?f:p.h6.Lindy,trigger:null!==(x=null===(t=y.requiredAuth)||void 0===t?void 0:t.actionName)&&void 0!==x?x:""},query:(null===(i=y.requiredAuth)||void 0===i?void 0:i.authId)?{authId:y.requiredAuth.authId}:{},options:{enabled:!!y.requiredAuth&&!k,refetchInterval:1e3}}),{title:L,body:F,retryLabel:E,hasAlwaysContinue:R,hasGoToTriggerConfiguration:M}=function(e,n){let{subType:t,requiredAuth:l,errorMessage:a,wasTriggerDisabled:i,nodeId:r}=e;switch(t){case e_.FY.AuthExpired:return{title:"Authentication expired",body:n?"I paused this task since your ".concat(null==l?void 0:l.toolName," connection was lost. Now that the connection is back, click Retry to resume this task"):"My connection ".concat((null==l?void 0:l.toolName)?"to ".concat(null==l?void 0:l.toolName):""," was lost. Please re-authenticate to resume this task."),retryLabel:n?"Retry":null};case e_.FY.PaymentFailed:return{title:"Last Payment failed",body:"Please check your payment method in billing settings & click Retry to continue this task.",retryLabel:"Retry"};case e_.FY.CreditsExhausted:return{title:"Credit limit reached",body:"Please upgrade & click Retry to continue this task.",retryLabel:"Retry"};case e_.FY.RequiresPremiumFeatures:return{title:"Subscription with access to premium features required",body:"Please upgrade & click Retry to continue this task.",retryLabel:"Retry"};case e_.FY.VerificationFailed:return{title:null!=a?a:"Verification failed",body:"This email failed SPF verification, a spam safeguard. You can continue processing this email if it's trusted, or always proceed despite SPF failures.",retryLabel:"Continue",hasAlwaysContinue:!0};default:return{title:null!=a?a:"An error occurred. Please try again.",body:i?"The trigger was disabled.":"Please try again.",retryLabel:i?null:"Retry",hasGoToTriggerConfiguration:!!i&&!!r}}}(y,null===(r=_.data)||void 0===r?void 0:r.authorized),K=(0,eU.n)({mutationFn:async e=>await (0,a.oA)((0,eM.A)({body:{conversationId:j,messageId:y.messageId,input:"",alwaysContinue:e}})),onError:e=>P({level:"danger",message:e.message,duration:5e3}),onSuccess:async e=>{T(!0),e.conversationId!==j&&(I(e.conversationId),await A.invalidateQueries(S))}}),V=(0,o.useCallback)(()=>{K.mutate(!1)},[K]),z=(0,o.useCallback)(()=>{K.mutate(!0)},[K]),U=(0,o.useCallback)(()=>{var e,n;(null===(e=_.data)||void 0===e?void 0:e.authorized)||(null===(n=_.data)||void 0===n?void 0:n.needs.type)!=="oauth2"||window.open(_.data.needs.url,"_blank")},[_.data]),H=!k&&y.requiredAuth&&!_.isLoading&&!(null===(s=_.data)||void 0===s?void 0:s.authorized)&&(null===(d=_.data)||void 0===d?void 0:d.needs.type)==="oauth2";return(0,l.jsx)(c.L,{title:L,subtitle:F,icon:(0,l.jsx)("div",{className:"flex size-5 items-center justify-center",children:(0,l.jsx)(eV.s,{})}),expandable:!1,children:(0,l.jsxs)("div",{className:"flex items-center gap-3 pl-8 pt-1",children:[H&&(0,l.jsxs)(D.$,{level:"primary",onClick:U,disabled:_.isLoading||k,icon:(null===(u=y.requiredAuth)||void 0===u?void 0:u.toolName)?(0,l.jsx)(m.si,{className:"size-5",tool:null===(g=y.requiredAuth)||void 0===g?void 0:g.toolName}):void 0,children:["Connect ",null!==(b=null===(h=y.requiredAuth)||void 0===h?void 0:h.toolName)&&void 0!==b?b:""]}),!!E&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(D.$,{level:"primary",onClick:V,disabled:K.isLoading||k,children:E}),!!R&&(0,l.jsx)(D.$,{level:"outline",onClick:z,disabled:K.isLoading||k,children:"Always continue"})]}),!!M&&y.nodeId&&(0,l.jsx)(O,{agentDefinitionId:N,nodeId:y.nodeId,nodeType:"trigger"})]})})},Avatar:_.l,avatarPosition:"align-top"};var eB=t(54931),eG=t(31634),eQ=t(53445),eq=t(72672),eJ=t(45801),e$=t(71792);let eZ=(0,o.memo)(function(e){var n;let{node:t,handleSaveAction:a}=e,[i]=(0,o.useState)(null!==(n=t.action.actionConfiguration)&&void 0!==n?n:[]),r=(0,o.useCallback)(()=>{a(i)},[a,i]);return(0,e$.N)(t)&&t.actionDetails?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(eJ.yE,{children:[t.authConfig&&(0,l.jsx)("div",{className:"mb-5",children:(0,l.jsx)(eq.a,{identityId:K.a.auth.owner,tool:t.actionDetails.tool,authConfig:t.authConfig,auth:t.auth,authList:t.authList,isMissingScopes:t.isMissingAuthScopes,onChange:t.setAuth,displayName:t.actionDetails.displayName})}),(0,l.jsx)(eQ.R,{node:t})]}),(0,l.jsx)("div",{className:"-mt-6 flex flex-row justify-end gap-x-2 align-middle",children:(0,l.jsx)(D.$,{type:"submit",onClick:r,children:"Save"})})]}):null});var eW=t(23310),eY=t(62898),eX=t(91777),e0=t(8678);let e1=(0,e0.PA)(function(e){var n,t;let{node:a,tool:i,action:r,handleSaveTrigger:s,onCloseModal:d}=e,u=(0,eY._)(a),[c,m]=(0,o.useState)(a.triggerSetup),p=(0,eD.Mt)({params:{tool:i,trigger:r},query:{}}),g=(0,o.useMemo)(()=>{let e=p.data;return e&&u?{id:(0,eX.Kh)(),...u,triggerFields:e.triggerFields,enabled:!0,actionArgs:{...a.triggerSetup,...c}}:null},[p.data,u,a.triggerSetup,c]),h=(0,o.useCallback)((e,n,t)=>{g&&m(e=>({...e,[n]:t}))},[g]),v=(0,o.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),s(c)},[s,c]);return g?(0,l.jsxs)(eJ.yE,{children:[a.authConfig&&(0,l.jsx)("div",{className:"mb-5",children:(0,l.jsx)(eq.a,{identityId:K.a.auth.owner,tool:g.tool,authConfig:a.authConfig,auth:a.auth,authList:a.authList,isMissingScopes:a.isMissingAuthScopes,onChange:a.setAuth,displayName:g.displayName})}),(0,l.jsx)(eW.V,{toggle:v,setTriggerConfig:h,handleClose:d,trigger:g,authId:null!==(t=null===(n=a.auth)||void 0===n?void 0:n.id)&&void 0!==t?t:null,showNavigation:!1,currentAgentModel:null,showControlButtons:!0,isFromModal:!0})]}):null});var e2=t(21429),e3=t(7461),e6=t(57802);let e5=()=>{let e=(0,o.useCallback)((e,n)=>{var t;return null===(t=e6.sM[e])||void 0===t?void 0:t[n]},[]),n=(0,o.useCallback)((n,t)=>!!e(n,t),[e]),t=(0,o.useCallback)((n,t)=>{let l=e(n,t);return(null==l?void 0:l.description)||""},[e]);return{getDescription:t,getTitle:(0,o.useCallback)(n=>{var t,l;let a=null===(t=K.a.lindies.currentLindy)||void 0===t?void 0:t.stateGraph._nodesById.get(n._id);if((0,e3.c_)(n)){if((0,e3.l3)(n))return null==a?void 0:null===(l=a.knowledgeBase)||void 0===l?void 0:l.displayName;let t=e(n.action.tool,n.action.action);return null==t?void 0:t.title}},[e]),isAction:n,isActionNode:(0,o.useCallback)(e=>!!e&&((0,e3.l3)(e)||(0,e3.mt)(e)),[]),isConfigured:(0,o.useCallback)(e=>{if((0,e3.c_)(e)&&(0,e3.l3)(e)){var n,t;let l=null===(n=K.a.lindies.currentLindy)||void 0===n?void 0:n.stateGraph._nodesById.get(e._id);return!!(null==l?void 0:null===(t=l.knowledgeBase)||void 0===t?void 0:t.sources.length)}return!0},[])}};function e4(e){var n,t,a,i;let{node:r,defaultLabel:s}=e,{getTitle:d,isActionNode:u}=e5(),c=(0,e2.K)(r),m=(0,eY._)(r),p=null==r?void 0:r.data,g=(0,o.useMemo)(()=>{if((0,e3.Me)(p)&&(0,e3.c_)(p)){var e;return u(p)?d(p):null!==(e=null==c?void 0:c.toolDisplayName)&&void 0!==e?e:p.action.tool}return""},[null==c?void 0:c.toolDisplayName,p,d,u]);if((0,e3.QF)(p)){if(!p.trigger)return(0,l.jsx)("h2",{className:"flex w-full items-center gap-x-2",children:(0,l.jsx)("span",{className:"text-slate-12",children:"Select a trigger"})});let e=null!==(n=null==m?void 0:m.toolDisplayName)&&void 0!==n?n:p.trigger.tool,a=null!==(t=null==m?void 0:m.displayName)&&void 0!==t?t:p.trigger.name;return(0,l.jsxs)("h2",{className:"flex w-full items-center gap-x-2",children:[(0,l.jsx)("span",{className:"line-clamp-1 text-slate-12",children:e}),(0,l.jsx)("span",{className:"line-clamp-1 text-ellipsis font-normal text-slate-9",children:a})]})}if((0,e3.c_)(p)){let e=null!==(i=null==c?void 0:c.displayName)&&void 0!==i?i:null===(a=p.action)||void 0===a?void 0:a.action,n=u(p);return(0,l.jsxs)("h2",{className:"flex w-full items-center gap-x-2",children:[(0,l.jsx)("span",{className:"text-slate-12",children:g})," ",!n&&(0,l.jsx)("span",{className:"line-clamp-1 text-ellipsis font-normal text-slate-11",children:e})]})}return(0,l.jsxs)(l.Fragment,{children:[" ",s," "]})}var e9=t(63620),e8=t(36441);let e7=(0,e0.PA)(function(e){var n;let{block:t,conversationContext:{conversationId:a}}=e,{mode:i,onboardingData:r,didConfigure:s}=t,{action:d,reason:u,nodeId:c,toolCallId:p,executionId:g,actionTraceId:h}=r,v=r.tool,{isOpen:f,onOpen:x,onClose:b}=(0,eI.j)(),y=K.a.lindies.currentLindy,j=(0,e8.EW)(()=>{var e;return null!==(e=null==y?void 0:y.stateGraph._nodesById.get(c))&&void 0!==e?e:null}).get(),C=(0,e$.N)(j)||(0,e$.B2)(j)?null===(n=j.auth)||void 0===n?void 0:n.id:null,N=(0,o.useCallback)(async e=>{let{actionArgs:n,actionConfiguration:t}=e;j&&(await (0,eB.F)({body:{conversationId:a,toolCallId:p,actionExecutionId:g,actionTraceId:h,actionName:"runOnboarding",invocationIndex:0,inputSubmission:{nodeId:j.id,configuration:{authId:C,actionArgs:n,actionConfiguration:t}},modifiedFields:[]}}),b())},[j,a,p,g,h,C,b]),k=(0,o.useCallback)(async e=>N({actionArgs:{},actionConfiguration:e}),[N]),T=(0,o.useCallback)(async e=>N({actionArgs:e,actionConfiguration:[]}),[N]);if(!j)return null;let{text:P,icon:w,label:I}=i===e_.BQ.Action?{text:"Configure action",icon:(0,l.jsx)(m.si,{tool:v,className:"size-5"}),label:e9.f[e6.cs.Action].label}:{text:"Configure trigger",icon:(0,l.jsx)(m.if,{tool:v,className:"size-5"}),label:e9.f[e6.cs.EntryPoint].label};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eu,{children:null!=u?u:""}),(0,l.jsx)(F,{children:(0,l.jsx)(D.$,{onClick:x,disabled:s,trailingIcon:s?(0,l.jsx)(eN.A,{className:"size-5"}):void 0,children:P})}),(0,l.jsxs)(eT.aF,{open:f,setClosed:b,hasBottomPadding:!0,children:[(0,l.jsxs)(eG.f,{between:!0,middle:!0,className:"w-full",children:[(0,l.jsx)("div",{className:"flex size-5 shrink-0 items-center justify-center rounded-[5px]",children:w}),(0,l.jsx)(e4,{node:j,defaultLabel:I})]}),i===e_.BQ.Action&&(0,e$.N)(j)&&(0,l.jsx)(eZ,{node:j,handleSaveAction:k}),i===e_.BQ.Trigger&&(0,e$.B2)(j)&&(0,l.jsx)(e1,{node:j,tool:v,action:d,handleSaveTrigger:T,onCloseModal:b})]})]})}),ne={Content:e=>(0,l.jsx)(e7,{...e}),Avatar:_.l,avatarPosition:"center-with-text"};function nn(e){let{audioItem:n}=e,t=(0,o.useRef)(null);return(0,o.useEffect)(()=>{t.current&&(t.current.currentTime=n.durationMs)},[n.durationMs]),(0,l.jsx)("audio",{controls:!0,ref:t,children:(0,l.jsx)("source",{src:n.source.url,type:n.specs.format})})}var nt=t(21203),nl=t(22283),na=t(20292),ni=t(20101),nr=t(35121),ns=t(55498);let no={type:"tween",duration:.15,ease:"easeOut"},nd={open:{height:"auto",overflow:"visible",transition:{...no,when:"beforeChildren"}},closed:{height:0,overflow:"hidden",transition:no}},nu={open:{opacity:1,y:0},closed:{opacity:0,y:5}},nc={Content(e){let{block:n}=e;return(0,l.jsx)(nm,{block:n})},Avatar:_.l,avatarPosition:"align-top"};function nm(e){let{block:n}=e,{isOpen:t,onOpen:a,onToggle:i}=(0,eI.j)(),r=!!n.audio,s=r&&!t,d=(0,o.useRef)(null),u=(0,o.useCallback)(e=>{d.current=e},[]);return(0,o.useEffect)(()=>{!t&&d.current&&d.current.pause()},[t]),(0,l.jsxs)(na.Z,{className:s?"cursor-pointer":void 0,onClick:s?a:void 0,children:[(0,l.jsx)("div",{className:(0,v.QP)("flex items-start gap-2",r&&"cursor-pointer"),onClick:r?i:void 0,children:(0,l.jsx)("div",{className:"flex w-full flex-col gap-2",children:n.text?(0,l.jsxs)("div",{className:"flex w-full justify-between",children:[(0,l.jsx)(nl.o,{className:(0,v.QP)("flex-1","text-sm leading-6 text-slate-12 dark:text-neutral-100","[&_a:hover]:no-underline [&_a]:underline [&_li]:mb-3 [&_li]:ml-4 [&_ol]:list-decimal [&_p:last-child]:mb-0 [&_p]:mb-3 [&_ul]:list-disc",r&&!t&&"line-clamp-6"),allowHTML:!1,children:n.text.trim()}),r&&(0,l.jsx)("section",{className:"flex items-start",children:(0,l.jsx)(nr.z,{direction:t?"up":"down",className:"size-5 transition-transform"})})]}):n.isCurrentlyStreaming?(0,l.jsx)(ni.I,{}):null})}),n.audio&&(0,l.jsx)(Z.P.div,{initial:"closed",animate:t?"open":"closed",variants:nd,children:(0,l.jsx)(Z.P.div,{className:"pt-4",variants:nu,transition:no,children:(0,ns.qg)(n.audio)?(0,l.jsx)(nt.$,{audioItem:n.audio,setWavesurferRef:u}):(0,l.jsx)(nn,{audioItem:n.audio})})})]})}var np=t(48314),ng=t(1894),nh=t(18273),nv=t(81904),nf=t(62813),nx=t(47716),nb=t(29160);let ny="__CONVERSATION_ATTACHMENT_TYPE__",nj=nb.a_.extend({[ny]:r.z.literal("LindyAttachment")}),nC=r.z.discriminatedUnion(ny,[nj]);function nN(e){return nC.safeParse(e).success&&!e.isConvertedMimeType}function nk(e){let n=(0,o.useMemo)(()=>({key:e.attachment._id,name:e.attachment.fileName,uploaded:!0}),[e.attachment._id,e.attachment.fileName]);return(0,l.jsx)("div",{className:"max-w-full",children:(0,l.jsx)(nf.F,{type:nf.z.ATTACHMENT,children:(0,l.jsx)(nx.C,{attachment:n})})})}function nT(e){return"LindyAttachment"===e.attachment[ny]?(0,l.jsx)(nk,{attachment:e.attachment}):null}function nP(e){let{children:n,proseRef:t}=e,{copyUnderlayElement:a}=et(t);return(0,l.jsxs)("div",{className:"relative",children:[a,(0,l.jsx)("div",{className:"relative",ref:t,children:(0,l.jsx)("p",{className:"whitespace-break-spaces font-sans leading-7 text-slate-12",children:n})})]})}let nw=(0,o.memo)(function(e){let{children:n}=e;return(0,l.jsx)(q,{children:e=>(0,l.jsx)(nP,{proseRef:e,children:n})})}),nI={Content(e){var n,t,a;let{block:i}=e,r=null===(n=i.formatted)||void 0===n?void 0:n.payload,s=(0,o.useMemo)(()=>Object.values(null!=r?r:{}).map(e=>null==e?void 0:e.data).filter(nN),[r]);return(0,l.jsxs)("div",{children:[(0,l.jsx)(nw,{children:(0,em.o2)(null!==(a=null===(t=i.formatted)||void 0===t?void 0:t.userText)&&void 0!==a?a:i.text)}),s.length>0&&(0,l.jsx)("div",{className:"mt-4 flex flex-wrap gap-2",children:s.map((e,n)=>(0,l.jsx)(nT,{attachment:e},n))})]})},Avatar:t(88848).H,avatarPosition:"center-with-text"};var nA=t(63193),nS=t(48866),n_=t.n(nS),nL=t(84047),nF=t(81211);let nE=new eg.$().addHandler({type:e_.Jl.MESSAGE_RECEIVED,match:e=>e.from.type===eC.yJ.Channel&&"user"===e.from.channelType||e.from.type===eC.yJ.User,components:nI}).addHandler({type:e_.Jl.MESSAGE_RECEIVED,match:e=>(e.from.type===eC.yJ.Channel&&!!e.from.trigger||e.from.type===eC.yJ.Trigger)&&!(0,e_.aq)(e),components:{Content(e){var n;let{block:t}=e,{_id:a,formatted:i}=t,{data:{observing:r}={}}=(0,np.sD)({params:{messageId:a}}),{data:s,isInitialLoading:d}=(0,j.Gy)({params:{id:a},options:{enabled:!i}}),u=(0,o.useMemo)(()=>(null==i?void 0:i.title)?i.title:(null==s?void 0:s.text)?(0,nv.TD)(s.text.split("\n")[0].trim(),":"):"Trigger event received",[null==i?void 0:i.title,null==s?void 0:s.text]);return i?(0,l.jsx)(ng.P,{...i,observing:r}):(0,l.jsx)(ng.P,{isLoading:d,title:u,userText:null!==(n=null==s?void 0:s.text)&&void 0!==n?n:"",payload:null==s?void 0:s.data,observing:r})},Avatar(e){let{block:n}=e,{_id:t,formatted:a,from:i}=n,{data:r}=(0,j.Gy)({params:{id:t},options:{enabled:!a}}),s=(0,o.useMemo)(()=>"trigger"in i&&i.trigger?i.trigger.tool:(null==a?void 0:a.tool)?a.tool:r?(0,nh.To)(r):p.h6.Lindy,[i,a,r]);return(0,l.jsx)(m.si,{tool:s,className:"size-6"})},avatarPosition:"align-top"}}).addHandler({type:e_.Jl.MESSAGE_RECEIVED,match:e=>e.from.type===eC.yJ.Channel&&!(0,e_.aq)(e),components:{Content(e){var n;let{block:t}=e,{data:a}=(0,j.Gy)({params:{id:t._id}}),{data:i}=(0,C.Tl)({params:{id:null!==(n=null==a?void 0:a.from.id)&&void 0!==n?n:""},options:{enabled:(null==a?void 0:a.from.id)!=null}}),{data:r}=(0,T.f)(null==i?void 0:i.agentDefinitionId),s=A(null==a?void 0:a.from.id),d=(0,o.useCallback)(e=>{e.stopPropagation()},[]),u=(0,o.useMemo)(()=>(0,l.jsxs)("div",{className:"flex px-2 py-1",children:[(0,l.jsx)("div",{onClick:d,children:(0,l.jsx)(N.N,{className:"text-sm font-medium text-slate-12 underline-offset-2",href:"/lindies/".concat(null==r?void 0:r._id,"?conversationId=").concat(null==i?void 0:i._id),children:(0,l.jsx)("span",{children:(null==r?void 0:r.name)?"Message from ".concat(null==r?void 0:r.name):"Message Received"})})}),(0,l.jsx)("div",{className:"grow"})]}),[null==r?void 0:r._id,null==r?void 0:r.name,null==i?void 0:i._id,d]);return a?(0,l.jsx)(c.L,{title:(null==r?void 0:r.name)?"Message from ".concat(null==r?void 0:r.name):"Message Received",customTitle:u,subtitle:a.text,expandable:!!a.data&&Object.keys(a.data).length>0,autoToggleOnStatusChange:!1,icon:(0,l.jsx)(S.l,{icon:s.icon,color:s.color,size:"sm"}),children:(0,l.jsx)(k.G,{input:a.data})}):null},Avatar(e){let{block:n}=e,{data:t}=(0,j.Gy)({params:{id:n._id}}),a=A(null==t?void 0:t.to.id);return t?(0,l.jsx)(S.l,{icon:a.icon,color:a.color}):null},avatarPosition:"align-top"}}).addHandler({type:e_.Jl.MESSAGE_SENT,match:e=>e.type===e_.Jl.MESSAGE_SENT&&(e.to.type===eC.yJ.Channel&&"user"===e.to.channelType||e.to.type===eC.yJ.User)&&e.text.trim().length>0,components:eh}).addHandler({type:e_.Jl.MESSAGE_SENT,match:e=>e.to.type===eC.yJ.Channel&&"agent"===e.to.channelType&&e.text.trim().length>0,components:{Content(e){var n;let{block:t,conversationContext:{conversationParentId:a}}=e,{data:i}=(0,j.Gy)({params:{id:t._id}}),{data:r}=(0,C.Tl)({params:{id:null!==(n=null==i?void 0:i.to.id)&&void 0!==n?n:""},options:{enabled:(null==i?void 0:i.to.id)!=null}}),{data:s}=(0,T.f)(null==r?void 0:r.agentDefinitionId),d=A(null==i?void 0:i.to.id),u=(0,o.useCallback)(e=>{e.stopPropagation()},[]),m=(0,o.useMemo)(()=>(0,l.jsxs)("div",{className:"flex flex-row px-2 py-1",children:[(0,l.jsx)("div",{onClick:u,children:(0,l.jsx)(N.N,{className:"text-sm font-medium text-slate-12 underline-offset-2",href:"/lindies/".concat(null==s?void 0:s._id,"?conversationId=").concat(null==r?void 0:r._id),children:(0,l.jsx)("span",{children:(null==s?void 0:s.name)?"".concat(t.to.id===a?"Sent":"Delegated"," to ").concat(null==s?void 0:s.name):"Task Delegated"})})}),(0,l.jsx)("div",{className:"grow"})]}),[null==s?void 0:s._id,null==s?void 0:s.name,null==r?void 0:r._id,u,t,a]);return i?(0,l.jsx)(c.L,{title:(null==s?void 0:s.name)?"".concat(t.to.id===a?"Responded":"Delegated"," to ").concat(null==s?void 0:s.name):"Task Delegated",customTitle:m,subtitle:i.text,expandable:!!i.data&&Object.keys(i.data).length>0,autoToggleOnStatusChange:!1,icon:(0,l.jsx)(S.l,{icon:d.icon,color:d.color,size:"sm"}),children:(0,l.jsx)(k.G,{input:i.data})}):null},Avatar(e){let{block:n}=e,{data:t}=(0,j.Gy)({params:{id:n._id}}),a=A(null==t?void 0:t.from.id);return t?(0,l.jsx)(S.l,{icon:a.icon,color:a.color}):null},avatarPosition:"align-top"}}).addHandler({type:e_.Jl.MESSAGE_SENT,match:e=>e.to.type===eC.yJ.Channel&&e.text.trim().length>0,components:{Content(e){var n,t,a;let{block:i,conversationContext:{conversationId:r}}=e,{data:s}=(0,j.Gy)({params:{id:i._id}}),{data:u}=function(e){let n=(0,o.useMemo)(()=>["conversations/[id]/channels","get",e.params.id],[e.params.id]),t=(0,ey.lB)(()=>null==e?void 0:e.options,[null==e?void 0:e.options]),l=(0,eb.I)({queryKey:n,queryFn:async()=>{let{data:n,error:t}=await ej(e);if(t)throw t;return n},...null==e?void 0:e.options}),a=(0,ey.lB)(()=>l,[l]);return(0,d.R)(n,a,t)}({params:{id:r}}),g=(null!=u?u:[]).find(e=>e._id===(null==s?void 0:s.to.id)),h=(null==s?void 0:s.to.type)!==eC.yJ.Channel?p.h6.Lindy:null!==(t=null==s?void 0:null===(n=s.to.trigger)||void 0===n?void 0:n.tool)&&void 0!==t?t:p.h6.Lindy;return s?(0,l.jsx)(c.L,{title:null!==(a=null==g?void 0:g.displayName)&&void 0!==a?a:"Replied to channel",subtitle:s.text,expandable:!!s.data&&Object.keys(s.data).length>0,autoToggleOnStatusChange:!1,icon:(0,l.jsx)(m.si,{tool:h,className:"h-5 w-5"}),children:(0,l.jsx)(k.G,{input:s.data})}):null},Avatar(e){let{block:n}=e,{data:t}=(0,j.Gy)({params:{id:n._id}}),a=A(null==t?void 0:t.from.id);return t?(0,l.jsx)(S.l,{icon:a.icon,color:a.color}):null},avatarPosition:"align-top"}}).addHandler({type:e_.Jl.MESSAGE_SENT,components:{Content(e){var n;let{block:t,conversationContext:{conversationParentId:a}}=e,{data:i}=(0,j.Gy)({params:{id:t._id}}),{data:r}=(0,C.Tl)({params:{id:null!==(n=null==i?void 0:i.to.id)&&void 0!==n?n:""},options:{enabled:(null==i?void 0:i.to.id)!=null}}),{data:s}=(0,T.f)(null==r?void 0:r.agentDefinitionId),d=A(null==i?void 0:i.to.id),u=(0,o.useCallback)(e=>{e.stopPropagation()},[]),m=(0,o.useMemo)(()=>(0,l.jsxs)("div",{className:"flex flex-row px-2 py-1",children:[(0,l.jsx)("div",{onClick:u,children:(0,l.jsx)(N.N,{className:"text-sm font-medium text-slate-12 underline-offset-2",href:"/lindies/".concat(null==s?void 0:s._id,"?conversationId=").concat(null==r?void 0:r._id),children:(0,l.jsx)("span",{children:(null==s?void 0:s.name)?"".concat(t.to.id===a?"Sent":"Delegated"," to ").concat(null==s?void 0:s.name):"Task Delegated"})})}),(0,l.jsx)("div",{className:"grow"})]}),[null==s?void 0:s._id,null==s?void 0:s.name,null==r?void 0:r._id,u,t,a]);return i?(0,l.jsx)(c.L,{title:(null==s?void 0:s.name)?"".concat(t.to.id===a?"Responded":"Delegated"," to ").concat(null==s?void 0:s.name):"Task Delegated",customTitle:m,subtitle:i.text,expandable:!!i.data&&Object.keys(i.data).length>0,autoToggleOnStatusChange:!1,icon:(0,l.jsx)(S.l,{icon:d.icon,color:d.color,size:"sm"}),children:(0,l.jsx)(k.G,{input:i.data})}):null},Avatar(e){let{block:n}=e,{data:t}=(0,j.Gy)({params:{id:n._id}}),a=A(null==t?void 0:t.from.id);return t?(0,l.jsx)(S.l,{icon:a.icon,color:a.color}):null},avatarPosition:"align-top"}}).addHandler({type:e_.Jl.REALTIME_MESSAGE,match:e=>"user"===e.role,components:{Content(e){let{block:n}=e;return(0,l.jsx)(nm,{block:n})},Avatar:()=>(0,l.jsx)(m.si,{tool:p.h6.LindyPhone,className:"size-6"}),avatarPosition:"align-top",suppressLoadingIndicator:!0}}).addHandler({type:e_.Jl.REALTIME_MESSAGE,match:e=>"agent"===e.role,components:nc}).addHandler({type:e_.Jl.ANSWER,components:ep}).addHandler({type:e_.Jl.TALK,components:eh}).addHandler({type:e_.Jl.UNSUPPORTED_THOUGHT,components:eh}).addHandler({type:e_.Jl.INTERNAL_EXECUTION_TRACE,match:e=>(0,e_.kf)(e),components:{Content(e){let{block:n,disableInteraction:t,identityFragmentRef:a,agentDefinitionFragmentRef:i}=e;return(0,l.jsx)(y.Cp,{identityFragmentRef:a,agentDefinitionFragmentRef:i,executionId:n.executionId,traceId:n.traceId,disableInteraction:t})},Avatar:_.l,avatarPosition:"align-top"}}).addHandler({type:e_.Jl.UNSUPPORTED_INTERNAL_GUIDELINES_UPDATED,components:{Content(e){let{block:n}=e;return(0,l.jsx)(b,{date:n.ts})},Avatar:null,avatarPosition:"align-top"}}).addHandler({type:e_.Jl.ACTION_NEEDED_RAILS_ONBOARDING,components:ne}).addHandler({type:e_.Jl.ACTION_NEEDED_ONBOARDING,components:eR}).addHandler({type:e_.Jl.ACTION_NEEDED_OAUTH2_AUTH,components:eE}).addHandler({type:e_.Jl.ACTION_NEEDED_API_TOKEN_AUTH,components:eL}).addHandler({type:e_.Jl.ACTION_NEEDED_CUSTOM_AUTH,components:eL}).addHandler({type:e_.Jl.ACTION_NEEDED_CUSTOM_OAUTH2,components:eL}).addHandler({type:e_.Jl.ACTION_NEEDED_PAUSED,components:eH}).addHandler({type:e_.Jl.MEDIA,components:{Content(e){let{block:n}=e;return(0,l.jsx)(x,{videoS3KeyOrUrl:n.videoS3Key,transcript:n.transcript,isPrivate:n.isPrivate})},Avatar:()=>(0,l.jsx)(m.si,{tool:p.h6.LindyMeeting,className:"size-6"}),avatarPosition:"align-top"}}).addHandler({type:e_.Jl.VISUAL_MEDIA,match:e=>e.elements.some(e=>e.mimeType&&(0,nb.u3)(e.mimeType)&&!e.isConvertedMimeType),components:{Content(e){let{block:n}=e,t=n.elements.map(e=>e.mimeType&&(0,nb.u3)(e.mimeType)&&"url"===e.source.type?e.source.url:null).filter(nA.Pe);return(0,l.jsx)("div",{className:"flex flex-col gap-2",children:t.map(e=>(0,l.jsx)(n_(),{src:e,width:600,height:600,alt:"Visual media"},e))})},Avatar:null,avatarPosition:"center-with-text",suppressLoadingIndicator:!0}}).addHandler({type:e_.Jl.INTERNAL_GRAPH_TRAVERSAL,match:e=>{var n;return(null===(n=e.edge)||void 0===n?void 0:n.type)==="Standard"&&null!=e.edge.condition},components:{Content(e){var n,t,a;let{block:i}=e,r=(0,nF.b)();if(r.isLoading)return null;let s=(null===(n=i.edge)||void 0===n?void 0:n.type)==="Standard"&&i.edge.condition,o=s?null===(a=r.data)||void 0===a?void 0:null===(t=a.nodes.find(e=>{var n;return e._id==(null===(n=i.from)||void 0===n?void 0:n._id)}))||void 0===t?void 0:t.displayName:null;return(0,l.jsx)(c.L,{title:"".concat(null!=o?o:"Condition"),subtitle:s?"Condition met: ".concat(s):"",icon:(0,l.jsx)(nL.S,{})})},Avatar:_.l,avatarPosition:"align-top"}}).addHandler({type:e_.Jl.INTERNAL_GRAPH_TRAVERSAL,match:e=>"no_condition_met"===e.reason,components:{Content(e){var n,t;let{block:a}=e,i=(0,nF.b)();if(i.isLoading)return null;let r=null===(t=i.data)||void 0===t?void 0:null===(n=t.nodes.find(e=>{var n;return e._id==(null===(n=a.from)||void 0===n?void 0:n._id)}))||void 0===n?void 0:n.displayName;return(0,l.jsx)(c.L,{title:"".concat(null!=r?r:"Condition"),subtitle:"No condition met",icon:(0,l.jsx)(nL.S,{})})},Avatar:_.l,avatarPosition:"align-top"}}).addHandler({type:e_.Jl.INTERNAL_FRAMEWORK_ERROR,components:{Content(e){var n;let{block:t}=e;return(0,l.jsx)(c.L,{title:"Something went wrong",subtitle:null!==(n=t.userFacingMessage)&&void 0!==n?n:"An error happened in our systems. The team was alerted and the issue will be resolved shortly.",status:"error"})},Avatar:null,avatarPosition:"align-top"}})},59680:(e,n,t)=>{"use strict";t.d(n,{l:()=>o});var l=t(50612),a=t(90508),i=t(95674),r=t(94344),s=t(25919);let o=(0,r.memo)(function(e){var n;let{conversationContext:t}=e,{iconName:r,color:o}=null!==(n=t.agentAvatar)&&void 0!==n?n:{},d=(0,a.hq)(r),u=(0,a.Tm)(d.displayName||i.H0.AgentIcon1)?(0,s.QP)("bg-gradient-to-br fill-white",i.zy[null!=o?o:i.fJ.Blue]):(0,s.QP)("bg-gradient-to-bl",i.HU[null!=o?o:i.Pl.Sky]);return(0,l.jsx)(d,{className:(0,s.QP)("w-6 h-6 rounded p-1 shrink-0",u),color:o})})},84047:(e,n,t)=>{"use strict";t.d(n,{S:()=>r});var l=t(50612),a=t(72561),i=t(46251);function r(){return(0,l.jsx)(i.LD,{className:"flex size-5 items-center justify-center bg-violet-3",children:(0,l.jsx)(a.O,{className:"size-[14px] fill-violet-9"})})}},20101:(e,n,t)=>{"use strict";t.d(n,{I:()=>d});var l=t(50612),a=t(3859),i=t(35774),r=t(94344);let s={opacity:0},o={opacity:1,transition:{delay:.3}},d=(0,r.memo)(function(){return(0,l.jsx)(i.P.div,{initial:s,animate:o,children:(0,l.jsx)(a.M,{className:"w-5"})})})},70710:(e,n,t)=>{"use strict";t.d(n,{P:()=>s});var l=t(50612),a=t(25919),i=t(28371),r=t.n(i);function s(e){let{avatar:n,avatarPosition:t="align-top",children:i,fullWidthContent:s=!1}=e;return s?(0,l.jsx)("div",{className:"w-full",children:i}):(0,l.jsxs)("div",{className:(0,a.QP)(r().responseWrapper,"relative pl-9"),children:[(0,l.jsx)("div",{className:(0,a.QP)(r().avatarWrapper,"absolute left-0","center-with-text"===t&&"top-[-7px]"),children:n}),(0,l.jsx)("div",{className:r().contentWrapper,children:i})]})}},88848:(e,n,t)=>{"use strict";t.d(n,{H:()=>i});var l=t(50612),a=t(97203);let i=(0,t(94344).memo)(function(e){let{conversationContext:n}=e,{userAvatar:t}=n;return(0,l.jsx)(a.e,{variant:"square",value:t.name,url:t.url,className:"border-none shadow-none"})})},45710:(e,n,t)=>{"use strict";t.d(n,{e:()=>l});let l=(0,t(94344).createContext)({})},79271:(e,n,t)=>{"use strict";t.d(n,{B:()=>c});var l=t(57473),a=t(34698),i=t(2932),r=t(13268),s=t(36175),o=t(84244),d=t(89073),u=t(94344);function c(e,n){let t=(0,d.jE)(),c=(0,l.C8)({params:{id:null!=e?e:""}});return(0,u.useCallback)(async l=>{let d,u,m,{executionId:p,responseStyleType:g=o.y.NormalRetry}=l;if(e&&(t.setQueryData(c,e=>{var n,t,l,o;if(!e)return e;if(u=e.blocks,(null===(n=e.blocks.find(a.sw))||void 0===n?void 0:n.executionId)===p)d=[],m=null===(t=e.blocks.find(a.qG))||void 0===t?void 0:t.to._id;else{let n=(0,s.r$)(e.blocks),t=n.findIndex(e=>e.some(e=>(0,a.sw)(e)&&e.executionId===p)),i=n.slice(0,t).flat(),u=null===(l=n[t])||void 0===l?void 0:l.find(a.iq);d=u?[...i,u]:i,m=null===(o=r.D.findLast(d,a.qG))||void 0===o?void 0:o.to._id}return m?{...e,status:i.Y.Running,blocks:d}:e}),d&&m))try{return await n({conversationId:e,executionId:p,responseStyleType:g,newBlocks:d,nodeId:m})}catch(e){throw t.setQueryData(c,e=>e&&u?{...e,blocks:u}:e),e}},[c,t,n,e])}},13802:(e,n,t)=>{"use strict";t.d(n,{a:()=>x,$:()=>f});var l=t(50612),a=t(31634),i=t(31024),r=t(77986),s=t(94344);let o=(0,s.memo)(function(e){let{fill:n="#889096",...t}=e;return(0,l.jsx)("svg",{width:"18",height:"18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:(0,l.jsx)("path",{d:"M12.428 3.514h-2.364L14.375 14.4h2.364L12.428 3.514Zm-6.83 0L1.285 14.4h2.41l.882-2.286H9.09l.882 2.286h2.41L8.072 3.514H5.596Zm-.24 6.578 1.476-3.825 1.475 3.825H5.36Z",fill:n})})}),d=(0,s.memo)(function(e){return(0,l.jsxs)("svg",{viewBox:"1.4391 4.0835 356.415 356.7028",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",className:e.className,children:[(0,l.jsxs)("defs",{children:[(0,l.jsxs)("linearGradient",{id:"_Linear1",x1:"0",y1:"0",x2:"1",y2:"0",gradientUnits:"userSpaceOnUse",gradientTransform:"matrix(206.757,0,0,206.757,1.001,131.034)",children:[(0,l.jsx)("stop",{offset:"0",stopColor:"rgb(38,148,210)",stopOpacity:"1"}),(0,l.jsx)("stop",{offset:"0.31",stopColor:"rgb(27,135,200)",stopOpacity:"1"}),(0,l.jsx)("stop",{offset:"0.73",stopColor:"rgb(12,123,190)",stopOpacity:"1"}),(0,l.jsx)("stop",{offset:"1",stopColor:"rgb(3,119,187)",stopOpacity:"1"})]}),(0,l.jsxs)("linearGradient",{id:"_Linear2",x1:"0",y1:"0",x2:"1",y2:"0",gradientUnits:"userSpaceOnUse",gradientTransform:"matrix(206.757,0,0,206.757,42.2417,118.961)",children:[(0,l.jsx)("stop",{offset:"0",stopColor:"rgb(108,176,225)",stopOpacity:"1"}),(0,l.jsx)("stop",{offset:"1",stopColor:"rgb(173,214,242)",stopOpacity:"1"})]})]}),(0,l.jsx)("g",{transform:"matrix(1.5625600814819336, 0, 0, 1.5625600814819336, -311.2250061035156, 1.4210854715202004e-14)",children:(0,l.jsx)("g",{id:"dm-logo.svg",transform:"matrix(0.921231,0,0,0.921231,314.33,116.846)",children:(0,l.jsx)("g",{transform:"matrix(1,0,0,1,-125,-125)",children:(0,l.jsx)("g",{id:"logo",children:(0,l.jsxs)("g",{children:[(0,l.jsx)("g",{children:(0,l.jsx)("path",{id:"SVGID_1_",d:"M37.3,37.3C14.6,60.1 1.7,90.4 1,122.5L1,127.2C1.6,159.5 14.5,189.8 37.3,212.5C60.1,235.3 90.4,248.2 122.5,248.8L127.3,248.8C127.8,248.8 128.3,248.8 128.7,248.7C130.2,248.6 131.6,248.5 133.1,248.4C134.1,248.3 135,248.2 136,248.1C145.9,246.8 155.3,243.7 163.9,239.1C165.3,238.4 166.6,237.6 167.9,236.8C181.5,228.5 192.7,216.3 199.8,201.1C205,190.1 207.6,178.3 207.6,166C207.6,152 204.1,138.3 197.4,126.1L197.1,125.6C188.7,110.6 175.5,98.3 159.9,91C159.5,90.8 159.2,90.7 158.8,90.5C158.1,90.2 157.3,89.9 156.6,89.5C156.5,89.5 156.4,89.4 156.3,89.4C165.7,97.8 171.8,109.8 172.2,123.3L172.2,126C171.5,151.1 151.3,171.3 126.3,172L123.6,172C110.9,171.8 98.7,169 87.4,163.7C70.5,155.8 56.3,142.4 47.3,126.1L47,125.4C40.1,112.6 36.4,98.1 36.4,83.4C36.4,70.3 39.2,57.6 44.7,45.8C45.3,44.6 45.9,43.4 46.5,42.2C46.8,41.7 47.1,41.1 47.4,40.6C47.8,39.8 48.3,39 48.8,38.2C49,37.8 49.3,37.4 49.5,37C49.8,36.4 50.2,35.9 50.6,35.3C50.7,35.1 50.8,34.9 51,34.7C51.4,34.1 51.8,33.5 52.2,32.9C54,30.3 55.9,27.8 58,25.4C58.5,24.9 58.9,24.3 59.4,23.8C59.5,23.6 59.7,23.5 59.9,23.3C60.4,22.7 61,22.1 61.5,21.6L61.6,21.5C62.1,21 62.6,20.4 63.2,19.9C63.4,19.7 63.6,19.5 63.8,19.3C64.2,18.9 64.6,18.6 65,18.2C65.3,17.9 65.6,17.6 66,17.3C66.5,16.9 66.9,16.5 67.4,16.1L67.5,16C68.1,15.5 68.8,14.9 69.4,14.4C70.1,13.8 70.8,13.3 71.5,12.8C59,19.1 47.4,27.2 37.3,37.3",fill:"url(#_Linear1)",fillRule:"nonzero"})}),(0,l.jsx)("g",{children:(0,l.jsx)("path",{id:"SVGID_4_",d:"M122.7,1C120.7,1.1 118.8,1.2 116.9,1.4C115.9,1.5 115,1.6 114,1.7C113,1.8 112.1,2 111.1,2.1C110.1,2.3 109.2,2.4 108.3,2.6C106.4,3 104.6,3.4 102.7,3.9C100.9,4.4 99.1,5 97.3,5.6C95.5,6.2 93.8,6.9 92,7.7C82.5,11.8 73.8,17.7 66.5,25C65.8,25.7 65.2,26.3 64.5,27C58.7,33.4 53.8,40.6 50,48.6C44.8,59.6 42.2,71.4 42.2,83.7C42.2,97.6 45.7,111.4 52.4,123.5L52.7,124C61.1,139 74.3,151.3 89.9,158.6C91.1,159.2 92.4,159.7 93.6,160.2C84.2,151.8 78.1,139.7 77.7,126.2L77.7,123.5C78.4,98.4 98.6,78.3 123.6,77.6L128.1,77.6C129.9,77.7 131.7,77.8 133.4,77.9C134.2,78 135,78.1 135.7,78.2C136.5,78.3 137.3,78.4 138,78.5L140.3,78.9C140.7,79 141,79 141.4,79.1C141.8,79.2 142.2,79.3 142.6,79.3C143,79.4 143.3,79.4 143.6,79.5C144.1,79.6 144.6,79.7 145.1,79.8C145.4,79.9 145.7,80 146.1,80C146.5,80.1 146.8,80.2 147.2,80.3C147.5,80.4 147.9,80.5 148.3,80.6C148.7,80.7 149,80.8 149.4,80.9C150.2,81.1 151.1,81.4 151.9,81.7L152.7,82C153.7,82.3 154.7,82.7 155.7,83.1L155.9,83.2C156.1,83.3 156.2,83.3 156.4,83.4C156.9,83.6 157.5,83.8 158,84C159,84.4 160,84.8 161,85.3C161.4,85.5 161.8,85.7 162.2,85.8C179.1,93.7 193.3,107 202.3,123.4L202.7,124.1C209.6,136.9 213.3,151.4 213.3,166.1C213.3,179.2 210.5,191.9 205,203.7C204.4,204.9 203.8,206.2 203.2,207.3C202.9,207.8 202.6,208.4 202.3,208.9C201.9,209.7 201.4,210.5 200.9,211.3C200.7,211.7 200.4,212.1 200.2,212.5C199.9,213 199.6,213.5 199.3,214C199.1,214.4 198.8,214.8 198.5,215.2C198.3,215.5 198.1,215.8 197.9,216.2C197.6,216.7 197.2,217.2 196.9,217.7C196.7,217.9 196.6,218.1 196.4,218.3C196,218.9 195.6,219.4 195.1,220C194.6,220.7 194,221.4 193.4,222.1C192.5,223.2 191.5,224.4 190.5,225.5C190.2,225.9 189.8,226.3 189.5,226.6C189.4,226.7 189.3,226.8 189.2,226.9C188.7,227.4 188.2,228 187.7,228.5L185.5,230.7C185.3,230.9 185,231.1 184.8,231.4C184.4,231.8 183.9,232.2 183.5,232.6C183.2,232.8 182.9,233.1 182.6,233.3C182.1,233.7 181.6,234.2 181,234.6C180,235.4 179.1,236.2 178.1,236.9C190.6,230.9 202.2,222.7 212.3,212.7C235.1,189.9 248,159.7 248.6,127.5L248.6,122.7C248,90.4 235.1,60.1 212.3,37.4C190,14.7 160,1.8 128,1.1L126,1L122.7,1Z",fill:"url(#_Linear2)",fillRule:"nonzero"})})]})})})})})]})}),u=(0,s.memo)(function(e){let{fill:n="#889096",...t}=e;return(0,l.jsx)("svg",{width:"18",height:"18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.333 3c-1.182 0-2.168.77-2.48 1.805a2.454 2.454 0 0 0-.105.711V7.7a.75.75 0 0 0 .374.65l.48.277.024-2.381a2.25 2.25 0 0 1 1.142-1.936L9.556 3.3A2.628 2.628 0 0 0 8.333 3Zm2.918-.295A4.11 4.11 0 0 0 8.333 1.5a4.088 4.088 0 0 0-3.755 2.432A4.068 4.068 0 0 0 2.051 5.81a3.96 3.96 0 0 0 .266 4.424 3.947 3.947 0 0 0 .402 3.088c.849 1.439 2.46 2.16 4.03 1.973A4.11 4.11 0 0 0 9.667 16.5a4.088 4.088 0 0 0 3.755-2.432 4.067 4.067 0 0 0 2.527-1.878 3.96 3.96 0 0 0-.265-4.423 3.947 3.947 0 0 0-.402-3.089c-.848-1.438-2.459-2.162-4.031-1.973Zm3.082 3.923a2.454 2.454 0 0 0-.343-1.188c-.71-1.204-2.295-1.628-3.54-.923L8.507 5.615a.75.75 0 0 0-.381.645l-.006.51 2.17-1.198a2.25 2.25 0 0 1 2.195.011l1.848 1.045Zm-6.23 1.866-.01.995.896.519.91-.502.01-.994-.898-.52-.908.502Zm2.44-1.348 2.086 1.207a2.25 2.25 0 0 1 1.123 1.947v2.03c.365-.214.679-.519.904-.902a2.466 2.466 0 0 0-.36-2.978 2.576 2.576 0 0 0-.583-.45L11.747 6.89a.75.75 0 0 0-.732-.004l-.472.26Zm.857 2.229-.024 2.38a2.25 2.25 0 0 1-1.143 1.935l-1.788 1.012c.363.19.779.298 1.222.298 1.182 0 2.168-.77 2.48-1.805.068-.224.105-.463.105-.711V10.3a.75.75 0 0 0-.374-.649l-.478-.276Zm-1.52 1.854-2.17 1.199a2.25 2.25 0 0 1-2.195-.011l-1.847-1.044c.01.404.122.811.343 1.187.582.986 1.753 1.452 2.848 1.194a2.63 2.63 0 0 0 .693-.27l1.943-1.1a.75.75 0 0 0 .38-.645l.006-.51Zm-2.423-.375L5.371 9.647a2.25 2.25 0 0 1-1.123-1.948V5.67a2.539 2.539 0 0 0-.905.902 2.466 2.466 0 0 0 .361 2.978c.166.172.36.324.583.45l1.966 1.111a.75.75 0 0 0 .732.004l.472-.26Z",fill:n})})});var c=t(23913),m=t(14306),p=t(82907),g=t(25347);let h=e=>{switch(e){case"gpt4o_mini":case"gpt4o":case"gpt4o_2024_11_20":case"gpt4_turbo":case"o1":case"o3_mini":return{icon:(0,l.jsx)(u,{className:"size-4"})};case"gemini_1_5_flash":case"gemini_1_5_pro":case"gemini_2_0_flash":return{icon:(0,l.jsx)(d,{className:"size-4"})};case"claude3_haiku":case"claude3_5_haiku":case"claude3_5_sonnet":case"claude3_opus":return{icon:(0,l.jsx)(o,{className:"size-4"})};case"sm":case"md":case"lg":case"xl":return{icon:(0,l.jsx)(r.E,{className:"size-4 fill-slate-9"})};default:throw new c.j(e)}},v=Object.fromEntries(p.y8.map(e=>{let{icon:n,badge:t}=h(e);return[e,{...p.L6[e],value:e,icon:n,badge:t}]})),f=()=>{let e=(0,g.u)(m.T.EnableO3Mini,{defaultEnabled:!1});return(0,s.useMemo)(()=>{let n=["sm","md","lg","gpt4o_mini","gpt4o_2024_11_20","gpt4o","gpt4_turbo","o1"];return e.enabled&&n.push("o3_mini"),n.push("claude3_5_haiku","claude3_haiku","claude3_5_sonnet","claude3_opus","gemini_2_0_flash","gemini_1_5_flash","gemini_1_5_pro"),n.map(e=>v[e])},[e.enabled])},x=e=>{let{model:n}=e;return(0,l.jsxs)(a.f,{top:!0,children:[(0,l.jsx)("div",{className:"pt-0.5",children:n.icon}),(0,l.jsxs)(i.V,{left:!0,className:"gap-y-1",children:[(0,l.jsxs)("div",{className:"flex items-baseline text-sm font-medium text-slate-12",children:[(0,l.jsx)("span",{children:n.label}),n.sublabel&&(0,l.jsx)("span",{className:"ml-1 text-sm text-slate-11",children:"\xb7 ".concat(n.sublabel)}),n.badge&&(0,l.jsxs)("span",{children:[" ",n.badge]})]}),(0,l.jsx)("div",{className:"text-start text-xs text-slate-11",children:n.subtitle})]})]})}},62457:(e,n,t)=>{"use strict";t.d(n,{R:()=>i});var l=t(81778),a=t(94344);function i(){let e=(0,l.useRouter)();return(0,a.useMemo)(()=>new URL(e.asPath,"https://chat.lindy.ai"),[e.asPath])}},12355:(e,n,t)=>{"use strict";t.d(n,{J:()=>s});var l=t(50612),a=t(31634),i=t(26042),r=t(25919);function s(e){let{icon:n,title:t,subtitle:s,occurrence:o,showOccurrence:d,disabled:u,whiteText:c}=e;return(0,l.jsxs)(a.f,{left:!0,between:!0,className:"w-full items-center justify-start",children:[n,(0,l.jsxs)("div",{className:"flex min-w-0 grow flex-row items-baseline justify-start gap-2 overflow-hidden",children:[(0,l.jsx)("p",{className:(0,r.QP)("text-sm font-medium text-slate-12 truncate",u&&"text-slate-10",c&&"text-white"),children:t}),s&&(0,l.jsx)("p",{className:(0,r.QP)("min-w-0 shrink truncate text-sm text-slate-500",c&&"text-white"),children:s})]}),d&&o&&(0,l.jsx)(i.u,{occurrence:o,className:(0,r.QP)(c&&"bg-slate-11 border-slate-9 text-white")})]})}},58455:(e,n,t)=>{"use strict";t.d(n,{F:()=>c});var l=t(50612),a=t(12355),i=t(46251),r=t(66679),s=t(71792),o=t(8678),d=t(94344),u=t(25919);let c=(0,o.PA)(function(e){let{node:n,children:t,showTooltip:a=!1,tooltipOptions:i,...r}=e,s=(0,d.useCallback)(()=>{n.setHighlighted(!0)},[n]),o=(0,d.useCallback)(()=>{n.setHighlighted(!1)},[n]);return(0,l.jsx)("div",{onMouseEnter:s,onMouseLeave:o,...r,className:(0,u.QP)("relative",r.className),children:(0,l.jsx)(m,{node:n,enabled:a,...i,children:t})})});function m(e){let{children:n,node:t,enabled:o,tooltipOptions:d}=e,u=t.displayNamePrimary,c=t.tool,m=(0,s.HY)(t)?t.occurrence:null,p=!!(0,s.HY)(t)&&t.isRepeatedAction;return o&&u?(0,l.jsxs)(r.m_,{...d,children:[(0,l.jsx)(r.k$,{asChild:!0,children:n}),(0,l.jsx)(r.ZI,{showArrow:!0,children:(0,l.jsxs)("div",{className:"flex flex-col gap-1 p-1",children:[(0,l.jsx)("div",{className:"font-medium text-white",children:"Go to source step:"}),(0,l.jsx)(a.J,{icon:c&&(0,l.jsx)(i.si,{tool:c,className:"size-5 shrink-0"}),title:u,occurrence:m,showOccurrence:p,whiteText:!0})]})})]}):(0,l.jsx)(l.Fragment,{children:n})}},53445:(e,n,t)=>{"use strict";t.d(n,{R:()=>nt});var l=t(50612),a=t(52105),i=t(5862),r=t(23664),s=t(56989),o=t(7094);let d=(0,i._)({post:{body:o.z.object({tool:o.z.nativeEnum(r.h6),key:o.z.string(),authId:o.z.string().nullable(),dependentValues:s.pe}),data:o.z.object({inputSchema:o.z.any()})}}),u=(0,a.In)("POST","/api/tools/actions/details/withDynamicLoaderValues",d.post.data);var c=t(25347),m=t(91318),p=t(21429);let g=function(){var e={defaultValue:null,kind:"LocalArgument",name:"authId"},n={defaultValue:null,kind:"LocalArgument",name:"dependentValues"},t={defaultValue:null,kind:"LocalArgument",name:"nodeId"},l=[{kind:"Variable",name:"id",variableName:"nodeId"}],a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},i={kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Variable",name:"authId",variableName:"authId"},{kind:"Variable",name:"dependentValues",variableName:"dependentValues"}],kind:"ScalarField",name:"inputSchema",storageKey:null}],type:"ActionDetails",abstractKey:null};return{fragment:{argumentDefinitions:[e,n,t],kind:"Fragment",metadata:null,name:"ActionConfigV2ActionConfigFetchQuery",selections:[{alias:null,args:l,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[a,i],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[t,n,e],kind:"Operation",name:"ActionConfigV2ActionConfigFetchQuery",selections:[{alias:null,args:l,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[a,i,{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null}],storageKey:null}]},params:{cacheID:"c96b9d11f1e2b195a1bb3a485f184fb0",id:null,metadata:{},name:"ActionConfigV2ActionConfigFetchQuery",operationKind:"query",text:"query ActionConfigV2ActionConfigFetchQuery(\n  $nodeId: ID!\n  $dependentValues: JSONObject\n  $authId: ID\n) {\n  node(id: $nodeId) {\n    __typename\n    ... on ActionDetails {\n      inputSchema(dependentValues: $dependentValues, authId: $authId)\n    }\n    nodeId\n  }\n}\n"}}}();g.hash="b3bb4d913882549f11b7a201e67f0368";var h=t(84370),v=t(54345),f=t(16354),x=t(76804),b=t(20923),y=t(89339),j=t(24069),C=t(8678),N=t(94344),k=t(79124),T=t(97244),P=t(38959),w=t(42370),I=t(90706),A=t(25441),S=t(88757),_=t(10459),L=t(32015),F=t(96004),E=t(32116),R=t(91166),M=t(18867),D=t(5808),K=t(25919);function O(e){return(0,l.jsxs)("button",{onClick:e.onClick,className:"flex items-center gap-2 px-2 py-1 text-sm text-slate-11 hover:text-slate-10","aria-label":"Add item",children:[(0,l.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("rect",{y:"0",width:"16",height:"16",rx:"4",fill:"#007AFF"}),(0,l.jsx)("g",{clipPath:"url(#clip0_2810_5177)",children:(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99961 3.6C8.18526 3.6 8.36331 3.67375 8.49458 3.80503C8.62586 3.9363 8.69961 4.11435 8.69961 4.3V7.8H12.1996C12.3853 7.8 12.5633 7.87375 12.6946 8.00503C12.8259 8.1363 12.8996 8.31435 12.8996 8.5C12.8996 8.68565 12.8259 8.8637 12.6946 8.99497C12.5633 9.12625 12.3853 9.2 12.1996 9.2H8.69961V12.7C8.69961 12.8857 8.62586 13.0637 8.49458 13.195C8.36331 13.3263 8.18526 13.4 7.99961 13.4C7.81396 13.4 7.63591 13.3263 7.50463 13.195C7.37336 13.0637 7.29961 12.8857 7.29961 12.7V9.2H3.79961C3.61396 9.2 3.43591 9.12625 3.30463 8.99497C3.17336 8.8637 3.09961 8.68565 3.09961 8.5C3.09961 8.31435 3.17336 8.1363 3.30463 8.00503C3.43591 7.87375 3.61396 7.8 3.79961 7.8H7.29961V4.3C7.29961 4.11435 7.37336 3.9363 7.50463 3.80503C7.63591 3.67375 7.81396 3.6 7.99961 3.6Z",fill:"white"})}),(0,l.jsx)("defs",{children:(0,l.jsx)("clipPath",{id:"clip0_2810_5177",children:(0,l.jsx)("rect",{width:"14",height:"14",fill:"white",transform:"translate(1 0.5)"})})})]}),"Add Item"]})}let V=(0,C.PA)(function(e){let n=null!=e.onAddItem;return(0,l.jsxs)(D.N,{header:e.header,children:[(0,l.jsx)("div",{className:(0,K.QP)("mb-[.9rem] ml-2 mt-2 w-4 border-l border-slate-5 border-dashed",n&&"border-b")}),(0,l.jsxs)("div",{className:"flex w-full flex-col gap-1",children:[(0,l.jsx)("div",{className:(0,K.QP)("flex flex-col gap-2 w-full pt-2",!n&&"pb-7"),children:e.children}),null!=e.onAddItem&&(0,l.jsx)("div",{children:(0,l.jsx)(O,{onClick:e.onAddItem})})]})]})}),z=(0,C.PA)(function(e){let n=(0,N.useCallback)(()=>{e.member.addNewItem()},[e.member]);return"ai"===e.member.controlType?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(M.R,{member:e.member}),(0,l.jsx)(R.Z,{member:e.member})]}):(0,l.jsx)(V,{onAddItem:n,header:(0,l.jsx)("div",{className:"mt-2 flex w-full flex-col",children:(0,l.jsx)(M.R,{member:e.member})}),children:e.member.items.map(e=>(0,l.jsx)(eL,{member:e},(0,y.Fd)(e.path)))})});var U=t(70732),H=t(44737),B=t(11636);let G=(0,C.PA)(function(e){let n=(0,N.useRef)(null);return(0,H._M)(()=>{var e;null===(e=n.current)||void 0===e||e.focus()}),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(M.R,{member:e.member}),(0,l.jsx)(B.K,{member:e.member,children:(0,l.jsx)(U.d,{id:(0,y.g7)(e.member.path),ref:n,checked:e.member.value,onChange:e.member.setManualValue})})]})});var Q=t(85680),q=t(58762),J=t(20335),$=t(18640);let Z=(0,C.PA)(function(e){let n=(0,Q.aV)(),[t,a]=(0,N.useState)(null),i=(0,N.useCallback)(()=>{let l;if(null!=t){if(""===t){e.member.setManualValue(void 0),a(null);return}try{l=(0,$.Kj)(t)}catch(e){l=null}l?e.member.setManualValue(l):n({level:"danger",message:"Invalid date value"}),a(null)}},[e.member,t,n]),r=(0,N.useRef)(null);(0,H._M)(()=>{var e;null===(e=r.current)||void 0===e||e.focus()});let s=(0,N.useMemo)(()=>null!=t?t:e.member.value?(0,$.kW)(e.member.value):"",[t,e.member.value]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(M.R,{member:e.member}),(0,l.jsx)(B.K,{member:e.member,children:(0,l.jsx)(J.pd,{id:(0,y.g7)(e.member.path),ref:r,type:"datetime-local",className:q._y,value:s,onChange:a,onBlur:i})})]})});var W=t(88991),Y=t(90076);let X=(0,C.PA)(function(e){let n=(0,N.useCallback)(n=>{if(""===n){e.member.setManualValue(void 0);return}e.member.setManualValue(Number(n))},[e.member]),t=(0,N.useRef)(null);return(0,H._M)(n=>{var l;null===(l=t.current)||void 0===l||l.focus();let a=n.length>0?Number(n):NaN;isNaN(a)||e.member.setManualValue(a)}),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(M.R,{member:e.member}),(0,l.jsx)(B.K,{member:e.member,children:(0,l.jsx)(J.pd,{id:(0,y.g7)(e.member.path),"data-testid":"action-config-input","data-field-type":"number","data-label":(0,Y.C)(e.member),"data-path":(0,y.Fd)(e.member.path),ref:t,value:null!=e.member.value?String(e.member.value):"",onChange:n,type:"number",className:q._y,min:e.member.min,max:e.member.max})})]})});var ee=t(86383),en=t(85739);let et="flex flex-col gap-7";var el=t(41285);let ea=(0,C.PA)(function(e){let n=(0,N.useCallback)(()=>{var n;null===(n=e.member.context.array)||void 0===n||n.deleteItem(e.member.path)},[e.member.path,e.member.context.array]);return(0,l.jsx)(V,{header:(0,l.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,l.jsx)(el.J,{className:"mb-0 flex items-center gap-2 text-slate-11",children:(0,Y.C)(e.member)}),(0,M.t)(e.member)&&(0,l.jsx)(en.K,{tooltip:"Remove",className:"mr-0 size-6 border border-transparent bg-none hover:border-slate-7",onClick:n,children:(0,l.jsx)(ee.A,{className:"size-4 text-slate-9 group-hover:text-slate-12"})})]}),children:(0,l.jsx)("div",{className:et,children:Array.from(e.member.properties.values()).map(e=>(0,l.jsx)("div",{children:(0,l.jsx)(eL,{member:e})},(0,y.Fd)(e.path)))})})}),ei=(0,C.PA)(function(e){let{member:n,value:t,schema:a,renderer:i}=e,r=(0,N.useCallback)(e=>{n.setManualValue(e)},[n]),s=n instanceof L.T?n.context.node:null,o=a.safeParse(t),d=o.success?o.data:void 0;return(0,l.jsx)("div",{className:"relative",children:i({node:s,value:d,onChange:r})})});var er=t(93163);let es=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:null,kind:"LinkedField",name:"createPresignedFileUpload",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CreatePresignedFileUploadOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fields",storageKey:null}],storageKey:null}],type:"MutationCreatePresignedFileUploadSuccess",abstractKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"LindyFileUploadInputCreatePresignedFileUploadMutation",selections:n,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"LindyFileUploadInputCreatePresignedFileUploadMutation",selections:n},params:{cacheID:"41a19a18967b6f97fbf40edc83d1fbce",id:null,metadata:{},name:"LindyFileUploadInputCreatePresignedFileUploadMutation",operationKind:"mutation",text:"mutation LindyFileUploadInputCreatePresignedFileUploadMutation(\n  $input: CreatePresignedFileUploadInput!\n) {\n  createPresignedFileUpload(input: $input) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationCreatePresignedFileUploadSuccess {\n      data {\n        url\n        fields\n      }\n    }\n  }\n}\n"}}}();es.hash="17c05717d93f94418aa73bd585dd7a8c";var eo=t(72679),ed=t(89168),eu=t(53762),ec=t(13759),em=t(14952),ep=t(7461),eg=t(83466);let eh=(0,C.PA)(function(e){var n,t;let a=(0,y.g7)(e.member.path),i=(0,N.useCallback)(n=>{e.member.setManualValue((0,ep.eb)(n))},[e.member]),r=null!==(t=null===(n=e.member.value)||void 0===n?void 0:n.references)&&void 0!==t?t:[];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(M.R,{member:e.member}),(0,l.jsx)(B.K,{member:e.member,children:(0,l.jsx)("div",{className:"relative",children:(0,l.jsx)(eg.JH,{node:e.member.context.node,onChange:i,value:r,labelledBy:a,pathDot:(0,y.Fd)(e.member.path)})})})]})});var ev=t(8178),ef=t(33649),ex=t(63193),eb=t(39548),ey=t(69817),ej=t(71792),eC=t(36441);class eN{get values(){return this.members.map(e=>e.serialized).filter(ex.Vq)}constructor(e,n,t){(0,em._)(this,"members",[]),this.members=n.map(n=>new F.x({path:n.id,schema:{type:"string",lindyMetadata:{displayName:n.label,userDescription:n.description}},context:new ey.z({node:e}),actionConfig:t.find(e=>(0,y.Fd)(e.path)===n.id)})),(0,eC.l_)(this)}}let ek=(0,C.PA)(function(e){let n=e.node,t=(0,ev.H)(),a=(0,N.useMemo)(()=>{var e;return null!==(e=null==t?void 0:t.nodes.filter(e=>(0,ej.B2)(e)||(0,ej.N)(e)))&&void 0!==e?e:[]},[t]),i=(0,N.useMemo)(()=>a.map(e=>({label:(0,ej.N)(e)&&e.occurrence>1&&!e.hasCustomDisplayName?"".concat(e.displayNamePrimary," (").concat(e.occurrence,")"):e.displayNamePrimary,value:e.id})),[a]),r=(0,N.useMemo)(()=>(0,eb.TX)(e.value),[e.value]),s=(0,N.useCallback)(n=>{let t=n.target.value;e.onChange((0,eb.BZ)({...r,nodeId:t}))},[e,r]),o=(0,N.useMemo)(()=>a.find(e=>e.id===(null==r?void 0:r.nodeId)),[a,null==r?void 0:r.nodeId]),d=(0,N.useMemo)(()=>{var e,n,t;return(0,ej.B2)(o)?[...(null===(e=o.triggerDefinition)||void 0===e?void 0:e.auth)?[{id:(0,y.Fd)(["__auth"]),label:"Authentication",description:"The authentication for the trigger"}]:[],...null!==(t=null===(n=o.triggerDefinition)||void 0===n?void 0:n.triggerFields)&&void 0!==t?t:[]]:null},[o]),u=(0,N.useMemo)(()=>{var e,n,t,l,a;if(!(0,ej.N)(o))return null;let i=(null===(e=o.actionDetails)||void 0===e?void 0:e.auth)?[{id:(0,y.Fd)(["__auth"]),label:"Authentication",description:"The authentication for the action"}]:[],r=null===(t=o.actionDetails)||void 0===t?void 0:null===(n=t.dynamicLoaders)||void 0===n?void 0:n.loaders.at(0),s=null!==(a=null===(l=o.actionConfigV2)||void 0===l?void 0:l.members.map(e=>({id:(0,y.Fd)(e.path),label:(0,Y.C)(e),description:(0,Y.i)(e)})))&&void 0!==a?a:[];return r?[...i,{id:(0,y.Fd)(["__dynamicLoaders",r.key]),label:r.displayName,description:r.description},...s]:[...i,...s]},[o]),c=(0,N.useMemo)(()=>{var e,t;return(0,ej.N)(n)?new eN(n,null!==(e=null!=d?d:u)&&void 0!==e?e:[],null!==(t=null==r?void 0:r.values)&&void 0!==t?t:[]):null},[d,u,n,null==r?void 0:r.values]);return(0,eC.mJ)(()=>null==c?void 0:c.values,n=>{e.onChange((0,eb.BZ)({...r,values:n}))}),(0,l.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,l.jsxs)(ef.l,{value:null==r?void 0:r.nodeId,onChange:s,children:[(0,l.jsx)("option",{value:"",children:"Select a node"}),i.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))]}),null==c?void 0:c.members.map(e=>(0,l.jsx)("div",{children:(0,l.jsx)(eh,{member:e})},(0,y.Fd)(e.path)))]})});var eT=t(95654);let eP=new Set(["select","multiselect","text","number","datetime","recurring_schedule","checkbox"]);function ew(e){return eP.has(e.type)}let eI={"lindy-phone-number":ec._,"lindy-file-upload":function(e){let{value:n,onChange:t}=e,a=(0,Q.aV)(),i=(0,ed.E)(),r=(0,N.useCallback)(()=>{t({...n,file:"",mimeType:""})},[t,n]),[s,o]=(0,eo.d)(es),[d,u]=(0,N.useState)(!1),c=d||o,m=(0,N.useMemo)(()=>n.file&&n.file.split("/").pop()||null,[n]),p=(0,N.useCallback)(async e=>{let l=null==e?void 0:e[0];if(!l)return;if(l.size>n.maxSizeBytes){a({level:"danger",label:"Failed to Upload File",message:"The file is too large",duration:7e3});return}let r=await s({variables:{input:{mimeType:l.type,isPublic:n.isPublic}}});if(!r.createPresignedFileUpload.data){i({error:r.createPresignedFileUpload});return}let{url:o,fields:d}=r.createPresignedFileUpload.data;try{u(!0);let e=new FormData;Object.entries(d).forEach(n=>{let[t,l]=n;e.append(t,l)}),e.append("file",l);let i=e.get("key");if(!i||"string"!=typeof i){a({level:"danger",label:"Failed to Upload File",message:"No key found",duration:7e3});return}let r=await fetch(o,{method:"POST",body:e});if(!r.ok){let e=await r.text();a({level:"danger",label:"Failed to Upload File",message:e,duration:7e3});return}let s=i.replace("${filename}",l.name);t({...n,file:s,mimeType:l.type})}finally{u(!1)}},[n,t,s,a,i]),{getRootProps:g,getInputProps:h,isDragActive:v}=(0,eu.VB)({onDrop:p,accept:n.accept,multiple:!1,maxSize:n.maxSizeBytes,disabled:c});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{...g({className:(0,K.QP)("w-full h-12 rounded border-dashed border-1 border-slate-6 transition-colors cursor-pointer","hover:border-slate-7 hover:bg-slate-2",v&&"border-slate-8 bg-slate-2",c&&"border-slate-8 bg-slate-2")}),children:[(0,l.jsx)("p",{className:"flex size-full items-center justify-center text-sm font-semibold text-slate-9",children:c?"Uploading...":"Drag and drop the file here, or click to select one"}),(0,l.jsx)("input",{...h()})]}),m&&(0,l.jsxs)("div",{className:"my-2 grid grid-cols-[1fr,auto] items-center overflow-hidden",children:[(0,l.jsxs)("p",{className:"truncate text-sm text-slate-9",children:[(0,l.jsx)("span",{className:"font-bold",children:"File: "}),m]}),(0,l.jsx)(en.K,{tooltip:"Delete file",className:"mr-0 size-6 border border-transparent bg-none hover:border-slate-7",onClick:r,"aria-label":"Delete file",role:"button",children:(0,l.jsx)(ee.A,{className:"size-4 text-slate-9 group-hover:text-slate-12"})})]})]})},"eleven-labs-voice":er.C,"auto-generated-id":null,"state-graph-node-config":function(e){return(0,l.jsx)(ek,{...e})},"state-graph-node-field":function(e){let n=(0,ev.H)(),t=(0,N.useMemo)(()=>{var e;return null!==(e=null==n?void 0:n.nodes.filter(e=>(0,ej.B2)(e)||(0,ej.N)(e)))&&void 0!==e?e:[]},[n]),a=(0,N.useMemo)(()=>t.map(e=>({label:(0,ej.N)(e)&&e.occurrence>1&&!e.hasCustomDisplayName?"".concat(e.displayNamePrimary," (").concat(e.occurrence,")"):e.displayNamePrimary,value:e.id})),[t]),i=(0,N.useMemo)(()=>(0,eb.Zx)(e.value,!1),[e.value]),r=(0,N.useCallback)(n=>{let t=n.target.value;e.onChange((0,eb.Vu)({...i,nodeId:t}))},[e,i]),s=(0,N.useMemo)(()=>t.find(e=>e.id===(null==i?void 0:i.nodeId)),[t,null==i?void 0:i.nodeId]),o=(0,N.useMemo)(()=>{var e;return(0,ej.B2)(s)?null===(e=s.triggerDefinition)||void 0===e?void 0:e.triggerFields.filter(ew):null},[s]),d=(0,N.useMemo)(()=>{var e,n,t,l;if(!(0,ej.N)(s))return null;let a=null!==(l=null===(e=s.actionConfigV2)||void 0===e?void 0:e.members.filter(e=>{var n;return n=e.schema,eT.KQ.isString(n)||eT.KQ.isNumber(n)||eT.KQ.isDate(n)||eT.KQ.isBoolean(n)||eT.KQ.isEnum(n)}).map(e=>{var n;return{type:(n=e.schema,eT.KQ.isString(n)?"text":eT.KQ.isNumber(n)?"number":eT.KQ.isDate(n)?"datetime":eT.KQ.isBoolean(n)?"checkbox":eT.KQ.isEnum(n)?"select":"text"),displayName:(0,Y.C)(e),path:(0,y.Fd)(e.path)}}))&&void 0!==l?l:[],i=null===(t=s.actionDetails)||void 0===t?void 0:null===(n=t.dynamicLoaders)||void 0===n?void 0:n.loaders,r=(null==i?void 0:i.length)===1?i.at(0):null;return r?[{type:"dynamicLoader",displayName:r.displayName,path:r.key},...a]:a},[s]),u=(0,N.useMemo)(()=>o?o.map(e=>({label:e.label,value:e.id})):d?d.map(e=>({label:e.displayName,value:e.path})):[],[o,d]),c=(0,N.useCallback)(n=>{var t,l,a;let r=n.target.value,s=null!==(l=null==u?void 0:null===(t=u.find(e=>e.value===r))||void 0===t?void 0:t.label)&&void 0!==l?l:"",c=null!==(a=null==d?void 0:d.find(e=>e.path===r))&&void 0!==a?a:null==o?void 0:o.find(e=>e.id===r),m=null==c?void 0:c.type;e.onChange((0,eb.Vu)({...i,fieldKey:r,fieldType:m,displayName:s}))},[u,d,o,e,i]);return(0,l.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,l.jsxs)(ef.l,{value:null==i?void 0:i.nodeId,onChange:r,children:[(0,l.jsx)("option",{value:"",children:"Select a node"}),a.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))]}),u.length>0?(0,l.jsxs)(ef.l,{value:null==i?void 0:i.fieldKey,onChange:c,disabled:!(null==i?void 0:i.nodeId),children:[(0,l.jsx)("option",{value:"",children:"Select an attribute"}),u.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))]}):(null==i?void 0:i.nodeId)?(0,l.jsx)("p",{className:"text-sm",children:"No attributes supported for this node"}):null]})}},eA=(0,C.PA)(function(e){let n=eI[e.member.specialType];return n?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(M.R,{member:e.member}),(0,l.jsx)(B.K,{member:e.member,children:(0,l.jsx)(ei,{schema:e.member.zodSchema,value:e.member.manualValue,member:e.member,renderer:n})})]}):null});var eS=t(86937);let e_=(0,C.PA)(function(e){let n=(0,N.useCallback)(n=>{let t=Number(n.target.value);isNaN(t)||e.member.setUnionType(t)},[e.member]),t=(0,N.useRef)(null);(0,H._M)(()=>{var e;null===(e=t.current)||void 0===e||e.focus()});let a=new Map;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(M.R,{member:e.member}),(0,l.jsx)(B.K,{member:e.member,children:(0,l.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,l.jsx)(ef.l,{id:(0,y.g7)(e.member.path),ref:t,value:String(e.member.unionType),onChange:n,children:e.member.types.map((e,n)=>(0,l.jsx)("option",{value:n,children:function(e,n,t){var l,a;if(null===(l=e.lindyMetadata)||void 0===l?void 0:l.displayName)return e.lindyMetadata.displayName;if("type"in e){if("string"==typeof e.type){let n=/^[A-Za-z-]+$/.test(e.type)?(0,eS.De)(e.type):e.type;if(!t.has(n))return t.set(n,1),n;{let e=null!==(a=t.get(n))&&void 0!==a?a:0;return t.set(n,e+1),"".concat(n," ").concat(e+1)}}if("number"==typeof e.type)return String(e.type)}return"Type ".concat(n+1)}(e,n,a)},n))}),e.member.valueStore&&(0,l.jsx)(eL,{member:e.member.valueStore})]})})]})}),eL=(0,C.PA)(function(e){return e.member instanceof L.T?(0,l.jsx)(eA,{member:e.member}):e.member instanceof P.P?(0,l.jsx)(z,{member:e.member}):e.member instanceof _.j?(0,l.jsx)(ea,{member:e.member}):e.member instanceof E.HI?(0,l.jsx)(e_,{member:e.member}):e.member instanceof w.s?(0,l.jsx)(G,{member:e.member}):e.member instanceof I.Q?(0,l.jsx)(Z,{member:e.member}):e.member instanceof A.r?(0,l.jsx)(W.A,{member:e.member}):e.member instanceof S.N?(0,l.jsx)(X,{member:e.member}):e.member instanceof F.x?(0,l.jsx)(eh,{member:e.member}):null}),eF=(0,C.PA)(function(e){let{isFetching:n,error:t}=function(e){var n,t,l,a,i,r;let s=(0,k.useRelayEnvironment)(),[o,d]=(0,N.useState)(!1),[u,c]=(0,N.useState)(),p=null===(n=e.actionDetails)||void 0===n?void 0:n.tool,h=null===(t=e.actionDetails)||void 0===t?void 0:t.key,f=(0,N.useMemo)(()=>p&&h?(0,b.F)("ActionDetails","".concat(p,".").concat(h)):"",[p,h]),x=null===(l=e.actionConfigV2)||void 0===l?void 0:l.dynamicLoaders.allLoadersSet,y=!(0,j.A)(null===(a=e.actionConfigV2)||void 0===a?void 0:a.dynamicLoaders.dependentValues),C=(0,m.q2)(()=>{var n;if(x&&y)return null===(n=e.actionConfigV2)||void 0===n?void 0:n.dynamicLoaders.dependentValues},[x,y,null===(i=e.actionConfigV2)||void 0===i?void 0:i.dynamicLoaders.dependentValues]),P=null===(r=e.actionConfigV2)||void 0===r?void 0:r.dynamicLoaders.length;return(0,v.l)(()=>{var n;if(!P)return;let t={nodeId:f,dependentValues:C,authId:null!==(n=e.authId)&&void 0!==n?n:null};return d(!0),c(void 0),(0,T.fetchQuery)(s,g,t,{fetchPolicy:"store-or-network"}).subscribe({complete:()=>d(!1),error:e=>{c(e),d(!1)},next:n=>{var t,l;(null===(t=n.node)||void 0===t?void 0:t.__typename)==="ActionDetails"&&(null===(l=e.actionConfigV2)||void 0===l||l.initialize(n.node.inputSchema))}}).unsubscribe},[f,C,s,e.actionDetails,x,y,P,e.actionConfigV2,e.authId]),(0,N.useMemo)(()=>({isFetching:o,error:u}),[o,u])}(e.node);return e.node.actionConfigV2?(0,l.jsx)("div",{className:"flex flex-col gap-7",children:(0,l.jsx)(f.u,{loadersStore:e.node.actionConfigV2.dynamicLoaders,isFetching:n,error:t,children:(0,l.jsx)(h.mF,{loader:(0,l.jsx)(x.y,{}),children:e.node.actionConfigV2.members.map(e=>(0,l.jsx)("div",{children:(0,l.jsx)(eL,{member:e})},(0,y.Fd)(e.path)))})})}):null});var eE=t(99281),eR=t(24535),eM=t(51588),eD=t(14306),eK=t(98354);let eO=(0,C.PA)(function(e){let{member:n,value:t,options:a}=e,i=(0,N.useRef)(null);(0,H._M)(()=>{var e;null===(e=i.current)||void 0===e||e.focus({preventScroll:!0})});let r=(0,N.useCallback)(e=>n.setManualValue(e.target.value),[n]);return(0,l.jsx)(ef.l,{ref:i,value:t,onChange:r,children:a.map(e=>(0,l.jsx)("option",{value:e,children:"number"==typeof e?e:/^[A-Za-z]+$/.test(e)?(0,eS.De)(e):e},e))})});var eV=t(85060),ez=t(49398),eU=t(66679);function eH(e){let{member:n,onChange:t}=e,a=(0,H.uQ)(),[i,r]=(0,N.useState)(!1),[s,o]=(0,N.useState)(!1),d=(0,N.useCallback)(()=>{r(!0)},[]),u=(0,N.useCallback)(()=>{r(!1),o(!1)},[]),c=(0,N.useCallback)(e=>{if("Tab"===e.key){s||e.shiftKey?s&&e.shiftKey&&(o(!1),e.preventDefault()):(o(!0),e.preventDefault());return}if("Delete"===e.key||"Backspace"===e.key||"Enter"===e.key){a(""),null==t||t(s?"ai":"manual"),e.preventDefault();return}},[s,t,a]),m=(0,N.useCallback)(e=>{a(e),null==t||t(s?"ai":"manual")},[s,t,a]),p=(0,N.useCallback)(()=>{a(""),null==t||t("manual")},[t,a]),g=(0,N.useCallback)(()=>{a(""),null==t||t("ai")},[t,a]);return(0,l.jsxs)("div",{className:"group relative","data-testid":"action-config-input","data-field-type":"auto","data-label":n.label,"data-path":n.pathDot,children:[(0,l.jsx)(J.pd,{className:(0,K.QP)("cursor-pointer",q.G8,i&&(s?q.VU:q._y)),onFocus:d,onBlur:u,onKeyDown:c,onChange:m}),(0,l.jsxs)("div",{className:"pointer-events-none absolute inset-0 flex items-center gap-2 pl-2",children:[(0,l.jsx)("div",{className:(0,K.QP)("rounded px-2 py-0.5 text-xs transition","block group-focus-within:hidden","bg-slate-3 text-slate-10","group-hover:bg-slate-4"),children:"AI will automatically fill this field"}),(0,l.jsxs)(eU.m_,{children:[(0,l.jsx)(eU.ZI,{children:"Enter the value for this field manually"}),(0,l.jsx)(eU.k$,{asChild:!0,children:(0,l.jsx)("button",{tabIndex:-1,onClick:p,className:(0,K.QP)("rounded px-2 py-0.5 text-xs transition pointer-events-auto","hidden group-focus-within:block","bg-slate-4 text-slate-11 hover:bg-blue-5 hover:text-blue-11","focus:outline-none",!s&&"bg-blue-4 text-blue-11 ring-2 ring-blue-8"),children:"Set manually"})})]}),(0,l.jsxs)(eU.m_,{children:[(0,l.jsx)(eU.ZI,{children:"Let AI fill out this field using the prompt and context of the previous steps"}),(0,l.jsx)(eU.k$,{asChild:!0,children:(0,l.jsx)("button",{tabIndex:-1,onClick:g,className:(0,K.QP)("rounded px-2 py-0.5 text-xs transition pointer-events-auto","hidden group-focus-within:block","bg-slate-4 text-slate-11 hover:bg-purple-5 hover:text-purple-11","focus:outline-none",s&&"bg-purple-4 text-purple-11 ring-2 ring-purple-8"),children:"Prompt AI"})})]})]})]})}var eB=t(57577),eG=t(42717),eQ=t(22283),eq=t(14662),eJ=t(64145),e$=t(13965),eZ=t(99100);function eW(e){let{forcedType:n,member:t,showChevron:a=!1,noClick:i=!1,...r}=e,s=null!=n?n:t.controlType;return(0,l.jsxs)("button",{"data-testid":"action-config-type-button","data-field-type":s,"data-label":t.label,"data-path":t.pathDot,tabIndex:-1,...r,className:(0,K.QP)("auto"===s&&"text-[#46A758] bg-green-2 hover:bg-green-3","ai"===s&&"text-[#8E4EC6] bg-purple-2 hover:bg-purple-3","manual"===s&&"text-blue-9 bg-blue-3 hover:bg-blue-4","flex h-[20px] items-center justify-center gap-x-0.5 rounded-full px-2 text-xs transition","focus-visible:ring-2 ring-primary-2 focus:outline-none","whitespace-nowrap",i&&"pointer-events-none"),children:["auto"===s&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eJ.h,{fill:"#46A758",className:"mr-0.5 size-3"}),"Auto",a&&(0,l.jsx)(e0,{fill:"#46A758",className:"-mr-1"})]}),"ai"===s&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eq.m,{fill:"#8E4EC6",className:"mr-0.5 size-3"}),"Prompt AI",a&&(0,l.jsx)(e0,{fill:"#8E4EC6",className:"-mr-1"})]}),"manual"===s&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e$.h,{fill:"#007AFF",className:"mr-0.5 size-3"}),"Set Manually",a&&(0,l.jsx)(e0,{fill:"#007AFF",className:"-mr-1"})]})]})}let eY=(0,C.PA)(function(e){let{member:n,children:t}=e;return(0,l.jsxs)("div",{className:"flex w-full flex-col",children:[(0,l.jsxs)("div",{className:"mb-1.5",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)(el.J,{className:"mb-0 flex justify-between text-slate-11",children:(0,l.jsx)("span",{children:n.label})}),(0,l.jsxs)("div",{className:"flex gap-2",onClick:eZ.d,children:[(0,eV.SG)(n)&&(0,l.jsx)(eX,{member:n}),(0,eV.iw)(n)&&n.isArrayItem&&(0,l.jsx)(en.K,{tooltip:"Remove",className:"mr-0 size-6 border border-transparent bg-none hover:border-slate-7",onClick:n.deleteThisArrayItem,children:(0,l.jsx)(ee.A,{className:"size-4 text-slate-9 group-hover:text-slate-12"})})]})]}),!!n.subLabel&&(0,l.jsx)("div",{onClick:eZ.d,children:(0,l.jsx)(eB.a,{className:"text-xs font-medium text-slate-9",children:(0,l.jsx)(eQ.o,{className:"[&_a:hover]:no-underline [&_a]:underline",allowHTML:!1,disableCopyUI:!0,isInput:!1,children:n.subLabel})})})]}),(0,l.jsx)("div",{children:t})]})}),eX=(0,C.PA)(function(e){let{member:n}=e,t=(0,m.q2)(()=>[{key:"manual",label:(0,l.jsxs)("div",{children:[(0,l.jsx)(eW,{member:n,forcedType:"manual",noClick:!0}),(0,l.jsx)("p",{className:"mt-2 text-xs text-slate-9",children:"Enter the value for this field manually"})]}),onClick:()=>{n.setControlType("manual")}},{key:"ai",label:(0,l.jsxs)("div",{children:[(0,l.jsx)(eW,{member:n,forcedType:"ai",noClick:!0}),(0,l.jsx)("p",{className:"mt-2 text-xs text-slate-9",children:"AI will fill out the field using the prompt and context of the previous steps"})]}),onClick:()=>{n.setControlType("ai")}},{key:"auto",label:(0,l.jsxs)("div",{children:[(0,l.jsx)(eW,{member:n,forcedType:"auto",noClick:!0}),(0,l.jsx)("p",{className:"mt-2 text-xs text-slate-9",children:"AI will fill out the field using the context of the previous steps"})]}),onClick:()=>{n.setControlType("auto")}}],[n]);return(0,l.jsx)(eG.W1,{position:"bottom-right",entries:t,menuClassName:"w-56","data-testid":"action-config-type-menu","data-field-type":n.controlType,"data-label":n.label,"data-path":n.pathDot,trigger:(0,l.jsx)(eW,{member:n,showChevron:!0,"data-testid":"action-config-type-menu-trigger"})})});function e0(e){return(0,l.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",...e,children:[(0,l.jsx)("path",{d:"M6.20981 6.60005C6.09143 6.72786 6.09143 6.92527 6.20981 7.05307L6.22572 7.07025C6.35755 7.21258 6.58259 7.2127 6.71457 7.07052L7.7557 5.94894C7.88758 5.80687 8.11242 5.80687 8.2443 5.94894L9.28543 7.07052C9.41741 7.2127 9.64245 7.21258 9.77428 7.07025L9.79019 7.05307C9.90857 6.92527 9.90857 6.72786 9.79019 6.60005L8.24455 4.93134C8.11262 4.78891 7.88738 4.78891 7.75545 4.93134L6.20981 6.60005Z"}),(0,l.jsx)("path",{d:"M9.79019 9.39995C9.90857 9.27214 9.90857 9.07473 9.79019 8.94693L9.77428 8.92975C9.64245 8.78742 9.41741 8.7873 9.28543 8.92948L8.2443 10.0511C8.11242 10.1931 7.88758 10.1931 7.7557 10.0511L6.71457 8.92948C6.58259 8.7873 6.35755 8.78742 6.22572 8.92975L6.20981 8.94693C6.09143 9.07473 6.09143 9.27214 6.20981 9.39995L7.75545 11.0687C7.88738 11.2111 8.11262 11.2111 8.24455 11.0687L9.79019 9.39995Z"})]})}let e1=(0,C.PA)(function(e){let{member:n,children:t}=e;return(0,l.jsx)(H.is,{children:(0,l.jsx)(eY,{member:n,children:(0,eV.SG)(n)&&"auto"===n.controlType?(0,l.jsx)(eH,{member:n,onChange:n.setControlType}):(0,eV.SG)(n)&&"ai"===n.controlType?(0,l.jsx)(q.n0,{member:n,onChange:n.setPromptValue,value:n.promptValue,placeholder:"Write a prompt",letAiDecide:!0},"ai"):t})})}),e2=(0,C.PA)(function(e){let{member:n,header:t,collapsible:a,showAddItem:i,children:r}=e;return(0,l.jsxs)(D.N,{disabled:!a,header:t,children:[a&&(0,l.jsx)("div",{className:(0,K.QP)("mb-[.9rem] ml-2 mt-2 w-4 border-l border-slate-5 border-dashed",i&&"border-b")}),(0,l.jsxs)("div",{className:"flex w-full flex-col gap-1",children:[(0,l.jsx)("div",{className:(0,K.QP)("flex flex-col gap-2 w-full",a&&"pt-2",!i&&"pb-7"),children:r}),i&&(0,l.jsx)("div",{children:(0,l.jsx)(e3,{onClick:n.addManualArrayItem})})]})]})});function e3(e){let{onClick:n}=e;return(0,l.jsxs)("button",{onClick:n,className:"flex items-center gap-2 px-2 py-1 text-sm text-slate-11 hover:text-slate-10",children:[(0,l.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("rect",{y:"0",width:"16",height:"16",rx:"4",fill:"#007AFF"}),(0,l.jsx)("g",{clipPath:"url(#clip0_2810_5177)",children:(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99961 3.6C8.18526 3.6 8.36331 3.67375 8.49458 3.80503C8.62586 3.9363 8.69961 4.11435 8.69961 4.3V7.8H12.1996C12.3853 7.8 12.5633 7.87375 12.6946 8.00503C12.8259 8.1363 12.8996 8.31435 12.8996 8.5C12.8996 8.68565 12.8259 8.8637 12.6946 8.99497C12.5633 9.12625 12.3853 9.2 12.1996 9.2H8.69961V12.7C8.69961 12.8857 8.62586 13.0637 8.49458 13.195C8.36331 13.3263 8.18526 13.4 7.99961 13.4C7.81396 13.4 7.63591 13.3263 7.50463 13.195C7.37336 13.0637 7.29961 12.8857 7.29961 12.7V9.2H3.79961C3.61396 9.2 3.43591 9.12625 3.30463 8.99497C3.17336 8.8637 3.09961 8.68565 3.09961 8.5C3.09961 8.31435 3.17336 8.1363 3.30463 8.00503C3.43591 7.87375 3.61396 7.8 3.79961 7.8H7.29961V4.3C7.29961 4.11435 7.37336 3.9363 7.50463 3.80503C7.63591 3.67375 7.81396 3.6 7.99961 3.6Z",fill:"white"})}),(0,l.jsx)("defs",{children:(0,l.jsx)("clipPath",{id:"clip0_2810_5177",children:(0,l.jsx)("rect",{width:"14",height:"14",fill:"white",transform:"translate(1 0.5)"})})})]}),"Add Item"]})}let e6=(0,C.PA)(function(e){let{member:n,arrayMembers:t}=e,a=(0,eV.SG)(n)?(0,l.jsx)("div",{className:"mt-2 flex w-full flex-col",children:(0,l.jsx)(eY,{member:n})}):(0,l.jsx)(el.J,{className:"mb-0 flex items-center gap-2 text-slate-11",children:n.label});return(0,eV.SG)(n)&&"ai"===n.controlType?(0,l.jsx)(e1,{member:n}):(0,l.jsx)(e2,{member:n,header:a,collapsible:!0,showAddItem:!0,children:t.map((e,n)=>(0,l.jsx)(nn,{member:e},n))})}),e5=(0,C.PA)(function(e){let{member:n,value:t}=e,a=(0,N.useRef)(null);return(0,H._M)(()=>{var e;null===(e=a.current)||void 0===e||e.focus()}),(0,l.jsx)(U.d,{ref:a,checked:t,onChange:n.setManualValue})}),e4=(0,C.PA)(function(e){let{member:n,value:t}=e,a=(0,Q.aV)(),[i,r]=(0,N.useState)(null),s=(0,N.useCallback)(()=>{let e;if(null!=i){try{e=(0,$.Kj)(i)}catch(n){e=null}e?n.setManualValue(e):a({level:"danger",message:"Invalid date value"}),r(null)}},[n,i,a]),o=(0,N.useRef)(null);return(0,H._M)(()=>{var e;null===(e=o.current)||void 0===e||e.focus()}),(0,l.jsx)(J.pd,{ref:o,type:"datetime-local",className:q._y,value:null!=i?i:(0,$.kW)(t),onChange:r,onBlur:s})}),e9=(0,C.PA)(function(e){let{member:n,value:t,min:a,max:i}=e,r=(0,N.useCallback)(e=>{n.setManualValue(Number(e))},[n]),s=(0,N.useRef)(null);return(0,H._M)(e=>{var t;null===(t=s.current)||void 0===t||t.focus();let l=e.length>0?Number(e):NaN;isNaN(l)||n.setManualValue(l)}),(0,l.jsx)(J.pd,{"data-testid":"action-config-input","data-field-type":"number","data-label":n.label,"data-path":n.pathDot,ref:s,value:String(t),onChange:r,type:"number",className:q._y,min:a,max:i})}),e8=(0,C.PA)(function(e){let{member:n,objectMembers:t}=e,a=(0,eV.SG)(n)&&n.isTopLevel;return(0,l.jsx)(e2,{member:n,header:!a&&(0,l.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,l.jsx)(el.J,{className:"mb-0 flex items-center gap-2 text-slate-11",children:n.label}),(0,eV.iw)(n)&&n.isArrayItem&&(0,l.jsx)(en.K,{tooltip:"Remove",className:"mr-0 size-6 border border-transparent bg-none hover:border-slate-7",onClick:n.deleteThisArrayItem,children:(0,l.jsx)(ee.A,{className:"size-4 text-slate-9 group-hover:text-slate-12"})})]}),collapsible:!a,showAddItem:!1,children:(0,l.jsx)("div",{className:et,children:t.map(e=>{let{key:n,member:t}=e;return(0,l.jsx)(nn,{member:t},n)})})})}),e7=(0,C.PA)(function(e){let{member:n,value:t}=e,a=(0,N.useCallback)(e=>{n.setManualValue((0,ep.eb)(e))},[n]);return(0,l.jsx)("div",{className:"relative",children:(0,l.jsx)(q.n0,{member:n,onChange:a,value:t.references})})}),ne=(0,C.PA)(function(e){let{member:n,unionType:t,schemas:a,selectedUnionMember:i}=e,r=(0,N.useCallback)(e=>{let t=Number(e.target.value);isNaN(t)||n.setManualUnionType(t)},[n]),s=(0,N.useRef)(null);return(0,H._M)(()=>{var e;null===(e=s.current)||void 0===e||e.focus()}),(0,l.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,l.jsx)(ef.l,{ref:s,value:String(t),onChange:r,children:a.map((e,n)=>(0,l.jsx)("option",{value:n,children:function(e,n){var t;if(null===(t=e.lindyMetadata)||void 0===t?void 0:t.displayName)return e.lindyMetadata.displayName;if("type"in e){if("string"==typeof e.type)return/^[A-Za-z-]+$/.test(e.type)?(0,eS.De)(e.type):e.type;if("number"==typeof e.type)return String(e.type)}return"Type ".concat(n+1)}(e,n)},n))}),(0,l.jsx)(nn,{member:i})]})}),nn=(0,C.PA)(function(e){let{member:n}=e;if(n.objectMembers)return(0,l.jsx)(e8,{member:n,objectMembers:n.objectMembers});if(n.arrayMembers)return(0,l.jsx)(e6,{member:n,arrayMembers:n.arrayMembers});let t=function(e){let n=e.specialType;if(!n)return null;let t=ez.Ke[n],a=eI[n];return a?(0,l.jsx)(ei,{member:e,value:e.manualValue,schema:t,renderer:a}):null}(n)||function(e){if((0,eV.SG)(e)&&e.unionData)return(0,l.jsx)(ne,{member:e,unionType:e.unionData.unionType,schemas:e.unionData.schemas,selectedUnionMember:e.unionData.selectedUnionMember});let n=e.scalarManualValue;switch(n.type){case"enum":return(0,l.jsx)(eO,{member:e,value:n.value,options:n.options});case"date":return(0,l.jsx)(e4,{member:e,value:n.value});case"string":return(0,l.jsx)(e7,{member:e,value:n.value});case"number":return(0,l.jsx)(e9,{member:e,value:n.value,min:n.min,max:n.max});case"boolean":return(0,l.jsx)(e5,{member:e,value:n.value});case"unknown":return null}}(n);return t?(0,l.jsx)(e1,{member:n,children:t}):null}),nt=(0,C.PA)(function(e){let{node:n}=e;return(0,c.u)(eD.T.ActionConfigStoreV2,{defaultEnabled:!1}).enabled?(0,l.jsx)(eF,{node:n}):(0,l.jsx)(nl,{node:n})}),nl=(0,C.PA)(function(e){var n,t,i,r;let{node:s}=e,o=(0,p.K)(s),d=(0,N.useCallback)(e=>{s.actionConfig&&new eR.y({actionConfig:s.actionConfig,path:(0,eE.yO)(e.key),schema:{type:"string"},isOptionalObjectProperty:!1}).setManualValue(e.value)},[s.actionConfig]),c=(0,m.q2)(()=>{var e,n,t;return new eM.F({rawDynamicLoaders:null!==(t=null==o?void 0:null===(e=o.dynamicLoaders)||void 0===e?void 0:e.loaders)&&void 0!==t?t:[],hydrationObject:s.dynamicLoaderHydrationObject,loaderChangeCallback:d,authId:null===(n=s.action)||void 0===n?void 0:n.authId})},[null==o?void 0:null===(n=o.dynamicLoaders)||void 0===n?void 0:n.loaders,s.dynamicLoaderHydrationObject,d,null===(t=s.action)||void 0===t?void 0:t.authId]),{data:g,isFetching:h,error:v}=(0,eK.I)({queryKey:["dynamicFieldCompute",s.id,c.dependentValues,null==o?void 0:o.tool,null==o?void 0:o.actionKey,o,null===(i=s.action)||void 0===i?void 0:i.authId],queryFn:()=>{var e,n;if((null==o?void 0:o.tool)&&(null==o?void 0:o.actionKey))return(0,a.oA)(u({body:{tool:o.tool,key:o.actionKey,dependentValues:c.dependentValues,authId:null!==(n=null===(e=s.action)||void 0===e?void 0:e.authId)&&void 0!==n?n:null}}))},enabled:!!(c.allLoadersSet&&(null==o?void 0:null===(r=o.dynamicLoaders)||void 0===r?void 0:r.refetchInputAfterLoad))}),b=(0,m.q2)(()=>{var e,n;if(g){if(null===(n=s.actionConfig)||void 0===n?void 0:n.rootMember)return s.actionConfig.rootMember.updateSchema(g.inputSchema);if(s.actionConfig)return s.actionConfig.createRootMember(g.inputSchema)}return o&&s.actionConfig?s.actionConfig.createRootMember(o.inputSchema):null===(e=s.actionConfig)||void 0===e?void 0:e.rootMember},[o,g,s.actionConfig]);return o?s.actionConfig&&b?(0,l.jsx)(f.u,{loadersStore:c,isFetching:h,error:v,className:"mb-7",children:(0,l.jsx)(nn,{member:b})}):null:(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsx)(x.y,{})})})},93163:(e,n,t)=>{"use strict";t.d(n,{C:()=>g});var l=t(50612),a=t(86660),i=t(63636),r=t(67373),s=t(31284),o=t(94344),d=t(25919);function u(e){let{src:n,className:t}=e,[u,c]=(0,o.useState)(!1),m=(0,o.useRef)(null),p=(0,o.useRef)(!1),g=(0,o.useCallback)(()=>{m.current&&(u?(p.current=!0,m.current.pause()):(s.a.ui.currentAudioPlayer&&s.a.ui.currentAudioPlayer!==m.current&&s.a.ui.currentAudioPlayer.pause(),s.a.ui.setCurrentAudioPlayer(m.current),m.current.play()),c(!u))},[u]),h=(0,o.useCallback)(()=>c(!1),[]),v=(0,o.useCallback)(()=>{!p.current&&m.current&&(m.current.currentTime=0),p.current=!1,c(!1)},[]),f=(0,o.useCallback)(()=>c(!0),[]);return(0,l.jsxs)("div",{children:[(0,l.jsx)(r.$,{onClick:g,level:"outline",className:(0,d.QP)("rounded-full p-2 h-8 w-8",t),"aria-label":u?"Pause":"Play",children:u?(0,l.jsx)(a.A,{className:"size-full"}):(0,l.jsx)(i.A,{className:"size-full"})}),(0,l.jsx)("audio",{ref:m,src:n,onEnded:h,onPause:v,onPlay:f})]})}var c=t(32159),m=t(99100),p=t(49361);function g(e){let{value:n,onChange:t}=e;return(0,l.jsx)("div",{className:"flex flex-col gap-2",children:(0,l.jsx)(c.m,{options:f,value:null!=n?n:null,onChange:t,renderOption:h})})}function h(e){return(0,l.jsxs)("div",{className:"flex w-full items-center justify-between gap-2",children:[(0,l.jsx)("div",{children:e.label}),(0,l.jsx)("div",{className:"contents",onClick:m.d,children:(0,l.jsx)(u,{src:e.snippetUrl,className:"bg-panel"})})]})}let v={eric:"/tools/voices/eleven-labs/snippets/eric.mp3",jennifer:"/tools/voices/eleven-labs/snippets/jennifer.mp3",jessica:"/tools/voices/eleven-labs/snippets/jessica.mp3",mark:"/tools/voices/eleven-labs/snippets/mark.mp3",paul:"/tools/voices/eleven-labs/snippets/paul.mp3",scarlett:"/tools/voices/eleven-labs/snippets/scarlett.mp3",archer:"/tools/voices/eleven-labs/snippets/archer.mp3"},f=p.B7.map(e=>({value:e.value,label:e.label,snippetUrl:v[e.value]}))},13759:(e,n,t)=>{"use strict";t.d(n,{_:()=>k});var l=t(50612);let a=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LindyPhoneNumberInputProvisionedPhoneNumbersQuery",selections:[{args:null,kind:"FragmentSpread",name:"LindyPhoneNumberInputProvisionedPhoneNumber"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"LindyPhoneNumberInputProvisionedPhoneNumbersQuery",selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"me",plural:!1,selections:[{alias:null,args:null,concreteType:"ProvisionedPhoneNumber",kind:"LinkedField",name:"provisionedPhoneNumbers",plural:!0,selections:[e,n,{alias:null,args:null,kind:"ScalarField",name:"phoneNumber",storageKey:null},{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"callReceivedTriggerInUseByAgent",plural:!1,selections:[e,n,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],storageKey:null},e,{alias:null,args:null,concreteType:"IdentityFlags",kind:"LinkedField",name:"flags",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"lindyPhoneTermsAgreedAt",storageKey:null}],storageKey:null},n],storageKey:null}]},params:{cacheID:"6b247b05b86453801784b8974c1e5bb6",id:null,metadata:{},name:"LindyPhoneNumberInputProvisionedPhoneNumbersQuery",operationKind:"query",text:"query LindyPhoneNumberInputProvisionedPhoneNumbersQuery {\n  ...LindyPhoneNumberInputProvisionedPhoneNumber\n}\n\nfragment LindyPhoneNumberInputLindyPhoneTerms on Identity {\n  id\n  flags {\n    lindyPhoneTermsAgreedAt\n  }\n}\n\nfragment LindyPhoneNumberInputProvisionedPhoneNumber on Query {\n  me {\n    provisionedPhoneNumbers {\n      id\n      nodeId\n      phoneNumber\n      callReceivedTriggerInUseByAgent {\n        id\n        nodeId\n        name\n      }\n    }\n    ...LindyPhoneNumberInputLindyPhoneTerms\n    nodeId\n  }\n}\n"}}}();a.hash="9d3a0f80f67f9c399fade11b8889da0d";let i=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"pageSize"},{defaultValue:null,kind:"LocalArgument",name:"search"}],n=[{kind:"Variable",name:"pageSize",variableName:"pageSize"},{kind:"Variable",name:"search",variableName:"search"}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"LindyPhoneNumberInputPurchasablePhoneNumbersQuery",selections:[{args:n,kind:"FragmentSpread",name:"LindyPhoneNumberInputPurchasablePhoneNumbers"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"LindyPhoneNumberInputPurchasablePhoneNumbersQuery",selections:[{alias:null,args:n,concreteType:"AvailablePhoneNumber",kind:"LinkedField",name:"availablePhoneNumbers",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"phoneNumber",storageKey:null}],storageKey:null}]},params:{cacheID:"1c2681a017755a602dba5c55b309694b",id:null,metadata:{},name:"LindyPhoneNumberInputPurchasablePhoneNumbersQuery",operationKind:"query",text:"query LindyPhoneNumberInputPurchasablePhoneNumbersQuery(\n  $pageSize: Int!\n  $search: String\n) {\n  ...LindyPhoneNumberInputPurchasablePhoneNumbers_1v4FbS\n}\n\nfragment LindyPhoneNumberInputPurchasablePhoneNumbers_1v4FbS on Query {\n  availablePhoneNumbers(pageSize: $pageSize, search: $search) {\n    nodeId\n    phoneNumber\n  }\n}\n"}}}();i.hash="ac96812a21ef6bc377aaffcadcd10158";let r=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LindyPhoneNumberInputProvisionedPhoneNumber",selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"me",plural:!1,selections:[{alias:null,args:null,concreteType:"ProvisionedPhoneNumber",kind:"LinkedField",name:"provisionedPhoneNumbers",plural:!0,selections:[e,n,{alias:null,args:null,kind:"ScalarField",name:"phoneNumber",storageKey:null},{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"callReceivedTriggerInUseByAgent",plural:!1,selections:[e,n,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"LindyPhoneNumberInputLindyPhoneTerms"}],storageKey:null}],type:"Query",abstractKey:null}}();r.hash="e4915c2791313723e1af664360fde74b";let s=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"pageSize"},{defaultValue:null,kind:"LocalArgument",name:"search"}],n=[{kind:"Variable",name:"pageSize",variableName:"pageSize"},{kind:"Variable",name:"search",variableName:"search"}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"LindyPhoneNumberInputPurchasablePhoneNumbersRefetchableQuery",selections:[{args:n,kind:"FragmentSpread",name:"LindyPhoneNumberInputPurchasablePhoneNumbers"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"LindyPhoneNumberInputPurchasablePhoneNumbersRefetchableQuery",selections:[{alias:null,args:n,concreteType:"AvailablePhoneNumber",kind:"LinkedField",name:"availablePhoneNumbers",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"phoneNumber",storageKey:null}],storageKey:null}]},params:{cacheID:"c93af700d8438753662c77440f177bba",id:null,metadata:{},name:"LindyPhoneNumberInputPurchasablePhoneNumbersRefetchableQuery",operationKind:"query",text:"query LindyPhoneNumberInputPurchasablePhoneNumbersRefetchableQuery(\n  $pageSize: Int!\n  $search: String\n) {\n  ...LindyPhoneNumberInputPurchasablePhoneNumbers_1v4FbS\n}\n\nfragment LindyPhoneNumberInputPurchasablePhoneNumbers_1v4FbS on Query {\n  availablePhoneNumbers(pageSize: $pageSize, search: $search) {\n    nodeId\n    phoneNumber\n  }\n}\n"}}}();s.hash="c52e7cb7bd3a643d8b16bba08fbff4dd";let o={argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"pageSize"},{defaultValue:null,kind:"LocalArgument",name:"search"}],kind:"Fragment",metadata:{refetch:{connection:null,fragmentPathInResult:[],operation:s}},name:"LindyPhoneNumberInputPurchasablePhoneNumbers",selections:[{alias:null,args:[{kind:"Variable",name:"pageSize",variableName:"pageSize"},{kind:"Variable",name:"search",variableName:"search"}],concreteType:"AvailablePhoneNumber",kind:"LinkedField",name:"availablePhoneNumbers",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"phoneNumber",storageKey:null}],storageKey:null}],type:"Query",abstractKey:null};o.hash="c52e7cb7bd3a643d8b16bba08fbff4dd";let d=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},l={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"phoneNumber",storageKey:null},s={alias:null,args:null,concreteType:"ProvisionedPhoneNumber",kind:"LinkedField",name:"provisionedPhoneNumber",plural:!1,selections:[a,i,r],storageKey:null},o={alias:null,args:null,concreteType:"ProvisionedPhoneNumber",kind:"LinkedField",name:"provisionedPhoneNumbers",plural:!0,selections:[a,i,r,{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"callReceivedTriggerInUseByAgent",plural:!1,selections:[a,i,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"LindyPhoneNumberInputPurchasePhoneNumberMutation",selections:[{alias:"mutationResult",args:n,concreteType:null,kind:"LinkedField",name:"purchasePhoneNumber",plural:!1,selections:[t,l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"PurchasePhoneNumberOutput",kind:"LinkedField",name:"data",plural:!1,selections:[s,{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:[o],storageKey:null}],storageKey:null}],type:"MutationPurchasePhoneNumberSuccess",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"LindyPhoneNumberInputPurchasePhoneNumberMutation",selections:[{alias:"mutationResult",args:n,concreteType:null,kind:"LinkedField",name:"purchasePhoneNumber",plural:!1,selections:[t,l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"PurchasePhoneNumberOutput",kind:"LinkedField",name:"data",plural:!1,selections:[s,{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:[o,i],storageKey:null}],storageKey:null}],type:"MutationPurchasePhoneNumberSuccess",abstractKey:null}],storageKey:null}]},params:{cacheID:"c23eb558efd67cfbf777ac96ddc0feab",id:null,metadata:{},name:"LindyPhoneNumberInputPurchasePhoneNumberMutation",operationKind:"mutation",text:"mutation LindyPhoneNumberInputPurchasePhoneNumberMutation(\n  $input: PurchasePhoneNumberInput!\n) {\n  mutationResult: purchasePhoneNumber(input: $input) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationPurchasePhoneNumberSuccess {\n      data {\n        provisionedPhoneNumber {\n          id\n          nodeId\n          phoneNumber\n        }\n        owner {\n          provisionedPhoneNumbers {\n            id\n            nodeId\n            phoneNumber\n            callReceivedTriggerInUseByAgent {\n              id\n              nodeId\n              name\n            }\n          }\n          nodeId\n        }\n      }\n    }\n  }\n}\n"}}}();d.hash="6de457e2ae4e949b62d59459d7ae4305";let u=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},l={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"phoneNumber",storageKey:null},s={alias:null,args:null,concreteType:"ProvisionedPhoneNumber",kind:"LinkedField",name:"provisionedPhoneNumbers",plural:!0,selections:[a,i,r,{alias:null,args:null,concreteType:"AgentDefinition",kind:"LinkedField",name:"callReceivedTriggerInUseByAgent",plural:!1,selections:[a,i,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],storageKey:null},o={alias:null,args:null,concreteType:"ProvisionedPhoneNumber",kind:"LinkedField",name:"provisionedPhoneNumber",plural:!1,selections:[a,i,r],storageKey:null},d={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"triggerEnabled",storageKey:null}],type:"EntryPointTriggerNode",abstractKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"LindyPhoneNumberInputDisconnectPhoneNumberMutation",selections:[{alias:"mutationResult",args:n,concreteType:null,kind:"LinkedField",name:"disconnectPhoneNumber",plural:!1,selections:[t,l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DisconnectPhoneNumberOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:[s],storageKey:null},o,{alias:null,args:null,concreteType:"StateGraph",kind:"LinkedField",name:"stateGraph",plural:!1,selections:[a,i,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[a,d],storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationDisconnectPhoneNumberSuccess",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"LindyPhoneNumberInputDisconnectPhoneNumberMutation",selections:[{alias:"mutationResult",args:n,concreteType:null,kind:"LinkedField",name:"disconnectPhoneNumber",plural:!1,selections:[t,l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DisconnectPhoneNumberOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"owner",plural:!1,selections:[s,i],storageKey:null},o,{alias:null,args:null,concreteType:"StateGraph",kind:"LinkedField",name:"stateGraph",plural:!1,selections:[a,i,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[t,a,d,{kind:"InlineFragment",selections:[i],type:"Node",abstractKey:"__isNode"}],storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationDisconnectPhoneNumberSuccess",abstractKey:null}],storageKey:null}]},params:{cacheID:"3129826f7f3b93ac789c765768e1a30b",id:null,metadata:{},name:"LindyPhoneNumberInputDisconnectPhoneNumberMutation",operationKind:"mutation",text:"mutation LindyPhoneNumberInputDisconnectPhoneNumberMutation(\n  $input: DisconnectPhoneNumberInput!\n) {\n  mutationResult: disconnectPhoneNumber(input: $input) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationDisconnectPhoneNumberSuccess {\n      data {\n        owner {\n          provisionedPhoneNumbers {\n            id\n            nodeId\n            phoneNumber\n            callReceivedTriggerInUseByAgent {\n              id\n              nodeId\n              name\n            }\n          }\n          nodeId\n        }\n        provisionedPhoneNumber {\n          id\n          nodeId\n          phoneNumber\n        }\n        stateGraph {\n          id\n          nodeId\n          nodes {\n            __typename\n            id\n            ... on EntryPointTriggerNode {\n              triggerEnabled\n            }\n            ... on Node {\n              __isNode: __typename\n              nodeId\n            }\n          }\n        }\n      }\n    }\n  }\n}\n"}}}();u.hash="00eae57aa545ed44c1932c14175a51b8";let c={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LindyPhoneNumberInputLindyPhoneTerms",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"IdentityFlags",kind:"LinkedField",name:"flags",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"lindyPhoneTermsAgreedAt",storageKey:null}],storageKey:null}],type:"Identity",abstractKey:null};c.hash="370d854a09cebeb9f87b224d55611b6a";let m=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},l={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i={alias:null,args:null,concreteType:"IdentityFlags",kind:"LinkedField",name:"flags",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"lindyPhoneTermsAgreedAt",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"LindyPhoneNumberInputAgreeLindyPhoneTermsOfUseMutation",selections:[{alias:"mutationResult",args:n,concreteType:null,kind:"LinkedField",name:"agreeLindyPhoneTermsOfUse",plural:!1,selections:[t,l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"AgreeLindyPhoneTermsOfUseOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"identity",plural:!1,selections:[a,i],storageKey:null}],storageKey:null}],type:"MutationAgreeLindyPhoneTermsOfUseSuccess",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"LindyPhoneNumberInputAgreeLindyPhoneTermsOfUseMutation",selections:[{alias:"mutationResult",args:n,concreteType:null,kind:"LinkedField",name:"agreeLindyPhoneTermsOfUse",plural:!1,selections:[t,l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"AgreeLindyPhoneTermsOfUseOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"identity",plural:!1,selections:[a,i,{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationAgreeLindyPhoneTermsOfUseSuccess",abstractKey:null}],storageKey:null}]},params:{cacheID:"e3d41d3cc518da1e9686d3e95d3f8681",id:null,metadata:{},name:"LindyPhoneNumberInputAgreeLindyPhoneTermsOfUseMutation",operationKind:"mutation",text:"mutation LindyPhoneNumberInputAgreeLindyPhoneTermsOfUseMutation(\n  $input: AgreeLindyPhoneTermsOfUseInput!\n) {\n  mutationResult: agreeLindyPhoneTermsOfUse(input: $input) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationAgreeLindyPhoneTermsOfUseSuccess {\n      data {\n        identity {\n          id\n          flags {\n            lindyPhoneTermsAgreedAt\n          }\n          nodeId\n        }\n      }\n    }\n  }\n}\n"}}}();m.hash="cc0a6bafcde2c71109b49a74e52e68d1";var p=t(35940),g=t(60171),h=t(84370),v=t(15727),f=t(85680),x=t(67373),b=t(67434),y=t(94344),j=t(79124),C=t(25919),N=t(41324);function k(e){let{value:n,onChange:t,isCallReceivedTrigger:r=!1}=e,[s,o]=(0,y.useState)(""),[d]=(0,N.d7)(s,300),u=(0,j.useLazyLoadQuery)(a,{}),c=(0,j.useLazyLoadQuery)(i,{pageSize:5,search:d},{fetchKey:"LindyPhoneNumberInputPurchasablePhoneNumbersQuery:".concat(d)});return(0,l.jsx)(h.mF,{loader:(0,l.jsx)(L,{}),errorFallback:(0,l.jsx)(I,{ownedPhoneNumbersFragmentRef:u,purchasablePhoneNumbersFragmentRef:c,value:n,onChange:t,onSearch:o,didError:!0,searchQuery:s,isCallReceivedTrigger:r}),children:(0,l.jsx)(I,{ownedPhoneNumbersFragmentRef:u,purchasablePhoneNumbersFragmentRef:c,value:n,onChange:t,onSearch:o,searchQuery:s,isCallReceivedTrigger:r})})}function T(e){return(null==e?void 0:e.type)!=="option"?"Select a phone number":e.phoneNumber}function P(e){return(null==e?void 0:e.type)!=="option"}function w(){return Promise.resolve()}function I(e){var n,t;let{ownedPhoneNumbersFragmentRef:a,purchasablePhoneNumbersFragmentRef:i,value:s,onChange:h,isCallReceivedTrigger:C,didError:k}=e,I=(0,j.useFragment)(r,a),[A,S]=(0,j.useRefetchableFragment)(o,i),[_,L]=(0,y.useTransition)(),[E,R]=function(e){var n;let{identityFragmentRef:t}=e,l=(0,j.useFragment)(c,t),a=null===(n=l.flags)||void 0===n?void 0:n.lindyPhoneTermsAgreedAt,i=(0,f.aV)(),r=(0,y.useCallback)(e=>{i({id:"lindy-phone-number-agree-terms-error",level:"danger",label:"Error",message:e,duration:3e3})},[i]),[s]=(0,j.useMutation)(m);return[a,(0,y.useCallback)(()=>{s({variables:{input:{id:l.id}},optimisticResponse:{mutationResult:{__typename:"MutationAgreeLindyPhoneTermsOfUseSuccess",data:{identity:{flags:{lindyPhoneTermsAgreedAt:new Date}}}}},onCompleted:e=>{if("Error"===e.mutationResult.__typename){var n;r(null!==(n=e.mutationResult.message)&&void 0!==n?n:"Failed to agree to terms")}}})},[s,l.id,r])]}({identityFragmentRef:I.me}),M=(0,v.j)(),[D,K]=(0,y.useState)(k),O=(0,y.useCallback)(()=>{R(),M.onClose()},[R,M]),V=(0,N.YQ)(e=>{K(!1),L(()=>{S({search:e})})},300),z=(0,y.useMemo)(()=>[...I.me.provisionedPhoneNumbers.length?[{type:"section",label:"Your Numbers"},...I.me.provisionedPhoneNumbers.map(e=>({type:"option",isPurchasable:!1,usedByAgent:e.callReceivedTriggerInUseByAgent&&C?{agentDefinitionId:e.callReceivedTriggerInUseByAgent.id,name:e.callReceivedTriggerInUseByAgent.name}:null,phoneNumber:e.phoneNumber})).sort((e,n)=>e.usedByAgent?1:n.usedByAgent?-1:0)]:[],...A.availablePhoneNumbers.length?[{type:"section",label:"Purchase a Number ($10 / mo)"},...D?[{type:"error",message:"An error occurred, please try searching again."}]:A.availablePhoneNumbers.map(e=>({type:"option",isPurchasable:!0,usedByAgent:null,phoneNumber:e.phoneNumber}))]:[]],[I,A,C,D]),U=(0,y.useMemo)(()=>s?{type:"option",usedByAgent:null,isPurchasable:!1,phoneNumber:s}:null,[s]),H=(0,f.aV)(),B=(0,y.useCallback)(e=>{H({id:"lindy-phone-number-purchase-disconnect-error",level:"danger",label:"Error",message:e,duration:3e3})},[H]),[G,Q]=(0,y.useState)(null),q=(0,v.j)(),[J,$]=(0,j.useMutation)(d),Z=(0,y.useCallback)(()=>{G&&J({variables:{input:{phoneNumber:G}},onError:e=>{b.Cp(e),B(e.message)},onCompleted:e=>{var n,t,l;if("Error"===e.mutationResult.__typename){B(null!==(l=e.mutationResult.message)&&void 0!==l?l:"Failed to purchase phone number");return}if(!(null===(t=e.mutationResult.data)||void 0===t?void 0:null===(n=t.provisionedPhoneNumber)||void 0===n?void 0:n.phoneNumber)){B("Failed to purchase phone number");return}h(e.mutationResult.data.provisionedPhoneNumber.phoneNumber),q.onClose()}})},[J,G,h,B,q]),W=(0,y.useCallback)(()=>{Q(null),q.onClose()},[q]),[Y,X]=(0,y.useState)(null),ee=(0,v.j)(),[en,et]=(0,j.useMutation)(u),el=(0,y.useCallback)(()=>{(null==Y?void 0:Y.usedByAgent)&&en({variables:{input:{phoneNumber:Y.phoneNumber,agentDefinitionId:Y.usedByAgent.agentDefinitionId}},onError:e=>{b.Cp(e),B(e.message)},onCompleted:e=>{var n,t,l;if(ee.onClose(),"Error"===e.mutationResult.__typename){B(null!==(l=e.mutationResult.message)&&void 0!==l?l:"Failed to disconnect phone number");return}if(!(null===(t=e.mutationResult.data)||void 0===t?void 0:null===(n=t.provisionedPhoneNumber)||void 0===n?void 0:n.phoneNumber)){B("Failed to disconnect phone number");return}h(e.mutationResult.data.provisionedPhoneNumber.phoneNumber),X(null)}})},[en,Y,h,B,ee]),ea=(0,y.useCallback)(()=>{X(null),ee.onClose()},[ee]),ei=(0,y.useCallback)(e=>{(null==e?void 0:e.type)==="option"&&(e.isPurchasable?(Q(e.phoneNumber),q.onOpen()):e.usedByAgent?(X(e),ee.onOpen()):h(e.phoneNumber))},[h,q,ee]);return(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[E?(0,l.jsx)(p.F,{value:U,onChange:ei,options:z,displayValue:T,onSearchChange:V,isFetchingMore:_,hasMoreData:!1,fetchMoreOptions:w,renderOption:F,isOptionDisplayOnly:P}):(0,l.jsxs)("div",{className:"flex items-center justify-between rounded border border-slate-4 p-2 text-sm",children:[(0,l.jsx)("div",{className:"text-slate-11",children:"Requires Approval"}),(0,l.jsx)(x.$,{size:"sm",className:"bg-amber-10 hover:bg-amber-9 active:bg-amber-8",onClick:M.onOpen,children:"Review"})]}),(0,l.jsx)(g.u,{open:M.isOpen,onCancel:M.onClose,onConfirm:O,title:"Terms of Use",text:(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("div",{children:"By using Lindy Phone, you agree that you have obtained prior written consent from every phone call recipient in compliance with applicable laws."}),(0,l.jsxs)("div",{children:["You further agree to our"," ",(0,l.jsx)("a",{href:"https://www.lindy.ai/terms-of-service",target:"_blank",rel:"noreferrer",className:"underline hover:text-slate-11",children:"Terms of Use"})," ","and the"," ",(0,l.jsx)("a",{href:"https://www.twilio.com/en-us/legal/service-country-specific-terms/voice-sip",target:"_blank",rel:"noreferrer",className:"underline hover:text-slate-11",children:"Twilio Voice Policy"}),"."]})]}),confirmLabel:"I Agree",cancelLabel:"Cancel"}),(0,l.jsx)(g.u,{open:q.isOpen,onCancel:W,onConfirm:Z,loading:$,title:"Purchase Number for $10 / month?",text:"Each number costs $10 a month and will be charged to your stored credit card. Once purchased, it will be usable across all your Lindies.",confirmLabel:"Confirm",cancelLabel:"Cancel"}),(0,l.jsx)(g.u,{open:ee.isOpen,onCancel:ea,onConfirm:el,loading:et,title:"Disconnect Phone Number?",text:(0,l.jsxs)(l.Fragment,{children:["Selecting this number will disconnect it from"," ",(0,l.jsx)("span",{className:"font-semibold",children:null!==(t=null==Y?void 0:null===(n=Y.usedByAgent)||void 0===n?void 0:n.name)&&void 0!==t?t:"another agent"}),", and this could prevent the workflow from running as expected."]}),confirmLabel:"Disconnect",cancelLabel:"Cancel"})]})}let A=()=>{},S=()=>"Loading...",_=[];function L(){return(0,l.jsx)("div",{className:"flex flex-col gap-2",children:(0,l.jsx)(p.F,{value:null,onChange:A,options:_,displayValue:S,onSearchChange:A,isFetchingMore:!1,disabled:!0,hasMoreData:!1,fetchMoreOptions:w,renderOption:F})})}function F(e){return"error"===e.type?(0,l.jsx)("div",{className:"pointer-events-none text-sm font-medium text-danger-11",children:e.message}):"option"!==e.type?(0,l.jsx)("div",{className:"pointer-events-none text-sm font-medium text-slate-11",children:e.label}):(0,l.jsxs)("div",{className:"flex w-full justify-between gap-1",children:[(0,l.jsx)("div",{className:(0,C.QP)(e.usedByAgent&&"text-slate-10"),children:e.phoneNumber}),e.usedByAgent&&(0,l.jsxs)("div",{className:"rounded bg-slate-3 px-2 py-0.5 text-xs text-slate-11",children:["Used by ",e.usedByAgent.name]})]})}},16354:(e,n,t)=>{"use strict";t.d(n,{u:()=>c});var l=t(50612),a=t(26457),i=t(3641),r=t(76804),s=t(40453),o=t(8678),d=t(25919),u=t(1676);let c=(0,o.PA)(function(e){let{loadersStore:n,error:t,isFetching:o,children:c,className:m}=e,{isFullyOpen:p}=(0,i.TT)();return(0,l.jsxs)(l.Fragment,{children:[n.length>0&&(0,l.jsx)("div",{className:(0,d.QP)("flex flex-col gap-7",m),children:n.visibleLoaders.map(e=>(0,l.jsx)(u.X,{loaderField:e,loadersStore:n,autoFocusIfNextOne:p},e))}),t&&(0,l.jsxs)("div",{className:"flex gap-2 text-sm text-red-600 dark:text-red-400",children:[(0,l.jsx)(a.A,{className:"size-5"}),(0,l.jsx)("p",{children:(0,s.SP)(t,"Something went wrong")})]}),o?(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsx)(r.y,{})}):n.allLoadersSet?c:null]})})},77235:(e,n,t)=>{"use strict";t.d(n,{V:()=>o});var l=t(50612),a=t(25919);function i(e){let{className:n,...t}=e;return(0,l.jsx)("span",{className:(0,a.QP)("ml-1 rounded-full bg-amber-9 px-2 py-0.5 text-xs text-slate-1",n),...t,children:"BETA"})}var r=t(13813),s=t(41285);let o=e=>{let{label:n,beta:t=!1,subtitle:o,tooltip:d,className:u,labelClassName:c,subtitleClassName:m,optional:p,errorMessage:g,isRequiredError:h,...v}=e;return(0,l.jsxs)("div",{className:(0,a.QP)("mb-1.5",u),children:[(0,l.jsxs)("section",{className:"flex items-center",children:[(0,l.jsx)(s.J,{className:(0,a.QP)("mb-0 select-none",c),...v,children:n}),t&&(0,l.jsx)(i,{}),!p&&(0,l.jsx)(s.J,{className:(0,a.QP)("mb-0 ml-1 text-xs font-medium text-gray-400",h&&"text-red-9"),children:"(required)"}),g&&(0,l.jsx)("span",{className:"mb-0 ml-2 text-sm font-bold text-red-9",children:g})]}),o&&(0,l.jsxs)("p",{className:(0,a.QP)("line-clamp-2 select-none text-xs font-medium text-slate-9",m),children:[o,(0,l.jsx)(r.I,{children:d})]})]})}},63620:(e,n,t)=>{"use strict";t.d(n,{R:()=>j,f:()=>b});var l=t(50612),a=t(6897),i=t(31634),r=t(57802),s=t(94344),o=t(8178),d=t(31024),u=t(77791),c=t(18379),m=t(72561);let p=(0,s.memo)(function(e){let{className:n,...t}=e;return(0,l.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:n,...t,children:(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.16675 5.25C1.16675 3.317 2.73375 1.75 4.66675 1.75H9.33342C11.2664 1.75 12.8334 3.317 12.8334 5.25V8.75C12.8334 10.683 11.2664 12.25 9.33342 12.25H1.16675V5.25ZM4.66675 5.25V6.41667H9.33342V5.25H4.66675ZM4.66675 7.58333V8.75H7.58342V7.58333H4.66675Z"})})});var g=t(66153),h=t(45483),v=t(13249),f=t(8678),x=t(25919);let b={[r.b7.TalkToUser]:{icon:(0,l.jsx)(p,{className:"size-[14px] fill-blue-9"}),label:r.VR[r.b7.TalkToUser].title,color:"bg-blue-3",callToAction:r.VR[r.b7.TalkToUser].title},[r.cs.EntryPoint]:{icon:(0,l.jsx)(g.f,{className:"size-[11px]"}),label:"Trigger",color:"bg-amber-3",callToAction:"Add a trigger"},[r.cs.Action]:{icon:(0,l.jsx)(u.M,{className:"size-[14px] fill-pink-9"}),label:"Action",color:"bg-pink-3",callToAction:"Perform an action"},[r.b7.KnowledgeBase]:{icon:(0,l.jsx)(h.v,{}),label:r.VR[r.b7.KnowledgeBase].title,color:"bg-sky-3",callToAction:r.VR[r.b7.KnowledgeBase].title,description:"Retrieve and utilize information from diverse sources."},[r.cs.Logic]:{icon:(0,l.jsx)(m.O,{}),label:"Condition",color:"bg-violet-3",callToAction:"Condition"},[r.cs.AgentState]:{icon:(0,l.jsx)(c.K,{}),label:"AI Agent",color:"bg-sky-3",callToAction:"Enter AI agent",description:"Let AI decide what to do, until a jump condition is met."}},y={width:v.M4},j=(0,f.PA)(function(e){let{parent:n,isEdgeObservable:t,existingEdge:u,className:c}=e,m=(0,o.Z)(),p=(0,s.useMemo)(()=>({[r.cs.EntryPoint]:!1,[r.b7.TalkToUser]:!1,[r.b7.KnowledgeBase]:!0}),[]),g=e=>l=>{l.stopPropagation(),n&&m.createNewNode({type:e,parent:n,isEdgeObservable:t,existingEdge:u})};return(0,l.jsxs)("div",{className:(0,x.QP)("w-full cursor-pointer gap-y-1.5 rounded-[14px] bg-slate-3 p-2",c),style:y,children:[(0,l.jsx)("div",{className:"mb-1 text-left text-sm font-medium leading-6 text-slate-11",children:"Select next step"}),(0,l.jsx)(d.V,{className:"w-full gap-y-0 rounded-[8px] bg-white shadow-sm dark:bg-black",children:Object.entries(b).filter(e=>{let[n]=e;return!b[n].disabled}).map(e=>{let[n,{icon:t,color:r,callToAction:s}]=e;return!1!==p[n]&&(0,l.jsxs)(i.f,{role:"button",between:!0,className:"group h-10 w-full cursor-pointer select-none border-b-[0.5px] border-b-slate-4 px-2 first-of-type:rounded-t-[8px] last-of-type:rounded-b-[8px] last-of-type:border-transparent hover:bg-slate-1 active:bg-slate-2",onClick:g(n),children:[(0,l.jsxs)(i.f,{children:[(0,l.jsx)("div",{className:(0,x.QP)("flex h-5 w-5 shrink-0 items-center justify-center rounded-[5px] overflow-hidden",r),children:t}),(0,l.jsx)("p",{className:"text-sm font-medium text-slate-12",children:s})]}),(0,l.jsx)(i.f,{center:!0,className:"h-full p-2",children:(0,l.jsx)(a.A,{className:"size-4 stroke-[3px] text-slate-9"})})]},n)})})]})})},93481:(e,n,t)=>{"use strict";t.d(n,{Z:()=>d});var l=t(50612),a=t(85680),i=t(13249),r=t(98448),s=t(21536),o=t(94344);function d(e){let{mainNotificationId:n,stateGraph:t,reactFlowInstance:d}=e,u=(0,s.V)(t,d),c=(0,a.aV)();return(0,o.useCallback)(e=>{var t;let a=(null!=(t=e.issues)?t:[]).map(e=>({...e,type:(0,r.LF)(e.type,i.i0),level:(0,r.LF)(e.level,i.gU),entityType:(0,r.LF)(e.entityType,i.H9)}));a.length>0?u(a,!0):e.fieldErrors&&e.fieldErrors.length>0?c({id:"test-run-zod-errors",level:"danger",label:"Invalid trigger configuration",message:e.fieldErrors.map((e,n)=>(0,l.jsx)("p",{className:"mb-2 last:mb-0",children:e.message},n)),duration:5e3}):e.message&&c({id:n,level:"danger",label:"Failed to start test",message:e.message,duration:5e3})},[u,c,n])}},23310:(e,n,t)=>{"use strict";t.d(n,{V:()=>eV});var l,a,i=t(50612),r=t(85702),s=t(91318),o=t(77235),d=t(18273),u=t(39678),c=t(67434),m=t(30900),p=t(5375),g=t(32159),h=t(88036),v=t(13813),f=t(15727),x=t(54345),b=t(46732),y=t.n(b),j=t(86383),C=t(97422),N=t(85739),k=t(20096),T=t(31634),P=t(22525),w=t(67373),I=t(31024),A=t(20335),S=t(86937),_=t(8678),L=t(94344),F=t(25919);let E=[{label:"Contains",value:"contains"},{label:"Equals",value:"equals"},{label:"Starts with",value:"startsWith"},{label:"Ends with",value:"endsWith"},{label:"Does not contain",value:"notContains"},{label:"Does not equal",value:"notEquals"},{label:"Does not start with",value:"notStartsWith"},{label:"Does not end with",value:"notEndsWith"},{label:"Is empty",value:"isEmpty"},{label:"Is not empty",value:"isNotEmpty"}],R=[{label:"AND",value:"AND"},{label:"OR",value:"OR"}],M=(0,_.PA)(function(e){let{placeholder:n,value:t,onChange:l,fields:a,aliases:r}=e,o=(0,s.q2)(()=>{var e;let n=t;return n&&function e(n){if(!n||"object"!=typeof n)return!1;if("mode"in n)return!0;for(let t in n)if(e(n[t]))return!0;return!1}(n)||(n={operator:"AND",conditions:[{operator:"AND",conditions:[{field:"",mode:"contains",value:""}]}]}),void 0!==(e=n)&&"mode"in e&&(n={operator:"AND",conditions:[{operator:"AND",conditions:[n]}]}),n},[t]),d=(0,L.useCallback)((e,n)=>l(n),[l]);return(0,i.jsx)(D,{placeholder:n,group:o,onChange:d,fields:a,aliases:r,index:-1,root:!0})}),D=(0,_.PA)(function e(n){let{placeholder:t,group:l,onChange:a,fields:r,index:s,aliases:o,root:d=!1}=n,u=(0,L.useCallback)(()=>{a(s,{...l,conditions:[...l.conditions,{operator:"AND",conditions:[{field:"",mode:"contains",value:""}]}]})},[a,s,l]),c=(0,L.useCallback)(()=>a(s,void 0),[a,s]),m=(0,L.useCallback)((e,n)=>{let t=[...l.conditions];void 0===n?t.splice(e,1):t[e]=n,a(s,{...l,conditions:t})},[a,s,l]),p=(0,L.useCallback)((e,n)=>{let t=[...l.conditions];void 0===n?t.splice(e,1):t[e]=n,a(s,{...l,conditions:t})},[a,s,l]),g=(0,L.useCallback)(()=>{a(s,{...l,conditions:[...l.conditions,{field:"",value:"",mode:"contains"}]})},[a,s,l]),h=(0,L.useCallback)(e=>a(s,{...l,operator:e}),[a,s,l]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:(0,F.QP)("relative flex flex-col gap-3 w-full",!d&&"rounded-md border border-slate-6 bg-slate-1 p-4"),children:[s>0&&(0,i.jsx)("div",{className:"absolute -right-1 -top-2",children:(0,i.jsx)(N.K,{tooltip:"Remove",className:"mr-0 size-6 rounded-full bg-slate-9 hover:bg-slate-10",onClick:c,children:(0,i.jsx)(j.A,{className:"size-4 text-white"})})}),l.conditions.map((n,a,s)=>(0,i.jsxs)(L.Fragment,{children:[O(n)?(0,i.jsx)(e,{placeholder:t,group:n,onChange:m,index:a,fields:r,aliases:o}):(0,i.jsx)(K,{placeholder:t,condition:n,onChange:p,index:a,fields:r,aliases:o},a),a<s.length-1&&(0,i.jsxs)("div",{className:(0,F.QP)("relative flex items-center",O(n)&&"justify-center"),children:[O(n)&&(0,i.jsx)("div",{className:"absolute -top-3 h-3 border-r border-dashed border-slate-4"}),(0,i.jsx)(k.b,{className:"bg-white dark:bg-slate-1",options:R,value:l.operator,onChange:h}),O(n)&&(0,i.jsx)("div",{className:"absolute -bottom-3 h-3 border-r border-dashed border-slate-4"})]})]},a)),!d&&(0,i.jsx)("div",{className:"my-2 flex justify-between gap-3",children:(0,i.jsx)("div",{className:"flex items-center gap-3",children:(0,i.jsx)(w.$,{level:"outline",size:"sm",onClick:g,icon:(0,i.jsx)(C.A,{className:"size-4","aria-hidden":"true"}),className:"flex items-center justify-center py-[6px] pl-2 pr-3 font-medium",children:"Condition"})})})]}),d&&(0,i.jsx)("div",{className:"mt-7 flex items-center",children:(0,i.jsx)(w.$,{size:"sm",level:"outline",onClick:u,icon:(0,i.jsx)(C.A,{className:"size-4","aria-hidden":"true"}),className:"flex items-center justify-center py-[6px] pl-2 pr-3 font-medium ",children:"Condition Group"})})]})}),K=(0,_.PA)(function(e){var n,t,l,a;let{placeholder:r,condition:s,onChange:o,index:d,fields:u,aliases:c}=e,m=(0,L.useCallback)(e=>o(d,{...s,mode:e}),[o,d,s]),p=(0,L.useCallback)(e=>o(d,{...s,value:e}),[o,d,s]),h=(0,L.useCallback)(()=>o(d,void 0),[o,d]),v=(0,L.useCallback)(e=>o(d,{...s,field:e}),[o,d,s]),f=(0,L.useCallback)(e=>e.map(e=>{let n=c&&c[e]?c[e]:e;return y()(n),{label:(0,S.De)(n),value:e}}),[c]);return(0,i.jsxs)(T.f,{className:"items-start",children:[(0,i.jsx)("div",{className:"w-full",children:(0,i.jsxs)(I.V,{left:!0,className:"items-stretch gap-3",children:[(0,i.jsx)(P.e,{onSelect:v,value:null!==(n=null==s?void 0:s.field)&&void 0!==n?n:"",options:f(u),inputName:"field",placeholder:"Property to filter on"}),(0,i.jsx)(g.m,{className:"min-w-[140px] bg-white dark:bg-slate-1",placeholderClassName:"text-slate-9",options:E,placeholder:null!==(t=null==s?void 0:s.mode)&&void 0!==t?t:"Contains",value:null!==(l=null==s?void 0:s.mode)&&void 0!==l?l:"contains",onChange:m}),"isEmpty"!==s.mode&&"isNotEmpty"!==s.mode&&(0,i.jsx)(A.pd,{className:"w-full bg-white dark:bg-slate-1",name:"value",placeholder:r,value:null!==(a=null==s?void 0:s.value)&&void 0!==a?a:"",onChange:p})]})}),d>0&&(0,i.jsx)("div",{className:"min-w-max py-2",children:(0,i.jsx)(N.K,{tooltip:"Remove",className:"mr-0 size-6 border border-transparent bg-none hover:border-slate-8",onClick:h,children:(0,i.jsx)(j.A,{className:"size-4 text-slate-9 group-hover:text-slate-12"})})})]})});function O(e){return void 0!==e&&"operator"in e}var V=t(93163);let z=(0,_.PA)(function(e){let{field:n,trigger:t,setTriggerConfig:l,value:a}=e,r=(0,L.useCallback)(e=>{l(t.id,n.id,e)},[l,t.id,n.id]);return(0,i.jsx)(V.C,{value:a,onChange:r})});var U=t(57459),H=t(10293),B=t(77576),G=t(13268),Q=t(18099),q=t(95674),J=t(81486),$=t(23664);t(95736);var Z=t(12233);let W={name:"",instructions:"",onboardingInstructions:"",memories:[],conversationStarters:[],tools:$.G1,agents:[],icon:{name:null!==(l=(0,Q.i)(J.D))&&void 0!==l?l:J.D.BotIcon,color:null!==(a=(0,Q.i)(q.fJ))&&void 0!==a?a:q.fJ.Blue},greetingMessage:"",triggers:[],examples:[],exampleUpdates:{deleted:[],toggled:[]},modified:!1,changedTriggers:[],askForConfirmation:!0,description:"",flags:{},isKnowledgeBaseCitationEnabled:!0},Y=(0,Z.vt)(e=>({...W,reset:()=>e({...W}),set:e,setAskForConfirmation:n=>e({askForConfirmation:n,modified:!0}),setName:n=>e({name:n,modified:!0}),setOnboardingInstructions:n=>e({onboardingInstructions:n,modified:!0}),setInstructions:n=>e({instructions:n,modified:!0}),setMemories:n=>e(e=>({memories:"function"==typeof n?n(e.memories):n,modified:!0})),setConversationStarters:n=>e(e=>({conversationStarters:"function"==typeof n?n(e.conversationStarters):n,modified:!0})),toggleTool:(n,t,l)=>e(e=>{let a=Array.isArray(l)?l:[l],i={...e.tools};for(let e of a){var r,s,o;if(n)i[t]=G.D.dedup([...null!==(r=i[t])&&void 0!==r?r:[],e]);else{let n=null!==(o=null===(s=i[t])||void 0===s?void 0:s.filter(n=>n!==e))&&void 0!==o?o:[];n.length>0?i[t]=n:delete i[t]}}return{tools:i,modified:!0}}),setAgents:n=>e({agents:n,modified:!0}),setIcon:n=>e({icon:n,modified:!0}),setIconName:n=>e(e=>({icon:{...e.icon,name:n},modified:!0})),setIconColor:n=>e(e=>({icon:{...e.icon,color:n},modified:!0})),setGreetingMessage:n=>e({greetingMessage:n,modified:!0}),setExamples:n=>e(e=>{let t="function"==typeof n?n(e.examples):n,l=Array.from(new Set([...e.exampleUpdates.deleted,...e.examples.filter(e=>!t.some(n=>n._id===e._id)).map(e=>e._id)])),a=Array.from(new Set([...e.exampleUpdates.toggled,...t.filter(n=>{let t=e.examples.find(e=>e._id===n._id);return(null==t?void 0:t.enabled)!==n.enabled}).map(e=>e._id)]));return{examples:t,exampleUpdates:{deleted:l,toggled:a},modified:!0}}),setTriggers:n=>{e(e=>{var t;let l="function"==typeof n?n(e.triggers):n,a=e.triggers.filter(e=>!l.some(n=>n.id===e.id)).map(e=>e.id),i=null!==(t=l.filter(n=>e.triggers.every(e=>e.id!==n.id)).map(e=>e.id))&&void 0!==t?t:[],r=l.map(n=>{let t=e.triggers.find(e=>"new"!==e.id&&e.id===n.id);if(!t)return{...n,changedFields:["*"]};a.push(t.id);let l=Object.keys(n).filter(e=>"changedFields"!==e&&n[e]!==t[e]);return{...n,changedFields:t?Array.from(new Set([...t.changedFields,...l])):l}});return{changedTriggers:Array.from(new Set([...e.changedTriggers,...a,...i])),triggers:r,modified:!0}})},setFlags:n=>e(e=>({flags:"function"==typeof n?n(e.flags):n,modified:!0})),setDescription:n=>e({description:n,modified:!0}),setIsKnowledgeBaseCitationEnabled:n=>e({isKnowledgeBaseCitationEnabled:n,modified:!0})}));var X=t(81904);function ee(e,n){return"".concat(n,"-").concat(e.settings.mailAddressNamespace,"@").concat("lindymail.ai")}let en=(0,t(40211).d_)("1234567890abcdef",6),et=(0,_.PA)(function(e){let{field:n,trigger:t,setTriggerConfig:l,value:a}=e,{data:r,isLoading:o}=(0,B.U)(),d=(0,s.q2)(()=>en(),[]),u=(0,H.f)(),c=Y(e=>e.name.trim().toLowerCase().replace(" ","-"));if(!c){var m,p;c=null!==(p=null==u?void 0:null===(m=u.data)||void 0===m?void 0:m.name.trim().toLowerCase().replace(" ","-"))&&void 0!==p?p:""}let g=(0,L.useRef)(!1);(0,x.l)(()=>{a||g.current||(g.current=!0,l(t.id,n.id,(0,X.Yv)(c||d)))},[c,a,l,t.id,n.id,d]);let h=(0,L.useCallback)(e=>{g.current=!0,l(t.id,n.id,(0,X.Yv)(e,!1))},[l,t.id,n.id]),v=(0,L.useCallback)(e=>{g.current&&l(t.id,n.id,(0,X.Yv)(e.currentTarget.value))},[l,t.id,n.id]);return(0,x.l)(()=>{if(o||!r||!c.trim()||a||g.current)return;let e=c;a!==e&&l(t.id,n.id,e)},[n.id,l,t.id,o,r,g,c,a]),(0,i.jsxs)("div",{className:"flex flex-col gap-x-3",children:[(0,i.jsx)(A.pd,{suffix:r?ee(r,""):"",name:n.id,value:a,onChange:h,onBlur:v,"data-1p-ignore":!0,suffixWrapperClassName:"w-full",autoComplete:"off"}),(0,i.jsx)(U.T,{text:r?ee(r,a):"",size:"sm",level:"outline",className:"mt-2 border-slate-4 bg-slate-1 px-4 py-[10px] text-sm shadow-none",children:"Copy"})]})});var el=t(13759);let ea=(0,_.PA)(function(e){let{field:n,trigger:t,setTriggerConfig:l,value:a}=e,r=(0,L.useCallback)(e=>{l(t.id,n.id,e)},[l,t.id,n.id]);return(0,i.jsx)(el._,{value:a,onChange:r,isCallReceivedTrigger:!0})});var ei=t(94783),er=t(42168),es=t(65380),eo=t(52105),ed=t(5862),eu=t(88687),ec=t(7094);let em=(0,ed._)({get:{data:ec.z.array(eu.v1)},post:{body:ec.z.object({name:ec.z.string()}),data:ec.z.array(eu.v1)},delete:{body:ec.z.object({uuid:ec.z.string().uuid()}),data:ec.z.array(eu.v1)}}),ep=(0,eo.In)("POST","/api/identity/settings/webhook",em.post.data),eg=(0,ed._)({post:{params:ec.z.object({uuid:ec.z.string().uuid()}),data:ec.z.object({secret:ec.z.string()})}}),eh=(0,eo.In)("POST","/api/identity/settings/webhook/:uuid/refreshSecret",eg.post.data);var ev=t(73850);function ef(e,n){let t=new URL("".concat("https://public.lindy.ai","/api/v1/webhooks/lindy/").concat(e));return(null==n?void 0:n.followUpConversationId)&&t.searchParams.append("conversationId",n.followUpConversationId),t.toString()}var ex=t(89073),eb=t(77566);let ey=e=>{let{value:n,onChange:t,onKeyDown:l}=e;return(0,i.jsx)("div",{className:"flex flex-row items-center",children:(0,i.jsx)(A.pd,{autoFocus:!0,placeholder:"Create new...",value:n,onChange:t,onKeyDown:l,className:"w-auto"})})},ej=(0,_.PA)(function(e){let{field:n,trigger:t,setTriggerConfig:l,value:a}=e,{data:r}=(0,B.U)(),o=(0,es.Jo)(),d=(0,ex.jE)(),u=(0,s.q2)(()=>{var e;return null!==(e=null==r?void 0:r.settings.webhooks.map(e=>["".concat(e.name," - ").concat(ef(e.uuid)),e.uuid]).map(e=>{let[n,t]=e;return{label:n,value:t}}))&&void 0!==e?e:[]},[null==r?void 0:r.settings.webhooks]),c=(0,L.useCallback)(e=>{l(t.id,n.id,e)},[l,t.id,n.id]),m=(0,eb.n)({mutationFn:async e=>{let{error:n,data:t}=await ep({body:{name:e}});if(n||!t)throw Error("Couldn't add webhook");return{data:t,name:e}},onSuccess:e=>{var n,t;let{data:l}=e;d.invalidateQueries(o),c(null!==(t=null===(n=l.at(-1))||void 0===n?void 0:n.uuid)&&void 0!==t?t:"")}}),p=(0,L.useCallback)(e=>{m.mutate(e)},[m]);return(0,i.jsxs)("div",{children:[(0,i.jsx)(g.m,{onCreate:p,onChange:c,options:u,value:a,inputEl:ey,className:"shadow-none"}),!!a&&(0,i.jsxs)("div",{className:"mt-2 flex gap-3",children:[(0,i.jsx)(eC,{uuid:a}),(0,i.jsx)(U.T,{text:ef(a),children:"Copy webhook URL"})]})]})}),eC=(0,_.PA)(function(e){let{uuid:n}=e,{isOpen:t,onOpen:l,onClose:a}=(0,f.j)(),[r,s]=(0,L.useState)(null);(0,L.useEffect)(()=>{if(!t){let e=setTimeout(()=>s(null),500);return()=>clearTimeout(e)}},[t]);let o=(0,eb.n)({mutationFn:async()=>{let{error:e,data:t}=await eh({params:{uuid:n}});if(e||!t)throw Error("Couldn't refresh secret");return{data:t}},onSuccess:e=>{let{data:n}=e;s(n.secret)}}),d=(0,L.useCallback)(()=>{o.mutate()},[o]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(w.$,{level:"text",size:"sm",className:"p-1",onClick:l,children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:["Generate Secret",(0,i.jsx)(er.A,{className:"size-4"})]})}),(0,i.jsxs)(ev.aF,{open:t,setClosed:a,className:"max-w-sm sm:max-w-md",children:[r?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"-mb-2 text-sm text-slate-11",children:"The secret below is only shown once. Please copy it now."}),(0,i.jsxs)("div",{className:"flex items-end gap-2",children:[(0,i.jsx)(A.pd,{value:r,readOnly:!0,className:"grow font-mono text-xs"}),(0,i.jsx)(U.T,{text:r,className:"mb-1.5 shrink"})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ei.A,{className:"-mb-4 size-10 self-center fill-danger-10"}),(0,i.jsx)("p",{className:"text-center text-slate-11",children:"Warning, this will invalidate the exising secret and affect all Lindies that use this webhook."})]}),(0,i.jsx)(w.$,{onClick:d,children:"Generate Secret"})]})]})});var eN=t(22283),ek=t(11211);let eT=(0,F.QP)("leading-4.5 line-clamp-none select-none text-xs font-medium text-slate-9 [&_a:hover]:no-underline [&_a]:text-blue-9 [&_a]:underline"),eP={pre:e=>{var n,t;let{children:l,node:a}=e,r=null==a?void 0:null===(n=a.children)||void 0===n?void 0:n[0],s=r&&"children"in r?null===(t=r.children)||void 0===t?void 0:t[0]:void 0,o=s&&"value"in s&&"string"==typeof(null==s?void 0:s.value)?s.value:void 0;return(0,i.jsx)(ek.N,{className:"max-w-[360px]",copyText:o,children:l})}};function ew(e){let{children:n}=e;return(0,i.jsx)(eN.o,{className:eT,components:eP,allowHTML:!1,children:n})}var eI=t(39388),eA=t(61268),eS=t(95845),e_=t(45396),eL=t(37473);let eF=(0,_.PA)(function(e){return e.collapsible?(0,i.jsx)(eM,{...e}):(0,i.jsx)(eE,{...e})}),eE=(0,_.PA)(function(e){var n;let{field:t,trigger:l,setTriggerConfig:a,onChange:r,value:o,isFromModal:d}=e,u=(0,L.useRef)(!1),c="select"===t.type&&t.selectFirstByDefault?null===(n=t.options[0])||void 0===n?void 0:n.value:t.defaultValue;(0,x.l)(()=>{u.current||(u.current=!0,null!=c&&void 0===o&&r(c))},[r,o,c]);let m=(0,L.useCallback)(()=>{if("multiselect"===t.type)return null==o?void 0:o.map(e=>{var n;return null===(n=t.options.find(n=>n.value===e))||void 0===n?void 0:n.label}).filter(Boolean).join(", ")},[t,o]),p=(0,s.q2)(()=>"multiselect"!==t.type?[]:t.options.map(e=>{var n;return{label:e.label,value:e.value,checked:null==o?void 0:null===(n=o.includes)||void 0===n?void 0:n.call(o,e.value)}}),[t,o]),h=(0,s.q2)(()=>{switch(t.type){case"text":return(0,i.jsx)(A.pd,{name:t.id,placeholder:t.placeholder,value:o,onChange:r},t.id);case"datetime":return(0,i.jsx)(A.pd,{name:t.id,placeholder:t.placeholder,value:function(e){if(e)return(0,eS.A)((0,e_.A)(e),"yyyy-MM-dd'T'HH:mm")}(o),onChange:r,type:"datetime-local"},t.id);case"number":return(0,i.jsx)(A.pd,{name:t.id,placeholder:t.placeholder,type:"number",min:t.min,max:t.max,step:t.step,value:o,onChange:r},t.id);case"select":return(0,i.jsx)(g.m,{options:t.options.map(e=>({label:e.label,value:e.value})),placeholder:t.placeholder,value:o,onChange:r,className:"text-slate-9 shadow-none"});case"multiselect":return(0,i.jsx)(g.m,{options:p,placeholder:t.placeholder,value:null,onChange:r,className:"text-slate-9 shadow-none",renderOption:eK,displayValue:m});case"auto-observe":return(0,i.jsx)(eD,{value:o,onChange:r});case"select::lindy-mail":return(0,i.jsx)(et,{field:t,trigger:l,setTriggerConfig:a,value:o});case"select::lindy-webhook":return(0,i.jsx)(ej,{field:t,trigger:l,setTriggerConfig:a,value:o});case"select::lindy-phone-number":return(0,i.jsx)(ea,{field:t,trigger:l,setTriggerConfig:a,value:o});case"select::eleven-labs-voice":return(0,i.jsx)(z,{field:t,trigger:l,setTriggerConfig:a,value:o});case"comparable_text":return(0,i.jsx)(M,{fields:t.fields,aliases:t.aliases,placeholder:t.placeholder,value:o,onChange:r},t.id);case"recurring_schedule":return(0,i.jsx)(eL.I,{placeholder:t.placeholder,value:o,isFromModal:null==d||d,onChange:r},t.id);case"checkbox":return(0,i.jsx)(eR,{field:t,value:o,onChange:r},t.id);default:return null}},[t,d,r,a,l,o,p,m]);return(0,i.jsxs)("div",{"data-testid":"lindy.agent-wizard.trigger-config-field","data-field-type":t.type,"data-field-id":t.id,className:(0,F.QP)(t.tooltip&&"comparable_text"!==t.type&&"flex flex-row"),children:[h,"comparable_text"!==t.type&&(0,i.jsx)(v.I,{placement:"top",children:t.tooltip})]})}),eR=(0,_.PA)(function(e){let{field:n,value:t,onChange:l}=e,a=(0,L.useCallback)(e=>{l(e.target.checked)},[l]);return(0,i.jsx)("div",{className:"flex items-center pl-1.5",children:(0,i.jsx)(p.S,{id:n.id,checked:t,onChange:a,label:n.label,subLabel:n.description&&(0,i.jsx)(ew,{children:n.description})})})}),eM=(0,_.PA)(function(e){let{field:n,onChange:t,value:l,errorMessage:a,isExpensiveTrigger:r}=e,{isOpen:o,onToggle:d}=(0,f.j)(!!l);(0,x.l)(()=>{!o&&l&&t(void 0)},[o,l,t]);let c=(0,s.q2)(()=>{if(!r||"comparable_text"!==n.type)return!1;if(!l)return!0;let e=u.b.safeParse(l);return!e.success||(0,eA.Am)(e.data)},[r,n,l]),g=(0,s.q2)(()=>"comparable_text"===n.type?n.tooltip||"Filter conditions are not case-sensitive.":n.tooltip,[n.tooltip,n.type]);return(0,i.jsxs)("div",{className:"flex flex-col gap-7",children:[(0,i.jsxs)("div",{"data-testid":"lindy.agent-wizard.trigger-config-toggle","data-field-type":n.type,"data-field-id":n.id,className:"flex items-center pl-1.5",children:[(0,i.jsx)(p.S,{id:n.id,checked:o,onChange:d,label:n.label,subLabel:n.description&&(0,i.jsx)(ew,{children:n.description}),tooltip:g}),o&&a&&(0,i.jsx)("span",{className:"mb-0 ml-2 text-sm font-bold text-red-9",children:a})]}),o&&(0,i.jsx)(eF,{...e,collapsible:!1}),c&&(0,i.jsxs)(m.F,{type:"warning",withIcon:!0,children:["This trigger can get expensive without filters.\xa0",(0,i.jsx)(h.N,{"data-ph-id":"learn-more-expensive-trigger",className:"text-inherit underline",href:"https://www.lindy.ai/academy-lessons/tips-for-reducing-costs",children:"Learn more"})]})]})}),eD=(0,_.PA)(function(e){let{value:n,onChange:t}=e,l=(0,u.SS)(n),a=(0,L.useCallback)(e=>{(0,u.DC)(e)&&t((0,u.SS)(e))},[t]);return(0,i.jsx)(g.m,{options:u.Ef,value:l,onChange:a})});function eK(e){return(0,i.jsxs)("div",{className:"flex w-full items-center justify-between gap-2",children:[e.label,e.checked&&(0,i.jsx)("div",{children:(0,i.jsx)(eI.v,{})})]})}var eO=t(82907);let eV=(0,_.PA)(function(e){var n;let{toggle:t,setTriggerConfig:l,showNavigation:a=!0,isOnboarding:m=!1,showControlButtons:p=!0,handleClose:g,trigger:h,currentAgentModel:v,isFromModal:f=!0,authId:x}=e,[b,y]=(0,L.useState)(!1),j=(0,s.q2)(()=>(0,eA.l_)(h),[h]),C=(0,L.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),y(!0),t&&j.isValid&&t(e)},[t,j]),N=(0,s.q2)(()=>h?Object.fromEntries(h.triggerFields.map(e=>[e.id,n=>{let t=n;if("dynamic-loader"!==e.type){if("multiselect"===e.type&&"string"==typeof n){var a,i,r;let l=null!==(r=null===(a=h.actionArgs)||void 0===a?void 0:a[null!==(i=e.id)&&void 0!==i?i:"_"])&&void 0!==r?r:[];if(!Array.isArray(l)){c.wd("Got an existing value for trigger field with type=".concat(e.type," that is not an array: ").concat(JSON.stringify(l)),{tags:{trigger_source:(0,d.OK)(h)}});return}t=l.includes(n)?l.filter(e=>e!==n):n===u.j4?[u.j4]:[...l.filter(e=>e!==u.j4),n]}l(h.id,e.id,t)}}])):{},[h,l]),k=(0,s.q2)(()=>h.isHighThroughput&&(!v||!eO.X8.includes(v)),[v,h.isHighThroughput]),T=(0,r.Mt)({params:{tool:null==h?void 0:h.tool,trigger:null==h?void 0:h.name},query:x?{authId:x}:{},options:{enabled:!!h}});if(!h)return null;let P=null===(n=T.data)||void 0===n?void 0:n.triggerFields,w=null==P?void 0:P.filter(e=>"dynamic-loader"!==e.type);return(0,i.jsx)("div",{className:"mb-1 flex flex-1 overflow-x-visible",children:(0,i.jsxs)("form",{onSubmit:C,className:"flex flex-1 flex-col justify-start gap-7","data-testid":"lindy.agent-wizard.trigger-fields-form",children:[(0,i.jsx)(I.V,{left:!0,className:"flex-1 gap-y-7 overflow-visible",children:null==w?void 0:w.map((e,n,t)=>{var a,r,s,d,u;let c=G.D.findLast(t,(e,t,l)=>"label"===e.type&&l<n),m=!!b&&!1===j.isValid&&null!==(a=j.errors[e.id])&&void 0!==a&&!!a.isRequiredError||void 0,p=b&&!1===j.isValid&&!m?null===(r=j.errors[e.id])||void 0===r?void 0:r.message:void 0,g=null===(s=h.actionArgs)||void 0===s?void 0:s[null!==(d=e.id)&&void 0!==d?d:"_"];return(0,i.jsxs)("div",{className:"flex w-full flex-col",children:["comparable_text"!==e.type&&"checkbox"!==e.type&&(0,i.jsx)(o.V,{className:(0,F.QP)("mb-1.5 pb-0 select-none"),labelClassName:(0,F.QP)("label"===e.type?"text-slate-12 leading-normal font-medium":"text-slate-9 font-semibold"),label:e.label,htmlFor:e.id,optional:!e.required&&("label"===e.type||!c),subtitle:e.description?(0,i.jsx)(ew,{children:e.description}):null,subtitleClassName:"line-clamp-none",errorMessage:p,isRequiredError:m}),"label"!==e.type&&(0,i.jsx)(eF,{field:e,trigger:h,setTriggerConfig:l,value:g,onChange:N[null!==(u=e.id)&&void 0!==u?u:"_"],collapsible:!e.required&&"comparable_text"===e.type,errorMessage:p,isExpensiveTrigger:k,isFromModal:f})]},e.id)})}),p?m?(0,i.jsx)(ez,{disabled:!h,handleClose:g}):(0,i.jsx)(eU,{showNavigation:a}):null]})})});function ez(e){let{disabled:n,handleClose:t}=e;return(0,i.jsxs)("div",{className:"mt-6 flex flex-row justify-end gap-x-2 align-middle",children:[(0,i.jsx)(w.$,{level:"outline",disabled:n,onClick:t,children:"Cancel"}),(0,i.jsx)(w.$,{type:"submit",children:"Save"})]})}function eU(e){let{showNavigation:n}=e;return(0,i.jsx)(w.$,{className:"self-end",type:"submit",children:n?"Add Trigger":"Save Trigger"})}},92428:(e,n,t)=>{"use strict";t.d(n,{c:()=>r,f:()=>s});var l=t(31284),a=t(81778),i=t(94344);let r="sT";function s(){let e="true"===(0,a.useRouter)().query[r];(0,i.useEffect)(()=>{e&&l.a.ui.setTestingPanelOpen(!0)},[e])}},21536:(e,n,t)=>{"use strict";t.d(n,{V:()=>r});var l=t(50612),a=t(85680),i=t(94344);function r(e,n){let t=(0,a.aV)();return(0,i.useCallback)(function(a){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(a&&0!==a.length&&(i&&e&&e.setValidationIssues(a),t({id:a.map(e=>e.id).join(","),level:"danger",label:"Failed to save the current flow",message:a.map(e=>(0,l.jsxs)("p",{className:"mb-1 last:mb-0",children:["field"in e&&"".concat(e.field,": "),e.message]},e.id)),duration:5e3}),(null==e?void 0:e.firstNodeWithIssue)&&n)){let t=n.getViewport();n.fitView({nodes:[{id:e.firstNodeWithIssue.data._id}],maxZoom:t.zoom,minZoom:t.zoom,duration:600})}},[e,n,t])}},66850:(e,n,t)=>{"use strict";t.d(n,{u:()=>i});var l=t(50612),a=t(25919);function i(e){let{filled:n,className:t,...i}=e;return(0,l.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i,className:(0,a.QP)("text-slate-11",t),children:n?(0,l.jsx)("path",{d:"M8.04074 2.32259C6.70797 1.51044 5 2.46975 5 4.03047V19.9696C5 21.5304 6.70798 22.4897 8.04074 21.6775L21.119 13.7079C22.398 12.9285 22.398 11.0716 21.119 10.2922L8.04074 2.32259Z",fill:"currentColor"}):(0,l.jsx)("path",{d:"M20.5987 11.1461L7.52037 3.17648C6.85399 2.7704 6 3.25005 6 4.03042V19.9696C6 20.7499 6.85399 21.2296 7.52037 20.8235L20.5987 12.8539C21.2382 12.4642 21.2382 11.5358 20.5987 11.1461Z",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"})})}},77791:(e,n,t)=>{"use strict";t.d(n,{M:()=>a});var l=t(50612);let a=(0,t(94344).memo)(function(e){let{className:n,...t}=e;return(0,l.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:n,...t,children:[(0,l.jsx)("path",{d:"M7.33325 1.3335C7.70144 1.3335 7.99992 1.63197 7.99992 2.00016V3.00016C7.99992 3.36835 7.70144 3.66683 7.33325 3.66683C6.96506 3.66683 6.66659 3.36835 6.66659 3.00016V2.00016C6.66659 1.63197 6.96506 1.3335 7.33325 1.3335Z"}),(0,l.jsx)("path",{d:"M11.5755 3.09071C11.8358 3.35106 11.8358 3.77317 11.5755 4.03352L10.8684 4.74062C10.608 5.00097 10.1859 5.00097 9.92557 4.74062C9.66523 4.48027 9.66523 4.05816 9.92557 3.79781L10.6327 3.09071C10.893 2.83036 11.3151 2.83036 11.5755 3.09071Z"}),(0,l.jsx)("path",{d:"M4.74085 10.8688C5.0012 10.6085 5.0012 10.1863 4.74085 9.92599C4.4805 9.66565 4.05839 9.66565 3.79805 9.92599L3.09094 10.6331C2.83059 10.8935 2.83059 11.3156 3.09094 11.5759C3.35129 11.8363 3.7734 11.8363 4.03375 11.5759L4.74085 10.8688Z"}),(0,l.jsx)("path",{d:"M3.66659 7.3335C3.66659 7.70169 3.36811 8.00016 2.99992 8.00016H1.99992C1.63173 8.00016 1.33325 7.70169 1.33325 7.3335C1.33325 6.96531 1.63173 6.66683 1.99992 6.66683H2.99992C3.36811 6.66683 3.66659 6.96531 3.66659 7.3335Z"}),(0,l.jsx)("path",{d:"M3.79794 4.7411C4.05829 5.00145 4.4804 5.00145 4.74075 4.7411C5.0011 4.48075 5.0011 4.05864 4.74075 3.79829L4.03365 3.09118C3.7733 2.83083 3.35119 2.83083 3.09084 3.09118C2.83049 3.35153 2.83049 3.77364 3.09084 4.03399L3.79794 4.7411Z"}),(0,l.jsx)("path",{d:"M7.23727 6.37719C6.99179 6.28368 6.71428 6.34303 6.52853 6.52878C6.34279 6.71453 6.28343 6.99203 6.37695 7.23751L9.04361 14.2375C9.13371 14.474 9.34995 14.6391 9.60183 14.6637C9.85372 14.6883 10.0978 14.5681 10.2319 14.3535L11.8171 11.8173L14.3533 10.2322C14.5679 10.098 14.688 9.85396 14.6635 9.60208C14.6389 9.35019 14.4738 9.13395 14.2373 9.04386L7.23727 6.37719Z"})]})})},18379:(e,n,t)=>{"use strict";t.d(n,{K:()=>a});var l=t(50612);let a=(0,t(94344).memo)(function(e){return(0,l.jsxs)("svg",{width:"100%",height:"100%",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,l.jsx)("rect",{width:"32",height:"32",fill:"#E4F9FF"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 6C16.4909 6 16.8889 6.4264 16.8889 6.95238V7.90476H21.3333C22.3152 7.90476 23.1111 8.75755 23.1111 9.80952V16.4762C23.1111 17.1812 22.7536 17.7968 22.2222 18.1261V18.9388L23.7397 20.5647C24.0868 20.9366 24.0868 21.5396 23.7397 21.9115C23.3925 22.2835 22.8297 22.2835 22.4826 21.9115L21.9387 21.3288C21.1471 24.0359 18.7876 26 16 26C13.2124 26 10.8529 24.0359 10.0613 21.3288L9.51743 21.9115C9.1703 22.2835 8.60748 22.2835 8.26035 21.9115C7.91322 21.5396 7.91322 20.9366 8.26035 20.5647L9.77778 18.9388L9.77778 18.1261C9.2464 17.7968 8.88889 17.1812 8.88889 16.4762V9.80952C8.88889 8.75755 9.68483 7.90476 10.6667 7.90476H15.1111V6.95238C15.1111 6.4264 15.5091 6 16 6ZM10.6667 9.80952V16.4762H21.3333V9.80952H10.6667Z",fill:"#0078A1"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.3333 11.7143C13.8243 11.7143 14.2222 12.1407 14.2222 12.6667V13.619C14.2222 14.145 13.8243 14.5714 13.3333 14.5714C12.8424 14.5714 12.4444 14.145 12.4444 13.619V12.6667C12.4444 12.1407 12.8424 11.7143 13.3333 11.7143ZM18.6667 11.7143C19.1576 11.7143 19.5556 12.1407 19.5556 12.6667V13.619C19.5556 14.145 19.1576 14.5714 18.6667 14.5714C18.1757 14.5714 17.7778 14.145 17.7778 13.619V12.6667C17.7778 12.1407 18.1757 11.7143 18.6667 11.7143Z",fill:"#0078A1"})]})})},72561:(e,n,t)=>{"use strict";t.d(n,{O:()=>a});var l=t(50612);let a=(0,t(94344).memo)(function(e){let{className:n,...t}=e;return(0,l.jsxs)("svg",{width:"100%",height:"100%",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:n,...t,children:[(0,l.jsx)("rect",{width:"32",height:"32",fill:"#F5F2FF"}),(0,l.jsx)("path",{d:"M10.5 26C8.567 26 7 24.433 7 22.5C7 20.8244 8.17741 19.4239 9.75 19.0805V18C9.75 16.4812 10.9812 15.25 12.5 15.25H14C14.6904 15.25 15.25 14.6904 15.25 14V12.9195C13.6774 12.5761 12.5 11.1756 12.5 9.5C12.5 7.567 14.067 6 16 6C17.933 6 19.5 7.567 19.5 9.5C19.5 11.1756 18.3226 12.5761 16.75 12.9195V14C16.75 14.6904 17.3096 15.25 18 15.25H19.5C21.0188 15.25 22.25 16.4812 22.25 18V19.0805C23.8226 19.4239 25 20.8244 25 22.5C25 24.433 23.433 26 21.5 26C19.567 26 18 24.433 18 22.5C18 20.8244 19.1774 19.4239 20.75 19.0805V18C20.75 17.3096 20.1904 16.75 19.5 16.75H18C17.212 16.75 16.5014 16.4186 16 15.8875C15.4986 16.4186 14.788 16.75 14 16.75H12.5C11.8096 16.75 11.25 17.3096 11.25 18V19.0805C12.8226 19.4239 14 20.8244 14 22.5C14 24.433 12.433 26 10.5 26Z",fill:"#6E56CF"})]})})},36175:(e,n,t)=>{"use strict";t.d(n,{h7:()=>s,lc:()=>o,o2:()=>d,r$:()=>u,xU:()=>c});var l=t(34698),a=t(3764);let i=[l.Jl.TALK,l.Jl.ANSWER,l.Jl.MESSAGE_SENT,l.Jl.MESSAGE_RECEIVED,l.Jl.ACTION_NEEDED_OAUTH2_AUTH,l.Jl.ACTION_NEEDED_API_TOKEN_AUTH,l.Jl.ACTION_NEEDED_CUSTOM_AUTH,l.Jl.ACTION_NEEDED_CUSTOM_OAUTH2,l.Jl.ACTION_NEEDED_ONBOARDING,l.Jl.ACTION_NEEDED_RAILS_ONBOARDING,l.Jl.UNSUPPORTED_INTERNAL_ACTION_NEEDED_CREDITS,l.Jl.ACTION_NEEDED_PAUSED,l.Jl.UNSUPPORTED_THOUGHT,l.Jl.INTERNAL_EXECUTION_DETAILS,l.Jl.UNSUPPORTED_INTERNAL_STREAMING,l.Jl.UNSUPPORTED_INTERNAL_GUIDELINES_UPDATED,l.Jl.MEDIA],r=[l.Jl.ACTION_NEEDED_OAUTH2_AUTH,l.Jl.ACTION_NEEDED_API_TOKEN_AUTH,l.Jl.ACTION_NEEDED_CUSTOM_AUTH,l.Jl.ACTION_NEEDED_CUSTOM_OAUTH2,l.Jl.INTERNAL_EXECUTION_TRACE,l.Jl.ANSWER,l.Jl.TALK,l.Jl.MESSAGE_SENT];function s(e){return(0,a.YW)(e).with({type:a.P.union(...r)},()=>!0).otherwise(()=>!1)}function o(e){return(0,a.YW)(e).with(a.P.union(...i),()=>!0).otherwise(()=>!1)}let d=e=>{let n=e.match(/(ID:[\S\s]*)?from:[\S\s]*text:/);if(n&&n[0]){let n=e.lastIndexOf("text:"),t=e.lastIndexOf("typeof data:");if(-1!==n)return -1!==t?e.slice(n+5,t).trim():e.slice(n+5).trim()}return e};function u(e){let n=[],t=[];for(let i=0;i<e.length;i++){var a;let r=e[i];if(r){if(t.push(r),r.type===l.Jl.INTERNAL_EXECUTION_DETAILS){let a=e[i+1];(null==a?void 0:a.type)===l.Jl.INTERNAL_GRAPH_TRAVERSAL&&(t.push(a),i++),n.push(t),t=[]}else r.type===l.Jl.INTERNAL_GRAPH_TRAVERSAL&&null===r.from&&0===i&&(null===(a=e[i+1])||void 0===a?void 0:a.type)!==l.Jl.MESSAGE_RECEIVED&&(n.push(t),t=[])}}return n}function c(e,n){let t=e.find(e=>e.some(e=>(0,l.sw)(e)&&e.executionId.toString()===n.toString()));if(!t)return!1;if(4!==t.length)return!0;let[a,i,r,s]=t;return!((0,l.qG)(a)&&(0,l.iq)(i)&&(0,l.sw)(r)&&(0,l.qG)(s))}},25270:(e,n,t)=>{"use strict";t.d(n,{N:()=>s,h:()=>r});var l=t(2932);let a=[l.Y.Cancelling,l.Y.Pending,l.Y.Running,l.Y.PendingRestart,l.Y.PendingEnqueue],i=a.filter(e=>e!==l.Y.PendingEnqueue);function r(e){return!e||!a.includes(e)}function s(e){return!!e&&i.includes(e)}},81904:(e,n,t)=>{"use strict";function l(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return e.toLowerCase().replace(/[^\da-z-]+/g,"-").replace(n?/^-+|-+$/g:"","")}function a(e,n,t){let l=n.length,a=0;for(let i=e.length;a<l&&!(t+a>=i)&&e[t+a]==n[a];++a);return a===l}function i(e,n){let t=0,l=e.length,i=n.length;for(;t<l&&a(e,n,t);)t+=n.length;for(;l>t&&a(e,n,l-i);)l-=n.length;return t>0||l<e.length?e.slice(t,l):e}t.d(n,{TD:()=>i,Yv:()=>l}),t(36533).Buffer},61268:(e,n,t)=>{"use strict";t.d(n,{Am:()=>i,Ct:()=>s,l_:()=>r,ni:()=>o});var l=t(85341),a=t(39678);function i(e){for(let n of e.conditions)if("value"in n){if(""===n.field||"isEmpty"!==n.mode&&"isNotEmpty"!==n.mode&&""===n.value)return!0}else if("conditions"in n&&i(n))return!0;return!1}function r(e){let n=e.triggerFields.reduce((n,t)=>{var r;let s=null===(r=e.actionArgs)||void 0===r?void 0:r[t.id];if("comparable_text"===t.type){let e=a.b.safeParse(s);if(e.success&&i(e.data))return{...n,[t.id]:{fieldDisplayName:t.label,message:"Filter contains empty values"}}}if("recurring_schedule"===t.type&&"string"==typeof s){let e=(0,l.dR)(s);if(!e.isValid)return{...n,[t.id]:{fieldDisplayName:t.label,message:e.errorMessage}}}return t.required&&void 0===t.defaultValue&&(null==s||""===s||Array.isArray(s)&&0===s.length)?{...n,[t.id]:{fieldDisplayName:t.label,isRequiredError:!0,message:"".concat(t.label," is required")}}:n},{}),t=0===Object.keys(n).length;return t?{isValid:t}:{isValid:t,errors:n}}let s=e=>"liveCaptureTriggerKeepAlive-".concat(e);function o(e){return"".concat(e.tool,".").concat(e.key)}},84244:(e,n,t)=>{"use strict";t.d(n,{y:()=>l});var l=function(e){return e.NormalRetry="normal-retry",e.ShorterRetry="shorter-retry",e.LongerRetry="longer-retry",e}({})},28371:e=>{e.exports={responseWrapper:"responseWrapper_responseWrapper__Yv2bV",contentWrapper:"responseWrapper_contentWrapper__Ib5Z_",avatarWrapper:"responseWrapper_avatarWrapper__KlsY7"}}}]);