"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6957],{50561:(e,n,a)=>{a.d(n,{w:()=>d});var l=a(5862),t=a(18983),i=a(38928),s=a(7094);let r=s.z.object({openMainWindowHotkey:s.z.string().nullable(),speechToTextModel:s.z.nativeEnum(t.a).nullable()}),d=(0,l._)({get:{params:s.z.object({id:i.k.objectIdString()}),data:r},patch:{params:s.z.object({id:i.k.objectIdString()}),body:r.partial(),data:s.z.object({ok:s.z.literal(!0)})}})},30900:(e,n,a)=>{a.d(n,{F:()=>m});var l=a(50612),t=a(26457),i=a(70562),s=a(21463),r=a(60955),d=a(94344),o=a(25919),u=a(3764);let c={info:t.A,warning:i.A,error:s.A,success:r.A};function m(e){let{type:n,children:a,withIcon:t,iconSize:i="md",...s}=e,r=c[n],m=d.useMemo(()=>(0,u.YW)(n).with("info",()=>"text-slate-12 dark:text-alert-info").with("warning",()=>"text-slate-12 dark:text-alert-warning").with("error",()=>"text-red-11 dark:text-alert-error").with("success",()=>"text-slate-12 dark:text-alert-success").exhaustive(),[n]);return(0,l.jsxs)("section",{"data-testid":"alert-notification",...s,className:(0,o.QP)("relative p-4 flex items-center justify-center rounded-lg text-left text-sm leading-5",m,"warning"===n&&"bg-alert-warning dark:border-1 dark:border-alert-warning dark:bg-inherit","info"===n&&"bg-alert-info dark:border-1 dark:border-alert-info dark:bg-inherit","error"===n&&"bg-red-4 dark:border-1 dark:border-alert-error dark:bg-inherit","success"===n&&"bg-alert-success dark:border-1 dark:border-alert-success dark:bg-inherit",s.className),children:[t&&(0,l.jsx)("div",{className:"mr-3 shrink-0",children:(0,l.jsx)(r,{className:(0,o.QP)("sm"===i&&"h-5 w-5","md"===i&&"h-6 w-6","lg"===i&&"h-7 w-7",m),"aria-hidden":"true"})}),a]})}},32159:(e,n,a)=>{a.d(n,{m:()=>m});var l=a(50612),t=a(97422),i=a(67373),s=a(35121),r=a(20335),d=a(41285),o=a(94344),u=a(25919),c=a(42717);function m(e){var n,a;let{menuPosition:m="bottom",options:p,placeholder:y,placeholderClassName:h,className:x,disabled:f=!1,value:v,onChange:b,onCreate:k,inputEl:j,renderOption:w,displayValue:I,label:F,labelClassName:S,dataTestId:C,...M}=e,[E,K]=(0,o.useState)(null),N=(0,o.useMemo)(()=>p.map(e=>({label:e.label,render:()=>w?w(e):(0,l.jsx)(g,{option:e}),key:e.value,onClick:()=>{f||null==b||b(e.value)}})),[f,b,p,w]),_=(0,o.useCallback)(e=>{"Enter"===e.key&&(null==k||k(null!=E?E:""),K(null),e.stopPropagation())},[k,E]),U=(0,o.useMemo)(()=>N.concat(k?[{label:"string"==typeof E?j?(0,o.createElement)(j,{value:E,onChange:K,onKeyDown:_}):(0,l.jsx)(r.pd,{autoFocus:!0,placeholder:"Create new...",value:E,onChange:K,onKeyDown:_,className:"w-auto",disabled:f}):"Create new...",icon:(0,l.jsx)(t.A,{}),onClick:e=>{e.preventDefault(),K(e=>null!=e?e:"")}}]:[]),[N,E,k,j,_,f]),L=null!=y?y:"Select an option...",P=null!==(n=p.find(e=>e.value===v))&&void 0!==n?n:null,T=null!==(a=I?I(P):null==P?void 0:P.label)&&void 0!==a?a:L,R=null==P?void 0:P.sublabel;return(0,l.jsxs)(l.Fragment,{children:[F&&(0,l.jsx)(d.J,{className:S,children:F}),(0,l.jsx)(c.W1,{position:"top"===m?"top-fit":"bottom-fit",entries:U,trigger:e=>(0,l.jsxs)(i.$,{level:"outline",fullWidthContent:!0,className:(0,u.QP)("h-11 w-full bg-slate-1 border-slate-4 shadow-none",x,f&&"pointer-events-none bg-slate-2 text-slate-9"),trailingIcon:(0,l.jsx)(s.z,{direction:e?"up":"down",className:(0,u.QP)("size-5 text-slate-11 transition-transform")}),"data-testid":null!=C?C:"lindy.design.dropdown.trigger",children:[(0,l.jsx)("span",{className:(0,u.QP)("truncate min-w-0",h,f&&"text-slate-9",T!==L&&"text-slate-12"),children:T}),R&&(0,l.jsx)("span",{className:"ml-1 text-sm text-slate-11",children:"\xb7 ".concat(R)})]}),disabled:f,...M})]})}function g(e){let{option:n}=e;return(0,l.jsx)("p",{className:"min-w-0 flex-1 truncate text-left text-slate-12",children:n.label})}},32519:(e,n,a)=>{a.d(n,{F3:()=>r,us:()=>i,vR:()=>s});var l=a(52710),t=a(18983);let i={[t.a.SingleLanguage]:{model:l.j.Nova2,description:"Single language",streaming:!0,languages:[{language:"Dutch",codes:["nl"]},{language:"English",codes:["en","en-US","en-AU","en-GB","en-NZ","en-IN"]},{language:"Flemish",codes:["nl-BE"]},{language:"French",codes:["fr","fr-CA"]},{language:"German",codes:["de"]},{language:"Hindi",codes:["hi","hi-Latn"]},{language:"Portuguese",codes:["pt","pt-BR"]},{language:"Spanish",codes:["es","es-419"]}],emoji:null,useSystemLanguage:!0},[t.a.MultilingualAdvanced]:{model:l.j.Nova2,description:"Multilingual advanced",streaming:!1,languages:[{language:"Dutch",codes:["nl"]},{language:"English",codes:["en","en-US","en-AU","en-GB","en-NZ","en-IN"]},{language:"Flemish",codes:["nl-BE"]},{language:"French",codes:["fr","fr-CA"]},{language:"German",codes:["de"]},{language:"Hindi",codes:["hi","hi-Latn"]},{language:"Portuguese",codes:["pt","pt-BR"]},{language:"Spanish",codes:["es","es-419"]}],emoji:"\uD83C\uDF0E",useSystemLanguage:!1},[t.a.MultilingualExtended]:{model:l.j.Base,description:"Multilingual extended",streaming:!1,languages:[{language:"Chinese",codes:["zh","zh-CN","zh-TW"]},{language:"Danish",codes:["da"]},{language:"Dutch",codes:["nl"]},{language:"English",codes:["en","en-US"]},{language:"Flemish",codes:["nl"]},{language:"French",codes:["fr","fr-CA"]},{language:"German",codes:["de"]},{language:"Hindi",codes:["hi","hi-Latn"]},{language:"Indonesian",codes:["id"]},{language:"Italian",codes:["it"]},{language:"Japanese",codes:["ja"]},{language:"Korean",codes:["ko"]},{language:"Norwegian",codes:["no"]},{language:"Polish",codes:["pl"]},{language:"Portuguese",codes:["pt","pt-BR"]},{language:"Russian",codes:["ru"]},{language:"Spanish",codes:["es","es-419","es-LATAM"]},{language:"Swedish",codes:["sv"]},{language:"Tamil",codes:["ta"]},{language:"Tamasheq",codes:["taq"]},{language:"Turkish",codes:["tr"]},{language:"Ukrainian",codes:["uk"]}],emoji:"\uD83C\uDF0D",useSystemLanguage:!1},[t.a.Medical]:{model:l.j.Nova2Medical,description:"Medical (English only)",streaming:!0,languages:[{language:"English",codes:["en","en-US"]}],emoji:"\uD83E\uDE7A",useSystemLanguage:!1}};function s(e){var n;let a=i[e],l="undefined"!=typeof navigator?navigator.language:"en-US",t=null!==(n=l.split("-").at(0))&&void 0!==n?n:"en";return a.languages.reduce((e,n)=>n.codes.includes(l)?{language:n.language,code:l}:n.codes.includes(t)?{language:n.language,code:t}:e,{language:"English",code:"en-US"})}function r(e){let n=i[e];return{model:n.model,streaming:i[e].streaming,language:n.useSystemLanguage?s(e).code:null}}},72679:(e,n,a)=>{a.d(n,{d:()=>i});var l=a(94344),t=a(79124);function i(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},[a,i]=(0,t.useMutation)(e,n.commitMutationFn),[s,r]=(0,l.useState)(null);return[e=>new Promise((n,l)=>{r(e.variables),a({...e,onError:e=>{l(e)},onCompleted:e=>{n(e)}})}),i,s]}},66213:(e,n,a)=>{a.d(n,{f:()=>d,u:()=>r});var l=a(94344),t=a(79124),i=a(97244),s=a(94559);function r(e,n,a){let l=null!=a?a:{},s=(0,i.getRequest)(n),r=(0,i.createOperationDescriptor)(s,l);if("available"!==e.check(r).status)return(0,t.fetchQuery)(e,n,l).subscribe({complete:()=>e.retain(r)})}function d(e,n){let a=(0,t.useRelayEnvironment)(),i=(0,s.lB)(()=>null!=n?n:{},[n]);(0,l.useEffect)(()=>{let n=r(a,e,i);return()=>null==n?void 0:n.unsubscribe()},[a,e,i])}},89168:(e,n,a)=>{a.d(n,{E:()=>s});var l=a(50612),t=a(85680),i=a(94344);function s(){let e=(0,t.aV)();return(0,i.useCallback)(n=>{let{error:a,id:t,label:i}=n;e({id:null!=t?t:"graphql-operation-error",level:"danger",label:null!=i?i:"object"==typeof a&&"message"in a?a.message:"Something went wrong with the response. Please try again. Our team has been notified of this issue.",message:"fieldErrors"in a?a.fieldErrors.map((e,n)=>(0,l.jsx)("p",{className:"mb-2 last:mb-0",children:e.message},n)):null,duration:5e3})},[e])}},9023:(e,n,a)=>{a.d(n,{Di:()=>t,Oe:()=>d,WO:()=>i,d_:()=>s,eQ:()=>r,er:()=>l});let l="https://drive.google.com/file/d/19ByTq6mJ3RX0V_ngplDXmYTUGljL-ro1/view",t="https://drive.google.com/file/d/1IO-XKyMT3j-NzT9MZgrW0mwF90lPKszk/view",i="https://www.lindy.ai/privacy",s="https://chat.lindy.ai/embedded/lindyEmbed/b91a6dae-29d8-4a7c-a970-62f6d853a02b",r=[{label:"Freelancer",value:"freelancer"},{label:"C-level Executive",value:"c_level_exec"},{label:"Manager",value:"manager"},{label:"Operations",value:"operations"},{label:"Founder",value:"founder"},{label:"Individual Contributor",value:"individual_contributor"},{label:"Other",value:"other"}],d=[{label:"Sales",value:"sales"},{label:"Recruiting",value:"recruiting"},{label:"High Volume Customer Support",value:"high_volume_customer_support"},{label:"Email Automation",value:"email_automation"},{label:"Scheduling",value:"scheduling"},{label:"Workflow Automation",value:"workflow_automation"},{label:"Other",value:"other"}]},88025:(e,n,a)=>{a.d(n,{P:()=>B});var l=a(50612);let t=function(){var e={alias:null,args:null,kind:"ScalarField",name:"creditAllocation",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"planType",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CurrentPlanMe",selections:[{alias:null,args:null,kind:"ScalarField",name:"isMedicalScribe",storageKey:null},{alias:null,args:null,concreteType:"SubscriptionInfo",kind:"LinkedField",name:"billingInfo",plural:!1,selections:[{alias:null,args:null,concreteType:"TrialInfo",kind:"LinkedField",name:"trialInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"expiresAt",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"portal",storageKey:null},{alias:null,args:null,concreteType:"CreditsInfo",kind:"LinkedField",name:"creditsInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"consumed",storageKey:null},e,{alias:null,args:null,kind:"ScalarField",name:"percentConsumed",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"SubscriptionPlan",kind:"LinkedField",name:"subscriptionPlan",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},n,e],storageKey:null},{alias:null,args:null,concreteType:"UpcomingPlan",kind:"LinkedField",name:"upcomingPlan",plural:!1,selections:[{alias:null,args:null,concreteType:"SubscriptionPlan",kind:"LinkedField",name:"subscriptionPlan",plural:!1,selections:[n],storageKey:null}],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"PlansModal_Identity"},{args:null,kind:"FragmentSpread",name:"UpcomingPlanMe"}],type:"Identity",abstractKey:null}}();t.hash="8c517867dc32e8857e3c4aae05d95822";var i=a(57185),s=a(12454),r=a(13813),d=a(47983),o=a(40252),u=a(51183),c=a(94344),m=a(25919);function g(e){let{allocated:n,className:a,consumed:t,percentConsumed:i,planAllocation:s,planName:g,showTooltip:p}=e,y=100-i,h=n-t,x=(0,c.useMemo)(()=>0===n?"":"".concat((0,u.$4)(null!=h?h:0)," / ").concat((0,u.$4)(null!=n?n:0)),[n,h]),f=(0,c.useMemo)(()=>p&&n!==s?(0,l.jsx)(r.I,{iconClassName:"ml-1 -mb-1 h-[18px] w-[18px]",children:(0,l.jsxs)("div",{children:["Your plan includes ",(0,u.$4)(s)," credits and"," ",(0,u.$4)(Math.abs(n-s))," one-time bonus credits."]})}):null,[n,s,p]);return(0,l.jsxs)("div",{className:(0,m.QP)("flex flex-col gap-2",a),children:[(0,l.jsxs)("div",{className:"flex items-baseline justify-between gap-4",children:[(0,l.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,l.jsx)("div",{className:"text-base font-semibold text-slate-12",children:g}),!!s&&(0,l.jsxs)("span",{className:"text-xs font-medium text-slate-10",children:["(",(0,u.$4)(s)," credits)"]})]}),(0,l.jsxs)("div",{className:"flex items-baseline gap-1 text-xs text-slate-9",children:[y>0?(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("div",{children:y>25?"Credits remaining":"Running low"}),(0,l.jsx)(d.L,{})]}):(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("div",{children:"Limit reached"}),(0,l.jsx)(o.s,{})]}),(0,l.jsxs)("div",{className:"flex items-baseline",children:[(0,l.jsx)("span",{className:"text-slate-12",children:x}),f]})]})]}),(0,l.jsx)("div",{className:"h-1 w-full rounded-full bg-gray-300 dark:bg-gray-700",children:(0,l.jsx)("div",{className:(0,m.QP)("h-1 rounded-full",y>40&&"bg-[#4DDDB2]",y<=40&&"bg-[#FA934E]",y<=20&&"bg-[#E5484D]"),style:{width:"".concat(y,"%")}})})]})}var p=a(86383),y=a(73850);let h=e=>{let{toggle:n,src:a,caption:t}=e;return(0,l.jsxs)(y.aF,{open:!0,children:[(0,l.jsxs)("div",{className:"flex w-full items-center justify-between px-4",children:[(0,l.jsx)("div",{className:"text-lg font-bold text-slate-12",children:t}),(0,l.jsx)(p.A,{className:"h-5 w-5 cursor-pointer text-slate-11",onClick:n})]}),(0,l.jsx)("iframe",{src:a,allow:"autoplay; encrypted-media",allowFullScreen:!0,title:"iframe Content",className:"h-[86vh] w-full"})]})};var x=a(19221),f=a(69507),v=a(67373),b=a(86313),k=a(79124);a(97244);var j=a(52105),w=a(5862),I=a(78512),F=a(7094);let S=(0,w._)({get:{data:F.z.object({subscriptionId:F.z.string(),periodEndDate:F.z.string().nullish(),planName:F.z.string(),cadence:F.z.nativeEnum(I.Ur),fixedPrice:F.z.number(),portal:F.z.string().nullish(),trialInfo:F.z.object({expiryDate:F.z.string()}).nullable(),subscriptionExpiryDate:F.z.string().nullable(),billingVersion:F.z.nativeEnum(I.A5)}).nullable()}});var C=a(98354),M=a(94559),E=a(79879);let K=(0,j.In)("GET","/api/identity/orb/subscriptions",S.get.data),N=(0,w._)({post:{data:F.z.object({ok:F.z.boolean()})}}),_=(0,j.In)("POST","/api/plans/subscriptions/cancel",N.post.data);var U=a(32159),L=a(6762),P=a(77576),T=a(28554),R=a(9023),D=a(76804),A=a(32419),O=a(67434),z=a(95845),V=a(81778);let $=[{value:"Too hard to use or learn",label:"Too hard to use or learn"},{value:"Too unreliable",label:"Too unreliable"},{value:"Too expensive",label:"Too expensive"},{value:"Other",label:"Other"}],q=e=>{var n,a;let{toggle:t,hide:s,isMedicalScribe:r}=e,{isMobileOnly:d}=(0,f.Y0)(),o=(0,P.U)(),u=function(e){let n=(0,c.useMemo)(()=>["identity/orb/subscriptions","get"],[]),a=(0,C.I)({queryKey:n,queryFn:async()=>{let{data:e,error:n}=await K();if(n)throw n;return e}}),l=(0,M.lB)(()=>a,[a]);return(0,E.R)(n,l)}(),g=(0,V.useRouter)(),[p,h]=(0,c.useState)(""),[x,b]=(0,c.useState)(""),[k,w]=(0,c.useState)(!1),[I,F]=(0,c.useState)("book-a-call"),S=(0,i._5)({now:new Date,trialExpiresAt:(null===(a=u.data)||void 0===a?void 0:null===(n=a.trialInfo)||void 0===n?void 0:n.expiryDate)?new Date(u.data.trialInfo.expiryDate):null}),N=(0,c.useCallback)(async()=>{if(!u.data||!o.data){let e="Cancellation returning early, no subscription or identity data. subscription: ".concat(u.data,", identity: ").concat(o.data);O.wd(e);return}w(!0);try{await (0,j.oA)(_()),A.z.capture("plan_cancelled",{"plan.lindy.id":"","plan.orb.id":"","plan.is_paywall":!1,"plan.is_trial":!!(null==S?void 0:S.isUserInTrial),"plan.fixed_price":u.data.fixedPrice,"identity.id":o.data.id,"identity.name":o.data.name,"identity.email":o.data.email,reason:p,description:x})}catch(e){O.Cp(e),w(!1),t()}g.reload()},[u.data,o.data,g,null==S?void 0:S.isUserInTrial,p,t,x]),q=(0,c.useCallback)(()=>{F("cancel")},[]),Z=(0,c.useCallback)(()=>{t();let e="".concat(R.d_,"?utm_source=lindy&utm_medium=cancel_modal&utm_campaign=qualified");window.open(e,"_blank")},[t]),B=(0,c.useMemo)(()=>(0,l.jsxs)("div",{className:(0,m.QP)("flex flex-col justify-between space-y-6 min-h-[192px]",d&&"w-screen p-6 pt-0 min-h-[400px]"),children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("div",{className:"mb-2 flex-1 text-2xl font-semibold text-slate-12",children:"Sorry to see you go!"}),(null==S?void 0:S.isUserInTrial)&&!r&&(0,l.jsxs)("div",{className:"text-sm text-slate-12",children:["You will still have access to your Free trial until"," ",(null==S?void 0:S.trialExpiryDate)&&(0,z.A)(null==S?void 0:S.trialExpiryDate,"EEEE, MMMM d, yyyy")]})]}),"book-a-call"===I&&(0,l.jsx)("div",{className:"mb-2 text-sm font-semibold text-slate-12",children:"Can we help you get set up?"}),"cancel"===I&&(0,l.jsx)("div",{className:"mb-2 text-sm font-semibold text-slate-12",children:"Why are you cancelling?"}),"book-a-call"===I&&(0,l.jsx)("div",{className:"text-sm text-slate-12",children:"Book a consultation with the Lindy team for a custom agent workflow instead."}),"cancel"===I&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(U.m,{options:$,value:p,onChange:h}),p&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"my-2 text-sm font-semibold text-slate-12",children:"Anything else you would like us to know?"}),(0,l.jsx)(L.f,{className:"bg-slate-1",rows:3,onChange:b,value:x})]})]})]}),(0,l.jsxs)("div",{className:"mt-4 flex w-auto flex-row justify-end gap-x-2",children:["book-a-call"===I&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(v.$,{onClick:q,level:"outline",children:"No thanks"}),(0,l.jsx)(v.$,{onClick:Z,type:"submit",className:"ml-3",children:"Book call"})]}),"cancel"===I&&(0,l.jsx)(v.$,{onClick:N,type:"submit",className:"ml-3",disabled:!p||k,icon:k&&(0,l.jsx)(D.y,{}),children:"Cancel Subscription"})]})]}),[d,N,q,Z,I,null==S?void 0:S.isUserInTrial,null==S?void 0:S.trialExpiryDate,r,p,x,k]);return d?(0,l.jsx)(T.X,{isOpen:!s,onClose:t,detent:"content-height",dismissOnTapOutside:!0,children:B}):(0,l.jsx)(y.aF,{open:!s,setClosed:t,children:B})};var Z=a(35111);function B(e){var n,a,r,d,o,u;let p=(0,k.useFragment)(t,e.identityFragmentRef),{isMobileOnly:y}=(0,f.Y0)(),j=null===(n=p.billingInfo)||void 0===n?void 0:n.creditsInfo.consumed,w=null===(a=p.billingInfo)||void 0===a?void 0:a.creditsInfo.percentConsumed,I=null===(r=p.billingInfo)||void 0===r?void 0:r.creditsInfo.creditAllocation,F=null===(d=p.billingInfo)||void 0===d?void 0:d.subscriptionPlan.creditAllocation,S=null===(o=(0,b.useSearchParams)())||void 0===o?void 0:o.has("upgrade"),{toggle:C,hide:M,setClosed:E}=(0,x.j)(!S),{toggle:K,hide:N,setClosed:_}=(0,x.j)(),[U,L]=(0,c.useState)(!1),P=(0,c.useCallback)(()=>{L(!U)},[U]);if(!p.billingInfo)return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,l.jsx)("div",{className:"text-base font-semibold text-slate-12",children:"Current plan"}),(0,l.jsx)("div",{className:"py-2 text-xs text-[#FA934E]",children:"You have no active subscription. Upgrade now to keep using Lindy."}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)(v.$,{onClick:C,children:"Upgrade"}),(0,l.jsx)("div",{className:"flex flex-1 flex-row-reverse"})]})]}),(0,l.jsx)(s.E,{identityFragmentRef:p,toggle:E,hide:M})]});let T=(0,i._5)({now:new Date,trialExpiresAt:null===(u=p.billingInfo.trialInfo)||void 0===u?void 0:u.expiresAt}).isUserInTrial,R=p.billingInfo.subscriptionPlan.name.replace("Lindy ","").replace(" Monthly",""),D=function(e){var n,a;if(!e.billingInfo)return{content:"",show:!1,enabled:!1};let l=e.billingInfo.subscriptionPlan.planType;if(!l)return{content:"",show:!1,enabled:!1};let t=null===(a=e.billingInfo.upcomingPlan)||void 0===a?void 0:null===(n=a.subscriptionPlan)||void 0===n?void 0:n.planType;return"ProMonthly"===t?{content:"Cancel subscription",show:!0,enabled:!0}:"ProMonthly"!==l?{content:"",show:!1,enabled:!1}:"FreeMonthly"===t?{content:"Cancelled",show:!0,enabled:!1}:t?{content:"",show:!1,enabled:!1}:{content:"Cancel subscription",show:!0,enabled:!0}}(p);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:(0,m.QP)("flex flex-col gap-4 pb-4",y&&"w-full"),children:[(0,l.jsx)("div",{className:"text-base font-semibold text-slate-12",children:"Current plan"}),(0,l.jsx)(g,{allocated:null!=I?I:0,consumed:null!=j?j:0,planName:R,percentConsumed:null!=w?w:0,planAllocation:null!=F?F:0,showTooltip:!0}),100===w&&(0,l.jsx)("div",{className:"py-2 text-xs text-[#BD4B00]",children:"You’ve used your credits, all tasks are now on hold. Upgrade now to keep using Lindy."})]}),(0,l.jsxs)("div",{className:(0,m.QP)("flex",y&&"flex-col gap-2 items-start"),children:[(0,l.jsxs)(v.$,{size:"sm",onClick:C,children:["Upgrade",T?" to paid plan":""]}),!y&&!T&&(0,l.jsx)(v.$,{size:"sm",onClick:P,level:"outline",className:(0,m.QP)("decoration-transparent",!y&&"ml-2"),children:"Manage subscription"}),!y&&(0,l.jsx)("div",{className:"grow"}),D.show&&(0,l.jsx)(v.$,{size:"sm",onClick:K,level:"outline",className:(0,m.QP)("decoration-transparent",!y&&"ml-2"),disabled:!D.enabled,children:D.content})]}),(0,l.jsx)(Z._,{identityFragmentRef:p}),(0,l.jsx)(s.E,{identityFragmentRef:p,toggle:E,hide:M}),(0,l.jsx)(q,{toggle:_,hide:N,isMedicalScribe:p.isMedicalScribe}),U&&(0,l.jsx)(h,{toggle:P,src:p.billingInfo.portal||"",caption:"Manage Subscription"})]})}},76450:(e,n,a)=>{a.d(n,{g:()=>S});var l=a(50612);let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PaymentMethodMe",selections:[{alias:null,args:null,concreteType:"SubscriptionInfo",kind:"LinkedField",name:"billingInfo",plural:!1,selections:[{alias:null,args:null,concreteType:"PaymentInfo",kind:"LinkedField",name:"paymentInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"brand",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"expMonth",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"expYear",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"last4",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PaymentFailure",kind:"LinkedField",name:"lastPaymentFailure",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"amount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"date",storageKey:null}],storageKey:null}],storageKey:null}],type:"Identity",abstractKey:null};t.hash="aa5b4376d4268909e6fc6d2916c4ba83";var i=a(52105),s=a(5862),r=a(7094);let d=(0,s._)({get:{data:r.z.object({brand:r.z.string(),expMonth:r.z.number(),expYear:r.z.number(),last4:r.z.string()}).nullable()},post:{body:r.z.object({originUrl:r.z.string()}),data:r.z.object({sessionId:r.z.string(),clientSecret:r.z.string()})}}),o=(0,i.In)("POST","/api/billing/paymentMethod",d.post.data);var u=a(73850),c=a(31634),m=a(76804),g=a(32419),p=a(96006),y=a(84231),h=a(86313),x=a(94344);let f=e=>{var n;let{hide:a,toggle:t}=e,[i,s]=(0,x.useState)(""),r=null!==(n=(0,h.usePathname)())&&void 0!==n?n:"",d=(0,y.c)("pk_live_51H3l2wJPqlxcdxdz8lNcPyfiM3SnTPGIuwpfxdKuMuFXZpquyiBMFN6F0ptM4cmfqOSDO3PyzhZHYa7b10jaiJB000EecoB6EM"),f=(0,x.useCallback)(async()=>{let{data:e}=await o({body:{originUrl:r}});g.z.capture("update_payment_method"),e&&"clientSecret"in e&&s(e.clientSecret)},[r]);return(0,x.useEffect)(()=>{if(a){s("");return}f()},[a,f]),(0,l.jsxs)(u.aF,{open:!a,setClosed:t,children:[!i&&(0,l.jsx)(c.f,{center:!0,className:"h-screen",children:(0,l.jsx)(m.y,{})}),i&&(0,l.jsx)(p.EmbeddedCheckoutProvider,{stripe:d,options:{clientSecret:i},children:(0,l.jsx)(p.EmbeddedCheckout,{className:"h-lvh content-center overflow-auto"})})]})};var v=a(15727),b=a(69507),k=a(40252),j=a(682),w=a(79124);a(97244);var I=a(25919);function F(e){return(0,l.jsxs)("div",{className:"mr-16 flex flex-row gap-2 text-xs text-[#687076]",children:[(0,l.jsx)("div",{className:"uppercase",children:e.brand}),(0,l.jsxs)("div",{children:["****",e.last4]}),(0,l.jsxs)("div",{children:["Exp\xa0",e.expMonth,"/",e.expYear]})]})}function S(e){var n,a;let i=(0,w.useFragment)(t,e.identityFragmentRef),{isMobileOnly:s}=(0,b.Y0)(),r=(0,v.j)(),d=null===(n=i.billingInfo)||void 0===n?void 0:n.paymentInfo,o=null===(a=i.billingInfo)||void 0===a?void 0:a.lastPaymentFailure,u=o?(0,j.Vs)(new Date(o.date)):0;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:(0,I.QP)("flex flex-col gap-3",s&&"w-full"),children:(0,l.jsx)("div",{className:"text-base font-semibold text-slate-12",children:"Payment method"})}),(0,l.jsxs)("div",{className:(0,I.QP)("flex flex-row items-start",s&&"mt-2"),children:[d&&(0,l.jsx)(F,{brand:d.brand,last4:d.last4,expMonth:d.expMonth,expYear:d.expYear}),(0,l.jsx)("div",{className:"cursor-pointer text-xs font-semibold text-slate-12",onClick:r.onOpen,children:"Edit"})]}),!!o&&(0,l.jsxs)("div",{className:" my-2 flex items-center gap-2 rounded-xl bg-slate-2 p-3 align-middle leading-6 text-slate-11 ",children:[(0,l.jsx)("div",{className:"pt-[1px]",children:(0,l.jsx)(k.s,{})}),(0,l.jsxs)("div",{className:"text-left text-sm text-slate-12",children:[u>0?(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{children:["Your last payment for"," ",(0,l.jsxs)("span",{className:"font-semibold",children:["$",o.amount]})," ","failed on ",o.date,"."]}),(0,l.jsxs)("div",{children:["Make a payment in"," ",(0,l.jsxs)("span",{className:"font-semibold",children:[u," ",1===u?"day":"days"]})," ","to avoid losing access to Lindy."]})]}):(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{children:["Your last payment for"," ",(0,l.jsxs)("span",{className:"font-semibold",children:["$",o.amount]})," ","failed on ",o.date,"."]}),(0,l.jsx)("div",{children:"Make a payment now to restore access to Lindy."})]}),(0,l.jsxs)("div",{children:["Please edit your payment method then click"," ",(0,l.jsx)("span",{className:"font-semibold",children:"Manage Subscription"})," to retry payment."]})]})]}),(0,l.jsx)(f,{toggle:r.onToggle,hide:!r.isOpen})]})}},91281:(e,n,a)=>{a.d(n,{zu:()=>ea});var l=a(50612);let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AccountSection_Identity",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{args:null,kind:"FragmentSpread",name:"AvatarSectionMeFragment"},{args:null,kind:"FragmentSpread",name:"DeleteAccountSectionMeFragment"},{args:null,kind:"FragmentSpread",name:"UpdatePasswordSectionMeFragment"},{args:null,kind:"FragmentSpread",name:"UpdateEmailSectionMeFragment"}],type:"Identity",abstractKey:null};t.hash="bd18eac44d626d844a45d67fd030a10f";let i=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"id"},{defaultValue:null,kind:"LocalArgument",name:"name"}],n=[{fields:[{kind:"Variable",name:"id",variableName:"id"},{kind:"Variable",name:"name",variableName:"name"}],kind:"ObjectValue",name:"input"}],a={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},l={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"AccountSectionUpdateNameMutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"updateIdentity",plural:!1,selections:[a,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UpdateIdentityOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"identity",plural:!1,selections:[l,t],storageKey:null}],storageKey:null}],type:"MutationUpdateIdentitySuccess",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"AccountSectionUpdateNameMutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"updateIdentity",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UpdateIdentityOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"identity",plural:!1,selections:[l,t,{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationUpdateIdentitySuccess",abstractKey:null}],storageKey:null}]},params:{cacheID:"d0c0f7b7e87d5fee36b6cdc5e4662e64",id:null,metadata:{},name:"AccountSectionUpdateNameMutation",operationKind:"mutation",text:"mutation AccountSectionUpdateNameMutation(\n  $id: ID!\n  $name: String!\n) {\n  updateIdentity(input: {id: $id, name: $name}) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationUpdateIdentitySuccess {\n      data {\n        identity {\n          id\n          name\n          nodeId\n        }\n      }\n    }\n  }\n}\n"}}}();i.hash="079891f735feac8bd52c9a92a5350e2f";var s=a(85680);a(66213);var r=a(67094),d=a(94344),o=a(79124);function u(e){return(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"mb-1 text-sm font-medium text-slate-12",children:e.label}),(0,l.jsx)("p",{className:"text-sm text-slate-11",children:e.value})]})}function c(e){let n=(0,d.useCallback)(()=>{e.onClick()},[e]);return(0,l.jsx)("button",{onClick:n,className:"cursor-pointer text-center text-sm font-medium text-blue-9 hover:text-blue-10 active:opacity-50 sm:items-center sm:p-0",children:"Edit"})}var m=a(67373),g=a(20335);function p(e){let[n,a]=(0,d.useState)(e.value),t=(0,d.useRef)(null);(0,d.useEffect)(()=>{var e;null===(e=t.current)||void 0===e||e.focus({preventScroll:!0})},[t]);let i=(0,d.useCallback)(()=>{e.onCancel()},[e]),s=(0,d.useCallback)(async a=>{a.preventDefault(),e.onSave(n)},[e,n]),r=(0,d.useCallback)(e=>{"Escape"===e.key&&i()},[i]);return(0,l.jsxs)("form",{onKeyDown:r,className:"flex w-full justify-between gap-4",onSubmit:s,children:[(0,l.jsx)(g.pd,{type:"text",spellCheck:!1,value:n,ref:t,required:!0,onChange:a,className:"mx-1 flex-1 p-2 text-sm font-medium","data-testid":"edit.full.name",title:"Copy"}),(0,l.jsxs)("div",{className:"flex shrink-0 items-center gap-3",children:[(0,l.jsx)(m.$,{onClick:i,size:"md",className:"text-xs",level:"outline",children:"Cancel"}),(0,l.jsx)(m.$,{type:"submit",size:"md",className:"text-xs",children:"Update"})]})]})}function y(e){let[n,a]=(0,d.useState)(!1),t=(0,d.useCallback)(()=>{a(e=>!e)},[]),i=(0,d.useCallback)(n=>{e.onSave(n),t()},[t,e]);return n?(0,l.jsx)(p,{value:e.value,onCancel:t,onSave:i}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u,{value:e.value,label:"Full Name"}),(0,l.jsx)(c,{onClick:t})]})}function h(e){return(0,l.jsx)("div",{className:"flex h-[40px] items-end justify-between",children:e.children})}let x={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AvatarSectionMeFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"avatar",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null}],type:"Identity",abstractKey:null};x.hash="d86749fa6dfadf87cfbcad44de6996c3";let f=function(){var e={defaultValue:null,kind:"LocalArgument",name:"file"},n={defaultValue:null,kind:"LocalArgument",name:"id"},a=[{fields:[{kind:"Variable",name:"file",variableName:"file"},{kind:"Variable",name:"id",variableName:"id"}],kind:"ObjectValue",name:"input"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},t={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},s={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"avatar",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[e,n],kind:"Fragment",metadata:null,name:"AvatarSectionUpdateMutation",selections:[{alias:null,args:a,concreteType:null,kind:"LinkedField",name:"updateIdentityAvatar",plural:!1,selections:[l,t,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UpdateIdentityAvatarOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"identity",plural:!1,selections:[i,s],storageKey:null}],storageKey:null}],type:"MutationUpdateIdentityAvatarSuccess",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e],kind:"Operation",name:"AvatarSectionUpdateMutation",selections:[{alias:null,args:a,concreteType:null,kind:"LinkedField",name:"updateIdentityAvatar",plural:!1,selections:[l,t,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UpdateIdentityAvatarOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"identity",plural:!1,selections:[i,s,{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationUpdateIdentityAvatarSuccess",abstractKey:null}],storageKey:null}]},params:{cacheID:"79882c58178f309cc798e2e29c902d47",id:null,metadata:{},name:"AvatarSectionUpdateMutation",operationKind:"mutation",text:"mutation AvatarSectionUpdateMutation(\n  $id: ID!\n  $file: UploadAvatarFileInput\n) {\n  updateIdentityAvatar(input: {id: $id, file: $file}) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationUpdateIdentityAvatarSuccess {\n      data {\n        identity {\n          id\n          avatar {\n            url\n          }\n          nodeId\n        }\n      }\n    }\n  }\n}\n"}}}();f.hash="03b528e57cd602125ffe583a6b74a26d";var v=a(97203);function b(e){let{children:n}=e;return(0,l.jsx)("div",{className:"grid grid-cols-[3fr,2fr] items-center gap-4",children:n})}function k(e){var n;let a=(0,o.useFragment)(x,e.identityFragmentRef),[t]=(0,o.useMutation)(f),i=(0,s.aV)(),r=(0,d.useCallback)(()=>{c.current&&(c.current.value="",c.current.click())},[]),u=(0,d.useCallback)(()=>{t({variables:{id:a.id,file:null},optimisticResponse:{updateIdentityAvatar:{__typename:"MutationUpdateIdentityAvatarSuccess",__isError:"MutationUpdateIdentityAvatarSuccess",message:"",data:{identity:{nodeId:a.nodeId,id:a.id,avatar:null}}}},onCompleted:e=>{e.updateIdentityAvatar.message&&i({level:"danger",label:"Error deleting avatar",message:"Please try again later"})}})},[t,a.id,a.nodeId,i]),c=(0,d.useRef)(null),g=(0,d.useCallback)(async e=>{var n;let l=null===(n=e.target.files)||void 0===n?void 0:n[0];if(!l)return;let s=await new Promise((e,n)=>{let a=new FileReader;a.readAsDataURL(l),a.addEventListener("load",()=>e(a.result)),a.addEventListener("error",e=>n(e))}),r=await new Promise(e=>{let n=new Image;n.addEventListener("load",()=>e({width:n.width,height:n.height})),n.src=s});t({variables:{id:a.id,file:{upload:l,widthPx:r.width,heightPx:r.height}},uploadables:{"file.upload":l},optimisticResponse:{updateIdentityAvatar:{__typename:"MutationUpdateIdentityAvatarSuccess",__isError:"MutationUpdateIdentityAvatarSuccess",message:"",data:{identity:{id:a.id,nodeId:a.nodeId,avatar:{url:s}}}}},onCompleted:e=>{e.updateIdentityAvatar.message&&i({level:"danger",label:"Error uploading avatar",message:e.updateIdentityAvatar.message})}})},[a.id,t,a.nodeId,i]),p=null===(n=a.avatar)||void 0===n?void 0:n.url,y=!!p,h=a.name;return(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"mb-2 text-sm font-medium text-slate-12",children:"Profile picture"}),(0,l.jsxs)(b,{children:[(0,l.jsx)("div",{className:"relative w-fit",children:(0,l.jsx)(v.e,{variant:"circle",size:"xxl",value:h,url:p,className:"ml-0.5 hover:ring-2",clickable:!0,onClick:r})}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(m.$,{level:"primary",className:"w-full",size:"sm",onClick:r,children:"Upload Avatar"}),(0,l.jsx)(m.$,{level:"danger",className:"w-full",size:"sm",disabled:!y,onClick:u,children:"Delete Avatar"})]})]}),(0,l.jsx)("input",{ref:c,type:"file",accept:"image/png, image/jpeg",className:"hidden",onChange:g})]})}a(97244);let j={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DeleteAccountSectionMeFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"Identity",abstractKey:null};j.hash="e476518744f9a910818bb5daf55c6935";var w=a(73850),I=a(15727),F=a(28554),S=a(94309),C=a(40453),M=a(81778),E=a(18153),K=a(7750);function N(e){let n=(0,o.useFragment)(j,e.identityFragmentRef),a=(0,M.useRouter)(),t=(0,I.j)(),[i,s]=(0,d.useState)(null),[r,u]=(0,o.useMutation)(S.H),c=(0,d.useCallback)(()=>{t.onClose(),s(null)},[t]),g=(0,d.useCallback)(e=>{s(null),r({variables:{input:{id:n.id,validation:e.email}},onCompleted:e=>{if(e.deleteIdentity.message){s(e.deleteIdentity.message);return}a.replace("/signup")},onError:e=>{s("An unexpected error occurred while attempting to delete the account: ".concat((0,C.SP)(e)))}})},[r,n.id,a]);return(0,l.jsxs)("div",{children:[(0,l.jsx)(m.$,{level:"danger",onClick:t.onOpen,children:"Delete Account"}),E.XF?(0,l.jsx)(F.X,{isOpen:t.isOpen,onClose:c,detent:"content-height",dismissOnTapOutside:!0,children:(0,l.jsx)(K.x,{onCancel:c,onSubmit:g,errorMessage:i})}):(0,l.jsx)(w.aF,{open:t.isOpen,setClosed:c,children:(0,l.jsx)(K.x,{onCancel:c,onSubmit:g,errorMessage:i,isLoading:u})})]})}let _=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"nodeId"}],n=[{kind:"Variable",name:"id",variableName:"nodeId"}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"UpdateEmailSectionMeRefetchQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"UpdateEmailSectionMeFragment"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"UpdateEmailSectionMeRefetchQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"email",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pendingEmail",storageKey:null}],type:"Identity",abstractKey:null}],storageKey:null}]},params:{cacheID:"260f9db938b95e12e86dd7b8ac7ecbb2",id:null,metadata:{},name:"UpdateEmailSectionMeRefetchQuery",operationKind:"query",text:"query UpdateEmailSectionMeRefetchQuery(\n  $nodeId: ID!\n) {\n  node(id: $nodeId) {\n    __typename\n    ...UpdateEmailSectionMeFragment\n    nodeId\n  }\n}\n\nfragment UpdateEmailSectionMeFragment on Identity {\n  id\n  nodeId\n  name\n  email\n  pendingEmail\n}\n"}}}();_.hash="a49a4ab622b24d2318e52b640dbb2eac";let U={argumentDefinitions:[],kind:"Fragment",metadata:{refetch:{connection:null,fragmentPathInResult:["node"],operation:_,identifierInfo:{identifierField:"nodeId",identifierQueryVariableName:"id"}}},name:"UpdateEmailSectionMeFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"email",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pendingEmail",storageKey:null}],type:"Identity",abstractKey:null};U.hash="a49a4ab622b24d2318e52b640dbb2eac";let L=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},l={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"pendingEmail",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"UpdateEmailSectionUpdateMutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"requestIdentityEmailUpdate",plural:!1,selections:[a,l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"RequestIdentityEmailUpdateOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"identity",plural:!1,selections:[t,i],storageKey:null}],storageKey:null}],type:"MutationRequestIdentityEmailUpdateSuccess",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"UpdateEmailSectionUpdateMutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"requestIdentityEmailUpdate",plural:!1,selections:[a,l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"RequestIdentityEmailUpdateOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"identity",plural:!1,selections:[t,i,{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationRequestIdentityEmailUpdateSuccess",abstractKey:null}],storageKey:null}]},params:{cacheID:"2eb30c5c6f221c4cf052b72ab4c985ec",id:null,metadata:{},name:"UpdateEmailSectionUpdateMutation",operationKind:"mutation",text:"mutation UpdateEmailSectionUpdateMutation(\n  $input: RequestIdentityEmailUpdateInput!\n) {\n  requestIdentityEmailUpdate(input: $input) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationRequestIdentityEmailUpdateSuccess {\n      data {\n        identity {\n          id\n          pendingEmail\n          nodeId\n        }\n      }\n    }\n  }\n}\n"}}}();L.hash="e980e99a9d55b623dd330386edcb7f19";let P=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},l={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"pendingEmail",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"UpdateEmailSectionResendMutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"resendIdentityEmailUpdate",plural:!1,selections:[a,l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ResendIdentityEmailUpdateOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"identity",plural:!1,selections:[t,i],storageKey:null}],storageKey:null}],type:"MutationResendIdentityEmailUpdateSuccess",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"UpdateEmailSectionResendMutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"resendIdentityEmailUpdate",plural:!1,selections:[a,l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ResendIdentityEmailUpdateOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"identity",plural:!1,selections:[t,i,{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationResendIdentityEmailUpdateSuccess",abstractKey:null}],storageKey:null}]},params:{cacheID:"8bc058f099ff6f9096603e83cab831cf",id:null,metadata:{},name:"UpdateEmailSectionResendMutation",operationKind:"mutation",text:"mutation UpdateEmailSectionResendMutation(\n  $input: ResendIdentityEmailUpdateInput!\n) {\n  resendIdentityEmailUpdate(input: $input) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationResendIdentityEmailUpdateSuccess {\n      data {\n        identity {\n          id\n          pendingEmail\n          nodeId\n        }\n      }\n    }\n  }\n}\n"}}}();P.hash="8c5f329dd2168bb5a5f4d7cf416c060b";let T=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},l={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"pendingEmail",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"UpdateEmailSectionCancelMutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"cancelIdentityEmailUpdate",plural:!1,selections:[a,l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CancelIdentityEmailUpdateOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"identity",plural:!1,selections:[t,i],storageKey:null}],storageKey:null}],type:"MutationCancelIdentityEmailUpdateSuccess",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"UpdateEmailSectionCancelMutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"cancelIdentityEmailUpdate",plural:!1,selections:[a,l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CancelIdentityEmailUpdateOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"identity",plural:!1,selections:[t,i,{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationCancelIdentityEmailUpdateSuccess",abstractKey:null}],storageKey:null}]},params:{cacheID:"0856b0d79fb0988326224c8dee70e80c",id:null,metadata:{},name:"UpdateEmailSectionCancelMutation",operationKind:"mutation",text:"mutation UpdateEmailSectionCancelMutation(\n  $input: CancelIdentityEmailUpdateInput!\n) {\n  cancelIdentityEmailUpdate(input: $input) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationCancelIdentityEmailUpdateSuccess {\n      data {\n        identity {\n          id\n          pendingEmail\n          nodeId\n        }\n      }\n    }\n  }\n}\n"}}}();T.hash="6a24027824d2c54d4e2ddb619ffbc269";var R=a(91534);function D(e,n){let a=e.getOperationRoot(n),l=e.getRootField(n);a&&e.delete(a.getDataID()),l&&e.delete(l.getDataID())}var A=a(67434);function O(e){let n=(0,d.useCallback)(()=>{e.onResend(e.email)},[e]);return(0,l.jsxs)("div",{className:"flex flex-col gap-y-3 rounded-lg bg-warning-3 p-3 py-4 text-sm text-slate-12",children:[(0,l.jsxs)("div",{children:["Check your email ",(0,l.jsx)("span",{className:"font-bold",children:e.email})," to confirm your new address - the change won’t take effect until confirmed."]}),(0,l.jsxs)("div",{className:"flex gap-4 font-bold",children:[(0,l.jsx)(m.$,{size:"sm",level:"outline",className:"border-warning-6 hover:bg-warning-4 active:bg-warning-5",onClick:n,children:"Resend email confirmation"}),(0,l.jsx)(m.$,{size:"sm",level:"outline",className:"border-warning-6 hover:bg-warning-4 active:bg-warning-5",onClick:e.onCancel,children:"Cancel change"})]})]})}var z=a(40985),V=a(25919);function $(e){let[n,a]=(0,d.useState)(""),[t,i]=(0,d.useState)(""),s=(0,d.useCallback)(a=>{a.preventDefault(),e.onSubmit({newEmail:n,password:t})},[e,n,t]);return(0,l.jsxs)("form",{className:(0,V.QP)("space-y-6",E.XF&&"w-screen p-6 pt-0"),onSubmit:s,children:[(0,l.jsx)("div",{className:"flex-1 text-2xl font-medium text-slate-12",children:"Change email"}),(0,l.jsx)(z.R,{className:"w-full",label:"Enter new email address",id:"newEmail",name:"newEmail",type:"email",required:!0,value:n,onChange:a}),(0,l.jsx)(z.R,{className:"w-full",label:"Existing password",id:"verifypassword",autoComplete:"off",name:"verifypassword",type:"password",required:!0,value:t,onChange:i}),(0,l.jsx)("div",{className:"text-xs text-slate-11",children:"We ask for your password to verify your identity."}),(0,l.jsx)("div",{className:"text-slate-12",children:"Check your new email address for a verification link to finalize changes."}),(0,l.jsxs)("div",{className:"mt-4 flex w-auto flex-row justify-end gap-x-2",children:[(0,l.jsx)(m.$,{level:"outline",onClick:e.onCancel,children:"Cancel"}),(0,l.jsx)(m.$,{type:"submit",className:"ml-3",children:"Submit"})]}),e.errorMessage&&(0,l.jsx)("div",{className:"flex items-start rounded-lg border border-danger-6 bg-danger-2 p-4 text-sm text-slate-12",children:e.errorMessage})]})}var q=a(51580),Z=a(76971);function B(e){var n;let[a,t]=(0,o.useRefetchableFragment)(U,e.identityFragmentRef),[i]=(0,o.useMutation)(L),[r]=(0,o.useMutation)(P),[m]=(0,o.useMutation)(T),g=(0,d.useCallback)(()=>{(0,d.startTransition)(()=>{t({nodeId:a.nodeId},{fetchPolicy:"store-and-network"})})},[t,a.nodeId]);n=a.id,(0,q.S)(Z.B.identity,"emailUpdated",n,()=>{g()});let p=(0,I.j)(),y=(0,s.aV)(),[x,f]=(0,d.useState)(),v=(0,d.useCallback)(e=>{if(e.newEmail===a.email){f("New email cannot be the same as the current email.");return}f(void 0),i({variables:{input:{id:a.id,password:e.password,previousEmail:a.email,newEmail:e.newEmail}},optimisticResponse:{requestIdentityEmailUpdate:{__typename:"MutationRequestIdentityEmailUpdateSuccess",__isError:"MutationRequestIdentityEmailUpdateSuccess",message:"",data:{identity:{id:a.id,nodeId:a.nodeId,pendingEmail:e.newEmail}}}},updater:(e,n)=>{if(D(e,"requestIdentityEmailUpdate"),(null==n?void 0:n.requestIdentityEmailUpdate.__typename)!=="MutationRequestIdentityEmailUpdateSuccess"){f(null==n?void 0:n.requestIdentityEmailUpdate.message);return}p.onClose()},onError:e=>{A.Cp(e),(0,R.T)(e),f("An unexpected error occurred while attempting to update the email.")}})},[p,i,a]),b=(0,d.useCallback)(e=>{r({variables:{input:{id:a.id,name:a.name,email:e}},optimisticResponse:{resendIdentityEmailUpdate:{__typename:"MutationResendIdentityEmailUpdateSuccess",__isError:"MutationResendIdentityEmailUpdateSuccess",message:"",data:{identity:{id:a.id,nodeId:a.nodeId,pendingEmail:e}}}},onCompleted:e=>{e.resendIdentityEmailUpdate.message&&y({level:"danger",label:"Error",message:e.resendIdentityEmailUpdate.message,duration:3e3})},onError:e=>{A.Cp(e),(0,R.T)(e),y({level:"danger",label:"Error",message:"An unexpected error occurred while attempting to resend the email change.",duration:3e3})}})},[a,r,y]),k=(0,d.useCallback)(()=>{m({variables:{input:{id:a.id}},optimisticResponse:{cancelIdentityEmailUpdate:{__typename:"MutationCancelIdentityEmailUpdateSuccess",__isError:"MutationCancelIdentityEmailUpdateSuccess",message:"",data:{identity:{id:a.id,nodeId:a.nodeId,pendingEmail:null}}}},onCompleted:e=>{e.cancelIdentityEmailUpdate.message&&y({level:"danger",label:"Error",message:e.cancelIdentityEmailUpdate.message,duration:3e3})},onError:e=>{A.Cp(e),(0,R.T)(e),y({level:"danger",label:"Error",message:"An unexpected error occurred while attempting to cancel the email change.",duration:3e3})}})},[m,a,y]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(h,{children:[(0,l.jsx)(u,{value:a.email,label:"Email address"}),!a.pendingEmail&&(0,l.jsx)(c,{onClick:p.onToggle})]}),a.pendingEmail&&a.pendingEmail!==a.email&&(0,l.jsx)(O,{email:a.pendingEmail,onResend:b,onCancel:k}),E.XF?(0,l.jsx)(F.X,{isOpen:p.isOpen,onClose:p.onClose,detent:"content-height",dismissOnTapOutside:!0,children:(0,l.jsx)($,{onCancel:p.onClose,onSubmit:v,errorMessage:x})}):(0,l.jsx)(w.aF,{open:p.isOpen,setClosed:p.onClose,children:(0,l.jsx)($,{onCancel:p.onClose,onSubmit:v,errorMessage:x})})]})}let Q={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UpdatePasswordSectionMeFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"email",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasPassword",storageKey:null}],type:"Identity",abstractKey:null};Q.hash="c46ced586c2adb0c47f672e26f97d461";let W=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:null,kind:"LinkedField",name:"updateIdentityPassword",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"UpdatePasswordSectionMutation",selections:n,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"UpdatePasswordSectionMutation",selections:n},params:{cacheID:"2d2c89655651de7f7806865db1e646a9",id:null,metadata:{},name:"UpdatePasswordSectionMutation",operationKind:"mutation",text:"mutation UpdatePasswordSectionMutation(\n  $input: UpdateIdentityPasswordInput!\n) {\n  updateIdentityPassword(input: $input) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n  }\n}\n"}}}();W.hash="d5330125e0f7cd13e3dc3044013d1452";var H=a(30900),Y=a(72679),X=a(89168),G=a(44646);function J(e){let[n,a]=(0,d.useState)(""),[t,i]=(0,d.useState)(""),[s,r]=(0,d.useState)(""),o=(0,d.useCallback)(async a=>{a.preventDefault(),e.onSubmit({previousPassword:n,newPassword:t,confirmPassword:s})},[n,t,s,e]);return(0,l.jsxs)("form",{className:(0,V.QP)("space-y-6",E.XF&&"w-screen p-6 pt-0"),onSubmit:o,children:[(0,l.jsx)("div",{className:"flex-1 text-2xl font-medium text-slate-12",children:"Change password"}),e.errorMessage&&(0,l.jsx)(H.F,{type:"error",withIcon:!0,children:e.errorMessage}),(0,l.jsx)(z.R,{className:"w-full",label:"Enter old password",id:"oldpassword","data-testid":"old.password",name:"oldpassword",type:"password",autoComplete:"current-password",required:!0,value:n,onChange:a}),(0,l.jsx)(z.R,{className:"w-full",label:"Enter new password",id:"newpassword","data-testid":"new.password",name:"newpassword",type:"password",autoComplete:"current-password",required:!0,value:t,onChange:i}),(0,l.jsx)(z.R,{className:"w-full",label:"Confirm new password",id:"confirmPassword","data-testid":"confirm.password",name:"confirmPassword",type:"password",required:!0,value:s,onChange:r}),(0,l.jsxs)("div",{className:"mt-4 flex w-auto flex-row justify-end gap-x-2",children:[(0,l.jsx)(m.$,{level:"outline",onClick:e.onCancel,children:"Cancel"}),(0,l.jsx)(m.$,{type:"submit","data-testid":"submit",className:"ml-3",isLoading:e.isSubmitting,children:"Change password"})]})]})}let ee=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},l={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ResetIdentityPasswordMutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"resetIdentityPassword",plural:!1,selections:[a,l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ResetIdentityPasswordOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"identity",plural:!1,selections:[t],storageKey:null}],storageKey:null}],type:"MutationResetIdentityPasswordSuccess",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ResetIdentityPasswordMutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"resetIdentityPassword",plural:!1,selections:[a,l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ResetIdentityPasswordOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"identity",plural:!1,selections:[t,{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationResetIdentityPasswordSuccess",abstractKey:null}],storageKey:null}]},params:{cacheID:"1103693eefb0908c6e453da4158d0375",id:null,metadata:{},name:"ResetIdentityPasswordMutation",operationKind:"mutation",text:"mutation ResetIdentityPasswordMutation(\n  $input: ResetIdentityPasswordInput!\n) {\n  resetIdentityPassword(input: $input) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationResetIdentityPasswordSuccess {\n      data {\n        identity {\n          id\n          nodeId\n        }\n      }\n    }\n  }\n}\n"}}}();function en(e){let n=(0,o.useFragment)(Q,e.identityFragmentRef),[a,t]=(0,o.useMutation)(W),[i,s]=(0,Y.d)(ee),{isOpen:r,onOpen:u,onClose:c}=(0,I.j)(),[g,p]=(0,d.useState)(!1),[y,h]=(0,d.useState)(),x=(0,X.E)(),f=(0,d.useCallback)(()=>{c(),h(void 0)},[c]),v=(0,d.useCallback)(e=>{if(h(void 0),e.newPassword!==e.confirmPassword){h("Please make sure the new password and confirmation match.");return}a({variables:{input:{email:n.email,newPassword:e.newPassword,previousPassword:e.previousPassword}},onError:()=>{h("An unexpected error occurred. Please try again or contact support if the issue persists at support@lindy.ai.")},updater:(e,n)=>{if(D(e,"updateIdentityPassword"),(null==n?void 0:n.updateIdentityPassword.__typename)!=="MutationUpdateIdentityPasswordSuccess"){h(null==n?void 0:n.updateIdentityPassword.message);return}c()}})},[a,n.email,c]),b=(0,d.useCallback)(async()=>{if(n.hasPassword)u();else{let e=await i({variables:{input:{id:n.id}}});e.resetIdentityPassword.data||x({error:e.resetIdentityPassword}),p(!0)}},[i,n.hasPassword,n.id,u,x]),k="".concat(n.hasPassword?"Change":"Set"," Password");return(0,l.jsxs)("div",{className:"space-y-4",children:[g&&(0,l.jsx)(H.F,{type:"success",withIcon:!0,iconSize:"sm",className:"mt-4 text-sm",children:"We sent an email with instructions to set your password. Please check your inbox."}),(0,l.jsx)(m.$,{level:E.XF?"text":"outline",className:"hover:bg-slate-4 active:bg-slate-5",onClick:b,disabled:g,isLoading:s,icon:g?(0,l.jsx)(G.S,{}):void 0,children:k}),E.XF?(0,l.jsx)(F.X,{isOpen:r,onClose:f,detent:"content-height",dismissOnTapOutside:!0,children:(0,l.jsx)(J,{onSubmit:v,isSubmitting:t,onCancel:f,errorMessage:y})}):(0,l.jsx)(w.aF,{open:r,setClosed:f,children:(0,l.jsx)(J,{onSubmit:v,isSubmitting:t,onCancel:f,errorMessage:y})})]})}function ea(e){let n=(0,o.useFragment)(t,e.identityFragmentRef),[a]=(0,o.useMutation)(i),u=(0,r.I)(),c=(0,s.aV)(),m=(0,d.useCallback)(e=>{a({variables:{id:n.id,name:e},optimisticResponse:{updateIdentity:{__typename:"MutationUpdateIdentitySuccess",__isError:"MutationUpdateIdentitySuccess",message:"",data:{identity:{id:n.id,nodeId:n.nodeId,name:e}}}},onCompleted:e=>{e.updateIdentity.message&&c({level:"danger",label:"Error",message:e.updateIdentity.message,duration:3e3})}})},[a,n.id,n.nodeId,c]);return(0,l.jsxs)("div",{className:"flex w-full flex-col gap-y-6",children:[!u&&(0,l.jsx)(k,{identityFragmentRef:n}),(0,l.jsx)(h,{children:(0,l.jsx)(y,{value:n.name,onSave:m})}),(0,l.jsx)(B,{identityFragmentRef:n}),(0,l.jsx)(en,{identityFragmentRef:n}),(0,l.jsx)(N,{identityFragmentRef:n})]})}ee.hash="0a0828d8e4d5e4db1403232da4800254"},7750:(e,n,a)=>{a.d(n,{x:()=>u});var l=a(50612),t=a(30900),i=a(67373),s=a(40985),r=a(94344),d=a(18153),o=a(25919);function u(e){let{...n}=e,a=(0,r.useCallback)(e=>{e.preventDefault();let a=new FormData(e.currentTarget);n.onSubmit({email:a.get("email")})},[n]);return(0,l.jsxs)("form",{className:(0,o.QP)("space-y-6",d.XF&&"w-screen p-6 pt-0"),onSubmit:a,children:[(0,l.jsx)("div",{className:"flex-1 text-2xl font-medium text-slate-12",children:"Delete Account"}),(0,l.jsx)(t.F,{type:"warning",withIcon:!0,children:(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("p",{children:["This is an ",(0,l.jsx)("span",{className:"font-semibold",children:"irreversible action"}),". This will permanently delete the account and all the data associated with it."]}),(0,l.jsx)("p",{children:"Type the account's email below to confirm the account deletion."})]})}),(0,l.jsx)(s.R,{className:"w-full",label:"Account email",id:"email",autoComplete:"off",name:"email",type:"email",required:!0}),(0,l.jsxs)("div",{className:"mt-4 flex w-auto flex-row justify-end gap-x-2",children:[(0,l.jsx)(i.$,{level:"outline",onClick:n.onCancel,disabled:n.isLoading,children:"Cancel"}),(0,l.jsx)(i.$,{type:"submit",level:"danger",className:"ml-3",isLoading:n.isLoading,children:"Delete"})]}),n.errorMessage&&(0,l.jsx)("div",{className:"flex items-start rounded-lg border border-danger-6 bg-danger-2 p-4 text-sm text-slate-12",children:n.errorMessage})]})}},94309:(e,n,a)=>{a.d(n,{H:()=>t});let l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},l={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"Error",abstractKey:"__isError"},t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"DeleteIdentityMutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"deleteIdentity",plural:!1,selections:[a,l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DeleteIdentityOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"identity",plural:!1,selections:[t],storageKey:null}],storageKey:null}],type:"MutationDeleteIdentitySuccess",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"DeleteIdentityMutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"deleteIdentity",plural:!1,selections:[a,l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DeleteIdentityOutput",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Identity",kind:"LinkedField",name:"identity",plural:!1,selections:[t,{alias:null,args:null,kind:"ScalarField",name:"nodeId",storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationDeleteIdentitySuccess",abstractKey:null}],storageKey:null}]},params:{cacheID:"f0201453d1b750cf1b20aa5862e84bf3",id:null,metadata:{},name:"DeleteIdentityMutation",operationKind:"mutation",text:"mutation DeleteIdentityMutation(\n  $input: DeleteIdentityInput!\n) {\n  deleteIdentity(input: $input) {\n    __typename\n    ... on Error {\n      __isError: __typename\n      message\n    }\n    ... on MutationDeleteIdentitySuccess {\n      data {\n        identity {\n          id\n          nodeId\n        }\n      }\n    }\n  }\n}\n"}}}();l.hash="ab58009d853a7a65478510317e592957",a(97244);let t=l},61298:(e,n,a)=>{a.d(n,{K:()=>E});var l=a(50612);let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SpeechToTextSettingsMe",selections:[{alias:null,args:null,kind:"ScalarField",name:"isMedicalScribe",storageKey:null},{alias:null,args:null,concreteType:"SubscriptionInfo",kind:"LinkedField",name:"billingInfo",plural:!1,selections:[{alias:null,args:null,concreteType:"CreditsInfo",kind:"LinkedField",name:"creditsInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"creditAllocation",storageKey:null}],storageKey:null}],storageKey:null}],type:"Identity",abstractKey:null};t.hash="43a4b3569d10bacf372e649408e521c4";var i=a(16672),s=a(95158),r=a(65380),d=a(52105),o=a(50561);let u=(0,d.In)("PATCH","/api/identity/:id/settings",o.w.patch.data);var c=a(19191),m=a(57185),g=a(31634),p=a(32519),y=a(77576);a(81778);var h=a(94344),x=a(85680),f=a(67373);let v=h.memo(function(e){return(0,l.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,l.jsx)("path",{d:"M5.99999 4.66667V7.33333C5.243 8.27958 3.94258 9.4064 3.49229 10.6667M5.99999 4.66667H10M5.99999 4.66667H5.33333M10 4.66667V7.33333C10.757 8.27958 12.0574 9.4064 12.5077 10.6667M10 4.66667H10.6667M12.5077 10.6667C12.6085 10.9487 12.6667 11.2374 12.6667 11.5323C12.6667 12.8952 11.5618 14 10.199 14H5.80104C4.43816 14 3.33333 12.8952 3.33333 11.5323C3.33333 11.2374 3.39152 10.9487 3.49229 10.6667M12.5077 10.6667C12.5077 10.6667 10.7834 11.0298 9.66666 11C8.33961 10.9646 7.66038 10.3687 6.33333 10.3333C5.21662 10.3035 3.49229 10.6667 3.49229 10.6667",stroke:"#E93D82",strokeWidth:"1.33333",strokeLinecap:"square"}),(0,l.jsx)("path",{d:"M7.33333 2.66667C7.33333 3.03486 7.03486 3.33333 6.66667 3.33333C6.29848 3.33333 6 3.03486 6 2.66667C6 2.29848 6.29848 2 6.66667 2C7.03486 2 7.33333 2.29848 7.33333 2.66667Z",fill:"#E93D82"}),(0,l.jsx)("path",{d:"M10 1.66667C10 2.21895 9.55228 2.66667 9 2.66667C8.44772 2.66667 8 2.21895 8 1.66667C8 1.11438 8.44772 0.666667 9 0.666667C9.55228 0.666667 10 1.11438 10 1.66667Z",fill:"#E93D82"})]})}),b=h.memo(function(e){return(0,l.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,l.jsx)("path",{d:"M2.78104 5.38008L5.40742 7.35132L6.05931 6.05726L8.65066 5.40537L9.41736 2.33921M14 8C14 11.3137 11.3137 14 8 14C4.68629 14 2 11.3137 2 8C2 4.68629 4.68629 2 8 2C11.3137 2 14 4.68629 14 8ZM9.94785 11.2433L10.5965 9.94596L8.68428 8.66099L7.42395 8.58055L6.7046 9.29731L8.0019 11.2433H9.94785Z",stroke:"#70E1C8",strokeWidth:"1.33333",strokeLinecap:"round"})})}),k=h.memo(function(e){return(0,l.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,l.jsx)("path",{d:"M5.33334 2.66667V13.3333M2.66667 6.66667V9.33334M8.00001 5.33334V10.6667M10.6667 4.00001V12M13.3333 6.66667V9.33334",stroke:"#FFB224",strokeWidth:"1.33333",strokeLinecap:"round"})})});var j=a(76804),w=a(78512),I=a(18983),F=a(89073),S=a(86313),C=a(79124);a(97244);var M=a(25919);function E(e){var n,a,i,s,r;let d=(0,y.U)(),o=(0,c.Mc)(),u=(0,C.useFragment)(t,e.identityFragmentRef);if(!d.data)return null;let m=function(e,n){var a;let l=null===(a=e.settings)||void 0===a?void 0:a.speechToTextModel;if(l)return l;let t=null==n?void 0:n.map(e=>{var n;return null===(n=e.flags)||void 0===n?void 0:n.defaultSpeechToTextModel}).filter(Boolean);return(null==t?void 0:t.length)?t.at(0):Object.keys(p.us).at(0)}(d.data,null!==(i=o.data)&&void 0!==i?i:[]);return(0,l.jsx)(N,{identity:d.data,initialModel:m,isMedicalScribe:null!==(s=u.isMedicalScribe)&&void 0!==s&&s,creditAllocation:null!==(r=null===(a=u.billingInfo)||void 0===a?void 0:null===(n=a.creditsInfo)||void 0===n?void 0:n.creditAllocation)&&void 0!==r?r:0})}let K=(e,n)=>n?Object.entries(Object.entries(e).filter(e=>{let[n,a]=e;return[I.a.MultilingualExtended,I.a.MultilingualAdvanced,I.a.Medical].includes(n)}).map(e=>{let[n,a]=e;return{[n]:a}}).reduce((e,n)=>({...e,...n}),{})).sort((e,n)=>{let[a]=e,[l]=n;return a===I.a.Medical?-1:l===I.a.Medical?1:a===I.a.MultilingualAdvanced?-1:l===I.a.MultilingualAdvanced?1:a===I.a.MultilingualExtended?-1:l===I.a.MultilingualExtended?1:0}).reduce((e,n)=>{let[a,l]=n;return{...e,[a]:l}},{}):e;function N(e){var n;let{identity:a,initialModel:t,isMedicalScribe:d,creditAllocation:o}=e,c=null!==(n=(0,S.usePathname)())&&void 0!==n?n:"",[y,C]=(0,h.useState)(!1),E=d&&o<2e4,N=(0,h.useMemo)(()=>K(p.us,d),[d]),[_,U]=(0,h.useState)(null!=t?t:Object.keys(N)[0]),L=function(e,n){let a=(0,x.aV)();return(0,h.useCallback)(()=>{a({id:"error-".concat(e),level:"danger",message:n})},[n,e,a])}("settings","Something went wrong. Please try again."),P=(0,r.Jo)(),T=(0,F.jE)(),R=(0,h.useCallback)(async e=>{U(e),(await u({params:{id:a.id},body:{speechToTextModel:e}})).error&&L(),T.invalidateQueries({queryKey:P})},[a.id,L,T,P]),D=(0,h.useCallback)(async()=>{C(!0);try{let e={planType:w.OL.ProMonthly,credits:2e4};await (0,m.Wy)({subscription:e,originUrl:c})}finally{C(!1)}},[c]);return 0===Object.keys(N).length?(0,l.jsx)(g.f,{center:!0,className:"h-screen",children:(0,l.jsx)(j.y,{})}):(0,l.jsx)("div",{className:"flex items-end justify-between",children:(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)(i.z6,{value:_,onChange:R,className:"flex flex-col gap-2",children:Object.entries(N).map(e=>{let[n,a]=e,t=E&&(n===I.a.MultilingualAdvanced||n===I.a.MultilingualExtended);return(0,l.jsx)(i.sx,{value:n,disabled:t,children:e=>{let{checked:i}=e;return(0,l.jsxs)("div",{className:(0,M.QP)("cursor-pointer sm:-mx-4 p-2 sm:p-4 transition-colors rounded-md active:bg-slate-3",i?"bg-slate-3":"hover:bg-slate-2 active:bg-slate-3",t&&"opacity-40 cursor-not-allowed"),children:[(0,l.jsxs)("div",{className:"flex items-center justify-between gap-2 text-xs sm:text-sm",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 text-slate-12",children:[(0,l.jsx)("div",{className:"w-5",children:function(e){switch(e){case I.a.MultilingualAdvanced:case I.a.MultilingualExtended:return(0,l.jsx)(b,{});case I.a.Medical:return(0,l.jsx)(v,{});default:return(0,l.jsx)(k,{})}}(n)}),(0,l.jsxs)("div",{className:"font-semibold ",children:[a.description,a.useSystemLanguage&&" (".concat((0,p.vR)(n).language," detected)")]})]}),i&&(0,l.jsx)(s.A,{className:"size-5 text-slate-12"})]}),(0,l.jsxs)("div",{className:"mt-2 text-xxs text-slate-10 sm:text-xs",children:["Supports:"," ",a.languages.map(e=>e.language).join(", "),".",!a.streaming&&(0,l.jsx)("section",{className:"text-xxs",children:"Live transcription not supported"})]})]})}},n)})}),(0,l.jsx)("section",{className:"mt-2 text-xxs text-slate-10 sm:text-xs",children:"Streaming models instantly display spoken words in the input box. Non-streaming processes audio after it's fully recorded."}),E&&(0,l.jsx)(f.$,{disabled:y,fullWidthContent:!0,className:"mt-6 rounded-md",onClick:D,children:"Unlock all with Pro Plan"})]})})}},40985:(e,n,a)=>{a.d(n,{R:()=>r});var l=a(50612),t=a(41285),i=a(94344),s=a(20335);let r=(0,i.memo)((0,i.forwardRef)(function(e,n){let{label:a,id:i,className:r,inputClassName:d,labelClassName:o,...u}=e;return(0,l.jsxs)("div",{className:r,children:[(0,l.jsx)(t.J,{htmlFor:i,className:o,children:a}),(0,l.jsx)(s.pd,{ref:n,id:i,className:d,...u})]})}))},39159:(e,n,a)=>{a.d(n,{x:()=>t});var l=a(50612);let t=a(94344).memo(function(e){return(0,l.jsx)("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,l.jsx)("g",{id:"bill, purchace, invoice",children:(0,l.jsx)("path",{id:"Icon",d:"M5.99998 5.83333H9.99998M5.99998 8.5H7.33331M3.33331 2.5H12.6666V14.5L11.1111 13.1667L9.55554 14.5L7.99998 13.1667L6.44442 14.5L4.88887 13.1667L3.33331 14.5V2.5Z",strokeLinecap:"round",strokeLinejoin:"round",stroke:"currentColor"})})})})},92214:(e,n,a)=>{a.d(n,{d:()=>t});var l=a(50612);let t=(0,a(94344).memo)(function(e){return(0,l.jsx)("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,l.jsx)("path",{fill:"currentColor",strokeWidth:"0",d:"M4.667 7.9a.6.6 0 0 0 0 1.2V7.9Zm6.666 1.2a.6.6 0 0 0 0-1.2v1.2Zm-.666 2.133a.6.6 0 0 0 0 1.2v-1.2Zm0-6.666a.6.6 0 1 0 0 1.2v-1.2Zm-5.334 7.866a.6.6 0 1 0 0-1.2v1.2Zm0-6.666a.6.6 0 1 0 0-1.2v1.2ZM4.667 9.1h6.666V7.9H4.667v1.2Zm9.4-2.6v4h1.2v-4h-1.2Zm-.734 4.733h-2.666v1.2h2.666v-1.2Zm-2.666-5.466h2.666v-1.2h-2.666v1.2ZM.733 6.5v4h1.2v-4h-1.2Zm1.934 5.933h2.666v-1.2H2.667v1.2Zm2.666-7.866H2.667v1.2h2.666v-1.2ZM1.933 6.5c0-.405.329-.733.734-.733v-1.2A1.933 1.933 0 0 0 .733 6.5h1.2Zm12.134 4a.733.733 0 0 1-.734.733v1.2a1.933 1.933 0 0 0 1.934-1.933h-1.2Zm-13.334 0c0 1.068.866 1.933 1.934 1.933v-1.2a.733.733 0 0 1-.734-.733h-1.2Zm14.534-4a1.933 1.933 0 0 0-1.934-1.933v1.2c.405 0 .734.328.734.733h1.2Z"})})})},2302:(e,n,a)=>{a.d(n,{A:()=>t});var l=a(50612);let t=(0,a(94344).memo)(function(e){let{className:n}=e;return(0,l.jsxs)("svg",{className:n,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("path",{d:"M9 4C9 3.44772 8.55228 3 8 3C7.44772 3 7 3.44772 7 4V20C7 20.5523 7.44772 21 8 21C8.55228 21 9 20.5523 9 20V4Z",fill:"currentColor",strokeWidth:"0"}),(0,l.jsx)("path",{d:"M17 6C17 5.44772 16.5523 5 16 5C15.4477 5 15 5.44772 15 6V18C15 18.5523 15.4477 19 16 19C16.5523 19 17 18.5523 17 18V6Z",fill:"currentColor",strokeWidth:"0"}),(0,l.jsx)("path",{d:"M13 8C13 7.44772 12.5523 7 12 7C11.4477 7 11 7.44772 11 8V16C11 16.5523 11.4477 17 12 17C12.5523 17 13 16.5523 13 16V8Z",fill:"currentColor",strokeWidth:"0"}),(0,l.jsx)("path",{d:"M5 10C5 9.44772 4.55228 9 4 9C3.44772 9 3 9.44772 3 10V14C3 14.5523 3.44772 15 4 15C4.55228 15 5 14.5523 5 14V10Z",fill:"currentColor",strokeWidth:"0"}),(0,l.jsx)("path",{d:"M21 10C21 9.44772 20.5523 9 20 9C19.4477 9 19 9.44772 19 10V14C19 14.5523 19.4477 15 20 15C20.5523 15 21 14.5523 21 14V10Z",fill:"currentColor",strokeWidth:"0"})]})})},52710:(e,n,a)=>{a.d(n,{j:()=>l});var l=function(e){return e.Nova2="nova-2-general",e.Nova2Medical="nova-2-medical",e.Base="base",e}({})}}]);